; ADD004 BASIC PIEs ReBuilded CNS (05/02/2015)



;==============================================================================
; {C:\Users\Luis\Desktop\Kairi\states\kairi.cns}
;==============================================================================


;KAIRI FROM STREET FIGHTER EX + EDITS BY Mr.KARATE AND GUSTAVO C. MORAES
;CODES - Mr.KARATE
;SPRITES - GUSTAVO C. MORAES

;==============================================================================================
;=======================================<SYSTEM STATES>========================================
;==============================================================================================

;=============================<CONSTANTS>=======================================
[Data]
life = 1000
attack = 100
defence = 90
power = 3000
fall.defence_up = 50
liedown.time = 60
airjuggle = 15
sparkno = 2
guard.sparkno = 40
KO.echo = 0
volume = 200
IntPersistIndex = 60
FloatPersistIndex = 40

[Size]
xscale = 1
yscale = 1
ground.back = 15
ground.front = 16
air.back = 12
air.front = 12
height = 60
attack.dist = 160
proj.attack.dist = 90
proj.doscale = 0
head.pos = -5, -90
mid.pos = -5, -60
shadowoffset = 0
draw.offset = 0,0

[Velocity]
walk.fwd = 3.4
walk.back = -3.2
run.fwd = 5.5, 0
run.back = -4.5,-3.8
jump.neu = 0,-8.4
jump.back = -3.55
jump.fwd = 3.5
runjump.back = -2.55,-8.1
runjump.fwd = 4.3,-8.1
airjump.neu = 0,-8.1
airjump.back = -2.55
airjump.fwd = 2.5

[Movement]
airjump.num=0
airjump.height=0
yaccel=.5
stand.friction=.85
crouch.friction=.85

;-------------- Generated by Fighter Factory -------------

;--------------------- Variable List ----------------------

; Var(0) - StateDef 765, 766, 4000, 7950, 7951, 7952, 7953, 7954, 7955, 7956, 7957, 7958, 7959, 7960, 7961
; Var(1) - StateDef 1007, 2003, 1005, 1010, 1012, 1014, 1016, 1018
; Var(2) - StateDef 232, 3404
; Var(5) - StateDef -3
; Var(6) - StateDef 3401, -3
; Var(7) - StateDef 4000, -2
; Var(8) - StateDef -2
; Var(9) - StateDef 40, -2
; Var(10) - StateDef 350, 351, 352, 3600
; Var(11) - StateDef 190
; Var(13) - StateDef 1401, 1402, 1403, 1406, 1407, 1408, 1411, 1412, 1413, 1418, 1419
; Var(15) - StateDef 1421
; Var(16) - StateDef 811
; Var(19) - StateDef 801, 7200
; Var(20) - StateDef 360, 350, 351, 352, 1421, -2
; Var(24) - StateDef -2
; Var(25) - StateDef -2
; Var(26) - StateDef 760, 761, -3
; Var(30) - StateDef -2
; Var(33) - StateDef 303, 304, 353, 200, 205, 210, 211, 215, 216, 220, 221, 225, 226, 231, 400, 410, 415, 420, 425, 430, 600, 605, 610, 615, 620, 625, 1050, 1060, 1062, 1070, 1200, 1201, 1205, 1206, 1210, 1211, 1401, 1402, 1403, 1404, 1406, 1407, 1408, 1409, 1411, 1412, 1413, 1414, 1600, 1605, 1610, 1071, 1212, 1213, 1417, 1418, 1419, 1420, 1421, 1611, 3300, 3401, 3403, 3504, 7200
; Var(34) - StateDef 303, 304, 353, 200, 205, 210, 211, 215, 216, 220, 221, 225, 226, 231, 400, 410, 415, 420, 425, 430, 600, 605, 610, 615, 620, 625, 1050, 1060, 1062, 1070, 1200, 1201, 1205, 1206, 1210, 1211, 1401, 1402, 1403, 1404, 1406, 1407, 1408, 1409, 1411, 1412, 1413, 1414, 1600, 1605, 1610, 1071, 1212, 1213, 1417, 1418, 1419, 1420, 1421, 1611, 3300, 3401, 3403, 3501, 3504
; Var(35) - StateDef 303, 304, 353, 200, 205, 210, 211, 215, 216, 220, 221, 225, 226, 231, 400, 410, 415, 420, 425, 430, 600, 605, 610, 615, 620, 625, 1050, 1060, 1062, 1070, 1200, 1201, 1205, 1206, 1210, 1211, 1401, 1402, 1403, 1404, 1406, 1407, 1408, 1409, 1411, 1412, 1413, 1414, 1600, 1605, 1610, 1071, 1212, 1213, 1417, 1418, 1419, 1420, 1421, 1611, 3300, 3401, 3403, 3501, 3504, 7200
; Var(37) - StateDef -2
; Var(38) - StateDef -2
; Var(41) - StateDef 1500, 7201
; Var(42) - StateDef 1611
; Var(45) - StateDef -3
; Var(59) - StateDef 3600

;--------------------- Float Variable List ----------------------

; fVar(0) - StateDef 8003, 8004, 8005, 8006, 8007, 8008
; fVar(1) - StateDef 8003, 8004, 8005, 8006, 8007, 8008
; fVar(5) - StateDef 360, 3300, 3600, 7200
; fVar(10) - StateDef -2
; fVar(12) - StateDef -2



;==============================================================================
; {C:\Users\Luis\Desktop\Kairi\states\System.st}
;==============================================================================


;KAIRI FROM STREET FIGHTER EX + EDITS BY Mr.KARATE AND GUSTAVO C. MORAES
;CODES - Mr.KARATE
;SPRITES - GUSTAVO C. MORAES

;==============================================================================================
;=======================================<SYSTEM STATES>========================================
;==============================================================================================

;====================<RUN/DASH>====================
; Dash Forward
[Statedef 100]
type = S
physics = S
anim = 102
sprpriority = 1
ctrl = 0

[State 100, dust]
type = Explod
trigger1 = Time = 1
Anim = 8103
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = 3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 100, explod]
type = Explod
triggerall = var(59) = 0
trigger1 = (timemod = 3,2)
trigger1 =  power >= 1000
trigger1 =  power <3000
anim = 71001
postype = p1
pos = 19,-72
supermove = 9999
random = 10,40
scale = .2,.2
sprpriority = 5
ownpal = 1
ignorehitpause=1
ID = 1113

[State 100, explod]
type = Explod
triggerall = var(59) = 0
trigger1 = (timemod = 4,3)
trigger1 =  power >= 1000
trigger1 =  power <3000
anim = 71001
postype = p1
pos = 19,-72
supermove = 9999
random = 10,40
scale = .2,.2
sprpriority = 5
ownpal = 1
ignorehitpause=1
ID = 1113

[State 100, explod]
type = Explod
triggerall = var(59) = 0
trigger1 = (timemod = 5,3)
trigger1 =  power >= 3000
anim = 71001
postype = p1
pos = -19,-72
supermove = 9999
random = 10,40
scale = .3,.3
sprpriority = 5
ownpal = 1
ignorehitpause=1
ID = 1113

[State 100, explod]
type = Explod
triggerall = var(59) = 0
trigger1 = (timemod = 3,2)
trigger1 =  power >= 3000
anim = 71001
postype = p1
pos = 19,-72
supermove = 9999
random = 10,40
scale = .3,.3
sprpriority = 5
ownpal = 1
ignorehitpause=1
ID = 1113

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 100, 2]
type = Playsnd
trigger1 = time = 0
value = 2,6

[State 100, 3]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 4]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, ChangeState]
type = ChangeState
trigger1 = Statetype = S && command = "holdup" || command = "up"
value = 40

[State 100, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = ifelse(command != "holdfwd", 102, 101)

[State 100, ChangeState]
type = ChangeState
triggerall = var(58)>=1
trigger1 = animtime = 0
value = ifelse(p2dist x>=60, 101, 102)

;-------------------------------------------------------------------------------
; Run
[Statedef 101]
type = S
physics = S
anim = 100
sprpriority = 1
ctrl = 0

[State 101, explod]
type = Explod
triggerall = var(59) = 0
trigger1 = (timemod = 3,2)
trigger1 =  power >= 1000
trigger1 =  power <3000
anim = 71001
postype = p1
pos = 19,-72
supermove = 9999
random = 10,40
scale = .2,.2
sprpriority = 5
ownpal = 1
ignorehitpause=1
ID = 1113

[State 101, explod]
type = Explod
triggerall = var(59) = 0
trigger1 = (timemod = 4,3)
trigger1 =  power >= 1000
trigger1 =  power <3000
anim = 71001
postype = p1
pos = 19,-72
supermove = 9999
random = 10,40
scale = .2,.2
sprpriority = 5
ownpal = 1
ignorehitpause=1
ID = 1113

[State 101, explod]
type = Explod
triggerall = var(59) = 0
trigger1 = (timemod = 5,3)
trigger1 =  power >= 3000
anim = 71001
postype = p1
pos = -19,-72
supermove = 9999
random = 10,40
scale = .3,.3
sprpriority = 5
ownpal = 1
ignorehitpause=1
ID = 1113

[State 101, explod]
type = Explod
triggerall = var(59) = 0
trigger1 = (timemod = 3,2)
trigger1 =  power >= 3000
anim = 71001
postype = p1
pos = 19,-72
supermove = 9999
random = 10,40
scale = .3,.3
sprpriority = 5
ownpal = 1
ignorehitpause=1
ID = 1113

[State 101,as]
type=assertspecial
trigger1= 1
flag=nowalk
flag2=noautoturn

[State 101, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 101 , 4]
type = PlaySnd
trigger1 = animelem = 3 || animelem = 6
value = 2, 5

[State 101, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4321

[State 101, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4322

[State 101, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43210

[State 101, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43220

[State 101, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 432101

[State 101, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 432202

[State 101, 4]
type = ChangeState
trigger1 = command != "holdfwd"
value = 102

[State 101, ChangeState]
type = ChangeState
trigger1 = Statetype = S && command = "holdup" || command = "up"
value = 40

;---------------------------------------------------------------------------
; Stop Run
[Statedef 102]
type = S
physics = S
ctrl = 0
anim = 101

[State 102, changeanim]
type= changeanim
triggerall = prevstateno = 101
trigger1= time = 0
value = 103

[State 102,Stop Dust]
type=explod
trigger1 = time=0 | time=3 || time=6
anim = 7416
pos = 15,0
postype = P1
scale = .3,.3
velocity = 2,-0.5
sprpriority = 5
ownpal = 1
supermovetime = 999

[State 100, Snd]
type=playsnd
trigger1= 1
value=0,101
persistent=0

[State 6002, 1]
type = VelAdd
trigger1 = 1
x = -.5 ; -1

[State 6002, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Dash Back
[Statedef 105]
type = A   
physics = N   
anim = 105    
ctrl = 0  
velset = 0,0
sprpriority = 1

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 105, 2]
type = PlaySnd
trigger1 = Time = 0
value = 2,6

[State 105, 2]
type = PlaySnd
trigger1 = Time = 1
value = 2000,12

[State 105, 2]
type = Gravity
trigger1 = time >= 2

[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106

[State 105, Dust]
type=helper
trigger1= animelem = 1
helpertype=normal
stateno=7100
ID=7100
pos=0,0
name="Dust"
postype=p1
ownpal=1

[State 6002, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 106
ctrl = 0

;-------------------------------------------------------------------------------
;Back dash landing
[Statedef 106]
type = S
physics = S
ctrl = 1
anim = 47
ctrl = 0

[State 106, 1]
type = VelSet
trigger1 = Time = 0
Y = 0

[State 100 , 4]
type = PlaySnd
trigger1 = time = 1
value = 2, 6

[State 106, 1]
type = PosSet
trigger1 = Time = 0
Y = 0

[State 106, Dust]
type=explod
trigger1= !time
anim=7102
ID=7102
sprpriority=-2
postype=p1
scale=.5,.5
ownpal=1
pausemovetime=-1
supermovetime=-1

[State 101, 5] 
type = ChangeState
trigger1 = animTime = 0
value = 0
ctrl = 1

;====================<WIN POSES/INTROS>====================
; Lose by Time Over
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 106, 1]
type = PlaySnd
trigger1 = time = 0
value = 11,1

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;-------------------------------------------------------------------------------
; Win state decider
[Statedef 180]
type = S

[State 180,  winKR]
type=changestate
trigger1=prevstateno=183
value=prevstateno

[State 180, 1]
type=changestate
trigger1=!time
value=ifelse(random<181,182,ifelse(random<183,181,184))

;---------------------------------------------------------------------------
; Win pose 1 - atacks
[Statedef 181]
type = S
ctrl = 0
anim = 180
velset = 0,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 182, 1]
type = PlaySnd
trigger1 = animelem = 4
trigger2 = animelem = 10
trigger3 = animelem = 16
value = 2,9

[State 182, 1]
type = PlaySnd
trigger1 = animelem = 25
value = 2000,26

;---------------------------------------------------------------------------
; Win pose 2 -
[Statedef 182]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 182, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 1,16

;-------------------------------------------------------------------------------
; Win pose 3 - Win by Kyouja Renbu
[Statedef 183]
type=S
sprpriority=-4
anim=184

[State 183, kanjibg]
type=helper
trigger1=!time&&prevstateno=7201
helpertype=normal
stateno=7610
ID=7610
postype=left
ownpal=1
persistent=0

[State 183, snd]
type=playsnd
trigger1=time=2&&prevstateno=7201
value=11,0
channel=1

[State 183, snd]
type=playsnd
trigger1=time=2&&prevstateno=7201
value=2000,8
channel=0

[State 183, win]
type=changestate
trigger1=prevstateno=7201&&time>50
value=183
ctrl=1

[State 183, win]
type=changestate
trigger1=time>50
value=188
ctrl=1
;------------------------------------------------------------------------
[Statedef 188]
type = S
ctrl = 0
anim = 188
velset = 0,0
sprpriority= 4

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;--------------------------------------------------------------------------
; Win pose 4 -
[Statedef 184]
type = S
ctrl = 0
anim = 742
velset = 0,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 182, golpe]
type = PlaySnd
trigger1 = animelem = 4
value = 2,9

[State 182, voz1]
type = PlaySnd
trigger1 = animelem = 3
value = 11,0

[State 182, voz2]
type = PlaySnd
trigger1 = animelem = 17
value = 1,5

[State 1800, Explod]
type = Explod
trigger1 = animelem = 7
anim = 183
pos = 90,0
postype = p1
sprpriority = 2
shadow = -1

;---------------------------------------------------------------------------
; Introduction
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 180, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(190)
value = 190

[State 180, VarRandom]
type = VarRandom
trigger1 = Time = 0
v = 11
range = 0,20

[State 180, Intro 1]
type = ChangeState
trigger1 = Time = 1
trigger1 = var(11) = [0,10]
value = 192

[State 180, Intro 2]
type = ChangeState
trigger1 = Time = 1
trigger1 = var(11) = [11,20]
value = 191

;vs Gouki
[State 191, 1]
type = ChangeState
triggerall = Time = 0
trigger1 = P2Name = "Shin Gouki" && enemy,authorname = "Phantom.of.the.Server"
trigger2 = P2Name = "Gouki" && enemy,authorname = "GM"
trigger3 = P2Name = "cvsgouki" && enemy,authorname = "Warusaki3"
trigger4 = P2Name = "Skullomania" && enemy,authorname = "SeanAltly&DivineWolf"
trigger5 = P2Name = "Blair Dame" && enemy,authorname = "Dampir"
value = 199

;-------------------------------------------------------------------------------
;Intro 1 - Trans
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0

[State 192, 0]
type = SprPriority
trigger1 = Time >= 0
value = 4

[State 191, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = Intro

[State 1800, Explod]
type = Explod
trigger1 = animelem = 5
anim = 194
pos = 0,0
postype = p1
sprpriority = 5
removetime = 80

[State 1800, Explod]
type = Explod
trigger1 = animelem = 5
persistent = 0
anim = 173
pos = 0,0
postype = p1
sprpriority = 1
removetime = 15

[State 192, efect]
type = PlaySnd
trigger1 = animelem = 5
value = 2001,3

[State 192, efect]
type = PlaySnd
trigger1 = animelem = 6
value = 5,2

[State 191, voice]
type = PlaySnd
trigger1 = Animelem = 5
value = 171,6

[State 191, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;-------------------------------------------------------------------------------
;Intro 2 - jump
[Statedef 192]
type = S
ctrl = 0
anim = 443
velset = 0

[State 6101, 4]
type = AfterImageTime
trigger1 = Time >= 2
time = 2

[State 220, Position]
type = PosAdd
trigger1 = time = 0
x = 227.4
y = -49

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 2
x = -6.6
y = -7.2

[State 1100, Velocity]
type = VelAdd
trigger1 = AnimElemTime(2) >= 0
y = .57

[State 1201, screenbound]
type = screenbound
trigger1 = 2
value = 0

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 50, Snd]
type=playsnd
trigger1= !time
value=3,6

[State 50, Snd]
type=playsnd
trigger1= animelem = 2
value=1,0

[State 6901, End]
type=changestate
trigger1= !animtime
value=5279
;-------------------------------------------------------------------------------
[Statedef 5279]
type = S
physics = S
ctrl = 0
anim = 47

[State 52, Snd]
type=playsnd
trigger1= !time
value=3,4

[State 52, Dust]
type=explod
trigger1= !time
anim=7100
ID=7100
sprpriority=-2
postype=p1
scale=.5,.5
ownpal=1
pausemovetime=-1
supermovetime=-1

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 0

;-------------------------------------------------------------------------------
;Intro VS Gouki
[Statedef 199]
type = S
ctrl = 0
anim = 44467
velset = 0
sprpriority = 0

[State 191, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = Intro

[State 1300, 1]
type = PlaySnd
trigger1 = animelem =6
value = 2000,27

[State 191, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

[State 191, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;====================<TAUNT>====================
[Statedef 195]
type = S
ctrl = 0
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 195, 1]
type = ChangeAnim
triggerall = power < 3000
trigger1 = Anim != 195 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 195
value = 195

[State 195, 1]
type = ChangeAnim
triggerall = power >=3000
trigger1 = Anim != ifelse(var(59),195,196) && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = ifelse(var(59),195,196)

[State 195, 1]
type = CtrlSet
trigger1 = Time = 40
value = 1

[State 182, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 1,8

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;====================<ROLL-DODGE>====================
;Roll forward
[Statedef 300]
type = S
physics = N
movetype= I
anim = 310
ctrl = 0
velset = 0,0
sprpriority = 0

[State 300, SprPriority]
type = SprPriority
trigger1 = 1
value = 0

[State 300, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S171,7
volume = 255
channel = -1

[State 300, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S3,5

[State 300, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 300, Velocity]
type = VelSet
trigger1 = AnimElem = 2
x = 6.2

[State 300, Velocity]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 300, HitBy]
type = HitBy
trigger1 = time <= 20
value = SCA;, NT,ST,HT

[State 300, Push]
type = PlayerPush
trigger1 = AnimElemTime(2) > 0
value = 0

[State 300, AfterImage]
type = Afterimage
trigger1 = AnimElem = 3
time = 15
timegap=1
framegap=4
length=9
palbright=0,0,0
paladd=0,0,0
palmul=.9,.9,.9
palcontrast=120,120,120
palpostbright=0,0,0
trans=add1

[State 300, StateChange]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Roll back
[Statedef 301]
type = S
physics = N
movetype= I
anim = 311
ctrl = 0
velset = 0,0
sprpriority = 0

[State 301, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S3,5

[State 301, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S171,7
volume = 255
channel = 2

[State 301, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 301, Velocity]
type = VelSet
trigger1 = AnimElem = 2
x = -6.2

[State 301, Velocity]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 301, HitBy]
type = HitBy
trigger1 = time <= 20
value = SCA;, NT,ST,HT

[State 301, Push]
type = PlayerPush
trigger1 = AnimElemTime(2) > 0
value = 0

[State 301, AfterImage]
type = Afterimage
trigger1 = AnimElem = 3
time = 15
timegap=1
framegap=4
length=9
palbright=0,0,0
paladd=0,0,0
palmul=.9,.9,.9
palcontrast=120,120,120
palpostbright=0,0,0
trans=add1

[State 301, StateChange]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;dodge stand
[Statedef 302]
type = S
physics = S
movetype = I
anim = 1300
ctrl = 0
velset = 0,0
sprpriority = -1
poweradd =0

[State 302, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 302, Width]
type = Width
trigger1 = 1
edge = 1,0

[State 302, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S1,0
volume = 255
channel = -1

[State 302, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 302, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 302, HitBy]
type = HitBy
trigger1 = 1
value = SCA, NT,ST,HT

[State 302, AfterImage]
type = Afterimage
trigger1 = AnimElem = 1
time = 26
timegap=1
framegap=4
length=9
palbright=0,0,0
paladd=0,0,0
palmul=.9,.9,.9
palcontrast=120,120,120
palpostbright=0,0,0
trans=add1

[State 302, attack]
type=changestate
trigger1= time=[15,25]
trigger1= command="x" || command="y" || command="z" || command="a" || command="b" || command="c"
value=ifelse((command="x" || command="y" || command="z"),304,303)

[State 302, StateChange]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; strong kick - Dodge counter atack
[Statedef 303]
type = S
movetype= A
physics = S
juggle = 3
poweradd= 45
ctrl = 0
velset = 0
anim = 242
sprpriority = 2

[State 303, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7,5

[State 303, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1,15

[State 303, 2]
type = HitDef
trigger1 = animelem = 5
attr = S, NA
animtype = Medium
damage = 60,0
guardflag = MA
pausetime = IfElse(var(21),6,12),ifElse(var(21),6,12)
guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8012)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 80), var(36) := -35
hitsound = s2,13
guardsound = s2,4
ground.type = high
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -3, -2
air.velocity = -2.2,-3.2
fall = 1
envshake.time = 12
envshake.ampl = 3

[State 303, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; Strong punch - Dodge counter atack
[Statedef 304]
type = S
movetype= A
physics = S
juggle = 2
poweradd = 40
ctrl = 0
velset = 0,0
anim = 243
sprpriority = -1

[State 304, voice]
type = PlaySnd
trigger1 = Time = 0
value = 7,1

[State 304, 1]
type = PlaySnd
trigger1 = Time = 0
value = 4,1

[State 304, PlaySnd]
type = PlaySnd
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = animelem = 1
value = S171,8
volume = 255
channel = -1

[State 304, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype = Medium
damage = 43, ifelse(var(59)<=1 && power>1000,10,0)
guardflag = MA
pausetime = IfElse(var(21),6,10),ifElse(var(21),6,10)
guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8012)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 70), var(36) := -70
hitsound = s2,1
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -5.5
air.velocity = -2.5,-4
palfx.time = ifelse(var(59)<=1 && power>1000,20,0)
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128

[State 304, flames]
type = helper
triggerall = movehit && numtarget && numhelper(7180) < 1
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = !(target, time) && (target, movetype = H)
helpertype = normal
stateno = 7180
ID = 7180
name = "Flames"
postype = p2
ownpal = 1
facing = -1
size.ground.front = 0
size.ground.back = 0
ignorehitpause = 1
persistent = 0

[State 304 ]
type = explod
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = AnimElem = 2
persistent = 1
ignorehitpause = 0
anim = 60050
scale = .4 , .4
pos = 20,-8
postype = p1
removetime = 12
removeongethit = 1
sprpriority = 2

[State 210, Hadouken]
type=helper
triggerall = var(59) = 0
triggerall = power >= 3000
trigger1= anim = 243
trigger1 = animelem = 2
helpertype=normal
stateno=2003
ID=2004
name="fireball destroyer"
postype=p1
pos=-15,10
ownpal=1

[State 304,re ]
type = RemoveExplod
trigger1 = anim != 243
ID = 243

[State 304, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;====================<EXCEL>====================
;Excel - Original combo
[Statedef 360]
type=U
physics=U
movetype=A
anim=760+(statetype=A)
ctrl=(statetype=A)
velset=ifelse((statetype=S),0,vel x),ifelse((statetype=S),0,vel y)
poweradd=-1000

[State 760, Snd]
type=playsnd
trigger1= !time
value=4,12
channel=0
volume=200

[State 760, Snd]
type=playsnd
trigger1= !time
value=2000,19

[State 760, Super Pause FX]
type=helper
trigger1= !time
helpertype=normal
stateno=7260
ID=7260
postype=p1
pos= 19,-87-(anim=761)*10
ownpal=1
size.xscale=1
size.yscale=1
persistent=0
supermovetime=9999

[State 760, superchargepause]
type=superpause
trigger1= !time
time=30
anim=-1
sound=s7,2
darken=0
movetime=30*(anim=760)

[State Corner Push]
type=varset
trigger1= !time
fvar(5)= 0

[State 760, var]
type=varset
trigger1= anim=760
trigger2= anim=761 && !time
var(20)=180

[State 760, nhb]
type=nothitby
trigger1= anim=760
trigger2= anim=761 && time<=1
time=8
value=SCA

[State 760, image]
type=afterimage
trigger1= anim=760 && time=30
trigger2= anim=761 && time=1
time=2
timegap=1
framegap=4
length=13
paladd=0,0,0
palmul=.75,.75,.75
palcontrast=64,128,192
palpostbright=0,0,0
trans=add1

[State 760, End]
type=changeanim
trigger1= anim=761 && !animtime
value=41+(vel x>0)+(vel x<0)*2
elem=7-(!vel x)*4
persistent=0

[State 760, Type]
type=statetypeset
trigger1= anim=[41,43]
statetype=A
physics=A

[State 760, End]
type=changestate
trigger1= anim=760 && !animtime
value=0
ctrl=1

;====================<POWER CHARGE>====================
[Statedef 340]
type=S
physics=S
movetype=I
anim=740
ctrl=0
velset=0,0

[State 340, ctrlset]
type = ctrlset
triggerall = !ctrl
trigger1 = anim = 741
value = 1

[State 340, power]
type=poweradd
triggerall= anim=740 && power<powermax
trigger1= var(59)<=0 && (command="holdb" && command="holdy")
trigger2= var(59)>=1
value=2+(time/10)

[State 340, Snd]
type=playsnd
trigger1= anim=740 && time=8
trigger2 = animelem = 4
value=1,12
channel=1

[State 340, shake]
type=envshake
trigger1= anim=740 && !(time%4)
time=4
freq=120
ampl=2

[State 340, flash]
type=palfx
trigger1= 1
time=1
add = 0, 15 + ceil(sin(time / 7.0 * pi) * 15), 75 + ceil(sin(time / 7.0 * pi) * 75)

[State 340, FX]
type=helper
trigger1= anim=740 && animelemtime(2)>=0
trigger1= !numhelper(72400)
helpertype=player
stateno=72400
ID=72400
name="Power Charge"
postype=p1
pausemovetime=65535
supermovetime=65535
pos=10,0
size.xscale = 0.5
size.yscale = 0.5
ownpal=1

[State 730, Particles]
type = Helper
trigger1 = !NumHelper(8331)
helperType = Normal
stateNo = 8331
ID = 8331
name = "Particles"
postype = P1
pauseMoveTime = 65535
superMoveTime = 65535
ownPal = 1

[State 340, Anim]
type=changeanim
triggerall= anim!=741
trigger1= var(59)<=0 && (command!="holdb" || command!="holdy")
trigger2= power>=const(data.power) || power>=powermax || roundstate!=2
trigger3= var(59)>=1 && (inguarddist || p2bodydist x<160)
value=741

[State 340, ctrl]
type=ctrlset
trigger1=anim=741
value=1

[State 340, stopsnd]
type=stopsnd
trigger1= anim=741
channel=1
persistent=1

[State 340, Snd]
type=playsnd
trigger1= anim=741 && power>=powermax
value= s2000,18

[State 340, End]
type=changestate
trigger1= anim=741 && !animtime
value=0
ctrl=1

[State 340, 2]
type = ChangeState
trigger1 = Power >= 3000
value = 341
ctrl=0

;-------------------------------------------------------------------------------
[Statedef 341]
type = S
movetype = I
physics = S
anim = 743
ctrl= 0

[State 341, snd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S2000,20

[State 341, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 7720
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
scale = .7,.7
sprpriority = 7
ownpal = 1

[State 341, EnvShake]
type = EnvShake
trigger1 = AnimElem = 4
time = 10
freq = 90
ampl = -4
phase = 90

[State 341, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;====================<ZERO COUNTER>====================
[Statedef 350]
type=S
physics=S
movetype=I
anim=750
ctrl=0
velset=0,0
poweradd=-1000
sprpriority=2
facep2=1

[State 350, strengthvar]
type=varset
trigger1= !time && var(56)<=0
var(10)=ifelse((command="bdx" || command="bdy" || command="bdz"),1,2)
ignorehitpause=1

[State 350, strengthvarAI]
type=varset
trigger1= !time && var(56)>=1
var(10)=ifelse((p2statetype=A),1,ifelse((p2statetype=C),2,ifelse(random<500,1,2)))
ignorehitpause=1

[State 350, Snd]
type=playsnd
trigger1= !time
value=2000,19
channel=0

[State 350, ECreset]
type=palfx
trigger1= !time
trigger1= var(20):=-1
time=1

[State 350, Super Pause FX]
type=helper
trigger1= !time
helpertype=normal
stateno=7250
ID=7250
postype=p1
pos=23,-74
ownpal=1
persistent=0
supermovetime=999

[State 350, Super Pause]
type=superpause
trigger1= !time
time=20
movetime=20
anim=-1
sound=s2000,20
p2defmul=1
darken=0

[State 400,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 350, End]
type=changestate
trigger1= time>=20
value=ifelse(var(10)=1,1610,353)

;---------------------------------------------------------------------------
;Zero counter - kof style scape
[Statedef 351]
type=S
physics=S
movetype=I
anim=750
ctrl=0
velset=0,0
poweradd=-1000
sprpriority=2
facep2=1

[State 351, strengthvar]
type=varset
trigger1= !time && var(56)<=0
var(10)=ifelse((command = "x" && command = "a" && command = "holdfwd"|| command = "x" && command = "a" && command = "holdback"),1,2)
ignorehitpause=1

[State 351, strengthvarAI]
type=varset
trigger1= !time && var(56)>=1
var(10)=ifelse((p2statetype=A),1,ifelse((p2statetype=C),2,ifelse(random<500,1,2)))
ignorehitpause=1

[State 351, Snd]
type=playsnd
trigger1= !time
value=2000,12
channel=0

[State 351, ECreset]
type=palfx
trigger1= !time
trigger1= var(20):=-1
time=1

[State 351, Super Pause FX]
type=helper
trigger1= !time
helpertype=normal
stateno=7250
ID=7250
postype=p1
pos=23,-74
ownpal=1
persistent=0
supermovetime=999

[State 351, Super Pause]
type=superpause
trigger1= !time
time=20
movetime=20
anim=-1
sound=s2000,20
p2defmul=1
darken=0

[State 400,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 351, End]
type=changestate
trigger1= time>=20
value=ifelse(var(10)=1,300,300)

;-------------------------------------------------------------------------------
[Statedef 352]
type=S
physics=S
movetype=I
anim=750
ctrl=0
velset=0,0
poweradd=-1000
sprpriority=2
facep2=1

[State 352, strengthvar]
type=varset
trigger1= !time && var(56)<=0
var(10)=ifelse(( command = "x" && command = "a" && command = "holdback"),1,2)
ignorehitpause=1

[State 351, strengthvarAI]
type=varset
trigger1= !time && var(56)>=1
var(10)=ifelse((p2statetype=A),1,ifelse((p2statetype=C),2,ifelse(random<500,1,2)))
ignorehitpause=1

[State 352, Snd]
type=playsnd
trigger1= !time
value=2000,12
channel=0

[State 352, ECreset]
type=palfx
trigger1= !time
trigger1= var(20):=-1
time=1

[State 352, Super Pause FX]
type=helper
trigger1= !time
helpertype=normal
stateno=7250
ID=7250
postype=p1
pos=23,-74
ownpal=1
persistent=0
supermovetime=999

[State 352, Super Pause]
type=superpause
trigger1= !time
time=20
movetime=20
anim=-1
sound=s2000,20
p2defmul=1
darken=0

[State 400,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 352, End]
type=changestate
trigger1= time>=20
value=ifelse(var(10)=1,301,301)

;-------------------------------------------------------------------------------
;Roundhouse strong kick
[Statedef 353]
type = S
movetype= A
physics = S
juggle = 3
poweradd=20*!var(20)
ctrl = 0
velset = 0
anim = 245
sprpriority = 2

[State 353, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7,5

[State 353, 1]
type = PlaySnd
trigger1 = Time = 0 && random<350
value=2000,ifelse(random<500,17,18)

[State 353, 1]
type = HitDef
trigger1 = animelem = 6
attr = S, Na
damage = 60,0
animtype = daiup
guardflag = ma
hitflag = Ma
priority = 3, Hit
pausetime = 18,18
sparkno = -1 + 0 * (var(33) := 8012)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 100), var(36) := -75
hitsound = s2,13
guardsound = s2,4
ground.type = low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -4,-5
air.velocity = -2,-3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall=1
air.fall=1
envshake.ampl = 4
envshake.freq = 120
envshake.time = 5
fall.recover = 0
getpower = 20,20
givepower =25,25
envshake.time = 10
envshake.ampl = 3
p2stateno = 354

[State 353,explod]
type = Explod
trigger1 = P2StateNo = 354
trigger1 = P2MoveType = H
trigger1 = MoveHit = 1
persistent = 0
anim = 8420
id = 8420
pos =  10,-55
postype = P2
sprpriority = 1
scale = .5,.5
ignorehitpause = 1
bindtime = -1
ownpal = 1

[State 353,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State 353, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State 353, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State 353, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State 353, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 353, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Zero Counter - Roundhouse strong kick - P2 Get Hit State
;---------------------------------------------------------------------------
[Statedef 354]
type = A
movetype= H
physics = N
ctrl = 0

[State 354, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 354

[State 1502, 2]
type = PosSet
trigger1 = Time = 0
y = -30

[State 1502, 3]
type = VelSet
trigger1 = AnimElem = 1
x = -4
y = -7

[State 1502, 4]
type = VelAdd
trigger1 = 1
y = .55

[State 354, 5]
type = SelfState
trigger1 = Pos Y >= 0
value = 5100

;====================<PARRY>====================
;Standing Parry
[StateDef 760]
type = S
physics = S
moveType = I
anim = 760
velSet = 0,0
ctrl = 0
sprPriority = 2
powerAdd = 78 * !var(20)
faceP2 = 1

[State 760, HitBy]
type = HitBy
trigger1 = 1
value = SCA,AT
time = 1

[State 760, Pause]
type = Pause
trigger1 = !Time
time = 15
moveTime = 15
endCmdBufTime = 15
pauseBg = 0

[State 760, Stop]
type = PosFreeze
trigger1 = 1
value = 1

[State 760, No Walking]
type = VarSet
trigger1 = 1
var(26) = 7

[State 760, Voice]
type = PlaySnd
trigger1= !Time
value = 0,0
channel = 0

[State 310, blueflash]
type=palfx
trigger1= !time
add=0,50,255
sinadd=0,-50,-255,60
time=15

[State 310, redflash]
type=palfx
trigger1=time<15&&var(21)=2
mul=256,time*17,time*17
time=1

[State 310, Snd]
type=playsnd
trigger1= !time
value= 1, 0
channel=0

[State 310, Snd]
type=playsnd
trigger1= !time
value=2000,21

[State 310, Spark]
type=explod
trigger1= animelem=2
anim=7200
ID=7200
sprpriority=5
postype=p1
pos=36,-65
pausemovetime=60
ownpal=1
scale=.5,.5

[State 760, EnvShake]
type = EnvShake
trigger1 = !Time
time = 0
ampl = 0

[State 760, End]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
;Crouching Parry
[StateDef 761]
type = C
physics = C
moveType = I
anim = 761
velSet = 0,0
ctrl = 0
sprPriority = 2
powerAdd = 78 * !var(20)
faceP2 = 1

[State 761, HitBy]
type = HitBy
trigger1 = 1
value = SCA,AT
time = 1

[State 761, Pause]
type = Pause
trigger1 = !Time
time = 15
moveTime = 15
endCmdBufTime = 15
pauseBg = 0

[State 761, PosFreeze]
type = PosFreeze
trigger1 = 1
value = 1

[State 761, No Walk]
type = VarSet
trigger1 = 1
var(26) = 7

[State 310, blueflash]
type=palfx
trigger1= !time
add=0,50,255
sinadd=0,-50,-255,60
time=15

[State 310, redflash]
type=palfx
trigger1=time<15&&var(21)=2
mul=256,time*17,time*17
time=1

[State 310, Snd]
type=playsnd
trigger1= !time
value= 1, 0
channel=0

[State 310, Snd]
type=playsnd
trigger1= !time
value=2000,21

[State 310, Spark]
type=explod
trigger1= animelem=2
anim=7200
ID=7200
sprpriority=5
postype=p1
pos= ceil(30 * const(size.xScale)), ceil(-47 * const(size.yScale))
pausemovetime=60
ownpal=1
scale=.5,.5

[State 761, EnvShake]
type = EnvShake
trigger1 = !time
time = 0
ampl = 0

[State 761, End]
type = ChangeState
trigger1 = !AnimTime
value = 11
ctrl = 1

;-------------------------------------------------------------------------------
;Jumping Parry
[StateDef 762]
type = A
physics = N
moveType = I
anim = 762
ctrl = 0
sprPriority = 2
powerAdd = 78 * !var(20)
faceP2 = 1

[State 762, HitBy]
type = HitBy
trigger1 = 1
value = SCA,AT
time = 1

[State 762, Pause]
type = Pause
trigger1 = !Time
time = 15
moveTime = 15
endCmdBufTime = 15
pauseBg = 0

[State 762, PosFreeze]
type = PosFreeze
trigger1 = 1
value = 1

[State 310, blueflash]
type=palfx
trigger1= !time
add=0,50,255
sinadd=0,-50,-255,60
time=15

[State 310, redflash]
type=palfx
trigger1=time<15&&var(21)=2
mul=256,time*17,time*17
time=1

[State 310, Snd]
type=playsnd
trigger1= !time
value= 1, 0
channel=0

[State 310, Snd]
type=playsnd
trigger1= !time
value=2000,21

[State 310, Spark]
type=explod
trigger1= animelem=2
anim=7200
ID=7200
sprpriority=5
postype=p1
pos= ceil(30 * const(size.xScale)), ceil(-67 * const(size.yScale))
pausemovetime=60
ownpal=1
scale=.5,.5

[State 762, EnvShake]
type = EnvShake
trigger1 = !Time
time = 0
ampl = 0

[State 762, End]
type = ChangeState
trigger1 = !AnimTime
value = 763
ctrl = 1

;-------------------------------------------------------------------------------
;Falling
[StateDef 763]
type = A
physics = N
movetype = I
anim = 763
ctrl = 1

[State 763, VelSet]
type = VelSet
trigger1 = !Time
x = ifElse(vel x > 2, 2, ifElse(vel x < -2, -2, vel x))
y = ifElse(vel y < -2, vel y, -2)

[State 763, Gravity]
type = Gravity
trigger1 = 1

[State 763, Landing]
type = ChangeState
trigger1 = pos y > -vel y
value=52

;====================<TRHOWS>====================
;Trhow 1 - Kutei Kaku
[Statedef 800]
type = S
movetype= A
physics = S
juggle = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 800, hit]
type=hitdef
trigger1=!time
attr=S, NT
hitflag=M-
priority=1,Miss
sparkno=-1
p1stateno=801
guard.dist=0
fall=1
ID=800

[State 800, 3]
type = ChangeState
trigger1 = MoveContact = 0
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
;Switching sides
[StateDef 801]
type = S
moveType = A
physics = S
anim = 805
ctrl = 0
sprPriority = 0

[State 801, TargetState]
type = TargetState
trigger1 = !Time && NumTarget
value = 802

[State 801, TargetFacing]
type = TargetFacing
trigger1 = !Time && NumTarget
value = -1

[State 801, Width]
type = Width
trigger1 = 1
edge = 24,24
ignoreHitPause = 1

[State 801, Turn]
type = Turn
trigger1 = AnimElem = 3

[State 801, Facing]
type = TargetFacing
trigger1 = 1
value = -1

[State 801, Tech Hit]
type = ChangeState
trigger1 = NumTarget && var(19)
trigger1 = (Target, command = "holdfwd" || Target, command = "holdback") && Target, command != "holdup" && Target, command != "holddown"
trigger1 = (Target, command = "b" || Target, command = "c" || Target, command = "y" || Target, command = "z")
value = 890

[State 801, Tech Hit Countdown]
type = VarAdd
trigger1 = var(19) > 0
var(19) = -1

[State 801, TargetBind 1]
type = TargetBind
trigger1 = AnimElemTime(2) < 0 || AnimElemTime(4) >= 0
pos = 35,0

[State 801, TargetBind 2]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(4) < 0
pos = 11,0

[State 801, SprPriority 1]
type = SprPriority
trigger1 = AnimElemTime(2) < 0 || AnimElemTime(4) >= 0
value = 1

[State 801, SprPriority -1]
type = SprPriority
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(4)< 0
value = -1

[State 801, End]
type = ChangeState
trigger1 = !NumTarget
value = 0
ctrl = 1

[State 801, End]
type = ChangeState
trigger1 = AnimElemTime(4) >= 0 && var(40) != 1
value = 803

;-------------------------------------------------------------------------------
;Switching sides - target
[StateDef 802]
type = A
moveType = H
physics = N
velSet = 0,0
sprPriority = 0

[State 802, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 802, ChangeAnim2]
type = ChangeAnim2
trigger1 = !Time
value = 806

[State 802, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
moveCamera = 1,1
ignoreHitPause = 1

[State 802, SelfState]
type = SelfState
trigger1 = Time >= 60
value = ifElse(pos y < 0, 5040, 0)
ctrl = 1

;-------------------------------------------------------------------------------
;Success
;---PLAYER---
[Statedef 803]
type=S
movetype=A
physics=S
anim=801
juggle=15
ctrl=0

[State 803, Grab Sound]
type = PlaySnd
trigger1 = time = 1
value = s2, 10

[State 803, Grab Sound]
type = PlaySnd
trigger1 = animelem = 3
value = s1, 15

[State 803, Grab Sound]
type = PlaySnd
trigger1 = animelem = 3
value = s7, 5
volume=255

[State 803, Grab Sound]
type = PlaySnd
trigger1 = target,stateno=5110
value = s2000, 23
persistent = 0

[State 803, bind 1]
type=targetbind
trigger1=animelem = 2
pos=40,0

[State 803, bind 1]
type=targetbind
trigger1=animelem = 3
pos=15,-76

[State 803, bind 2]
type=targetbind
trigger1=animelem = 4
pos=-11,-105

[State 803, bind 3]
type=targetbind
trigger1=animelem =5
pos=-40,-80

[State 803, bind 4]
type=targetbind
trigger1=animelem=5
pos=-70,-45

[State 803, hurt]
type=targetpoweradd
trigger1=animelem=5
value=48

[State 803, power]
type=poweradd
trigger1=animelem=5
value= 72*!var(20);ifelse(!var(13),72,36)*!var(20), 36*!var(20)

[State 803, throw]
type=targetstate
trigger1=animelem=1
value=804

[State 803, throw]
type=targetstate
trigger1=animelem=5
value=805

[State 803, pos]
type=posadd
trigger1=!animtime
x=3

[State 803, turn]
type=turn
trigger1=!animtime

[State 0, Explod]
type = Explod
trigger1 = animelem = 6
anim = 581
ID = 581
pos = -135, 28
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 1, 1
sprpriority = -1
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause =1
;persistent =

[State 803, end]
type=changestate
trigger1=!animtime
value=0
ctrl=1

;---TARGET---
[Statedef 804]
type=A
movetype=H
physics=N
velset=0,0
sprpriority=0

[State 804, anim]
type=changeanim2
trigger1=!time
value=802

[State 804, camera]
type=screenbound
trigger1=1
value=1
movecamera=0,0

;-------------------------------------------------------------------------------
[Statedef 805]
type=A
movetype=H
physics=N
velset=2,10

[State 805, grav]
type=gravity
trigger1=1

[State 805, hurt]
type=lifeadd
trigger1=vel y>0
trigger1=pos y>=-9
value=-100
persistent=0

[State 740, shake]
type=envshake
trigger1=vel y>0
trigger1=pos y>=0
time=8
freq=80
ampl=6

[State 805, hitground]
type=selfstate
trigger1=vel y>0
trigger1=pos y>=-9
value=5110

;---------------------------------------------------------------------------
;Trhow 2 - Ura Jigoku Guruma
[Statedef 810]
type = S
movetype= A
physics = S
juggle = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 810, No shaking]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 810, Grab Sound]
type = PlaySnd
trigger1 = time = 1
value = s2, 10

[State 810, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT
hitflag = M-
priority = 1, Miss
sparkno= -1
sprpriority = 1
p1facing = ifelse (command = "holdfwd", 1, 1)
p2facing = 1
p1stateno = 811
guard.dist = 0
fall = 1
getpower = 50
givepower = 20
numhits = 0

[State 810, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
;Ura Jigoku Guruma
[Statedef 811]
type = A
physics = N
moveType = A
anim = 810
ctrl = 0
velSet = 0,0
sprPriority = 1

[State 811, Lost Target]
type = ChangeState
trigger1 = !Time && !NumTarget
value = 0
ctrl = 1

[State 811, Tech Hit]
type = ChangeState
trigger1 = NumTarget && var(19)
trigger1 = (Target, command = "holdfwd" || Target, command = "holdback")
trigger1 = (Target, command = "b" || Target, command = "c" || Target, command = "y" || Target, command = "z")
value = 890

[State 811, Throw]
type = TargetState
trigger1 = !Time && NumTarget
value = 815

[State 811, Throw]
type = TargetFacing
trigger1 = AnimElem = 17
value = 1

[State 811, Width]
type = Width
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(16) < 0
edge = 32,32
ignoreHitPause = 1

[State 811, Width]
type = Width
trigger1 = AnimElemTime(16) >= 0 && AnimElemTime(17) < 0
edge = 64,64
ignoreHitPause = 1

[State 811, TargetBind 1]
type = TargetBind
trigger1 = NumTarget
trigger1 = AnimElemTime(2) < 0
pos = 35,0

[State 811, TargetBind 2]
type = TargetBind
trigger1 = NumTarget
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
pos = 18,0

[State 811, TargetBind 3]
type = TargetBind
trigger1 = NumTarget
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(4) < 0
pos = 12,-62

[State 811, TargetBind 4]
type = TargetBind
trigger1 = NumTarget
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(5) < 0
pos = 2,-55

[State 811, TargetBind 5]
type = TargetBind
trigger1 = NumTarget
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(6) < 0
pos = -14,-36

[State 811, TargetBind 6]
type = TargetBind
trigger1 = NumTarget
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(7) < 0
pos = 9,0

[State 811, TargetBind 7]
type = TargetBind
trigger1 = NumTarget
trigger1 = AnimElemTime(7) >= 0 && AnimElemTime(8) < 0
pos = 20,-52

[State 811, TargetBind 8]
type = TargetBind
trigger1 = NumTarget
trigger1 = AnimElemTime(8) >= 0 && AnimElemTime(9) < 0
pos = 2,-55

[State 811, TargetBind 9]
type = TargetBind
trigger1 = NumTarget
trigger1 = AnimElemTime(9) >= 0 && AnimElemTime(10) < 0
pos = -14,-36

[State 811, TargetBind 10]
type = TargetBind
trigger1 = NumTarget
trigger1 = AnimElemTime(10) >= 0 && AnimElemTime(11) < 0
pos = 9,0

[State 811, TargetBind 11]
type = TargetBind
trigger1 = NumTarget
trigger1 = AnimElemTime(11) >= 0 && AnimElemTime(12) < 0
pos = 20,-52

[State 811, TargetBind 8]
type = TargetBind
trigger1 = NumTarget
trigger1 = AnimElemTime(12) >= 0 && AnimElemTime(13) < 0
pos = 2,-55

[State 811, TargetBind 9]
type = TargetBind
trigger1 = NumTarget
trigger1 = AnimElemTime(13) >= 0 && AnimElemTime(14) < 0
pos = -14,-36

[State 811, TargetBind 10]
type = TargetBind
trigger1 = NumTarget
trigger1 = AnimElemTime(14) >= 0 && AnimElemTime(15) < 0
pos = 9,0

[State 811, TargetBind 11]
type = TargetBind
trigger1 = NumTarget
trigger1 = AnimElemTime(15) >= 0 && AnimElemTime(16) < 0
pos = 20,-52

[State 811, TargetBind 12]
type = TargetBind
trigger1 = NumTarget
trigger1 = AnimElemTime(16) >= 0 && AnimElemTime(17) < 0
pos=-7,-54

[State 811, TargetBind 13]
type = TargetBind
trigger1 = NumTarget
trigger1 = AnimElem = 17
pos = -74,-57

[State 811, Damage]
type = TargetLifeAdd
trigger1 = NumTarget && AnimElem = 23
value = -150

[State 811, TargetPowerAdd]
type = TargetPowerAdd
trigger1 = NumTarget && AnimElem = 17
value = 36

[State 811, Power]
type = PowerAdd
trigger1 = NumTarget && AnimElem = 17 && !var(20)
value = 72

[State 811, VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = -5

[State 811, VelSet]
type = VelSet
trigger1 = AnimElem = 16
x = 0

[State 811, HitAdd]
type = HitAdd
trigger1 = NumTarget && AnimElem = 17
value = 1

[State 811, Juggle]
type = VarSet
trigger1 = NumTarget && AnimElem = 17
var(16) = 1
ignoreHitPause = 1

[State 811, Throw]
type = TargetState
trigger1 = NumTarget && AnimElem = 17
value = 816

[State 811, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1,0
channel = 0

[State 811, Woosh Sound 1]
type = PlaySnd
trigger1= AnimElem = 4
value = 2001,2

[State 811, Woosh Sound 2]
type = PlaySnd
trigger1= AnimElem = 6
value = 7,4

[State 811, Woosh Sound 2]
type = PlaySnd
trigger1= AnimElem = 8
value = 2001,2

[State 811, Woosh Sound 2]
type = PlaySnd
trigger1= AnimElem = 10
value = 7,4

[State 811, Woosh Sound 2]
type = PlaySnd
trigger1= AnimElem = 12
value = 2001,2

[State 811, Woosh Sound 2]
type = PlaySnd
trigger1= AnimElem = 14
value = 7,4

[State 811, Woosh Sound 1]
type = PlaySnd
trigger1= AnimElem = 16
value = 7,5

[State 811, voice]
type = PlaySnd
trigger1= AnimElem = 17
value = 2000,17

[State 811, Skid Dust]
type = Explod
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(8) < 0 && !(AnimElemTime(4) % 5)
anim = 7100
sprPriority=3
posType = P1
pos = 0,0
vel = 0,0
scale = 0.5,0.5
pauseMovetime = -1
superMoveTime = -1
ownpal = 1

[State 811, Skid Dust]
type = Explod
trigger1 = AnimElemTime(9) >= 0 && AnimElemTime(12) < 0 && !(AnimElemTime(9) % 5)
anim = 7100
sprPriority=3
posType = P1
pos = 0,0
vel = 0,0
scale = 0.5,0.5
pauseMovetime = -1
superMoveTime = -1
ownpal = 1

[State 811, Skid Dust]
type = Explod
trigger1 = AnimElemTime(13) >= 0 && AnimElemTime(16) < 0 && !(AnimElemTime(13) % 5)
anim = 7100
sprPriority=3
posType = P1
pos = 0,0
vel = 0,0
scale = 0.5,0.5
pauseMovetime = -1
superMoveTime = -1
ownpal = 1

[State 811, Turn]
type = Turn
trigger1 = !AnimTime

[State 811, End]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;---TARGET---
[StateDef 815]
type = A
moveType = H
physics = N
velSet = 0,0
sprPriority = 0

[State 815, ChangeAnim2]
type = ChangeAnim2
trigger1 = !Time
value = 815

[State 815, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
moveCamera = 0,0
ignoreHitPause = 1

;-------------------------------------------------------------------------------
;After Throw
[StateDef 816]
type = A
physics = N
movetype = H
ctrl = 0
velSet = -4.5, -8.5
sprPriority = 2

[State 816, SprPriority]
type = SprPriority
trigger1 = AnimElemTime(1) >= 0
value = 1

[State 816, Turn]
type = Turn
trigger1 = !Time

[State 816, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
moveCamera = 1,0
ignoreHitPause = 1

[State 816, VelAdd]
type = VelAdd
Trigger1 = 1
y = 0.5

[State 816, EnvShake]
type = EnvShake
trigger1 = vel y > 0 && pos y >= -24
time = 14
ampl = 4
freq = 120

[State 816, Recover]
type = SelfState
trigger1 = Alive
trigger1 = command = "recovery"
trigger1 = vel y > 0 && pos y >= 0
value = 5200

[State 816, End]
type = SelfState
trigger1 = vel y > 0 && pos y >= -24
value = 5100



;==============================================================================
; {C:\Users\Luis\Desktop\Kairi\states\Normal.cns}
;==============================================================================


;KAIRI FROM STREET FIGHTER EX + EDITS BY Mr.KARATE AND GUSTAVO C. MORAES
;CODES - Mr.KARATE
;SPRITES - GUSTAVO C. MORAES

;==============================================================================================
;=======================================<NORMAL MOVES>=========================================
;==============================================================================================
; low punch
[Statedef 200]
type = S
movetype= A
physics = S
juggle = 1
velset = 0, 0
ctrl = 0
anim = 200
poweradd=7*!var(20)
sprpriority =1

[State 0, 1]
type = ChangeAnim
triggerall = power >= 3000
trigger1 = Anim != ifelse(var(59),200,201)
value = ifelse(var(59),200,201)

[State 200, 1]
type = PlaySnd
trigger1 = Time = 0  && random<200
trigger1 = random < 500
value = 1,0
volume = 100

[State 200, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7,0

[State 0, PlaySnd]
type = PlaySnd
triggerall = power >= 1000
triggerall = var(59) = 0
trigger1 = animelem = 1
value = S171,8
volume = 255
channel = -1

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
damage = 20, ifelse(var(59)<=1 && power>1000,2,0)
animtype = medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = IfElse(var(21),6,8),ifElse(var(21),6,8)
;guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8010)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 79), var(36) := -75
hitsound = s2,0
guardsound = s2,4
ground.type = High
ground.slidetime = 5
ground.hittime = 12
ground.velocity = ifelse(var(20), -2.66, -4)
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 12
palfx.time = ifelse(var(59)<=1 && power>=1000,20,0)
palfx.sinadd= 64,64,64,4
palfx.mul= 128,128,128
forcenofall = !var(20)

[State 200 ]
type = explod
triggerall = power >= 1000 && anim = 200
triggerall = var(59) = 0
trigger1 = AnimElem = 1
persistent = 1
ignorehitpause = 0
anim = 6030
scale = .4 , .4
pos = -8, -10
ownpal = 1
postype = p1
removetime = 10
removeongethit = 1
sprpriority = 2

[State 200 ]
type = explod
triggerall = power >= 1000 && anim = 201
triggerall = var(59) = 0
trigger1 = AnimElem = 1
persistent = 1
ignorehitpause = 0
anim = 6030
scale = .4 , .4
pos = -8, -20
postype = p1
removetime = 10
removeongethit = 1
sprpriority = 2

[State 200 ]
type = explod
triggerall = power >= 3000 && anim = 201
triggerall = var(59) = 0
trigger1 = AnimElem = 1
persistent = 1
ignorehitpause = 0
anim = 4321
pos = -15,-75
postype = p1 ;p2,front,back,left,right
scale = .55, .32
bindtime = -1
removetime = 5
sprpriority = 3
removeongethit = 1

[State 200, flames]
type = helper
triggerall = movehit && numtarget && numhelper(7180) < 1
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = !(target, time) && (target, movetype = H)
helpertype = normal
stateno = 7180
ID = 7180
name = "Flames"
postype = p2
ownpal = 1
facing = -1
size.ground.front = 0
size.ground.back = 0
ignorehitpause = 1
persistent = 0

[State 200, Hadouken]
type=helper
triggerall = var(59) = 0
triggerall = power >= 3000
trigger1= anim = 201
trigger1 = animelem =1
helpertype=normal
stateno=1007
ID=1007
name="fireball destroyer"
postype=p1
pos=0,0
ownpal=1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; medium punch
[Statedef 205]
type = S
movetype= A
physics = S
juggle = 2
poweradd=14*!var(20)
ctrl = 0
velset = 0,0
anim = 210
sprpriority = -1

[State 205, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7,1

[State 205, 1]
type = PlaySnd
trigger1 = Time = 0  && random<200
value = 2000,12

[State 205, PlaySnd]
type = PlaySnd
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = animelem = 1
value = S171,8
volume = 255
channel = -1

[State 205, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype = Medium
damage = 43,ifelse(var(59)<=1 && power>1000,5,0)
guardflag = MA
pausetime = IfElse(var(21),6,10),ifElse(var(21),6,10)
;guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8011)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 79), var(36) := -75
hitsound = s2,1
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = ifelse(var(20), -3.70, -5.5)
air.velocity = -2.5,-4
palfx.time = ifelse(var(59)<=1 && power>=1000,25,0)
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
forcenofall = !var(20)

[State 205 ]
type = explod
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = AnimElem = 1
persistent = 1
ignorehitpause = 0
anim = 6005
scale = .4 , .4
ownpal = 1
pos = 20,-10
postype = p1
removetime = 16
removeongethit = 1
sprpriority = 2

[State 205,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State 205, flames]
type = helper
triggerall = var(59) = 0
triggerall = power >= 1000
triggerall = movehit && numtarget && numhelper(7180) < 1
trigger1 = !(target, time) && (target, movetype = H)
helpertype = normal
stateno = 7180
ID = 7180
name = "Flames"
postype = p2
ownpal = 1
facing = -1
size.ground.front = 0
size.ground.back = 0
ignorehitpause = 1
persistent = 0

[State 205, Hadouken]
type=helper
triggerall = var(59) = 0
triggerall = power >= 3000
trigger1= anim = 210
trigger1 = animelem =2
helpertype=normal
stateno=2003
ID=2003
name="fireball destroyer"
postype=p1
pos=0,0
ownpal=1

[State 205, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;strong punch
[Statedef 210]
ype = S
movetype= A
physics = S
juggle = 2
poweradd = 40
ctrl = 0
velset = 0,0
anim = 215
sprpriority = 1

[State 210, voice]
type = PlaySnd
trigger1 = Time = 0 && random<500
value = 2000,ifelse(random<500,12,17)

[State 210, playsound]
type = PlaySnd
trigger1 = Time = 0
value = 7,2

[State 210, PlaySnd]
type = PlaySnd
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = animelem = 1
value = S2000,15
volume = 255
channel = -1

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype = Medium
damage = 65, ifelse(var(59)<=1 && power>1000,10,0)
guardflag = MA
pausetime = IfElse(var(21),6,10),ifElse(var(21),6,10)
;guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8012)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 70), var(36) := -70
hitsound = s2,2
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = ifElse(var(20), -4, -5.5)
air.velocity = -2.5,-4
palfx.time = ifelse(var(59)<=1 && power>=1000,20,0)
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
envshake.time = ifelse(var(59),0,12)
envshake.ampl = 3
forcenofall = !var(20)

[State 210, flames]
type = helper
triggerall = movehit && numtarget && numhelper(7180) < 1
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = !(target, time) && (target, movetype = H)
helpertype = normal
stateno = 7180
ID = 7180
name = "Flames"
postype = p2
ownpal = 1
facing = -1
size.ground.front = 0
size.ground.back = 0
ignorehitpause = 1
persistent = 0

[State 210 ]
type = explod
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = AnimElem = 5
persistent = 1
ignorehitpause = 0
anim = 60050
scale = .4 , .4
pos = 20,-8
postype = p1
removetime = 12
removeongethit = 1
sprpriority = 2

[State 210, Hadouken]
type=helper
triggerall = var(59) = 0
triggerall = power >= 3000
trigger1= anim = 215
trigger1 = animelem = 5
helpertype=normal
stateno=2003
ID=2004
name="fireball destroyer"
postype=p1
pos=-15,10
ownpal=1

[State 210,re ]
type = RemoveExplod
trigger1 = anim != 243
ID = 243

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Strong punch (close)
[Statedef 211]
type = S
movetype= A
physics = S
juggle = 2
poweradd=20*!var(20)
ctrl = 0
velset = 0
anim = 220
sprpriority = 1

[State 211, voz]
type = PlaySnd
trigger1 = Time = 0 && random<500
value = 2000,ifelse(random<500,12,17)

[State 211, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7,2

[State 211, PlaySnd]
type = PlaySnd
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = animelem = 1
value = S2000,15
volume = 255
channel = -1

[State 211, 2]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype = Medium
damage = 33, ifelse(var(59)<=1 && power>1000,7,0)
guardflag = MA
pausetime = IfElse(var(20),6,14),ifElse(var(20),6,12)
;guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8012)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 99), var(36) := -65
hitsound = s2,2
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
fall = 0
ground.velocity = ifElse(var(20), -4, -5.5)
air.velocity = -2.5,-4
palfx.time = ifelse(var(59)<=1 && power>=1000,30,0)
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
envshake.time = ifelse(var(59),0,12)
envshake.ampl = 3
forcenofall = !var(20)

[State 211, 2]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype = Medium
damage = 33, ifelse(var(59)<=1 && power>1000,7,0)
guardflag = MA
pausetime = IfElse(var(20),6,14),ifElse(var(20),6,12)
;guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8012)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 79), var(36) := -85
hitsound = s2,2
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
fall = 0
ground.velocity = ifElse(var(20), -4, -5.5)
air.velocity = -2.5,-4
palfx.time = ifelse(var(59)<=1 && power>1000,30,0)
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
envshake.time = ifelse(var(59),0,12)
envshake.ampl = 3

[State 211 ]
type = explod
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = AnimElem = 2, = 1
persistent = 1
ignorehitpause = 0
anim = 6010
scale = .4 , .4
ownpal = 1
pos = 20,-15
postype = p1
removetime = 14
removeongethit = 1
sprpriority = 2

[State 211,re ]
type = RemoveExplod
trigger1 = anim != 220
ID = 220

[State 211, flames]
type = helper
triggerall = var(59) = 0
triggerall = power >= 1000
triggerall = movehit && numtarget && numhelper(7180) < 1
trigger1 = !(target, time) && (target, movetype = H)
helpertype = normal
stateno = 7180
ID = 7180
name = "Flames"
postype = p2
ownpal = 1
facing = -1
size.ground.front = 0
size.ground.back = 0
ignorehitpause = 1
persistent = 0

[State 211, Hadouken]
type=helper
triggerall = var(59) = 0
triggerall = power >= 3000
trigger1= anim = 220
trigger1 = animelem =2
helpertype=normal
stateno=1005
ID=1005
name="fireball destroyer"
postype=p1
pos=0,0
ownpal=1

[State 211, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; low kick
[Statedef 215]
type = S
movetype= A
physics = S
juggle = 1
poweradd=7*!var(20)
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2

[State 215, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7,0

[State 215, 1]
type = PlaySnd
trigger1 = Time = 0 && random<350
value = 1,0

[State 215, 2]
type = HitDef
trigger1 = animelem = 4
attr = S, NA
animtype = light
damage = 20,0
guardflag = MA
pausetime = IfElse(var(21),6,8),ifElse(var(21),6,8)
;guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8010)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 79), var(36) := -85
hitsound = s2,11
guardsound = s2,4
ground.type = low
ground.slidetime = 10
ground.hittime = 12
ground.velocity = ifelse(var(20), -2.66, -4)
air.velocity = -2.5,-3.5
forcenofall = !var(20)

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Low kick (close)
[Statedef 216]
type = S
movetype= A
physics = S
juggle = 1
poweradd=7*!var(20)
ctrl = 0
velset = 0,0
anim = 235
sprpriority = 2

[State 216, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7,3

[State 215, 1]
type = PlaySnd
trigger1 = Time = 0 && random<350
value = 1,0

[State 216, 2]
type = HitDef
trigger1 = animelem = 4
attr = S, NA
animtype = light
damage = 20,0
guardflag = MA
pausetime = IfElse(var(21),6,8),ifElse(var(21),6,8)
;guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8010)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 79), var(36) := -30
hitsound = s2,11
guardsound = s2,4
ground.type = low
ground.slidetime = 10
ground.hittime = 12
ground.velocity = ifelse(var(20), -2.66, -4)
air.velocity = -2.5,-3.5
forcenofall = !var(20)

[State 216, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; medium kick
[Statedef 220]
type = S
movetype= A
physics = S
juggle = 3
poweradd=14*!var(20)
ctrl = 0
velset = 0
anim = 241
sprpriority = 2

[State 220, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7,4

[State 220, 1]
type = PlaySnd
trigger1 = Time = 0 && random<350
value = 1,ifelse(random<500,0,1)

[State 220, 2]
type = HitDef
trigger1 = animelem = 5
attr = S, NA
animtype = Medium
damage = 40,0
guardflag = MA
pausetime = IfElse(var(21),6,10),ifElse(var(21),6,10)
;guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8011)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 140), var(36) := -85
hitsound = s2,12
guardsound = s2,4
ground.type = high
ground.slidetime = 12
ground.hittime = 15
ground.velocity = ifelse(var(20), -3.70, -5.5)
air.velocity = -2.2,-3.2
forcenofall = !var(20)

[State 220, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; medium kick (close)
[Statedef 221]
type = S
movetype= A
physics = S
juggle = 3
poweradd=14*!var(20)
ctrl = 0
velset = 0,0
anim = 250
sprpriority = 2

[State 220, 1]
type = PlaySnd
trigger1 = Time = 0 && random<350
value = 1,ifelse(random<500,0,1)

[State 221, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7,4

[State 221, 2]
type = HitDef
trigger1 = animelem = 5
attr = S, NA
animtype = medium
damage = 40,0
guardflag = MA
pausetime = IfElse(var(21),6,10),ifElse(var(21),6,10)
;guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8011)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 120), var(36) := -60
hitsound = s2,12
guardsound = s2,4
ground.type = low
ground.slidetime = 12
ground.hittime = 15
ground.velocity = ifelse(var(20), -3.70, -5.5)
air.velocity = -2.2,-3.2
forcenofall = !var(20)

[State 221, 3]
type = PosAdd
trigger1 = AnimElem = 7
x = 12

[State 221, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; strong kick
[Statedef 225]
type = S
movetype= A
physics = S
juggle = 3
poweradd=20*!var(20)
ctrl = 0
velset = 0
anim = 240
sprpriority = 2

[State 225, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7,5

[State 225, 1]
type = PlaySnd
trigger1 = Time = 0 && random<350
value=2000,ifelse(random<500,17,18)

[State 225, 2]
type = HitDef
trigger1 = animelem = 5
attr = S, NA
animtype = Medium
damage = 60,0
guardflag = MA
pausetime = IfElse(var(21),6,12),ifElse(var(21),6,12)
;guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8012)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 100), var(36) := -75
hitsound = s2,13
guardsound = s2,4
ground.type = high
ground.slidetime = 12
ground.hittime = 15
ground.velocity = ifelse(var(20), -4, -5.5)
air.velocity = -2.2,-3.2
envshake.time = ifelse(var(59),0,12)
envshake.ampl = 3
forcenofall = !var(20)

[State 225, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; strong kick (close)
[Statedef 226]
type = S
movetype= A
physics = S
juggle = 3
poweradd=20*!var(20)
ctrl = 0
velset = 0
anim = 244
sprpriority = 2

[State 226, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7,5

[State 225, 1]
type = PlaySnd
trigger1 = Time = 0 && random<350
value=2000,ifelse(random<500,17,18)

[State 226, 2]
type = HitDef
trigger1 = animelem = 5
attr = S, NA
animtype = Medium
damage = 60,0
guardflag = MA
pausetime = IfElse(var(21),6,12),ifElse(var(21),6,12)
;guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8012)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 99), var(36) := -40
hitsound = s2,13
guardsound = s2,4
ground.type = high
ground.slidetime = 12
ground.hittime = 15
ground.velocity = ifelse(var(20), -4, -5.5)
air.velocity = -2.2,-3.2
forcenofall = !var(20)

[State 226, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Ryuubu
[Statedef 230]
type = S
movetype= A
physics = S
ctrl = 0
anim = 3100
velset = 0,0

[State 230, 1]
type = playsnd
trigger1 = time = 0
value = 2,9

[State 230, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S1,15
volume = 0
channel = 0

[State 230, 3]
type = posadd
trigger1 = AnimElem = 2, = 0
trigger2 = animelem = 3, = 0
x = 16

[State 230, 3]
type = posadd
trigger1 = AnimElem = 4, = 0
x = 8

[State 230 , 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 231
ctrl = 1

;---------------
; Ryuubu in air
[Statedef 231]
type = A
movetype= A
physics = N
ctrl = 0
anim = 3110
poweradd=20*!var(20)
juggle = 9 + var(13)

[State 231, 1]
type = posadd
trigger1 = AnimElem = 1, = 0
x = 3
y = -3

[State 231, 1]
type = posadd
trigger1 = AnimElem = 1, = 1
x = 4
y = -2

[State 231, 1]
type = posadd
trigger1 = AnimElem = 2, = 0
x = 12
y = -2

[State 231, 1]
type = posadd
trigger1 = AnimElem = 1, = 2
trigger2 = AnimElem = 2, = 1
x = 3
y = -2

[State 231, 1]
type = posadd
trigger1 = AnimElem = 2, = 2
trigger2 = AnimElem = 2, = 3
x = 3
y = -1

[State 231, 1]
type = posadd
trigger1 = AnimElem = 3, = 0
x = 2

[State 231, 1]
type = posadd
trigger1 = AnimElem = 3, = 1
x = 3

[State 231, 1]
type = posadd
trigger1 = AnimElem = 3, = 2
trigger2 = AnimElem = 3, = 3
y = 1

[State 231, 1]
type = posadd
trigger1 = AnimElem = 4, = 0
trigger2 = AnimElem = 4, = 1
y = 2

[State 231, 1]
type = posadd
trigger1 = AnimElem = 4, = 2
y = 3

[State 231, 1]
type = posadd
trigger1 = AnimElem = 5, = 0
y = 4

[State 231 , 1]
type = HitDef
trigger1 = AnimElem = 2
attr = A, SA
animtype = Medium
damage = 70,0
givepower = 25
guardflag = H ; overhead attack
pausetime = 6,12
sparkno = -1 + 0 * (var(33) := 8011)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 129), var(36) := -63
hitsound = S2,13
guardsound = S2,4
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -6
air.velocity = -2.2,-3.2
air.animtype = Back
envshake.time = 12
envshake.ampl = 3
forcenofall = !var(20)

[State 231, 8]
type = ChangeState
trigger1 = animelemtime(5) = 1
value = 232

;-----------------
; Ryuubu landing
[Statedef 232]
type = S
movetype= I
physics = S
ctrl = 0
anim = 3120
velset = 0,0

[State 232 , 3]
type = posset
trigger1 = time = 0
y = 0

[State 232, 1]
type = playsnd
trigger1 = time = 0
value = 3,4

[State 232, 3]
type = VarSet
trigger1 = AnimTime = 0
var(2) = 0

[State 232 , 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; crouch low punch
[Statedef 400]
type = C
movetype= A
physics = C
juggle = 1
poweradd=7*!var(20)
ctrl = 0
anim = 400
sprpriority = 1
ctrl = 1

[State 400, 1]
type = PlaySnd
trigger1 = Time = 0  && random<350
value = 1,0

[State 400, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7,0

[State 400, PlaySnd]
type = PlaySnd
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = animelem = 1
value = S171,8
volume = 255
channel = -1

[State 400, 2]
type = HitDef
trigger1 = animelem = 2
attr = C, NA
damage = 20,ifelse(var(59)<=1 && power>1000,2,0)
priority = 3
animtype = Light
hitflag = MAF
guardflag = L
pausetime = IfElse(var(21),6,8),ifElse(var(21),6,8)
;guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8010)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 71), var(36) := -55
hitsound = s2,0
guardsound = s2,4
ground.type = Low
ground.slidetime = 4
ground.hittime = 12
ground.velocity = ifelse(var(20), -2.66, -2)
air.velocity = -1.5,-3
palfx.time = ifelse(var(59)<=1 && power>=1000,20,0)
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
forcenofall = !var(20)

[State 400 ]
type = explod
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = AnimElem = 1
persistent = 1
ignorehitpause = 0
anim = 6030
scale = .4 , .4
ownpal = 1
pos = -10,12
postype = p1
removetime = 10
removeongethit = 1
sprpriority = 2

[State 400,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 400, flames]
type = helper
triggerall = var(59) = 0
triggerall = power >= 1000
triggerall = movehit && numtarget && numhelper(7180) < 1
trigger1 = !(target, time) && (target, movetype = H)
helpertype = normal
stateno = 7180
ID = 7180
name = "Flames"
postype = p2
ownpal = 1
facing = -1
size.ground.front = 0
size.ground.back = 0
ignorehitpause = 1
persistent = 0

[State 210, Hadouken]
type=helper
triggerall = var(59) = 0
triggerall = power >= 3000
trigger1= anim = 400
trigger1 = animelem =1
helpertype=normal
stateno=1010
ID=1010
name="fireball destroyer"
postype=p1
pos=0,0
ownpal=1

[State 210, end]
type=changestate
trigger1=!animtime
value=11
ctrl=1

;---------------------------------------------------------------------------
; crouch medium punch
[Statedef 410]
type = C
movetype= A
physics = C
juggle = 3
poweradd=14*!var(20)
ctrl = 0
anim = 410
sprpriority = 1

[State 410, 1]
type = PlaySnd
trigger1 = Time = 0 && random<350
value = 1,1

[State 410, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7,2

[State 410, PlaySnd]
type = PlaySnd
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = animelem = 1
value = S171,8
volume = 255
channel = -1

[State 410, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
damage = 40,ifelse(var(59)<=1 && power>1000,5,0)
animtype = Medium
hitflag = MAF
guardflag = L
pausetime = IfElse(var(21),6,10),ifElse(var(21),6,10)
;guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8011)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 71), var(36) := -55
hitsound = s2,1
guardsound = s2,4
ground.type = Low
ground.slidetime = 12
ground.hittime = 15
ground.velocity = ifelse(var(20), -2, -2)
air.velocity = -3,-4
palfx.time = ifelse(var(59)<=1 && power>=1000,25,0)
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
forcenofall = !var(20)

[State 410 ]
type = explod
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = AnimElem = 1
persistent = 1
ignorehitpause = 0
anim = 6035
scale = .4 , .4
pos = -10,12
ownpal = 1
postype = p1
removetime = 16
removeongethit = 1
sprpriority = 2

[State 410,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 410, flames]
type = helper
triggerall = var(59) = 0
triggerall = power >= 1000
triggerall = movehit && numtarget && numhelper(7180) < 1
trigger1 = !(target, time) && (target, movetype = H)
helpertype = normal
stateno = 7180
ID = 7180
name = "Flames"
postype = p2
ownpal = 1
facing = -1
size.ground.front = 0
size.ground.back = 0
ignorehitpause = 1
persistent = 0

[State 210, Hadouken]
type=helper
triggerall = var(59) = 0
triggerall = power >= 3000
trigger1= anim = 410
trigger1 = animelem =2
helpertype=normal
stateno=1012
ID=1012
name="fireball destroyer"
postype=p1
pos=0,0
ownpal=1

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouch strong punch
[Statedef 415]
type = C
movetype = A
physics = S
juggle = 7
poweradd=20*!var(20)
velset = 0,0
anim = 415
ctrl = 0
sprpriority = 1

[State 415, voz]
type = PlaySnd
trigger1 = AnimElem = 3 && random<350
value = 2000,12

[State 415, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 7,3

[State 415, PlaySnd]
type = PlaySnd
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = animelem = 1
value = S171,8
volume = 255
channel = -1

[State 415, Hit1]
type = HitDef
trigger1 = AnimElem = 4
attr = C, NA
damage = 70,ifelse(var(59)<=1 && power>1000,7,0)
animtype = Medium
hitflag = MAF
guardflag = L
pausetime = IfElse(var(21),6,12),ifElse(var(21),6,12)
;guard.pausetime = 14, 14
animtype = Up
sparkno = -1 + 0 * (var(33) := 8012)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 71), var(36) := -75
hitsound = s2,3
guardsound = s2,4
ground.type = Low
ground.slidetime = 12
ground.hittime = 15
ground.velocity = ifelse(var(20), -4, -5.5)
air.velocity = -3,-4
palfx.time = ifelse(var(59)<=1 && power>=1000,30,0)
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
forcenofall = !var(20)

[State 415 ]
type = explod
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = AnimElem = 2
persistent = 1
ignorehitpause = 0
anim = 6040
scale = .5,.5
pos = 20,-52
ownpal = 1
postype = p1
removetime = 12
removeongethit = 1
sprpriority = 2

[State 415,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 415, flames]
type = helper
triggerall = var(59) = 0
triggerall = power >= 1000
triggerall = movehit && numtarget && numhelper(7180) < 1
trigger1 = !(target, time) && (target, movetype = H)
helpertype = normal
stateno = 7180
ID = 7180
name = "Flames"
postype = p2
ownpal = 1
facing = -1
size.ground.front = 0
size.ground.back = 0
ignorehitpause = 1
persistent = 0

[State 210, Hadouken]
type=helper
triggerall = var(59) = 0
triggerall = power >= 3000
trigger1= anim = 415
trigger1 = animelem =2
helpertype=normal
stateno=1014
ID=1014
name="fireball destroyer"
postype=p1
pos=0,0
ownpal=1

[State 415, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; crouch low kick
[Statedef 420]
type = C
movetype = A
physics = C
juggle = 3
ctrl = 0
poweradd=7*!var(20)
anim = 440
sprpriority = 2

[State 420, 1]
type = PlaySnd
trigger1 = Time = 0 && random<350
value = 1,0

[State 420, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7,3

[State 420, 2]
type = HitDef
trigger1 = animelem = 3
attr = C, NA
damage = 20,0
animtype = Light
hitflag = MAF
guardflag = L
pausetime = IfElse(var(21),6,8),ifElse(var(21),6,8)
;guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8010)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 71), var(36) := -10
hitsound = s2,11
guardsound = s2,4
ground.type = Low
ground.slidetime = 6
ground.hittime = 12
ground.velocity = ifelse(var(20), -2.66, -4)
air.velocity = -2,-3
down.velocity = -5,0
down.hittime = 20
forcenofall = !var(20)

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 420, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; crouch medium kick
[Statedef 425]
type = C
movetype = A
physics = C
juggle = 3
ctrl = 0
poweradd=14*!var(20)
anim = 430
sprpriority = 2

[State 425, 1]
type = PlaySnd
trigger1 = Time = 0 && random<350
value = 1,0

[State 425, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7,3

[State 425, 2]
type = HitDef
trigger1 = animelem = 4
attr = C, NA
damage = 40,0
animtype = Light
hitflag = MAF
guardflag = L
pausetime = IfElse(var(21),6,10),ifElse(var(21),6,10)
;guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8011)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 101), var(36) := -10
hitsound = s2,11
guardsound = s2,4
ground.type = Low
ground.slidetime = 6
ground.hittime = 12
ground.velocity = ifelse(var(20), -3, -5)
air.velocity = -2,-3
down.velocity = -5,0
down.hittime = 20
forcenofall = !var(20)

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 425, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouch strong kick
[Statedef 430]
type = C
movetype= A
physics = C
juggle = 3
poweradd=20*!var(20)
ctrl = 0
anim = 435
sprpriority = 2

[State 430, 2]
type = PlaySnd
trigger1 = Time = 2 && random<350
value = 1,1

[State 430, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7,5

[State 430, 3]
type = HitDef
trigger1 = animelem = 6
attr = C, NA
damage = 60,0
hitflag = MAF
guardflag = L
animtype = medium
pausetime = IfElse(var(21),6,12),ifElse(var(21),6,12)
;guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8012)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 101), var(36) := -10
hitsound = s2,13
guardsound = s2,4
ground.type = Trip
ground.slidetime = 10
ground.hittime = 15
ground.velocity = -3,-2.5
air.velocity = -2.5,-3
guard.velocity = -2
fall = 1
forcenofall = !var(20)

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 430, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Aerial light punch
[Statedef 600]
type = A
movetype= A
physics = A
juggle = 1
poweradd=7*!var(20)
ctrl = 0
anim = 600
sprpriority = 1

[State 600, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1, 0

[State 600, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7,0

[State 600, PlaySnd]
type = PlaySnd
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = animelem = 1
value = S171,8
volume = 255
channel = -1

[State 600, 2]
type = HitDef
trigger1 = animelem = 4
attr = A, NA
damage = 20,ifelse(var(59)<=1 && power>1000,2,0)
guardflag = HA
priority = 3
pausetime = IfElse(var(21),6,8),ifElse(var(21),6,8)
;guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8010)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 59), var(36) := -43
hitsound = s2,0
guardsound = s2,4
ground.type = High
ground.slidetime = 5
ground.hittime = 5
ground.velocity = ifelse(var(20), -2.66, -4)
air.velocity = -1.3,-3
palfx.time = ifelse(var(59)<=1 && power>=1000,20,0)
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
forcenofall = !var(20)

[State 600 ]
type = explod
triggerall = var(59) = 0
triggerall = power >= 1000
triggerall = anim = 600
trigger1 = AnimElem = 2
persistent = 0
ignorehitpause = 0
ID = 600
anim = 6060
scale = .4 , .4
pos = -9,-13
ownpal = 1
postype = p1
bindtime = -1
facing = 1
pausemovetime = 0
removetime = -2
sprpriority = 2
supermove = 0
vel = 0,0
removeongethit = 1
ignorehitpause = 0
removeongethit = 1
persistent = 0

[State 600, RemoveExplod]
type = RemoveExplod
trigger1 = anim = 0 && numexplod(6060)
id = 6060

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 174

[State 600, flames]
type = helper
triggerall = var(59) = 0
triggerall = power >= 1000
triggerall = movehit && numtarget && numhelper(7180) < 1
trigger1 = !(target, time) && (target, movetype = H)
helpertype = normal
stateno = 7180
ID = 7180
name = "Flames"
postype = p2
ownpal = 1
facing = -1
size.ground.front = 0
size.ground.back = 0
ignorehitpause = 1
persistent = 0

[State 205, Hadouken]
type=helper
triggerall = var(59) = 0
triggerall = power >= 3000
trigger1= anim = 600
trigger1 = animelem =3
helpertype=normal
stateno=1016
ID=1016
name="fireball destroyer"
postype=p1
pos=0,0
ownpal=1

[State 600, 3]
type = CtrlSet
trigger1 = Time = 17
value = 1

[State 600, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
; Aerial medium punch
[Statedef 605]
type = A
movetype= A
physics = A
juggle = 3
poweradd=14*!var(20)
ctrl = 0
anim = 605
sprpriority = 1

[State 205, 1]
type = PlaySnd
trigger1 = Time = 0  && random<200
value = 1,15

[State 610, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7,3

[State 610, 3]
type = HitDef
trigger1 = animelem = 4
attr = A, NA
damage = 40,ifelse(var(59)<=1 && power>1000,5,0)
guardflag = HA
priority = 4
pausetime = IfElse(var(21),6,10),ifElse(var(21),6,10)
;guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8011)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 49), var(36) := -73
hitsound = s2,1
guardsound = s2,4
animtype = med
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = ifelse(var(20), -3.70, -5.5)
air.velocity = -3,-4
forcenofall = !var(20)

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 174

[State 610, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
; Aerial strong punch
[Statedef 610]
type = A
movetype= A
physics = A
juggle = 3
poweradd=20*!var(20)
ctrl = 0
anim = 610
sprpriority = 1

[State 205, 1]
type = PlaySnd
trigger1 = Time = 0  && random<200
value = 1,1

[State 610, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7,3

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = animelem = 1
value = S171,8
volume = 255
channel = -1

[State 610, 3]
type = HitDef
trigger1 = animelem = 4
attr = A, NA
damage = 40,ifelse(var(59)<=1 && power>1000,7,0)
guardflag = HA
priority = 4
pausetime = IfElse(var(21),6,12),ifElse(var(21),6,12)
;guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8012)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 59), var(36) := -63
hitsound = s2,2
guardsound = s2,4
animtype = med
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = ifelse(var(20), -4, -5.5)
air.velocity = -3,-4
palfx.time = ifelse(var(59)<=1 && power>=1000,25,0)
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
forcenofall = !var(20)

[State 610 ]
type = explod
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = AnimElem = 3
persistent = 0
ignorehitpause = 0
anim = 6070
ID = 600
scale = .4 , .4
pos = 19,-5
postype = p1
ownpal = 1
bindtime = -1
facing = 1
pausemovetime = 0
removetime = -2
sprpriority = 2
supermove = 0
vel = 0,0
removeongethit = 1
ignorehitpause = 0
removeongethit = 1
persistent = 0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 174

[State 610, flames]
type = helper
triggerall = var(59) = 0
triggerall = power >= 1000
triggerall = movehit && numtarget && numhelper(7180) < 1
trigger1 = !(target, time) && (target, movetype = H)
helpertype = normal
stateno = 7180
ID = 7180
name = "Flames"
postype = p2
ownpal = 1
facing = -1
size.ground.front = 0
size.ground.back = 0
ignorehitpause = 1
persistent = 0

[State 205, Hadouken]
type=helper
triggerall = var(59) = 0
triggerall = power >= 3000
trigger1= anim = 610
trigger1 = animelem =3
helpertype=normal
stateno=1018
ID=1018
name="fireball destroyer"
postype=p1
pos=0,0
ownpal=1

[State 610, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
; Aerial light kick
[Statedef 615]
type = A
movetype= A
physics = A
juggle = 1
poweradd=7*!var(20)
ctrl = 0
anim = 630
sprpriority = 2

[State 615, 1]
type = PlaySnd
trigger1 = Time = 0 && random<200
value = 1,0

[State 615, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7,0

[State 615, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 25,0
guardflag = HA
priority = 3
pausetime = IfElse(var(21),6,8),ifElse(var(21),6,8)
;guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8010)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 59), var(36) := -33
hitsound = s2,11
guardsound = s2,4
animtype = Light
ground.type = High
ground.slidetime = 6
ground.hittime = 6
ground.velocity = ifelse(var(20), -2.66, -4)
air.velocity = -2,-3
forcenofall = !var(20)

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 174

;---------------------------------------------------------------------------
; Aerial medium kick
[Statedef 620]
type = A
movetype= A
physics = A
juggle = 3
poweradd=14*!var(20)
ctrl = 0
anim = 305
sprpriority = 2

[State 625, golpe]
type = PlaySnd
trigger1 = animelem = 2
value = 7,4

[State 225, 1]
type = PlaySnd
trigger1 = animelem = 2 && random<350
value=2000,ifelse(random<500,17,18)

[State 625, 2]
type = HitDef
trigger1 = animelemtime(5) = 0
attr = A, NA
animtype = Hard
ground.animtype = low
air.animtype = back
damage = 60,0
guardflag = HA
priority = 4
sparkno = -1 + 0 * (var(33) := 8011)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 65), var(36) := -43
hitsound = s2,12
guardsound = s2,4
pausetime = IfElse(var(21),6,12),ifElse(var(21),6,12)
;guard.pausetime = 14, 14
animtype = Med
ground.type = High
ground.slidetime = 15
ground.hittime = 15
ground.velocity = ifelse(var(20), -4, -5.5)
air.velocity = -3,-4
forcenofall = !var(20)

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 174

;---------------------------------------------------------------------------
;aerial strong kick
[Statedef 625]
type = A
movetype= A
physics = A
anim = 640
ctrl = 0
poweradd=20*!var(20)
juggle = 14

[State 620, 2]
type = PlaySnd
trigger1 = Time = 1 && random<200
value = 1,1

[State 620, 1]
type = PlaySnd
trigger1 = Time = 0
value = 7,5

[State 620, 3]
type = HitDef
trigger1 = time = 0
attr = A, NA
damage = 40,0
guardflag = HA
priority = 4
pausetime = IfElse(var(21),6,10),ifElse(var(21),6,10)
;guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8012)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = -10 + 0 * (var(35) := 75), var(36) := -53
hitsound = s2,13
guardsound = s2,4
animtype = Med
ground.type = High
ground.slidetime = 15
ground.hittime = 15
ground.velocity = ifelse(var(20), -3.70, -5.5)
air.velocity = -3,-4
forcenofall = !var(20)

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 174



;==============================================================================
; {C:\Users\Luis\Desktop\Kairi\states\Specials.cns}
;==============================================================================


;KAIRI FROM STREET FIGHTER EX + EDITS BY Mr.KARATE AND GUSTAVO C. MORAES
;CODES - Mr.KARATE
;SPRITES - GUSTAVO C. MORAES

;==============================================================================================
;=======================================<SPECIAL MOVES>========================================
;==============================================================================================
; Shinki Hatsudou weak
[Statedef 1000]
type = S
movetype = A
physics = S
juggle = 5
poweradd = 50
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2

[State 1000, voz]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1,13

[State 1000, blast]
type=helper
trigger1= animelem=4
helpertype=normal
stateno=2244
ID=2244
name="blast"
postype=p1
pos=90,-60
ownpal=1
size.xscale= .8
size.yscale= .8

[State 1000, recoil]
type = helper
trigger1 = AnimElem = 4
helpertype = normal
stateno = 8000
ID = 8000
name = "recoil"
postype = p1
pos = 21,-65
size.xscale = .8
size.yscale = 1.4
ownpal = 1
facing = -1
supermovetime = 255

[State 1000, Explod]
type = Explod
trigger1 = animelem = 4
anim = 7502
ID = 7502
pos = 25,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = .5,.5
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause =1
;persistent =

[State 1000, tirando]
type = PlaySnd
trigger1 = AnimElem = 4
value = 171,4

[State 1000, ChangeState]
type = ChangeState
triggerall = numhelper(2244)
triggerall = helper, movecontact
trigger1 = time >= 3
trigger1 = power >= 1000
trigger1 = command = "Sairou Kyushuu"
value = 4200
ctrl = 0

[State 1000, ChangeState]
type = ChangeState
triggerall = numhelper(2244)
triggerall = helper, movecontact
trigger1 = time >= 3
trigger1 = power >= 2000
trigger1 = command = "Maki Shinki Hatsudou"
value = 3000
ctrl = 0

[State 1000, ChangeState]
type = ChangeState
triggerall = numhelper(2244)
triggerall = helper, movecontact
trigger1 = time >= 3
trigger1 = power >= 2000
trigger1 = command = "Kyouja Renbu"
value = 3500
ctrl = 0

[State 1000, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Shinki Hatsudou medium
[Statedef 1002]
type = S
movetype = A
physics = S
juggle = 5
poweradd = 50
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2

[State 1002, voz]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1,13

[State 1002, blast]
type=helper
trigger1= animelem=4
helpertype=normal
stateno=2244
ID=2244
name="blast"
postype=p1
pos= 160,-60
ownpal=1
size.xscale= .8
size.yscale= .8

[State 1002, recoil]
type = helper
trigger1 = AnimElem = 4
helpertype = normal
stateno = 8000
ID = 8000
name = "recoil"
postype = p1
pos = 21,-65
size.xscale = .8
size.yscale = 1.4
ownpal = 1
facing = -1
supermovetime = 255

[State 1002, Explod]
type = Explod
trigger1 = animelem = 4
anim = 7502
ID = 7502
pos = 25,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = .5,.5
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause =1
;persistent =

[State 1002, tirando]
type = PlaySnd
trigger1 = AnimElem = 4
value = 171,4

[State 1002, ChangeState]
type = ChangeState
triggerall = numhelper(2244)
triggerall = helper, movecontact
trigger1 = time >= 3
trigger1 = power >= 1000
trigger1 = command = "Sairou Kyushuu"
value = 4200
ctrl = 0

[State 1002, ChangeState]
type = ChangeState
triggerall = numhelper(2244)
triggerall = helper, movecontact
trigger1 = time >= 3
trigger1 = power >= 2000
trigger1 = command = "Maki Shinki Hatsudou"
value = 3000
ctrl = 0

[State 1002, ChangeState]
type = ChangeState
triggerall = numhelper(2244)
triggerall = helper, movecontact
trigger1 = time >= 3
trigger1 = power >= 2000
trigger1 = command = "Kyouja Renbu"
value = 3500
ctrl = 0

[State 1002, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Shinki Hatsudou strong
[Statedef 1003]
type = S
movetype = A
physics = S
juggle = 5
poweradd = 50
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2

[State 1003, voz]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1,13

[State 1003, blast]
type=helper
trigger1= animelem=4
helpertype=normal
stateno=2244
ID=2244
name="blast"
postype=p1
pos= 220,-60
ownpal=1
size.xscale= .8
size.yscale= .8

[State 1003, recoil]
type = helper
trigger1 = AnimElem = 4
helpertype = normal
stateno = 8000
ID = 8000
name = "recoil"
postype = p1
pos = 21,-65
size.xscale = .8
size.yscale = 1.4
ownpal = 1
facing = -1
supermovetime = 255

[State 1003, Explod]
type = Explod
trigger1 = animelem = 4
anim = 7502
ID = 7502
pos = 25,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = .5,.5
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause =1
;persistent =

[State 1003, tirando]
type = PlaySnd
trigger1 = AnimElem = 4
value = 171,4

[State 1003, ChangeState]
type = ChangeState
triggerall = numhelper(2244)
triggerall = helper, movecontact
trigger1 = time >= 3
trigger1 = power >= 1000
trigger1 = command = "Sairou Kyushuu"
value = 4200
ctrl = 0

[State 1003, ChangeState]
type = ChangeState
triggerall = numhelper(2244)
triggerall = helper, movecontact
trigger1 = time >= 3
trigger1 = power >= 2000
trigger1 = command = "Maki Shinki Hatsudou"
value = 3000
ctrl = 0

[State 1003, ChangeState]
type = ChangeState
triggerall = numhelper(2244)
triggerall = helper, movecontact
trigger1 = time >= 3
trigger1 = power >= 2000
trigger1 = command = "Kyouja Renbu"
value = 3500
ctrl = 0

[State 1003, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Ryujin Kyaku weak
[Statedef 1050]
type = A
movetype= A
physics = N
juggle = 5
velset = 0,0
ctrl = 0
poweradd = 50
anim = 6400
ctrl = 0
sprpriority = 2

[State 0, PosFreeze]
type = PosFreeze
trigger1 = time = [1,6]
value = 1

[State 0, VelSet]
type = VelSet
trigger1 = time > 7
x = 6
y = 5.5

[State 1050, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S1,15
volume = 0
channel = -1

[State 1050, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S7,5
volume = 10
channel = 1

[State 1050, 1]
type = HitDef
trigger1 != time
attr = S, NA
damage = 50, 10
animtype = Light
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 8, 10
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 59), var(36) := -33
hitsound = s2,13
guardsound = s2,4
ground.type = High
ground.slidetime = 5
ground.hittime = 12
ground.velocity = -4
airguard.velocity = -1.9,-.8
air.fall = 0
air.type = High
persistent = 0
air.velocity = -1.4,-3
air.hittime = 12
envshake.time = 10
envshake.ampl = 3

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 174

[State 1050, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1051
ctrl = 0

[State 1050, Changestate]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value =1072

;-------------------------------------------------------------------------------
;Ryujin Kyaku 1.5
[StateDef 1051]
type = A
movetype= A
physics = A
juggle = 0
velset = 0,0
anim = 43
ctrl = 0
poweradd = 20
sprpriority = 2

[State 1051, 2]
type = PlaySnd
trigger1 = Time = 0
value = 3,5

[State 1051, Velset]
type = VelSet
trigger1 = 1
x = -4

[State 1051, VelAdd]
type = VelAdd
trigger1 = animelem = 1
y = -6

[State 1051, ChangeState]
type = ChangeState
trigger1 = time >= 3
trigger1 = command = "Ryujin Kyaku medium"
value = 1060
ctrl = 0

[State 1051, ChangeState]
type = ChangeState
trigger1 = time >= 3
trigger1 = command = "Ryujin Kyaku 2.5"
value = 1062
ctrl = 0

[State 1051, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

;-------------------------------------------------------------------------------
; Ryujin Kyaku medium
[Statedef 1060]
type = A
movetype= A
physics = N
juggle = 5
velset = 0,0
ctrl = 0
poweradd = 50
anim = 6400
ctrl = 0
sprpriority = 2

[State 0, PosFreeze]
type = PosFreeze
trigger1 = time = [1,6]
value = 1

[State 0, VelSet]
type = VelSet
trigger1 = time > 7
x = 9.7
y = 8.2

[State 1060, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S1,15
volume = 0
channel = -1

[State 1060, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S7,5
volume = 10
channel = 1

[State 1060, 1]
type = HitDef
trigger1 != time
attr = S, NA
damage = 50, 10
animtype = Light
guardflag = MA
hitflag = HA
priority = 3, Hit
pausetime = 8, 12
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 59), var(36) := -33
hitsound =  s2,13
guardsound = s2,4
ground.type = High
ground.slidetime = 5
ground.hittime = 12
ground.velocity = -4
air.velocity = - 2.5,-2.5
airguard.velocity = -1.9,-.8
air.type = High
persistent = 0
fall = 0
fall.recover = 1
air.fall = 0
air.recover = 0
yaccel = .40
fall.recovertime = 30
envshake.time = 10
envshake.ampl = 3
ID = 1060

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 174

[State 1060, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1061
ctrl = 0

[State 1060, Changestate]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1072

;-------------------------------------------------------------------------------
;Ryujin Kyaku 2.5
[StateDef 1061]
type = A
movetype= A
physics = A
juggle = 0
velset = 0,0
anim = 42
ctrl = 0
sprpriority = 2

[State 1061, 2]
type = PlaySnd
trigger1 = Time = 0
value = 3,5

[State 1061, Velset]
type = VelSet
trigger1 = 1
x = 5

[State 1061, VelAdd]
type = VelAdd
trigger1 = animelem = 1
y = -8

[State 1061, ChangeState]
type = ChangeState
triggerall = p2dist x<0
trigger1 = time >= 20 ; 3
trigger1 = command = "Ryujin Kyaku 2.5"
value = 1062
ctrl = 0

[State 1061, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

;---------------------------------------------------------------------------
;Ryujin Kyaku medium (air kicks of SFEX2)
[Statedef 1062]
type = A
movetype= A
physics = N
juggle = 5
velset = 0,0
ctrl = 0
poweradd = 50
anim = 64001
ctrl = 0
sprpriority = 2

[State 0, PosFreeze]
type = PosFreeze
trigger1 = time = [1,6]
value = 1

[State 0, VelSet]
type = VelSet
trigger1 = time > 7
x = -9.7
y = 8.2

[State 1062, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S1,15
volume = 0
channel = -1

[State 1062, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S7,5
volume = 10
channel = 1

[State 1062, 1]
type = HitDef
trigger1 != time
attr = S, NA
damage = 50, 10
animtype = Light
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 8, 12
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := -59), var(36) := -33
hitsound =  s2,13
guardsound = s2,4
ground.type = High
ground.slidetime = 5
ground.hittime = 12
ground.velocity = 4
air.velocity = - 2.5,-2.5
airguard.velocity = -1.9,-.8
air.type = High
persistent = 0
fall = 0
fall.recover = 1
air.fall = 0
air.recover = 0
yaccel = .40
fall.recovertime = 30
envshake.time = 10
envshake.ampl = 3
ID = 1062

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 174

[State 1062, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1063
ctrl = 0

[State 1062, Changestate]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value =1073

;-------------------------------------------------------------------------------
;Ryujin Kyaku 2.5
[StateDef 1063]
type = A
movetype= A
physics = A
juggle = 0
velset = 0,0
anim = 420
ctrl = 0
poweradd = 20
sprpriority = 2

[State 1063, 2]
type = PlaySnd
trigger1 = Time = 0
value = 3,5

[State 1063, Velset]
type = VelSet
trigger1 = 1
x = -5

[State 1063, VelAdd]
type = VelAdd
trigger1 = animelem = 1
y = -8

[State 1063, ChangeState]
type = ChangeState
trigger1 = time >= 20; 3
trigger1 = command = "Ryujin Kyaku medium"
value = 1060
ctrl = 0

[State 1063, ChangeState]
type = ChangeState
trigger1 = time >= 20; 3
trigger1 = command = "Ryujin Kyaku 2.5"
value = 1062
ctrl = 0

[State 1063, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

;-------------------------------------------------------------------------------
;Ryujin Kyaku strong
[Statedef 1070]
type = A
movetype = A
physics = N
juggle = 3
velset = 0,0
ctrl = 0
poweradd = 50
anim = 6400
sprpriority = 2

[State 0, PosFreeze]
type = PosFreeze
trigger1 = time = [1,6]
value = 1

[State 0, VelSet]
type = VelSet
trigger1 = time > 7
x = 15
y = 8

[State 1070, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S1,15
volume = 0
channel = -1

[State 1070, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S7,5
volume = 10
channel = 1

[State 1070, 1]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
damage = 60, 10
animtype = Hard
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 5 ,Hit
pausetime = IfElse(var(21),6,12),ifElse(var(21),6,12)
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 59), var(36) := -33
hitsound =  s2,13
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -1
airguard.velocity = -1.9,-.8
air.type = High
persistent = 1
air.velocity = -1.4,-3
air.hittime = 12
fall = 0
envshake.time = 10
envshake.ampl = 3

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 174

[State 1070, Changestate]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1072

;---------------------------------------------------------------------------
;Ryujin Kyaku - Land
[Statedef 1072]
type = S
physics = S
ctrl = 0;Ifelse(prevstateno = 1070,1,0)
anim= 49

[State 1072, 1]
type = VelSet
trigger1 = Time = 0
y = 0
x = 5

[State 1072, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, Snd]
type=playsnd
trigger1= animelem = 2
value= 3, 4

[State 1072, Dust]
type=explod
trigger1= !time
anim=7102
ID=7102
sprpriority=-2
postype=p1
scale=.5,.5
ownpal=1
pausemovetime=-1
supermovetime=-1

[State 1072, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
;Ryujin Kyaku medium (air kicks of SFEX2) - Land
[Statedef 1073]
type = S
physics = S
ctrl = 0
anim=49

[State 1073, 2]
type = turn
trigger1 = Time = 0

[State 1073, 1]
type = VelSet
trigger1 = Time = 0
y = 0
x = 5

[State 1073, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, Snd]
type=playsnd
trigger1= animelem = 2
value= 3, 4

[State 1073, Dust]
type=explod
trigger1= !time
anim=7102
ID=7102
sprpriority=-2
postype=p1
scale=.5,.5
ownpal=1
pausemovetime=-1
supermovetime=-1

[State 1073, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Mekuu Zangeki weak - begin
[Statedef 1200]
type = S
movetype = A
physics = S
juggle = 7
poweradd = 90
velset = 0,0
anim = 1200
ctrl = 0
sprpriority = 2

[State 1200, vel]
type = VelSet
trigger1 = AnimElemTime(9) < 0
x = 1

[State 1200, dash]
type = PlaySnd
trigger1 = AnimElem = 3
value = 7,5

[State 1200, 2]
type = HitDef
trigger1 = animelem = 5
attr = S, SA
animtype = Medium
damage = 20,5
juggle = 15
air.juggle = 15
priority = 9999
guardflag = MA
pausetime = 9,9
guard.pausetime = 11, 11
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 100), var(36) := -93
hitsound = s2,12
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 30
ground.velocity = -3
guard.hittime = 15
air.velocity = -3,-1
p1stateno = 1201

[State 1200, CS]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------
; Mekuu Zangeki weak - Hit
[Statedef 1201]
type = S
movetype = A
physics = S
anim = 1201

[State 1201, AfterImage]
type=afterimage
trigger1=animelem=1
time=35
timegap=1
framegap=10
length=21
paladd=0,0,0
palmul=.75,.75,.75
palcontrast=128,128,128
palpostbright=0,0,0
trans=add1

[State 1201, vel]
type = VelSet
trigger1 = AnimElemTime(10) < 0
x = 1.5

[State 1210, voz]
type = PlaySnd
trigger1 = AnimElem = 5
value =  2000,19
channel = 0

[State 1201, efect]
type = PlaySnd
trigger1 = animelem = 18
value = 3,2

[State 1201, golpe]
type = PlaySnd
trigger1 = animelem = 7
trigger2 = animelem = 12
trigger3 = animelem = 19
value = 7,5

[State 1201, 2]
type = HitDef
trigger1 = animelem = 7
attr = S, SA
animtype = Medium
damage = 20, 5
guardflag = MA
pausetime = 9,9
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 100), var(36) := -43
hitsound = s2,12
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -3
air.velocity = -3,-1

[State 1201, 2]
type = HitDef
trigger1 = animelem = 12
attr = S, SA
animtype = Medium
damage = 20
guardflag = MA
pausetime = 9,9
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 100), var(36) := -93
hitsound = s2,12
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -3
air.velocity = -3,-1

[State 1201, 2]
type = HitDef
trigger1 = animelem = 19
attr = S, SA
animtype = Medium
damage = 30
guardflag = MA
pausetime = 25,25
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 100), var(36) := -43
hitsound = s2,13
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -2,-3
air.velocity = -5,-3
fall = 1
air.fall = 1
ground.type=High
envshake.time = 10
envshake.ampl = 3
fall.recover = 0

[State 1201, efect]
type = explod
trigger1 = AnimElem = 19
persistent = 0
anim = 1605
pos = 35,-35
scale = .6, .7
postype = p1
removetime = 22
sprpriority = 2

[State 1201, CS]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Mekuu Zangeki medium - begin
[Statedef 1205]
type = S
movetype = A
physics = S
juggle = 7
poweradd = 90
velset = 0,0
anim = 1200
ctrl = 0
sprpriority = 2

[State 1205, vel]
type = VelSet
trigger1 = AnimElemTime(9) < 0
x = 1.5

[State 1205, dash]
type = PlaySnd
trigger1 = AnimElem = 3
value = 7,5

[State 1205, 2]
type = HitDef
trigger1 = animelem = 5
attr = S, SA
animtype = Medium
damage = 20,5
juggle = 15
air.juggle = 15
priority = 9999
guardflag = MA
pausetime = 9,9
guard.pausetime = 11, 11
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 100), var(36) := -93
hitsound = s2,12
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -3
air.velocity = -3,-1
p1stateno = 1206

[State 1205, CS]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------
; Mekuu Zangeki medium - Hit
[Statedef 1206]
type = S
movetype = A
physics = S
anim = 1250

[State 1206, AfterImage]
type=afterimage
trigger1=animelem=1
time=35
timegap=1
framegap=10
length=21
paladd=0,0,0
palmul=.75,.75,.75
palcontrast=128,128,128
palpostbright=0,0,0
trans=add1

[State 1206, vel]
type = VelSet
trigger1 = AnimElemTime(22) < 0
x = 3

[State 1206, golpe]
type = PlaySnd
trigger1 = animelem = 8
trigger2 = animelem = 15
trigger3 = animelem = 20
value = 7,5

[State 1210, voz]
type = PlaySnd
trigger1 = AnimElem = 5
value =  2000,19
channel = 0

[State 1206, efect]
type = PlaySnd
trigger1 = animelem = 19
value = 3,2

[State 1206, 2]
type = HitDef
trigger1 = animelem = 8
attr = S, SA
animtype = Medium
damage = 20
guardflag = MA
pausetime = 9,9
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 100), var(36) := -15
hitsound = s2,11
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -4
air.velocity = -4,-1

[State 1206, 2]
type = HitDef
trigger1 = animelem = 15
attr = S, SA
animtype = Medium
damage = 20
guardflag = MA
pausetime = 9,9
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 100), var(36) := -65
hitsound = s2,12
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -4
air.velocity = -4,-1

[State 1206, 2]
type = HitDef
trigger1 = animelem = 19
attr = A, SA
animtype = Medium
damage = 20
guardflag = MA
pausetime = 12,12
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 170), var(36) := -90
hitsound = s2,13
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -4,-5
air.velocity = -4,-5
air.fall = 1
fall = 1
envshake.time = 10
envshake.ampl = 3
fall.recover = 0

[State 1206, Explod]
type = Explod
trigger1 = animelem = 16
anim = 7900
ID = 7900
pos = 35,-5
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = 20
scale = .8,.8
sprpriority = 2
ownpal = 1
removeongethit = 1
ignorehitpause =0
;persistent =

[State 1206, efect]
type = PlaySnd
trigger1 = AnimElem = 17
value = 3,2

[State 1206, CS]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Mekuu Zangeki strong - begin
[Statedef 1210]
type = S
movetype = A
physics = S
juggle = 7
poweradd = 90
velset = 0,0
anim = 1200
ctrl = 0
sprpriority = 2

[State 1210, vel]
type = VelSet
trigger1 = AnimElemTime(9) < 0
x = 2

[State 1210, dash]
type = PlaySnd
trigger1 = AnimElem = 3
value = 7,5

[State 1210, 2]
type = HitDef
trigger1 = animelem = 5
attr = S, SA
animtype = Medium
damage = 20,5
juggle = 15
air.juggle = 15
priority = 9999
guardflag = MA
pausetime = 9,9
guard.pausetime = 11, 11
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 100), var(36) := -93
hitsound = s2,12
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -3
air.velocity = -3,-1
p1stateno = 1211

[State 1210, CS]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------
; Mekuu Zangeki strong - hit
[Statedef 1211]
type = S
movetype = A
physics = S
anim = 1251

[State 1211, AfterImage]
type=afterimage
trigger1=animelem=1
time=45
timegap=1
framegap=10
length=21
paladd=0,0,0
palmul=.75,.75,.75
palcontrast=128,128,128
palpostbright=0,0,0
trans=add1

[State 1211, vel]
type = VelSet
trigger1 = AnimElemTime(22) < 0
x = 3

[State 1210, voz]
type = PlaySnd
trigger1 = AnimElem = 6
value =  2000,19
channel = 0

[State 1211, efect]
type = PlaySnd
trigger1 = animelem = 26
value = 3,2

[State 1211, golpe]
type = PlaySnd
trigger1 = animelem = 7
trigger2 = animelem = 13
trigger3 = animelem = 19
trigger4 = animelem = 26
value = 7,2

[State 1211, 2]
type = HitDef
trigger1 = animelem = 7
attr = S, SA
animtype = Medium
damage = 20
guardflag = MA
pausetime = 9,9
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 170), var(36) := -70
hitsound = s2,1
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -4
air.velocity = -4,-1

[State 1211, 2]
type = HitDef
trigger1 = animelem = 13
attr = S, SA
animtype = Medium
damage = 20
guardflag = MA
pausetime = 9,9
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 170), var(36) := -70
hitsound = s2,2
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -4
air.velocity = -4,-1

[State 1211, 2]
type = HitDef
trigger1 = animelem = 19
attr = S, SA
animtype = Medium
damage = 20
guardflag = MA
pausetime = 9,9
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 170), var(36) := -70
hitsound = s2,2
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -4
air.velocity = -4,-1

[State 1211, 2]
type = HitDef
trigger1 = animelem = 26
attr = A, SA
animtype = Medium
damage = 20
guardflag = MA
pausetime = 9,9
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 170), var(36) := -50
hitsound = s2,2
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -4,-5
air.velocity = -4,-5
air.fall = 1
fall = 1
envshake.time = 10
envshake.ampl = 3
fall.recover = 0

[State 1211, efect]
type = explod
trigger1 = AnimElem = 26
persistent = 0
anim = 1610
pos = 30,-85
scale = .5, .5
postype = p1
sprpriority = 6

[State 1211, CS]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Mouryou Kasen weak
[Statedef 1400]
type = S
movetype= A
physics = S
poweradd = 30
ctrl = 0
anim = 1400
;juggle = 8

[State 1400, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 7,5
channel =0

[State 1400 , 3]
type = ChangeState
trigger1 = Animtime = 0
value = 1401

;-------------------------------------------------------------------------------
[Statedef 1401]
type = a
movetype= A
physics = a
poweradd = 30
ctrl = 0
anim = 1401
velset = 1,-6

[State 1401, Dust]
type = helper
trigger1 = animelem = 1
helpertype = normal
stateno = 7100
ID = 7100
name = "Dust"
postype = p1
pos = 0,0
ownpal = 1

[State 1401, PlaySnd]
type = veladd
trigger1 = TIME>=17
y = 0

[State 1401, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA
damage = 30, 5
animtype = back
guardflag = ma
hitflag = Ma
priority = 3, Hit
pausetime = 8, 8
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 170), var(36) := -50
hitsound = s2,12
guardsound = s2,4
ground.type = HIGH
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -.4,-5
air.velocity = -.4,-4
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 20,20
givepower =25,25
envshake.time = 10
envshake.ampl = 3

[State 1401, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1,13
volume = 50

[State 1401, varset]
type = varset
trigger1 = time=2
trigger1 = command = "a"
trigger2 = command = "holdback"
var(13)=1

[State 1401, ChangeState]
type = ChangeState
trigger1 = time >= 13
trigger1 = command = "holdfwd"
value = 1404
ctrl = 0

[State 1401 , 3]
type = ChangeState
trigger1 = AnimElem = 4
trigger1 = var(13)=1
value = 1402

;-------------------------------------------------------------------------------
[Statedef 1402]
type = a
movetype= A
physics = a
poweradd = 30
ctrl = 0
anim = 1402
velset = 1.5,0

[State 1402, PlaySnd]
type = velset
trigger1 = TIME<11
y = -2

[State 1402, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 7,5

[State 1402, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA
damage = 30, 5
animtype = back
guardflag = ma
hitflag = Ma
priority = 3, Hit
pausetime = 8, 8
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 170), var(36) := -50
hitsound = s2,12
guardsound = s2,4
ground.type = HIGH
ground.slidetime = 21
ground.hittime = 21
ground.velocity = 0,-1
air.velocity = 0,-5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 20,20
givepower =25,25
envshake.time = 10
envshake.ampl = 3

[State 1402, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1,13

[State 1402, PlaySnd]
type = varset
trigger1 = time=1
var(13)=0

[State 1402, PlaySnd]
type = varset
trigger1 = time=2
trigger1 = command = "a"
trigger2 = command = "holdback"
var(13)=1

[State 1402, ChangeState]
type = ChangeState
trigger1 = time >= 13
trigger1 = command = "holdfwd"
value = 1404
ctrl = 0

[State 1402 , 3]
type = ChangeState
trigger1 = AnimElem = 5
trigger1 = var(13)=1
value = 1403

;-------------------------------------------------------------------------------
[Statedef 1403]
type = a
movetype= A
physics = a
poweradd = 30
ctrl = 0
anim = 1404
velset = 1.5,-1

[State 1403, PlaySnd]
type = velset
trigger1 = TIME<10
y = -2

[State 1403, PlaySnd]
type = veladd
trigger1 = TIME>2
y = 0

[State 1403, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 7,5
channel =0

[State 1403, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA
damage = 30, 5
animtype = back
guardflag = ma
hitflag = Ma
priority = 3, Hit
pausetime = 8, 8
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 170), var(36) := -50
hitsound = s2,12
guardsound = s2,4
ground.type = HIGH
ground.slidetime = 21
ground.hittime = 21
ground.velocity = .5, -3
air.velocity = -.5,-5.5
air.hittime = 200
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 20,20
givepower =25,25
envshake.time = 10
envshake.ampl = 3

[State 1403, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1,13

[State 1403, PlaySnd]
type = varset
trigger1 = time=0
var(13)=0

[State 1403, PlaySnd]
type = varset
trigger1 = time=2
trigger1 = command = "a"
trigger2 = command = "holdback"
var(13)=1

[State 1403, ChangeState]
type = ChangeState
trigger1 = time >= 13
trigger1 = command = "holdfwd"
value = 1404
ctrl = 0

[State 1403 , 3]
type = ChangeState
trigger1 = AnimElem = 5
trigger1 = var(13)=1
value = 1404

;-------------------------------------------------------------------------------
[Statedef 1404]
type = a
movetype= A
physics = a
poweradd = 30
ctrl = 0
anim = 1405
velset = 2,-1

[State 1404, ExShadow]
type = afterimage
triggerall = prevstateno = 1421
trigger1 = time = 1
time = 35
timegap = 1
framegap = 1
length = 8
palbright = 32, 32, 0
palcontrast = 128, 128, 128
paladd = -10, -10, -10
palmul = 1.1, 1, 0.5
trans = add
ignorehitpause = 1

[State 1404, ExFlash]
type = palfx
triggerall = prevstateno = 1421
trigger1 = -1
time = 1
add = 32 + ceil(sin(gametime / 1.5) * 32), 32 + ceil(sin(gametime / 1.5) * 32), 0
mul = 300, 300, 200
ignorehitpause = 1

[State 1404, Woosh FX]
type = removeExplod
trigger1 = time = 0
ID = 1422

[State 1404, PlaySnd]
type = posadd
triggerall = prevstateno = 1421
trigger1 = TIME = 0
y = -6

[State 1404, PlaySnd]
type = velset
trigger1 = TIME<11
y = -2

[State 1404, PlaySnd]
type = veladd
trigger1 = TIME>11
y = 0

[State 1404, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 7,5

[State 1404, 1]
type = HitDef
trigger1 = animelem = 5
attr = S, Na
damage = 50, 10
animtype = daiup
guardflag = MAF
hitflag = MAF
priority = 3, Hit
pausetime = 18,18
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 170), var(36) := -50
hitsound = s2,13
guardsound = s2,4
ground.type = low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -2,-4
air.velocity = -4,6
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall=1
air.fall=1
envshake.ampl = 4
envshake.freq = 120
envshake.time = 5
fall.recover = 0
getpower = 20,20
givepower =25,25
envshake.time = 10
envshake.ampl = 3

[State 1414, efect]
type = explod
trigger1 = AnimElem = 4
persistent = 0
anim = 1105
pos = 0,0
scale = .4, .4
postype = p1
removetime = 9
sprpriority = 2
removeongethit = 1

[State 1414, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1,14
channel = 0

[State 1500, End]
type=changestate
trigger1= animelem = 6
value = 1415

;-------------------------------------------------------------------------------
;Mouryou Kasen medium
[Statedef 1405]
type = S
movetype= A
physics = S
poweradd = 30
ctrl = 0
anim = 1400
;juggle = 8

[State 1405, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 7,5
channel =0

[State 1405 , 3]
type = ChangeState
trigger1 = Animtime = 0
value = 1406

;-------------------------------------------------------------------------------
[Statedef 1406]
type = a
movetype= A
physics = a
poweradd = 30
ctrl = 0
anim = 1401
velset = 3,-5

[State 1406, Dust]
type = helper
trigger1 = animelem = 1
helpertype = normal
stateno = 7100
ID = 7100
name = "Dust"
postype = p1
pos = 0,0
ownpal = 1

[State 1406, PlaySnd]
type = veladd
trigger1 = TIME>=14
y = 0

[State 1406, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA
damage = 30, 5
animtype = back
guardflag = ma
hitflag = Ma
priority = 3, Hit
pausetime = 8, 8
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 170), var(36) := -50
hitsound = s2,12
guardsound = s2,4
ground.type = HIGH
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -1,-5
air.velocity = -1,-4
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 20,20
givepower =25,25
envshake.time = 10
envshake.ampl = 3

[State 1406, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1,13
volume = 50
;channel =12

[State 1406, PlaySnd]
type = varset
trigger1 = time >= 2
trigger1 = command = "b"
trigger2 = command = "holdback"
var(13)=1

[State 1406, ChangeState]
type = ChangeState
trigger1 = time >= 13
trigger1 = command = "holdfwd"
value = 1409
ctrl = 0

[State 1406 , 3]
type = ChangeState
trigger1 = AnimElem = 4
trigger1 = var(13)=1
value = 1407

;-------------------------------------------------------------------------------
[Statedef 1407]
type = a
movetype= A
physics = a
poweradd = 30
ctrl = 0
anim = 1402
velset = 2,1

[State 1407, PlaySnd]
type = velset
trigger1 = TIME<12
y = -1.5

[State 1407, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 7,5
channel =0

[State 1407, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA
damage = 30, 5
animtype = back
guardflag = ma
hitflag = Ma
priority = 3, Hit
pausetime = 8,8
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 170), var(36) := -50
hitsound = s2,12
guardsound = s2,4
ground.type = HIGH
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -1,-5
air.velocity = -1,-4
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 20,20
givepower =25,25
envshake.time = 10
envshake.ampl = 3

[State 1407, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1,13
volume = 50
;channel =12

[State 1407, PlaySnd]
type = varset
trigger1 = time=0
var(13)=0

[State 1407, PlaySnd]
type = varset
trigger1 = time >= 2
trigger1 = command = "b"
trigger2 = command = "holdback"
var(13)=1

[State 1407, ChangeState]
type = ChangeState
trigger1 = time >= 13
trigger1 = command = "holdfwd"
value = 1409
ctrl = 0

[State 1407 , 3]
type = ChangeState
trigger1 = AnimElem = 5
trigger1 = var(13)=1
value = 1408

;-------------------------------------------------------------------------------
[Statedef 1408]
type = a
movetype= A
physics = a
poweradd = 30
ctrl = 0
anim = 1404
velset = 2,0

[State 1408, PlaySnd]
type = velset
trigger1 = TIME<17
y = -1.1

[State 1408, PlaySnd]
type = veladd
trigger1 = TIME>4
y = 0

[State 1408, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 7,5
channel =0

[State 1408, 1]
type = HitDef
trigger1 = time = 0
attr = S, Na
damage = 30, 5
animtype = back
guardflag = ma
hitflag = Ma
priority = 3, Hit
pausetime = 8,8
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 170), var(36) := -50
hitsound = s2,12
guardsound = s2,4
ground.type = HIGH
ground.slidetime = 21
ground.hittime = 21
ground.velocity = 1, -3
air.velocity = -3,-5
air.hittime = 200
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 20,20
givepower =25,25
envshake.time = 10
envshake.ampl = 3

[State 1408, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1,13
volume = 50
;channel =12

[State 1408, PlaySnd]
type = varset
trigger1 = time=0
var(13)=0

[State 1408, PlaySnd]
type = varset
trigger1 = time >= 2
trigger1 = command = "b"
trigger2 = command = "holdback"
var(13)=1

[State 1408, ChangeState]
type = ChangeState
trigger1 = time >= 13
trigger1 = command = "holdfwd"
value = 1409
ctrl = 0

[State 1408 , 3]
type = ChangeState
trigger1 = AnimElem = 5
trigger1 = var(13)=1
value = 1409

;-------------------------------------------------------------------------------
[Statedef 1409]
type = a
movetype= A
physics = a
poweradd = 30
ctrl = 0
anim = 1405
velset = 4,-1

[State 1409, PlaySnd]
type = velset
trigger1 = TIME<11
y = -1

[State 1409, PlaySnd]
type = veladd
trigger1 = TIME>14
y = 0

[State 1409, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 7,5

[State 1409, 1]
type = HitDef
trigger1 = animelem = 4
attr = S, Na
damage = 50, 10
animtype = daiup
guardflag = MAF
hitflag = MAF
priority = 3, Hit
pausetime = 18,18
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 170), var(36) := -50
hitsound = s2,13
guardsound = s2,4
ground.type = low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -2,-4
air.velocity = -4,6
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall=1
air.fall=1
envshake.ampl = 4
envshake.freq = 120
envshake.time = 5
fall.recover = 0
getpower = 20,20
givepower =25,25
envshake.time = 10
envshake.ampl = 3

[State 1409, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 6,14
channel =11

[State 1414, efect]
type = explod
trigger1 = AnimElem = 4
persistent = 0
anim = 1105
pos = 0,0
scale = .4, .4
postype = p1
removetime = 9
sprpriority = 2
removeongethit = 1

[State 1414, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1,14
channel = 0

[State 1500, End]
type=changestate
trigger1= animelem = 6
value = 1415

;-------------------------------------------------------------------------------
;Mouryou Kasen strong
[Statedef 1410]
type = S
movetype= A
physics = S
poweradd = 30
ctrl = 0
anim = 1400
;juggle = 8

[State 1410, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 7,5
channel =0

[State 1410 , 3]
type = ChangeState
trigger1 = Animtime = 0
value = 1411

;-------------------------------------------------------------------------------
[Statedef 1411]
type = a
movetype= A
physics = a
poweradd = 30
ctrl = 0
anim = 1401
velset = 3,-4.5

[State 1411, Dust]
type = helper
trigger1 = animelem = 1
helpertype = normal
stateno = 7100
ID = 7100
name = "Dust"
postype = p1
pos = 0,0
ownpal = 1

[State 1411, PlaySnd]
type = veladd
trigger1 = TIME>=14
y = -.1

[State 1411, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA
damage = 30, 5
animtype = back
guardflag = ma
hitflag = Ma
priority = 3, Hit
pausetime = 8,8
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -30 + 0 * (var(35) := 170), var(36) := -50
hitsound = s2,12
guardsound = s2,4
ground.type = HIGH
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -3
air.velocity = -2,-4
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 20,20
givepower =25,25
envshake.time = 10
envshake.ampl = 3

[State 1411, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1,13
volume = 50
;channel =12

[State 1411, PlaySnd]
type = varset
trigger1 = time=[3,9]
trigger1 = time >= 2
trigger1 = command = "c"
trigger2 = command = "holdback"
var(13)=1

[State 1411, ChangeState]
type = ChangeState
trigger1 = time >= 13
trigger1 = command = "holdfwd"
value = 1414
ctrl = 0

[State 1411 , 3]
type = ChangeState
trigger1 = AnimElem = 4
trigger1 = var(13)=1
value = 1412

;-------------------------------------------------------------------------------
[Statedef 1412]
type = a
movetype= A
physics = a
poweradd = 30
ctrl = 0
anim = 1402
velset = 3,-6

[State 1412, PlaySnd]
type = velset
trigger1 = TIME<14
y = -.2

[State 1412, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 7,5
channel =0

[State 1412, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA
damage = 30, 5
animtype = back
guardflag = ma
hitflag = Ma
priority = 3, Hit
pausetime = 8,8
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -30 + 0 * (var(35) := 170), var(36) := -50
hitsound = s2,12
guardsound = s2,4
ground.type = HIGH
ground.slidetime = 27
ground.hittime = 21
ground.velocity = -5
air.velocity = -2,-5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 20,20
givepower =25,25
envshake.time = 10
envshake.ampl = 3

[State 1412, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1,13
volume = 50
;channel =12

[State 1412, PlaySnd]
type = varset
trigger1 = time=0
var(13)=0

[State 1412, PlaySnd]
type = varset
trigger1 = time=2
trigger1 = time >= 13
trigger1 = command = "c"
trigger2 = command = "holdback"
var(13)=1

[State 1412, ChangeState]
type = ChangeState
trigger1 = time >= 13
trigger1 = command = "holdfwd"
value = 1414
ctrl = 0

[State 1412 , 3]
type = ChangeState
trigger1 = AnimElem = 5
trigger1 = var(13)=1
value = 1413

;-------------------------------------------------------------------------------
[Statedef 1413]
type = a
movetype= A
physics = a
poweradd = 30
ctrl = 0
anim = 1404
velset = 3.2,0

[State 1413, PlaySnd]
type = velset
trigger1 = TIME<12
y = -.4

[State 1413, PlaySnd]
type = veladd
trigger1 = TIME>2
y = 0

[State 1413, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 7,5
channel =0

[State 1413, 1]
type = HitDef
trigger1 = time = 0
attr = S, Na
damage = 30, 5
animtype = back
guardflag = ma
hitflag = Ma
priority = 3, Hit
pausetime = 8,8
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -30 + 0 * (var(35) := 170), var(36) := -50
hitsound = s2,12
guardsound = s2,4
ground.type = HIGH
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -3
air.velocity = -2,-4
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 20,20
givepower =25,25
envshake.time = 10
envshake.ampl = 3

[State 1413, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1,13
volume = 50
;channel =12

[State 1413, PlaySnd]
type = varset
trigger1 = time=0
var(13)=0

[State 1413, PlaySnd]
type = varset
trigger1 = time=2
trigger1 = command = "c"
trigger2 = command = "holdback"
var(13)=1

[State 1413, ChangeState]
type = ChangeState
trigger1 = time >= 13
trigger1 = command = "holdfwd"
value = 1414
ctrl = 0

[State 1413 , 3]
type = ChangeState
trigger1 = AnimElem = 5
trigger1 = var(13)=1
value = 1414

;-------------------------------------------------------------------------------
[Statedef 1414]
type = a
movetype= A
physics = a
poweradd = 30
ctrl = 0
anim = 1405
velset = 3,-4

[State 1412, PlaySnd]
type = velset
trigger1 = TIME<14
y = -.9

[State 1414, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 7,5

[State 1414, 1]
type = HitDef
trigger1 = animelem = 5
attr = S, Na
damage = 50, 10
animtype = daiup
guardflag = MAF
hitflag = MAF
priority = 3, Hit
pausetime = 14,14
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -30 + 0 * (var(35) := 70), var(36) := -50
hitsound = s2,13
guardsound = s2,4
ground.type = low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -6,-4
air.velocity = -4,-3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall=1
air.fall=1
envshake.ampl = 4
envshake.freq = 120
envshake.time = 5
fall.recover = 0
getpower = 20,20
givepower =25,25
envshake.time = 10
envshake.ampl = 3
p1stateno = 1415

[State 1414, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 6,14
channel =11

[State 1414, efect]
type = explod
trigger1 = AnimElem = 4
persistent = 0
anim = 1105
pos = 0,0
scale = .4, .4
postype = p1
removetime = 9
sprpriority = 2
removeongethit = 1

[State 1414, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1,14
channel = 0

[State 1500, End]
type=changestate
trigger1= animelem = 6
value = 1415

;-------------------------------------------------------------------------------
;Moryu Kasen end
[Statedef 1415]
type = a
movetype= A
physics = a
poweradd = 30
ctrl = 0
anim = 1406
velset = 3,0

[State 1414, PlaySnd]
type = PlaySnd
trigger1 = 1
value = 0,0

;-------------------------------------------------------------------------------
;Makuu Shihai
[Statedef 1500]
type=S
physics=N
movetype=I
anim=13000
velset=0,0
ctrl=0
sprpriority=-1
facep2=1

[State 1500, strengthvar]
type=varset
trigger1= !Time && var(7)<1
var(41)=ifelse(command="df2p",3,ifelse(command="df2k",2,ifelse(command="db2p",-3,-2)))

[State 1500, afterimage]
type=afterimage
trigger1=animelem=1
time=8
timegap=1
framegap=3
length=10
palbright=0,0,0
paladd=0,0,0
palmul=.9,.9,.9
palcontrast=160,160,160
palpostbright=0,0,0
trans=add1

[State 1500, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2

[State 1500, Vel]
type=velset
trigger1= animelemtime(2)>0 && animelemtime(6)<0
x=ifelse(var(41)=3,-7,ifelse(var(41)=2,-4,ifelse(var(41)=-3,7,4)))*sin((time-2)/2)

[State 1500, Vel]
type=velset
trigger1= animelem=6
x=ifelse(var(41)=3,14,ifelse(var(41)=2,9,ifelse(var(41)=-3,-14,-9)))

[State 1500, Vel]
type=velmul
trigger1= animelemtime(6)>ifelse((var(41)=3 || var(41)=-3),16,9)
trigger2= animelemtime(7)>ifelse((var(41)=3 || var(41)=-3),16,9)
x=.9

[State 1500, Snd]
type=playsnd
trigger1= animelem=6
value=13000,0
persistent=0

[State 1500, Snd]
type=playsnd
trigger1= animelem=4
value=0,101
persistent=0

[State 1500, push]
type=playerpush
trigger1= animelemtime(3)>=0
value=0

[State 1500, nothitby]
type=nothitby
triggerall= (animelemtime(6)<=ifelse((var(41)=3 || var(40)=-3),35,20)||animelemtime(7)<=ifelse((var(41)=3 || var(41)=-3),35,20))
trigger1= animelemtime(6)<0 || animelemtime(7)<0
trigger2= vel x<0 && backedgebodydist > ifelse((var(41)=3 || var(41)=-3), 14, 9)
trigger3= vel x>0 && frontedgebodydist> ifelse((var(41)=3 || var(41)=-3), 14, 9)
value=SCA,AA,AP,AT
time=1
ignorehitpause=1

[State 1500, Turn]
type=turn
trigger1= animelemtime(6)>0 && p2dist x<0

;[State 1500, explod]
;type = Explod
;triggerall = var(41)= 2
;trigger1 = animelem = 6
;anim = 1274
;ID = 3647
;pos = -50,0
;postype = p1  ;p2,front,back,left,right
;facing = 1
;p2facing = 1
;bindtime = -1
;removetime = 30
;scale = .9,.9
;sprpriority = -1
;removeongethit = 1
;ignorehitpause =1
;persistent =

[State 1500, explod]
type = Explod
triggerall = var(41)= 3
trigger1 = animelem = 6
anim = 1274
ID = 3647
pos = -50,0
postype = p1  ;p2,front,back,left,right
facing = 1
p2facing = 1
bindtime = -1
removetime = 30
scale = .9,.9
sprpriority = -1
removeongethit = 1
ignorehitpause =1
;persistent =

;[State 1500, explod]
;type = Explod
;triggerall = var(41)=-2
;trigger1 = animelem = 6
;anim = 1275
;ID = 3647
;pos = 50,0
;postype = p1  ;p2,front,back,left,right
;facing = 1
;p2facing = 1
;bindtime = -1
;removetime = 30
;scale = .9,.9
;sprpriority = -1
;removeongethit = 1
;ignorehitpause =1
;persistent =

[State 1500, explod]
type = Explod
triggerall = var(41)=-3
trigger1 = animelem = 6
anim = 1275
ID = 3647
pos = 50,0
postype = p1  ;p2,front,back,left,right
facing = 1
p2facing = 1
bindtime = -1
removetime = 30
scale = .9,.9
sprpriority = -1
removeongethit = 1
ignorehitpause =1
;persistent =

[State 1500, End]
type=changestate
trigger1= animelemtime(6)=ifelse((var(41)=3 || var(41)=-3),40,25)
trigger2= animelemtime(6)>0 && vel x<0 && backedgebodydist<=0
trigger3= animelemtime(6)>0 && vel x>0 && frontedgebodydist<=0
trigger4= animelemtime(7)=ifelse((var(41)=2 || var(41)=-2),40,25)
trigger5= animelemtime(7)>0 && vel x<0 && backedgebodydist<=0
trigger6= animelemtime(7)>0 && vel x>0 && frontedgebodydist<=0
value=1501
ctrl=0

;--------------------------------------------------------------------------
[Statedef 1501]
type=S
physics=N
movetype=I
velset=0,0
ctrl=0
sprpriority=-1
facep2=1

[State 1, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 3647

[State 1501, End]
type=changestate
trigger1= time = 0
value=0
ctrl=1

;---------------------------------------------------------------------------
;Makuu Shihai Teleport - I
[Statedef 1510]
type=U
movetype=I
physics=N
velset=0,0
ctrl=0

[state 1510,2]
type=changeanim
trigger1=!time
value=1510

[state 1510,3]
type=nothitby
trigger1=animelemno(0)=[1,18]
value=SCA
time=1

[state 1510,3]
type=playerpush
trigger1=animelemtime(16)<0
value=0

[State 1510,4]
type=assertspecial
trigger1=1
flag=noshadow

[state 1510,4]
type=trans
trigger1=animelemno(0)=[1,12]
trans=addalpha
alpha=ceil(256-25*time),25*time

[state 1510,5]
type=trans
trigger1=animelemno(0)=[14,17]
trans=addalpha
alpha=(20*(animelemtime(14))),(256-20*(animelemtime(14)))

[state 1510,statetypeset]
type=statetypeset
trigger1=!animelemtime(14)
statetype=A

[state 1510,facing]
type=turn
trigger1=!animelemtime(14)
trigger1=p2dist x<0
persistent=0

[state 1510,6]
type=veladd
trigger1=animelemtime(18)>0
y=const(movement.yaccel)

[state 1510,6]
type=posadd
trigger1=animelemno(0)=13
x= 20

[state 1510,ctrl]
type=ctrlset
trigger1=animelemtime(18)>=0
value=1

[state 1510,0]
type=playsnd
trigger1=!animelemtime(1)
value=s4,16
channel=0

[state 1510,0]
type=playsnd
trigger1=!animelemtime(16)
value=s1,0
channel=0

[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 3890
ID = 3890
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
;ignorehitpause =
;persistent =

[state 1510,0]
type=changestate
trigger1=animelemtime(18)>0
trigger1=pos y>=0&&vel y>0
value=1514
ctrl=0

;---------------------------------------------------------------------------
;Makuu Shihai Teleport - II
[Statedef 1511]
type=U
movetype=I
physics=N
velset=0,0
ctrl=0

[state 1511,2]
type=changeanim
trigger1=!time
value=1510

[state 1511,3]
type=nothitby
trigger1=animelemno(0)=[1,18]
value=SCA
time=1

[state 1511,3]
type=playerpush
trigger1=animelemtime(16)<0
value=0

[State 1511,4]
type=assertspecial
trigger1=1
flag=noshadow

[state 1511,4]
type=trans
trigger1=animelemno(0)=[1,12]
trans=addalpha
alpha=ceil(256-25*time),25*time

[state 1511,5]
type=trans
trigger1=animelemno(0)=[14,17]
trans=addalpha
alpha=(20*(animelemtime(14))),(256-20*(animelemtime(14)))

[state 1511,statetypeset]
type=statetypeset
trigger1=!animelemtime(14)
statetype=A

[state 1511,facing]
type=turn
trigger1=!animelemtime(14)
trigger1=p2dist x<0
persistent=0

[state 1511,6]
type=veladd
trigger1=animelemtime(18)>0
y=const(movement.yaccel)

[state 1511,6]
type=posadd
trigger1=animelemno(0)=13
x= -20

[state 1511,ctrl]
type=ctrlset
trigger1=animelemtime(18)>=0
value=1

[state 1511,0]
type=playsnd
trigger1=!animelemtime(1)
value=s4,16
channel=0

[state 1511,0]
type=playsnd
trigger1=!animelemtime(16)
value=s1,0
channel=0

[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 3890
ID = 3890
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
;ignorehitpause =
;persistent =

[state 1511,0]
type=changestate
trigger1=animelemtime(18)>0
trigger1=pos y>=0&&vel y>0
value=1514
ctrl=0

;---------------------------------------------------------------------------
;Makuu Shihai Air Teleport - I
[Statedef 1512]
type=U
movetype=I
physics=N
velset=0,0
ctrl=0

[state 1512,2]
type=changeanim
trigger1=!time
value=1510

[state 1512,3]
type=nothitby
trigger1=animelemno(0)=[1,18]
value=SCA
time=1

[state 1512,3]
type=playerpush
trigger1=animelemtime(16)<0
value=0

[State 1512,4]
type=assertspecial
trigger1=1
flag=noshadow

[state 1512,4]
type=trans
trigger1=animelemno(0)=[1,12]
trans=addalpha
alpha=ceil(256-25*time),25*time

[state 1512,5]
type=trans
trigger1=animelemno(0)=[14,17]
trans=addalpha
alpha=(20*(animelemtime(14))),(256-20*(animelemtime(14)))

[state 1512,statetypeset]
type=statetypeset
trigger1=!animelemtime(14)
statetype=A

[state 1512,facing]
type=turn
trigger1=!animelemtime(14)
trigger1=p2dist x<0
persistent=0

[state 1512,6]
type=posadd
trigger1=animelemno(0)=13
x=20
y=-6

[state 1512,ctrl]
type=ctrlset
trigger1=animelemtime(17)>=0
value=1

[state 1512,0]
type=playsnd
trigger1=!animelemtime(1)
value=s4,16
channel=0

[state 1512,0]
type=playsnd
trigger1=!animelemtime(16)
value=s1,0
channel=0

[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 3890
ID = 3890
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
;ignorehitpause =
;persistent =

[State 1512, Gravity]
type = Veladd
trigger1 = AnimElemTime(18) >= 0
y = .50*const(size.yscale)

[state 1512,0]
type= changestate
trigger1=animelemtime(18)>0
trigger1=pos y>=0&&vel y>0
value=1514
ctrl=0

;---------------------------------------------------------------------------
;Makuu Shihai Air Teleport - II
[Statedef 1513]
type=U
movetype=I
physics=N
velset=0,0
ctrl=0

[state 1513,2]
type=changeanim
trigger1=!time
value=1510

[state 1513,3]
type=nothitby
trigger1=animelemno(0)=[1,18]
value=SCA
time=1

[state 1513,3]
type=playerpush
trigger1=animelemtime(16)<0
value=0

[State 1513,4]
type=assertspecial
trigger1=1
flag=noshadow

[state 1513,4]
type=trans
trigger1=animelemno(0)=[1,12]
trans=addalpha
alpha=ceil(256-25*time),25*time

[state 1513,5]
type=trans
trigger1=animelemno(0)=[14,17]
trans=addalpha
alpha=(20*(animelemtime(14))),(256-20*(animelemtime(14)))

[state 1513,statetypeset]
type=statetypeset
trigger1=!animelemtime(14)
statetype=A

[state 1513,facing]
type=turn
trigger1=!animelemtime(14)
trigger1=p2dist x<0
persistent=0

[state 1513,6]
type=posadd
trigger1=animelemno(0)=13
x=-20
y=-6

[state 1513,ctrl]
type=ctrlset
trigger1=animelemtime(17)>=0
value=1

[state 1513,0]
type=playsnd
trigger1=!animelemtime(1)
value=s4,16
channel=0

[state 1513,0]
type=playsnd
trigger1=!animelemtime(16)
value=s1,0
channel=0

[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 3890
ID = 3890
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
;ignorehitpause =
;persistent =

[State 1513, Gravity]
type = Veladd
trigger1 = AnimElemTime(18) >= 0
y = .50*const(size.yscale)

[state 1513,0]
type= changestate
trigger1=animelemtime(18)>0
trigger1=pos y>=0&&vel y>0
value=1514
ctrl=0

;---------------------------------------------------------------------------
[Statedef 1514]
type=S
movetype=I
physics=S
ctrl=0

[state 1514,0]
type=changeanim
trigger1=time=0
value=49

[state 1514,0]
type=velset
trigger1=!time
x=0
y=0

[state 1514,0]
type=posset
trigger1=time=0
y=0

[State 1514, Snd]
type=playsnd
trigger1= !time
value=3,4

[State 1514 Dust]
type=explod
trigger1= !time
anim=7102
ID=7102
sprpriority=-2
postype=p1
scale=.5,.5
ownpal=1
pausemovetime=-1
supermovetime=-1

[state 1514,0]
type=changeState
trigger1=animtime=0
value=0
ctrl=1

;---------------------------------------------------------------------------
;Maryu Rekouu weak
[StateDef 1600]
type = S
movetype= A
physics = N
juggle = 4
velset = 0,0
ctrl = 0
anim = 11000
poweradd=30
sprpriority = 2
facep2 = 1

[State 1600, Dust]
type = helper
trigger1 = animelem = 4
helpertype = normal
stateno = 7100
ID = 7100
name = "Dust"
postype = p1
pos = 10,0
ownpal = 1

[State 1600, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S1,11
channel = 0

;[State 1600, PlaySnd]
;type = PlaySnd
;triggerall = var(59) = 0
;triggerall = power >= 1000
;trigger1 = time = 2
;value = S171,13
;volume = 0

[State 1600, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S7,5
volume = 0

[State 1600, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1600, Position]
type = Posadd
trigger1 = animelem = 4
x = 5*const(size.xscale)

[State 1600, StateType]
type = StateTypeSet
trigger1 = AnimElemTime(4) = 0
StateType = A

[State 1600, Velocity]
type = VelSet
trigger1 = AnimElemTime(4) = 0
x = 3*const(size.xscale)
y = -7.5*const(size.yscale)

[State 1600, Velocity]
type = VelSet
trigger1 = vel X = [0,0.1]
x = 0

[State 1600, Gravity]
type = Veladd
trigger1 = AnimElemTime(4) >= 0
y = .50*const(size.yscale)

[State 1600, Velocity]
type = VelMul
trigger1 = 1
x = .90

[State 1600, 1]
type = HitDef
trigger1 != time
attr = A, SA
animtype = back
air.animtype = up
damage = 90,5
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 12,12
guard.pausetime = 10,9
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -30 + 0 * (var(35) := 40), var(36) := -80
hitsound = s2,2
guardsound = s2,4
air.type = High
ground.type = Low
ground.slidetime = 13
ground.hittime = 17
guard.hittime = 15
guard.slidetime = 13
guard.ctrltime = 15
ground.velocity = -2.5*const(size.xscale),-8.5*const(size.yscale)
guard.velocity = -5.0*const(size.yscale)
air.velocity = -2.5*ifelse(p2dist x>=5,1,-1)*const(size.xscale),-8.5*const(size.yscale)
fall = 1
fall.recover = 0
fall.envshake.time = 12
fall.envshake.freq = 80
fall.envshake.ampl = -4
down.bounce = 1
air.fall = 1
air.recover = 0
yaccel = .60*const(size.yscale)
envshake.time = 16
envshake.freq = 120
envshake.ampl = 4
;envshake.phase =
P2facing = ifelse(p2dist x>=5,1,-1)
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
persistent = 0
;palfx.time = ifelse(var(59)<=1 && power>1000,60,0)
;palfx.sinadd=64,64,64,4
;palfx.mul=128,128,128

;[State 0, explod]
;type = Explod
;triggerall = var(59) = 0
;triggerall = power >= 1000
;trigger1 = animelem = 3
;anim = 1191
;ID = 3647
;pos = 15,-35
;postype = p1  ;p2,front,back,left,right
;facing = 1
;p2facing = 1
;bindtime = -1
;removetime = 20
;scale = .7,.7
;sprpriority = 4
;removeongethit = 1
;ignorehitpause = 0
;persistent =

;[State 1600, flames]
;type = helper
;triggerall = var(59) = 0
;triggerall = power >= 1000
;triggerall = movehit && numtarget && numhelper(7180) < 1
;trigger1 = !(target, time) && (target, movetype = H)
;helpertype = normal
;stateno = 7180
;ID = 7180
;name = "Flames"
;postype = p2
;ownpal = 1
;facing = -1
;size.ground.front = 0
;size.ground.back = 0
;ignorehitpause = 1
;persistent = 0

[State 1100, ChangeState]
type = ChangeState
triggerall = Pos Y >= 0 && Vel Y > 0
trigger1 = AnimElemTime(2) > 0
value = 1615

;---------------------------------------------------------------------------
;Maryu Rekouu medium
[Statedef 1605]
type = S
movetype= A
physics = N
juggle = 4
velset = 0,0
ctrl = 0
anim = 11000
poweradd=30
sprpriority = 2
facep2 = 1

[State 1605, Dust]
type = helper
trigger1 = animelem = 4
helpertype = normal
stateno = 7100
ID = 7100
name = "Dust"
postype = p1
pos = 10,0
ownpal = 1

[State 1605, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,11
channel = 0

;[State 1605, PlaySnd]
;type = PlaySnd
;triggerall = var(59) = 0
;triggerall = power >= 1000
;trigger1 = time = 2
;value = S171,13
;volume = 0

[State 1605, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S7,5
volume = 0

[State 1605, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1605, Position]
type = Posadd
trigger1 = animelemtime(1) = 0
x = 5*const(size.xscale)

[State 1605, StateType]
type = StateTypeSet
trigger1 = AnimElemTime(4) = 0
StateType = A

[State 1605, Velocity]
type = VelSet
trigger1 = AnimElemTime(4) = 0
x = 5*const(size.xscale)
y = -8.5*const(size.yscale)

[State 1605, Velocity]
type = VelSet
trigger1 = vel X = [0,0.1]
x = 0

[State 1605, Gravity]
type = Veladd
trigger1 = AnimElemTime(4) >= 0
y = .50*const(size.yscale)

[State 1605, Velocity]
type = VelMul
trigger1 = 1
x = .90

[State 1605, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, SA
animtype = hard
air.animtype = back
damage = 45,5
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 12,12
guard.pausetime = 10,11
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -30 + 0 * (var(35) := 40), var(36) := -80
hitsound = s2,2
guardsound = s2,4
ground.type = high
ground.slidetime = 13
ground.hittime = ifelse(p2statetype=C,19,17)
guard.hittime = 15
guard.slidetime = 13
guard.ctrltime = 15
ground.velocity = 0, -8
guard.velocity = -5.0*const(size.yscale)
air.type = low
air.velocity = 0, -8
fall = 0
fall.recover = 0
fall.envshake.time = 12
fall.envshake.freq = 80
fall.envshake.ampl = -4
down.bounce = 1
air.fall = 1
air.recover = 0
yaccel = .60*const(size.yscale)
envshake.time = 16
envshake.freq = 120
envshake.ampl = 4
P2facing = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
persistent = 0
;palfx.time = ifelse(var(59)<=1 && power>1000,25,0)
;palfx.sinadd=64,64,64,4
;palfx.mul=128,128,128

[State 1605, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = A, SA
animtype = up
air.animtype = up
damage = 55,5
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 12, 16
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -30 + 0 * (var(35) := 40), var(36) := -80
hitsound = s2,2
guardsound = s2,4
ground.type = Low
ground.slidetime = 13
ground.hittime = 17
guard.hittime = 15
guard.slidetime = 13
guard.ctrltime = 15
ground.velocity = -3, -9
guard.velocity = -5.0*const(size.xscale)
air.velocity = -3, -9
fall = 1
fall.recover = 0
fall.envshake.time = 12
fall.envshake.freq = 80
fall.envshake.ampl = -4
down.bounce = 1
air.fall = 1
air.recover = 0
yaccel = .60*const(size.yscale)
envshake.time = 16
envshake.freq = 120
envshake.ampl = 4
P2facing = ifelse(p2dist x>=5,1,-1)
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
persistent = 0
;palfx.time = ifelse(var(59)<=1 && power>1000,65,0)
;palfx.sinadd=64,64,64,4
;palfx.mul=128,128,128

;[State 0, explod]
;type = Explod
;triggerall = var(59) = 0
;triggerall = power >= 1000
;trigger1 = animelem = 3
;anim = 1191
;ID = 3647
;pos = 15,-35
;postype = p1  ;p2,front,back,left,right
;facing = 1
;p2facing = 1
;bindtime = -1
;removetime = 20
;scale = .7,.7
;sprpriority = 4
;removeongethit = 1
;ignorehitpause = 0
;persistent =

;[State 1605, flames]
;type = helper
;triggerall = var(59) = 0
;triggerall = power >= 1000
;triggerall = movehit && numtarget && numhelper(7180) < 1
;trigger1 = !(target, time) && (target, movetype = H)
;helpertype = normal
;stateno = 7180
;ID = 7180
;name = "Flames"
;postype = p2
;ownpal = 1
;facing = -1
;size.ground.front = 0
;size.ground.back = 0
;ignorehitpause = 1
;persistent = 0

[State 1605]
type = StateTypeSet
trigger1 = AnimElemTime(6) >= 0
movetype = I

[State 1605, ChangeState]
type = ChangeState
triggerall = Pos Y >= 0 && Vel Y > 0
trigger1 = AnimElemTime(4) > 0
value = 1615

;---------------------------------------------------------------------------
;Maryu Rekouu strong
[Statedef 1610]
type = S
movetype= A
physics = N
juggle = 4
velset = 0,0
ctrl = 0
anim = 11000
poweradd=30
sprpriority = 2

[State 1610, NotHitBy]
type = NotHitBy
triggerall = prevstateno != 350
trigger1 = AnimElemTime(3) < 0 && var(10) = 1
trigger2 = AnimElemTime(4) < 1 && var(10) = 2
trigger3 = AnimElemTime(2) < 0 && var(10) = 3
value = SCA
time = 1

[State NHB -ZC]
type = nothitby
trigger1 = prevstateno = 350 && animelemtime(4) < 1
value = SCA
time = 1

[State 1610, Dust]
type = helper
trigger1 = animelem = 4
helpertype = normal
stateno = 7100
ID = 7100
name = "Dust"
postype = p1
pos = 10,0
ownpal = 1

[State 1610, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1,11
channel = 0

[State 1610, PlaySnd]
type = PlaySnd
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = time = 5
value = S171,13
volume = 0

[State 1610, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S7,5
volume = 0

[State 1610, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1610, Position]
type = Posadd
trigger1 = animelemtime(2) = 0
x = 7*const(size.xscale)

[State 1610, StateType]
type = StateTypeSet
trigger1 = AnimElemTime(4) = 0
StateType = A

[State 1610, Velocity]
type = VelSet
trigger1 = AnimElemTime(4) = 0
x = 7*const(size.xscale)
y = -10*const(size.yscale)

[State 1610, Velocity]
type = VelSet
trigger1 = vel X = [0,0.1]
x = 0

[State 1610, Gravity]
type = Veladd
trigger1 = AnimElemTime(2) >= 0
y = .50*const(size.yscale)

[State 1610, Velocity]
type = VelMul
trigger1 = 1
x = .90

[State 1610, 1]
type = HitDef
trigger1 =  AnimElem=2
attr = S, SA
animtype = hard
air.animtype = back
damage = ifelse(var(59)<=1 && power>1000,55,45), 10      ;45,5
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 12, 12
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -30 + 0 * (var(35) := 40), var(36) := -80
hitsound = s2,2
guardsound = s2,4
ground.type = Low
ground.slidetime = 13
ground.hittime = ifelse(p2statetype=C,19,17)
guard.hittime = 15
guard.slidetime = 13
guard.ctrltime = 15
ground.velocity = 0, -8
guard.velocity = -5.0*const(size.xscale)
air.velocity = 0, -8
fall =0
fall.recover = 0
fall.envshake.time = 12
fall.envshake.freq = 80
fall.envshake.ampl = -4
down.bounce = 1
air.fall = 1
air.recover = 0
yaccel = .60*const(size.yscale)
envshake.time = 16
envshake.freq = 120
envshake.ampl = 4
P2facing = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
persistent = 0
palfx.time = ifelse(var(59)<=1 && power>=1000,15,0)
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128

[State 1610, 1]
type = HitDef
trigger1 = AnimElem= 3
attr = S, NA
damage = ifelse(var(59)<=1 && power>1000,75,65), 10
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 12, 16
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -30 + 0 * (var(35) := 40), var(36) := -80
hitsound = s2,2
guardsound = s2,4
ground.type = Low
ground.slidetime = 13
ground.hittime = 17
guard.hittime = 15
guard.slidetime = 13
guard.ctrltime = 15
ground.velocity = -3, -10
guard.velocity = -5.0*const(size.xscale)
air.velocity = -3, -10
fall = 1
fall.recover = 0
fall.envshake.time = 12
fall.envshake.freq = 80
fall.envshake.ampl = -4
down.bounce = 1
air.fall = 1
air.recover = 0
yaccel = .60*const(size.yscale)
envshake.time = 16
envshake.freq = 120
envshake.ampl = 4
P2facing = ifelse(p2dist x>=5,1,-1)
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
persistent = 0
palfx.time = ifelse(var(59)<=1 && power>=1000,65,0)
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128

;[State 0, explod]
;type = Explod
;triggerall = var(59) = 0
;triggerall = power >= 1000
;trigger1 = animelem = 3
;anim = 1191
;ID = 3647
;pos = 15,-35
;postype = p1  ;p2,front,back,left,right
;facing = 1
;p2facing = 1
;bindtime = -1
;removetime = 20
;scale = .7,.7
;sprpriority = 4
;removeongethit = 1
;ignorehitpause = 0
;persistent =

[State 1610, explod]
type = Explod
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = AnimElem = 2
anim = 6150
ID = 6150
pos = -15,-20
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .5,.5
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1610, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 6150
vel = root, vel x,root, vel y

[State 1610, explod]
type = Explod
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = AnimElem = 4
anim = 6160
ID = 6160
pos = 10,0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
scale = .5,.5
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1610, Explod]
type = Explod
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = AnimElem = 6
anim = 6170
ID = 6170
pos = 0,30
postype = p1
facing = 1
vfacing = 1
bindtime = 7
removetime = -2
scale = .5,.5
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1610, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 6
id = 6160

[State 1610, flames]
type = helper
triggerall = var(59) = 0
triggerall = power >= 1000
triggerall = movehit && numtarget && numhelper(7180) < 1
trigger1 = !(target, time) && (target, movetype = H)
helpertype = normal
stateno = 7180
ID = 7180
name = "Flames"
postype = p2
ownpal = 1
facing = -1
size.ground.front = 0
size.ground.back = 0
ignorehitpause = 1
persistent = 0

[State 1610]
type = StateTypeSet
trigger1 = AnimElemTime(9) >= 0
movetype = I

[State 1120, ChangeState]
type = ChangeState
triggerall = Pos Y >= 0 && Vel Y > 0
trigger1 = AnimElemTime(6) > 0
ctrl = 0
value = 1615

;-------------------------------------------------------------------------------
;Maryu Rekouu falling
[StateDef 1615]
type = S
physics = S
ctrl = 0

[State 106, 1]
type = VelSet
trigger1 = Time = 0
y = 0
x = 0

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 4]
type = ChangeState
trigger1 = animTime = 0
value = 1616
ctrl = 0

;-------------------------------------------------------------------------------
; Maryu Rekouu Land
[Statedef 1616]
type = S
physics = S
ctrl = 0
anim = 48

[State 1616, Snd]
type=playsnd
trigger1= !time
value=3,4

[State 1616, Dust]
type=explod
trigger1= !time
anim=7102
ID=7102
sprpriority=-2
postype=p1
scale=.5,.5
ownpal=1
pausemovetime=-1
supermovetime=-1

[State 1616, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 1616, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1616, 3]
type = CtrlSet
trigger1 = Time = 9
value = 1

[State 1616, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;==============================================================================
; {C:\Users\Luis\Desktop\Kairi\states\EX_Specials.cns}
;==============================================================================


;KAIRI FROM STREET FIGHTER EX + EDITS BY Mr.KARATE AND GUSTAVO C. MORAES
;CODES - Mr.KARATE
;SPRITES - GUSTAVO C. MORAES

;============================================================================================
;===================================<EX SPECIAL STATES>======================================
;============================================================================================
; EX Shinki Hatsudou
[Statedef 1004]
type = S
movetype = A
physics = S
juggle = 5
poweradd = -500
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2

[State 1004, ExSnd]
type = playsnd
trigger1 = time = 1
value = 7, 8
ignorehitpause = 1

[State 1004, ExShadow]
type = afterimage
trigger1 = time = 1
time = 16
timegap = 1
framegap = 1
length = 8
palbright = 32, 32, 0
palcontrast = 128, 128, 128
paladd = -10, -10, -10
palmul = 1.1, 1, 0.5
trans = add
ignorehitpause = 1

[State 1004, ExFlash]
type = palfx
trigger1 = -1
time = 1
add = 32 + ceil(sin(gametime / 1.5) * 32), 32 + ceil(sin(gametime / 1.5) * 32), 0
mul = 300, 300, 200
ignorehitpause = 1

[State 1004, voz]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1,14
channel = 0

[State 1004, blast]
type=helper
trigger1= animelem=4
helpertype=normal
stateno=2245
ID=2245
name="blast"
postype=p1
pos=90,-67
ownpal= 1
size.xscale= .5
size.yscale= .5

[State 1004, recoil]
type = helper
trigger1 = AnimElem = 4
helpertype = normal
stateno = 8000
ID = 8000
name = "recoil"
postype = p1
pos = 21,-65
size.xscale = .8
size.yscale = 1.4
ownpal = 1
facing = -1
supermovetime = 255

[State 1004, EX FX]
type = Explod
trigger1 = !Time
anim = 8210
sprPriority = 3
posType = p1
pos = 45,-70
scale = 0.5, 0.5
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 1004, Explod]
type = Explod
trigger1 = animelem = 4
anim = 7502
ID = 7502
pos = 25,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = .5,.5
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause =1
;persistent =

[State 1004, snd]
type = PlaySnd
trigger1 = AnimElem = 5
value = 2001,5

[State 1004, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------------
; EX Ryujin Kyaku
[Statedef 1071]
type = A
movetype= A
physics = N
juggle = 5
velset = 0,0
ctrl = 0
anim = 6400
ctrl = 0
sprpriority = 2
poweradd = -500

[State 1071, ExSnd]
type = playsnd
trigger1 = time = 1
value = 7, 8
ignorehitpause = 1

[State 1071, ExShadow]
type = afterimage
trigger1 = time = 1
time = 10
timegap = 1
framegap = 1
length = 8
palbright = 32, 32, 0
palcontrast = 128, 128, 128
paladd = -10, -10, -10
palmul = 1.1, 1, 0.5
trans = add
ignorehitpause = 1

[State 1071, ExFlash]
type = palfx
trigger1 = -1
time = 1
add = 32 + ceil(sin(gametime / 1.5) * 32), 32 + ceil(sin(gametime / 1.5) * 32), 0
mul = 300, 300, 200
ignorehitpause = 1

[State 1071, PosFreeze]
type = PosFreeze
trigger1 = time = [1,6]
value = 1

[State 1071, VelSet]
type = VelSet
trigger1 = time > 7
x = 10.5
y = 8

[State 1071, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S2000,12
volume = 0
channel = -1

[State 1071, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S7,5
volume = 10
channel = 1

[State 1071 ]
type = explod
triggerall = var(59) = 0
trigger1 = AnimElem = 2
persistent = 0
ignorehitpause = 0
anim = 7555
scale = 1 , 1
pos = 20,-22
postype = p1
bindtime = -1
facing = 1
pausemovetime = 0
removetime = -2
sprpriority = 4
ownpal = 1
supermove = 0
vel = 0,0
removeongethit = 1
ignorehitpause = 1
removeongethit = 1
persistent = 0

[State 1071, 1]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
damage = 80, 10
animtype = Heavy
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 20,20
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 59), var(36) := -33
hitsound =  s2,13
guardsound = s2,4
ground.type = High
ground.slidetime = 5
ground.hittime = 16
ground.velocity = -2,-4
airguard.velocity = -1.9,-.8
air.type = High
persistent = 1
air.velocity = -1.4,-3
air.hittime = 12
getpower=0,0
fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 3
palfx.time = ifelse(var(59)<=1 && power>=1000,60,0)
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128

[State 1071, EX FX]
type = Explod
trigger1 = !Time
anim = 8210
sprPriority = 3
posType = p1
pos = -18,-95
scale = 0.5, 0.5
bindtime = 1
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 1071, flames]
type = helper
triggerall = movehit && numtarget && numhelper(7180) < 1
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = !(target, time) && (target, movetype = H)
helpertype = normal
stateno = 7180
ID = 7180
name = "Flames"
postype = p2
ownpal = 1
facing = -1
size.ground.front = 0
size.ground.back = 0
ignorehitpause = 1
persistent = 0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 174

[State 1071, Changestate]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1072

;---------------------------------------------------------------------------
; EX Mekuu Zangeki - begin
[Statedef 1212]
type = S
movetype = A
physics = S
juggle = 7
poweradd = -500
velset = 0,0
anim = 1200
ctrl = 0
sprpriority = 2

[State 1212, ExSnd]
type = playsnd
trigger1 = time = 1
value = 7, 8
ignorehitpause = 1

[State 1212, ExShadow]
type = afterimage
trigger1 = time = 1
time = 20
timegap = 1
framegap = 1
length = 8
palbright = 32, 32, 0
palcontrast = 128, 128, 128
paladd = -10, -10, -10
palmul = 1.1, 1, 0.5
trans = add
ignorehitpause = 1

[State 1212, ExFlash]
type = palfx
trigger1 = -1
time = 1
add = 32 + ceil(sin(gametime / 1.5) * 32), 32 + ceil(sin(gametime / 1.5) * 32), 0
mul = 300, 300, 200
ignorehitpause = 1

[State 1212, vel]
type = VelSet
trigger1 = AnimElemTime(9) < 0
x = 3.5

[State 1212, dash]
type = PlaySnd
trigger1 = AnimElem = 3
value = 7,5

[State 1212, 2]
type = HitDef
trigger1 = animelem = 5
attr = S, SA
animtype = Medium
damage = 20,5
juggle = 15
air.juggle = 15
priority = 9999
guardflag = MA
pausetime = 9,9
guard.pausetime = 11, 11
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 100), var(36) := -93
hitsound = s2,12
getpower=0,0
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -3
air.velocity = -3,-1
p1stateno = 1213

[State 1004, EX FX]
type = Explod
trigger1 = !Time
anim = 8210
sprPriority = 3
posType = p1
pos = 25,-70
scale = 0.5, 0.5
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 1212, efect]
type = explod
trigger1 = AnimElem = 4
persistent = 0
anim = 8715
pos = 95,-35
scale = 1, 1
postype = p1
removetime = 9
sprpriority = 4
removeongethit = 1
ignorehitpause = 1

[State 1212, CS]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------
; EX Mekuu Zangeki - hit
[Statedef 1213]
type = S
movetype = A
physics = S
anim = 1252

[State 1213, ExShadow]
type = afterimage
trigger1 = time = 1
time = 90
timegap = 1
framegap = 1
length = 8
palbright = 32, 32, 0
palcontrast = 128, 128, 128
paladd = -10, -10, -10
palmul = 1.1, 1, 0.5
trans = add
ignorehitpause = 1

[State -3, Ex Flash]
type = palfx
trigger1 = -1
time = 3
add = 32 + ceil(sin(gametime / 1.5) * 32), 32 + ceil(sin(gametime / 1.5) * 32), 0
mul = 300, 300, 200
ignorehitpause = 1

[State 1213, vel]
type = VelSet
trigger1 = AnimElemTime(32) < 0
x = 4.3

[State 1213, voice]
type = PlaySnd
trigger1 = AnimElem = 6
value = 2000,18
channel = 0

[State 1213, PlaySnd]
type = PlaySnd
trigger1 = animelem = 33
value = S1,15

[State 1213, efect]
type = PlaySnd
trigger1 = animelem = 26
value = 3,2

[State 1213, golpe]
type = PlaySnd
trigger1 = animelem = 7
trigger2 = animelem = 13
trigger3 = animelem = 19
trigger4 = animelem = 26
trigger4 = animelem = 33
value = 7,2

[State 1213, 2]
type = HitDef
trigger1 = animelem = 7
attr = S, SA
animtype = Medium
damage = 20
guardflag = MA
pausetime = 9,9
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 170), var(36) := -70
hitsound = s2,1
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -4
air.velocity = -4,-1
getpower=0,0

[State 1213, 2]
type = HitDef
trigger1 = animelem = 13
attr = S, SA
animtype = Medium
damage = 20
guardflag = MA
pausetime = 9,9
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 170), var(36) := -70
hitsound = s2,2
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -4
air.velocity = -4,-1
getpower=0,0

[State 1213, 2]
type = HitDef
trigger1 = animelem = 19
attr = S, SA
animtype = Medium
damage = 20
guardflag = MA
pausetime = 9,9
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 170), var(36) := -50
hitsound = s2,2
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -4
air.velocity = -4,-1
getpower=0,0

[State 1213, 2]
type = HitDef
trigger1 = animelem = 26
attr = A, SA
animtype = Medium
damage = 20
guardflag = MA
pausetime = 9,9
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 170), var(36) := -70
hitsound = s2,2
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -4
air.velocity = -4,-1
air.fall = 0
fall = 0
envshake.time = 10
envshake.ampl = 3
getpower=0,0

[State 1213, 2]
type = HitDef
trigger1 = animelem = 33
attr = A, SA
animtype = Medium
damage = 20
guardflag = MA
pausetime = 9,9
sparkno= s7010+(random%4)
guard.sparkno = s7005
sparkxy = -20,-70
hitsound = s2,2
guardsound = s2,4
ground.type = High
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -2,-8.5
guard.velocity = -3.4
air.velocity = -1.5,-7.5
airguard.velocity = -3.4,-2.6
envshake.time = 8
envshake.ampl = 5
fall = 1
air.fall = 1
fall.recovery = 40
air.recovery = 30
getpower=0,0
fall.recover = 0

[State 1213, efect]
type = explod
trigger1 = AnimElem = 26
persistent = 0
anim = 1610
pos = 30,-85
scale = .5, .5
postype = p1
sprpriority = 6
ownpal = 1
removeongethit = 1

[State 1213, CS]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
;EX Mouryou Kasen
[Statedef 1416]
type = S
movetype= A
physics = S
poweradd = -500
ctrl = 0
anim = 1400
juggle = 8

[State 1004, ExSnd]
type = playsnd
trigger1 = time = 1
value = 7, 8
ignorehitpause = 1

[State 1004, ExShadow]
type = afterimage
trigger1 = time = 1
time = 16
timegap = 1
framegap = 1
length = 8
palbright = 32, 32, 0
palcontrast = 128, 128, 128
paladd = -10, -10, -10
palmul = 1.1, 1, 0.5
trans = add
ignorehitpause = 1

[State 1004, ExFlash]
type = palfx
trigger1 = -1
time = 1
add = 32 + ceil(sin(gametime / 1.5) * 32), 32 + ceil(sin(gametime / 1.5) * 32), 0
mul = 300, 300, 200
ignorehitpause = 1

[State 1416, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 7,5
channel =0

[State 1416, EX FX]
type = Explod
trigger1 = !Time
anim = 8210
sprPriority = 3
posType = p1
pos = 25,-70
scale = 0.5, 0.5
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 1416, Explod]
type = Explod
trigger1 = animelem = 2
anim = 7502
ID = 7502
pos = 10,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = .5,.5
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause =1

[State 1416 , 3]
type = ChangeState
trigger1 = Animtime = 0
value = 1417

;-------------------------------------------------------------------------------
[Statedef 1417]
type = a
movetype= A
physics = a
ctrl = 0
anim = 1401
velset = 4.1,-4.5
poweradd = 0

[State 1417, Dust]
type = helper
trigger1 = animelem = 1
helpertype = normal
stateno = 7100
ID = 7100
name = "Dust"
postype = p1
pos = 0,0
ownpal = 1

[State 1417, ExShadow]
type = afterimage
trigger1 = time = 1
time = 16
timegap = 1
framegap = 1
length = 8
palbright = 32, 32, 0
palcontrast = 128, 128, 128
paladd = -10, -10, -10
palmul = 1.1, 1, 0.5
trans = add
ignorehitpause = 1

[State 1417, ExFlash]
type = palfx
trigger1 = -1
time = 1
add = 32 + ceil(sin(gametime / 1.5) * 32), 32 + ceil(sin(gametime / 1.5) * 32), 0
mul = 300, 300, 200
ignorehitpause = 1

[State 1417, PlaySnd]
type = veladd
trigger1 = TIME>=14
y = .1

[State 1417, 1]
type = HitDef
trigger1 = time = 0
trigger1=P2StateNo!=5040
attr = S, NA
damage = 62,10;32, 5
animtype = back
guardflag = ma
hitflag = Ma
priority = 3, Hit
pausetime = 8,8
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -30 + 0 * (var(35) := 170), var(36) := -50
hitsound = s2,12
guardsound = s2,4
ground.type = HIGH
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -3
air.velocity = -2,-5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower= 0
givepower =25,25
envshake.time = 10
envshake.ampl = 3

[State 1417, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1,13

;[State 1417, PlaySnd]
;type = varset
;trigger1 = time=[3,9]
;trigger1 = time >= 2
;trigger1 = command = "c"
;trigger2 = command = "holdback"
;var(13)=1

[State 1417, efect]
type = explod
trigger1 = AnimElem = 1
persistent = 0
anim = 1605
pos = 65,-75
scale = .5, .5
postype = p1
removetime = -2
sprpriority = 2
ownpal = 1

;[State 1417 , 3]
;type = ChangeState
;trigger1 = AnimElem = 4
;trigger1 = var(13)=1
;value = 1418

[State 1417, ChangeState]
type = ChangeState
trigger1 = time >= 11
;trigger1 = command = "holdfwd"
value = 1420

;-------------------------------------------------------------------------------
[Statedef 1418]
type = a
movetype= A
physics = a
ctrl = 0
anim = 1402
velset = 4.1,-5
poweradd = 0

[State 1004, ExShadow]
type = afterimage
trigger1 = time = 1
time = 16
timegap = 1
framegap = 1
length = 8
palbright = 32, 32, 0
palcontrast = 128, 128, 128
paladd = -10, -10, -10
palmul = 1.1, 1, 0.5
trans = add
ignorehitpause = 1

[State 1004, ExFlash]
type = palfx
trigger1 = -1
time = 1
add = 32 + ceil(sin(gametime / 1.5) * 32), 32 + ceil(sin(gametime / 1.5) * 32), 0
mul = 300, 300, 200
ignorehitpause = 1

[State 1418, PlaySnd]
type = velset
trigger1 = TIME<14
y = -.2

[State 1418, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 7,5
channel =0

[State 1418, 1]
type = HitDef
trigger1 = time = 0
trigger1=P2StateNo!=5040
attr = S, NA
damage = 32, 5
animtype = back
guardflag = ma
hitflag = Ma
priority = 3, Hit
pausetime = 8,8
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -30 + 0 * (var(35) := 170), var(36) := -50
hitsound = s2,12
guardsound = s2,4
ground.type = HIGH
ground.slidetime = 27
ground.hittime = 21
ground.velocity = -5
air.velocity = -2,-4
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower= 0
givepower =25,25
envshake.time = 10
envshake.ampl = 3

[State 1418, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1,13

[State 1418, PlaySnd]
type = varset
trigger1 = time=0
var(13)=0

[State 1418, PlaySnd]
type = varset
trigger1 = time=2
trigger1 = time >= 13
trigger1 = command = "c"
trigger2 = command = "holdback"
var(13)=1

[State 1418, ChangeState]
type = ChangeState
trigger1 = time >= 13
trigger1 = command = "holdfwd"
value = 1420
ctrl = 0

[State 1418, efect]
type = explod
trigger1 = AnimElem = 1
persistent = 0
anim = 1605
pos = 20,-55
scale = .5, .5
postype = p1
removetime = 11
sprpriority = 2
removeongethit = 1
ownpal = 1

[State 1418 , 3]
type = ChangeState
trigger1 = AnimElem = 5
trigger1 = var(13)=1
value = 1419

;-------------------------------------------------------------------------------
[Statedef 1419]
type = a
movetype= A
physics = a
ctrl = 0
anim = 1404
velset = 4.1,-4.5
poweradd = 0

[State 1004, ExShadow]
type = afterimage
trigger1 = time = 1
time = 16
timegap = 1
framegap = 1
length = 8
palbright = 32, 32, 0
palcontrast = 128, 128, 128
paladd = -10, -10, -10
palmul = 1.1, 1, 0.5
trans = add
ignorehitpause = 1

[State 1004, ExFlash]
type = palfx
trigger1 = -1
time = 1
add = 32 + ceil(sin(gametime / 1.5) * 32), 32 + ceil(sin(gametime / 1.5) * 32), 0
mul = 300, 300, 200
ignorehitpause = 1

[State 1419, PlaySnd]
type = velset
trigger1 = TIME<14
y = -.4

[State 1419, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 7,5
channel =0

[State 1419, 1]
type = HitDef
trigger1 = time = 0
trigger1=P2StateNo!=5040
attr = S, Na
damage = 32, 5
animtype = back
guardflag = ma
hitflag = Ma
priority = 3, Hit
pausetime = 8,8
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -30 + 0 * (var(35) := 170), var(36) := -50
hitsound = s2,12
guardsound = s2,4
ground.type = HIGH
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -3
air.velocity = -4,-3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower= 0
givepower =25,25
envshake.time = 10
envshake.ampl = 3

[State 1419, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1,13

[State 1419, PlaySnd]
type = varset
trigger1 = time=0
var(13)=0

[State 1419, PlaySnd]
type = varset
trigger1 = time=2
trigger1 = command = "c"
trigger2 = command = "holdback"
var(13)=1

[State 1419, ChangeState]
type = ChangeState
trigger1 = time >= 13
trigger1 = command = "holdfwd"
value = 1420
ctrl = 0

[State 1419, efect]
type = explod
trigger1 = AnimElem = 1
persistent = 0
anim = 1605
pos = 20,-55
scale = .5, .5
postype = p1
removetime = 11
sprpriority = 2
removeongethit = 1
ownpal = 1

[State 1419 , 3]
type = ChangeState
trigger1 = AnimElem = 5
trigger1 = var(13)=1
value = 1420

;-------------------------------------------------------------------------------
[Statedef 1420]
type = a
movetype= A
physics = a
ctrl = 0
anim = 1405
poweradd = 0
velset = 5,0

[State 1420, PlaySnd]
type = velset
trigger1 = TIME<14
y = -.9

[State 1420, ExShadow]
type = afterimage
trigger1 = time = 1
time = 10
timegap = 1
framegap = 1
length = 8
palbright = 32, 32, 0
palcontrast = 128, 128, 128
paladd = -10, -10, -10
palmul = 1.1, 1, 0.5
trans = add
ignorehitpause = 1

[State 1420, ExFlash]
type = palfx
trigger1 = -1
time = 20
add = 32 + ceil(sin(gametime / 1.5) * 32), 32 + ceil(sin(gametime / 1.5) * 32), 0
mul = 300, 300, 200
ignorehitpause = 1

[State 1420, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 7,5

[State 1414, 1]
type = HitDef
trigger1 = animelem = 5
attr = S, SA
damage = 75,10;55, 10
animtype = daiup
guardflag = ma
hitflag = MAF
priority = 3, Hit
pausetime = 12,12
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -30 + 0 * (var(35) := 170), var(36) := -50
hitsound = s2,13
guardsound = s2,4
ground.type = low
air.type = High
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -12,-3.5
air.velocity = -12, -3.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall=1
air.fall=1
air.juggle = 1
envshake.time = 16
envshake.freq = 120
envshake.ampl = 6
fall.recover = 0
getpower= 0
givepower =25,25
envshake.time = 10
envshake.ampl = 3
p1stateno = 1415
p2stateno = 1111300

;[State 1414, 1]
;type = HitDef
;trigger1 = animelem = 5
;trigger1=P2StateNo!=5040
;attr = S, Na
;damage = 55, 10
;animtype = daiup
;guardflag = ma
;hitflag = Ma
;priority = 3, Hit
;pausetime = 14,14
;sparkno = -1 + 0 * (var(33) := 8013)
;guard.sparkno = -1 + 0 * (var(34) := 8001)
;sparkxy = -30 + 0 * (var(35) := 170), var(36) := -50
;hitsound = s2,13
;guardsound = s2,4
;ground.type = low
;ground.slidetime = 21
;ground.hittime = 21
;ground.velocity = -6,-4
;air.velocity = -4,6
;ground.cornerpush.veloff = 0
;guard.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
;fall=1
;air.fall=1
;envshake.ampl = 4
;envshake.freq = 120
;envshake.time = 5
;fall.recover = 0
;getpower= 0
;givepower =25,25
;envshake.time = 10
;envshake.ampl = 3
;p1stateno = 1415

[State 1420, efect]
type = explod
trigger1 = AnimElem = 2
persistent = 0
anim = 1106
pos = 0,0
scale = .4, .4
ownpal = 1
postype = p1
bindtime = -1
removetime = 13
sprpriority = 2
removeongethit = 1
ownpal = 1

[State 1420, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 2000,17
channel = 0

[State 1420, End]
type=changestate
trigger1= animelem = 6
value = 1415

;-------------------------------------------------------------------------------
;EX Tatsumaki Mouryou Kasen (without flammes)
[StateDef 1421]
type = S
physics = N
moveType = A
anim = 2201
ctrl = 0
velSet = 0,0
sprPriority = 1
powerAdd = -500
faceP2 = 1

[State 1421, Custom Combo Juggle Points Reset]
type = VarSet
trigger1 = !Time && var(20)
var(15) = 0
ignoreHitPause = 1

[State 1421, Custom Combo Reset]
type = PalFX
trigger1 = !Time
trigger1 = var(20) := -1
time = 1

[State 1421, ExSnd]
type = playsnd
trigger1 = time = 1
value = 7, 8
ignorehitpause = 1

[State 1421, ExShadow]
type = afterimage
trigger1 = time = 1
time = 55
timegap = 1
framegap = 1
length = 8
palbright = 32, 32, 0
palcontrast = 128, 128, 128
paladd = -10, -10, -10
palmul = 1.1, 1, 0.5
trans = add
ignorehitpause = 1

[State 1421, ExFlash]
type = palfx
trigger1 = -1
time = 1
add = 32 + ceil(sin(gametime / 1.5) * 32), 32 + ceil(sin(gametime / 1.5) * 32), 0
mul = 300, 300, 200
ignorehitpause = 1

[State 1421, EX FX]
type = Explod
trigger1 = !Time
anim = 8210
sprPriority = 3
posType = p1
pos = 0,-75
scale = 0.5, 0.5
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 1421, Voice]
type = PlaySnd
trigger1 = !Time
value = 2000,18
channel = 0

[State 1421, Woosh Sound]
type = PlaySnd
trigger1=animelem=5
trigger2=animelem=8
trigger3=animelem=11
trigger4=animelem=14
trigger5=animelem=17
trigger6=animelem=20
trigger7=animelem=21
value = 7,5

[State 1421, explod]
type = Explod
trigger1 = animelem = 5
anim = 1422
ID = 1422
pos = 0,-30
scale = 0.3, 0.2
ownpal = 1
postype = p1  ;p2,front,back,left,right
facing = 1
p2facing = 1
bindtime = -1
removetime = -1
sprpriority = 3
removeongethit = 1
ignorehitpause = 0

[State 1421, explod]
type = Explod
trigger1 = animelem = 5
anim = 1307
ID = 1422
pos = 0,15
scale = 1,.5
ownpal = 1
postype = p1  ;p2,front,back,left,right
facing = 1
p2facing = 1
bindtime = -1
removetime = -1
sprpriority = 3
removeongethit = 1
ignorehitpause = 0

[State 1421, Woosh FX]
type = removeExplod
trigger1 = animelem = 25
ID = 1422

[State 1421, StateTypeSet: Air, Physics: None]
type = StateTypeSet
trigger1 = AnimElem = 4
stateType = A
physics = N

[State 1421, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = 4
y = -1.5

[State 1421, VelMul]
type = VelMul
trigger1 =AnimElemTime(25) >= 0
x = 0.96

[State 1421, VelSet]
type = VelSet
trigger1 = AnimElem = 6
y = 0

[State 1421, Gravity]
type = VelAdd
trigger1 = AnimElemTime(25) >= 0
y = 0.3

[State 1421, Dust Helper]
type = Helper
trigger1 = AnimElem = 1
helperType = Normal
stateNo = 7100
ID = 7100
name = "Moryu Kasen Dust"
posType = P1
ownPal = 1

[State 1421, StateTypeSet: Idle]
type = StateTypeSet
trigger1 = AnimElemTime(25) >= 0
moveType = I

[State 1250, Air]
type=HitDef
trigger1=animelem=5
trigger2=animelem=8
trigger3=animelem=11
trigger4=animelem=14
trigger5=animelem=17
trigger6=animelem=20
attr=A, SA
damage= 40 ,6
priority=4, hit
animtype=Hard
getpower=20* !var(20),10* !var(20)
givepower=15, 15
guardflag=MA
hitflag=MAF
hitsound = s2,12
guardsound = s2,4
pauseTime=ifElse(var(20), 5, 10), ifElse(var(20), 5, 10)
sparkNo=-1 + 0 * (var(33) :=8013)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) :=100), var(36) :=-70
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
ground.slidetime=8
ground.hittime =12
guard.hittime=12
ground.velocity=-3,-5
air.velocity=-3,-3
guard.velocity=Ifelse(var(20),-4,-8)
airguard.velocity=Ifelse(var(20),-4,-8), -3.5
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=1
yaccel=.5
fall.recover=0
forcestand=1
envshake.time=8
envshake.ampl=3
envShake.freq=120

[State 1250, Final]
type=HitDef
trigger1 = animelem=23
attr=A, SA
damage= 40 ,6
priority=4, hit
animtype=Hard
getpower=20* !var(20),10* !var(20)
givepower=15, 15
guardflag=MA
hitflag=MAF
hitsound = s2,12
guardsound = s2,4
pauseTime=ifElse(var(20), 5, 10), ifElse(var(20), 5, 10)
sparkNo=-1 + 0 * (var(33) :=8013)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) :=100), var(36) :=-70
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
ground.slidetime=8
ground.hittime =12
guard.hittime=12
ground.velocity=-2,-9
air.velocity=-2,-7
guard.velocity=Ifelse(var(20),-4,-8)
airguard.velocity=Ifelse(var(20),-4,-8), -4
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=1
yaccel=.4
fall.recover=0
forcestand=1
envshake.time=8
envshake.ampl=3
envShake.freq=120

[State 1230, End]
type = ChangeState
trigger1 = animelem = 20 && movecontact
value = 1404

[State 1230, End]
type = ChangeState
trigger1 = pos y > -vel y
value = 52

;---------------------------------------------------------------------------
;EX Maryu Rekouu
[Statedef 1611]
type = S
movetype= A
physics = N
juggle = 4
velset = 0,0
ctrl = 0
anim = 11000
poweradd=-500
sprpriority = 2

[State 1611, Dust]
type = helper
trigger1 = animelem = 4
helpertype = normal
stateno = 7100
ID = 7100
name = "Dust"
postype = p1
pos = 10,0
ownpal = 1

[State 1611, ExSnd]
type = playsnd
trigger1 = time = 1
value = 7, 8
ignorehitpause = 1

[State 1611, ExShadow]
type = afterimage
trigger1 = time = 1
time = 24
timegap = 1
framegap = 1
length = 8
palbright = 32, 32, 0
palcontrast = 128, 128, 128
paladd = -10, -10, -10
palmul = 1.1, 1, 0.5
trans = add
ignorehitpause = 0

[State 1611, ExFlash]
type = palfx
trigger1 = -1
time = 1
add = 32 + ceil(sin(gametime / 1.5) * 32), 32 + ceil(sin(gametime / 1.5) * 32), 0
mul = 300, 300, 200
ignorehitpause = 1

[State 1611, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1,11
channel = 0

[State 1611, PlaySnd]
type = PlaySnd
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = time = 5
value = S171,13
volume = 0

[State 1611, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S7,5
volume = 0

[State 1611, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1611, Position]
type = Posadd
trigger1 = animelemtime(2) = 0
x = 7*const(size.xscale)

[State 1610, StateType]
type = StateTypeSet
trigger1 = AnimElemTime(4) = 0
StateType = A

[State 1611, Velocity]
type = VelSet
trigger1 = AnimElemTime(4) = 0
x = 15*const(size.xscale)
y = -11*const(size.yscale)

[State 1611, Velocity]
type = VelSet
trigger1 = vel X = [0,0.1]
x = 0

[State 1611, Gravity]
type = Veladd
trigger1 = AnimElemTime(4) >= 0
y = .50*const(size.yscale)

[State 1611, Velocity]
type = VelMul
trigger1 = AnimElemTime(2) >= 0
x = .85

[State 1611, 1]
type = HitDef
trigger1 =  AnimElem=2
attr = S, SA
animtype = hard
air.animtype = back
damage = ifelse(var(59)<=1 && power>1000,45,55), 10
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 12, 16
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -30 + 0 * (var(35) := 40), var(36) := -80
hitsound = s2,2
guardsound = s2,4
ground.type = Low
ground.slidetime = 13
ground.hittime = ifelse(p2statetype=C,19,17)
guard.hittime = 15
guard.slidetime = 13
guard.ctrltime = 15
ground.velocity = 0, -8
guard.velocity = -5.0*const(size.xscale)
air.velocity = 0, -8
fall = 1
fall.recover = 0
fall.envshake.time = 12
fall.envshake.freq = 80
fall.envshake.ampl = -4
air.fall = 1
air.recover = 0
yaccel = .60*const(size.yscale)
envshake.time = 16
envshake.freq = 120
envshake.ampl = 4
P2facing = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
persistent = 0
palfx.time = ifelse(var(59)<=1 && power>=1000,15,0)
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
getpower=0,0

[State 1611, 1]
type = HitDef
trigger1 =  AnimElem= 3
attr = S, NA
damage = ifelse(var(59)<=1 && power>1000,55,65), 10
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 12, 16
sparkno= s2012+(random%4)
guard.sparkno = s7006
sparkxy = var(42):=-15, var(43):=-80
hitsound = s2,2
guardsound = s2,4
ground.type = high
ground.slidetime = 13
ground.hittime = ifelse(p2statetype=C,19,17)
guard.hittime = 15
guard.slidetime = 13
guard.ctrltime = 15
ground.velocity = 0, -8
guard.velocity = -5.0*const(size.xscale)
air.type = low
air.velocity = 0, -8
fall = 1
fall.recover = 0
fall.envshake.time = 12
fall.envshake.freq = 80
fall.envshake.ampl = -4
down.bounce = 1
air.fall = 1
air.recover = 0
yaccel = .60*const(size.yscale)
envshake.time = 16
envshake.freq = 120
envshake.ampl = 4
P2facing = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
persistent = 0
palfx.time = ifelse(var(59)<=1 && power>=1000,15,0)
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
getpower=0,0

[State 1611, 1]
type = HitDef
trigger1 = AnimElem= 5
attr = S, NA
damage = ifelse(var(59)<=1 && power>1000,75,65), 10
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 12, 12
sparkno= s2012+(random%4)
guard.sparkno = s7006
sparkxy = var(42):=-15, var(43):=-70
hitsound = s2,2
guardsound = s2,4
ground.type = Low
ground.slidetime = 13
ground.hittime = 17
guard.hittime = 15
guard.slidetime = 13
guard.ctrltime = 15
ground.velocity = -3, -11
guard.velocity = -5.0*const(size.xscale)
air.velocity = -3, -11
fall = 1
fall.recover = 0
fall.envshake.time = 12
fall.envshake.freq = 80
fall.envshake.ampl = -4
down.bounce = 1
air.fall = 1
air.recover = 0
yaccel = .60*const(size.yscale)
envshake.time = 16
envshake.freq = 120
envshake.ampl = 4
P2facing = ifelse(p2dist x>=5,1,-1)
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
persistent = 0
palfx.time = ifelse(var(59)<=1 && power>=1000,65,0)
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
getpower=0,0

[State 1611, EX FX]
type = Explod
trigger1 = !Time
anim = 8210
sprPriority = 3
posType = p1
pos = 20,-74
scale = 0.5, 0.5
pauseMoveTime = -1
superMoveTime = -1
bindtime = 1
ownPal = 1

[State 1611, Explod]
type = Explod
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = AnimElem = 2
anim = 6150
ID = 6150
pos = -15,-20
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .5,.5
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1611, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 6150
vel = root, vel x,root, vel y

[State 0, explod]
type = Explod
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = animelem = 3
anim = 1191
ID = 3647
pos = 15,-35
ownpal = 1
postype = p1  ;p2,front,back,left,right
facing = 1
p2facing = 1
bindtime = -1
removetime = 20
scale = .7,.7
sprpriority = 4
removeongethit = 1
ignorehitpause = 0
;persistent =

[State 1611, flames]
type = helper
triggerall = var(59) = 0
triggerall = power >= 1000
triggerall = movehit && numtarget && numhelper(7180) < 1
trigger1 = !(target, time) && (target, movetype = H)
helpertype = normal
stateno = 7180
ID = 7180
name = "Flames"
postype = p2
ownpal = 1
facing = -1
size.ground.front = 0
size.ground.back = 0
ignorehitpause = 1
persistent = 0

[State 1611]
type = StateTypeSet
trigger1 = AnimElemTime(9) >= 0
movetype = I

[State 1611, ChangeState]
type = ChangeState
triggerall = Pos Y >= 0 && Vel Y > 0
trigger1 = AnimElemTime(6) > 0
value = 1615



;==============================================================================
; {C:\Users\Luis\Desktop\Kairi\states\Supers.cns}
;==============================================================================


;KAIRI FROM STREET FIGHTER EX + EDITS BY Mr.KARATE AND GUSTAVO C. MORAES
;CODES - Mr.KARATE
;SPRITES - GUSTAVO C. MORAES

;==============================================================================================
;=======================================<SUPERS MOVES>=========================================
;==============================================================================================

;-------------------------------------------------------------------------------
; SUPERS (1 power bar minimum)
;-------------------------------------------------------------------------------
;Shinki Hatsudou Kai
[Statedef 3200]
type = A
movetype= A
physics = N
juggle = 10
velset = 0,0
anim = 1700
ctrl = 0
sprpriority = 1
poweradd = -1000

[State 3200, RE]
type = removeExplod
trigger1 = time = 0
ID = 1422

[State 3200, PALFX]
type = PalFX
triggerall = timemod = 2,0 && time <= 13
trigger1 = prevstateno = 4200
trigger2 = prevstateno = 3401
trigger3 = prevstateno = 3403
trigger4 = prevstateno = [1400,1421]
trigger5 = prevstateno = [1600,1611]
trigger6 = prevstateno = [1050,1071]
trigger7 = prevstateno = 231
ignorehitpause = 1
time = 1
add = 255,255,255
sinadd = -100,-100,-100, 2
ignorehitpause = 1

[State 0, Angle]
type = Angledraw
trigger1 = time >=0
value = 335
ignorehitpause = 1

[State 3200, carga]
type = helper
trigger1 = time = 1
helpertype = normal
stateno = 8500
ID = 8500
name = "Superpause FX"
postype = p1
pos = 42,-75
supermovetime = 255
size.xscale = 1
size.yscale = 1
ownpal = 1

[State 3200, SuperPause]
type = SuperPause
trigger1 = animelem = 1
time = 40
anim = 0
pos = 0,10000
movetime =  30
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 1

[State 3000, super]
type = PlaySnd
trigger1 = animelem = 1
value = 3,0

[State 3200, voice]
type = PlaySnd
trigger1 = animelem = 1
value = 171,2
channel = 0

[State 3200, Super D]
type = NotHitBy
trigger1 = AnimElem = 1
value = , NA, SA, AT
time = 15

[State 3200, Super E]
type = NotHitBy
trigger1 = AnimElemTime(2) >= 0 && Time < 25
value2 = C, NA
time = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 174

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 7556

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 3647

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 7555

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 6150

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 6160

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 6170

[State 3200, 4] ;Changestate
type = changestate
trigger1 = animtime = 0
value = 3201
ctrl = 0

;-------------------------------------------------------------------------------
; Shinki Hatsudou Kai
[Statedef 3201]
Type = S
Movetype = A
physics = S
anim = 1775
sprpriority = 1

[State 3201, AfterImage]
type=afterimage
trigger1=animelem=1
time=35
timegap=1
framegap=10
length=21
paladd=0,0,0
palmul=.75,.75,.75
palcontrast=128,128,128
palpostbright=0,0,0
trans=add1

[State 3201, sound]
type = PlaySnd
trigger1 = AnimElem = 5
value = 4,3

[State 0, Angle]
type = Angledraw
trigger1 = time >=0
value = 335
ignorehitpause = 1

[State 3201, Helper]
type = Helper
trigger1 = AnimElem = 3
name = "Shinki Hatsudou Kai blast"
postype = p1
pos = 70,-50
stateno = 3204
bindtime = -1
ownpal = 1
ID = 1772
sprpriority = 5
size.xscale = 0.7
size.yscale = 0.8
ignorehitpause = 1

[State 3201, Helper]
type = Helper
trigger1 = AnimElem = 3
name = "Shinki Hatsudou Kai recoil"
postype = p1
pos = 10,-100
stateno = 3205
bindtime = -1
ownpal = 1
ID = 1772
sprpriority = 5
size.xscale = 0.4
size.yscale = 0.4

[State 3201, 5]
type = NotHitBy
trigger1 = AnimElem = 1
value = SCA
time = 30

[State 3201, 4] ;Changestate
type = changestate
trigger1 = animelem = 4
value = 3202
ctrl = 1

;-------------------------------------------------------------------------------
; Shinki Hatsudou Kai falling
[StateDef 3202]
type = A
movetype= A
physics = A
juggle = 0
velset = 0,0
anim = 3202
ctrl = 0
poweradd = 0
sprpriority = 1

[State 7509, spin]
type=angleadd
trigger1= animelem = 1
value=-30

[State 3202, AfterImage]
type=afterimage
trigger1=animelem=1
time=32
timegap=1
framegap=10
length=21
paladd=0,0,0
palmul=.75,.75,.75
palcontrast=128,128,128
palpostbright=0,0,0
trans=add1

[State 3202, Velset]
type = VelSet
trigger1 = 1
x = -4

[State 3202, VelAdd]
type = VelAdd
trigger1 = animelem = 1
y = -7

[State 3202, ChangeState]
type = ChangeState
trigger1 = time >= 3
trigger1 = power >= 1000
trigger1 = command = "Gairyu Messhuu"
value = 3400
ctrl = 0

[State 3202, ChangeState]
type = ChangeState
trigger1 = time >= 3
trigger1 = command = "Ryujin Kyaku weak"
value = 1050
ctrl = 0

[State 3202, ChangeState]
type = ChangeState
trigger1 = time >= 3
trigger1 = command = "Ryujin Kyaku medium"
value = 1060
ctrl = 0

[State 3202, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

;-------------------------------------------------------------------------------
;Sairou Kyushuu
[Statedef 3300]
type = S
movetype= A
physics = S
ctrl = 0
anim = 4200
velset = 0, 0
poweradd = -1000
sprpriority = 1
facep2 = 1
juggle = 1

[State 4200, 0]
type = removeexplod
trigger1 = time = 0
ID = 3647

[State 4200, AfterImage]
type=afterimage
trigger1= time = 0
time= 150
timegap=1
framegap=10
length=21
paladd=0,0,0
palmul=.75,.75,.75
palcontrast=128,128,128
palpostbright=0,0,0
trans=add1

[State 4200, PALFX]
type = PalFX
triggerall = timemod = 2,0 && time <= 13
trigger1 = prevstateno = [1201,1213]
trigger2 = prevstateno = [1000,1004]
trigger3 = prevstateno = [1600,1611]
ignorehitpause = 1
time = 1
add = 255,255,255
sinadd = -100,-100,-100, 2
ignorehitpause = 1

[State 4200, Snd]
type = playsnd
trigger1 = anim = 4200 && animelem = 7
value = S7,5
channel = 0

[State 4200, Snd]
type = playsnd
trigger1 = animelem = 7
value = S1,0
channel = 0

[State 3200, carga]
type = helper
trigger1 = time = 1
helpertype = normal
stateno = 8500
ID = 8500
name = "Superpause FX"
postype = p1
pos = -12,-52
supermovetime = 255
size.xscale = 1
size.yscale = 1
ownpal = 1

[State 4200, SuperPause]
type = SuperPause
trigger1 = animelem = 1
time = 40
anim = 0
pos = 0,10000
movetime =  30
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 1

[State 4200, super]
type = PlaySnd
trigger1 = animelem = 1
value = 3,0

[State 4200, Super D]
type = NotHitBy
trigger1 = AnimElem = 1
value = , NA, SA, AT
time = 15

[State 4200, Super E]
type = NotHitBy
trigger1 = AnimElemTime(2) >= 0 && Time < 25
value2 = C, NA
time = 1

[State Corner Push]
type = varset
trigger1 = anim = 4200 && animelem = 3
fvar(5) = 0

[State 4200, NHB]
type = nothitby
trigger1 = anim = 4200
trigger2 = anim = 4201 && animelemtime(2) < 1
time = 1
value = SCA
ignorehitpause = 1

[State 4200, Anim]
type = changeanim
trigger1 = anim = 4200 && !animtime
value = 4201

[State 4200, Snd]
type = playsnd
trigger1 = anim = 4201 && animelem = 1
value = 4, 3

[State 4200, Snd]
type = playsnd
triggerall = anim = 4202
trigger1 = animelem = 4
trigger2 = animelem = 8
trigger3 = animelem = 12
trigger4 = animelem = 18
value = S1,13
channel = 0

[State 4200, Snd]
type = playsnd
triggerall = anim = 4202
trigger1 = animelem = 4
trigger2 = animelem = 8
trigger3 = animelem = 12
trigger4 = animelem = 18
value = S7,2

[State 4200, Snd]
type = playsnd
triggerall = anim = 4202
trigger1 = animelem = 24
value = S1,14
channel = 0

[State 4200, Snd]
type = playsnd
triggerall = anim = 4202
trigger1 = animelem = 24
value = S7,5

[State 4200, Dust]
type = helper
trigger1 = anim = 4201 && animelem = 1
helpertype = normal
stateno = 7100
ID = 7100
name = "Dust"
postype = p1
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = anim = 4201 && animelem = 2
anim = 7502
ID = 7502
pos = 0,20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = .6,.5
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
trigger1 = anim = 4201 && animelem = 2
anim = 7502
ID = 7502
pos = 0,20
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
vel =0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = .6,.5
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
;ignorehitpause =
;persistent =

[State 4200, Explod]
type = Explod
trigger1 = animelem = 4 && anim = 4200
anim = 7502
ID = 7502
pos = 25,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = .5,.5
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause =1
;persistent =

[State 4200, Vel]
type = velset
trigger1 = anim = 4200 && animelem = 4
x = 6

[State 4200, Vel]
type = velset
trigger1 = anim = 4200 && animelem = 13
x = 0

[State 4200, Vel]
type = velset
trigger1 = anim = 4201 && animelem = 1
y = -9

[State 4200, Vel]
type = velset
trigger1 = anim = 4201 && animelemtime(1) > 0
x = 3

[State 4200, Vel]
type = velset
trigger1 = anim = 4202 && time > 0
x = 0

[State 4200, Vel]
type = velset
trigger1 = anim = 4202 && time > 1
x = 2.2

[State 4200, Vel]
type = velset
trigger1 = anim = 4202 && animelemtime(20) >= 0
x = 0

[State 4200, Vel]
type = posadd
trigger1 = anim = 4202 && animelemtime(1) >= 0 && animelemtime(18) <= 0
y = -.2

[State 4200, Anim]
type = changeanim
trigger1 = anim = 4201 && numtarget(4200)
trigger1 = animelemtime(17) >= 0 && movehit
value = 4202

[State 4200, Turn]
type = turn
trigger1 = anim = 4202 && animelem = 1
trigger1 = p2dist x < 0

[State 4200, Vel]
type = velset
trigger1 = anim = 4202 && animelemtime(29) < 0
y = 0

[State 4200, 1st hit]
type = hitdef
trigger1 = anim = 4200 && animelem = 7
attr = S, NA
animtype = hard
damage = 36, 7
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 8, 8
sparkno = -1 + 0 * (var(33) := 8014)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -30 + 0 * (var(35) := 40), var(36) := -80
hitsound =  s2,2
guardsound = s2,4
ground.type = High
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -.5, -7
air.type = Low
air.velocity = -.5, -4
ground.cornerpush.veloff = 0
guard.velocity = -12.65
guard.cornerpush.veloff = 0;-17.2
getpower = 0
givepower = 36, 36
envshake.time = 18
envshake.freq = 120
envshake.ampl = 6
fall = 0
fall.recover = 0

[State 4200, hitrising]
type = hitdef
trigger1 = anim = 4201 && animelem = 4
attr = A, HA
damage = 36, 7
animtype = Up
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 2, 2
sparkno = -1 + 0 * (var(33) := 8014)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -30 + 0 * (var(35) := 90), var(36) := -100
hitsound =  s2,2
guardsound = s2,4
ground.type = High
ground.slidetime = 16
ground.hittime = 16
ground.velocity = ifelse(p2bodydist x > 30, 1, 0), -10
air.type = Low
air.velocity = ifelse(p2bodydist x > 30, 1, 0), ceil(vel y) -1
ground.cornerpush.veloff = 0
guard.velocity = -12.65
guard.cornerpush.veloff = 0;-17.2
getpower = 0
givepower = 36, 36
envshake.time = 18
envshake.freq = 120
envshake.ampl = 6
fall = 1
fall.recover = 0
ID = 4200
yaccel = 0.5
forcestand = 1

[State 4200, hit combo low]
type = hitdef
trigger1 = anim = 4202 && (animelem = 5 || animelem = 13)
attr = A, HA
damage = 20, 7
animtype = Hard
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 4, 4
sparkno = -1 + 0 * (var(33) := 8014)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -30 + 0 * (var(35) := 180), var(36) := -70
hitsound =  s2,2
guardsound = s2,4
ground.type = High
ground.slidetime = 16
ground.hittime = 16
ground.velocity = ifelse(p2bodydist x > 30, 1, 0), -6
air.type = High
air.velocity = ifelse(p2bodydist x > 30, 1, 0), -3.5
ground.cornerpush.veloff = 0
guard.velocity = -12.65
guard.cornerpush.veloff = 0;-17.2
getpower = 0
givepower = 36, 36
envshake.time = 18
envshake.freq = 120
envshake.ampl = 6
fall = 1
fall.recover = 0
yaccel = 0.5
forcestand = 1

[State 4200, hit combo high]
type = hitdef
trigger1 = anim = 4202 && (animelem = 9 || animelem = 17)
attr = A, HA
damage = 20, 7
animtype = Hard
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 4, 4
sparkno = -1 + 0 * (var(33) := 8014)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -30 + 0 * (var(35) := 180), var(36) := -120
hitsound =  s2,2
guardsound = s2,4
ground.type = High
ground.slidetime = 16
ground.hittime = 16
ground.velocity = ifelse(p2bodydist x > 30, 1, 0), -6
air.type = Low
air.velocity = ifelse(p2bodydist x > 30, 1, 0), -3.5
ground.cornerpush.veloff = 0
guard.velocity = -12.65
guard.cornerpush.veloff = 0;-17.2
getpower = 0
givepower = 36, 36
envshake.time = 18
envshake.freq = 120
envshake.ampl = 6
fall = 1
fall.recover = 0
yaccel = 0.5
forcestand = 1

[State 4200, hit final]
type = hitdef
trigger1 = anim = 4202 && animelem = 24
attr = A, HA
damage = 66, 17
animtype = Hard
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 12, 12
sparkno = -1 + 0 * (var(33) := 8014)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -30 + 0 * (var(35) := 50), var(36) := -60
hitsound =  s2000,24
guardsound = s2,4
ground.type = Trip
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -12, 8
air.type = Trip
air.velocity = -12, 8
ground.cornerpush.veloff = 0
guard.velocity = -12.65
guard.cornerpush.veloff = 0;-17.2
getpower = 0
givepower = 36, 36
envshake.time = 18
envshake.freq = 120
envshake.ampl = 8
fall = 1
fall.recover = 0
yaccel = 0.5
forcestand = 1
p2stateno = 4150
id = 4500

[State 3403, Helper]
type = Helper
trigger1 = anim = 4202 && animelemtime(24) >= 0
trigger1 = movehit = 1
helpertype = normal
name = "circle"
ID = 7050
stateno = 7050
pos = 42,-68
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
persistent = 0
ignorehitpause = 1
id=3889

[State 4200, statetype]
type = statetypeset
trigger1 = anim = 4201 || anim = 4202
statetype = A
physics = A

[State 4200, statetype]
type = statetypeset
trigger1 = anim = 4201 && animelemtime(22) >= 0
movetype = I

[State 4200, imageoff]
type = afterimagetime
trigger1 = anim = 4201 && animelemtime(22) >= 0
time = 0

[State Idle]
type = statetypeset
trigger1 = anim = 4201 && animelemtime(21) >= 0
trigger2 = anim = 4202 && animelemtime(30) >= 0
movetype = I

[State 4200, End]
type = changestate
trigger1 = vel y > 0 && pos y >= 0
value = 52

;-------------------------------------------------------------------------------
;Garyuu Messhuu
[Statedef 3400]
type = S
movetype= A
physics = N
juggle = 0
velset = 0,0
anim = 7000
ctrl = 0
poweradd = -1000

[State 3400, RE]
type = removeExplod
trigger1 = time = 0
ID = 1422

[State 3400, PALFX]
type = PalFX
triggerall = timemod = 2,0 && time <= 13
trigger1 = prevstateno = 3202
trigger2 = prevstateno = 4200
trigger3 = prevstateno =[1400,1421]
trigger4 = prevstateno =[1050,1071]
trigger5 = prevstateno =[1600,1611]
ignorehitpause = 1
time = 1
add = 255,255,255
sinadd = -100,-100,-100, 2
ignorehitpause = 1

[State 3400, carga]
type = helper
trigger1 = time = 1
helpertype = normal
stateno = 8500
ID = 8500
name = "Superpause FX"
postype = p1
pos = 26,-50
supermovetime = 255
size.xscale = 1
size.yscale = 1
ownpal = 1

[State 3400, SuperPause]
type = SuperPause
trigger1 = animelem = 1
time = 40
anim = 0
pos = 0,10000
movetime =  30
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 1

[State 3400, super]
type = PlaySnd
trigger1 = animelem = 1
value = 3,0

[State 3400, Super D]
type = NotHitBy
trigger1 = AnimElem = 1
value = , NA, SA, AT
time = 15

[State 3400, Super E]
type = NotHitBy
trigger1 = AnimElemTime(2) >= 0 && Time < 25
value2 = C, NA
time = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 174

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
ID = 3647

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 6150

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 6160

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 6170

[State 3400, 4] ;Changestate
type = changestate
trigger1 = animtime = 0
value = 3401
ctrl = 0

;-------------------------------------------------------------------------------
;Garyuu Messhuu
[Statedef 3401]
type = A
movetype = A
physics = N
juggle = 0
ctrl = 0
velset = IfElse(!var(35),3,IfElse(var(35),5,8)),IfElse(var(35)=2,5.5,5)
anim = 7001

[State 3401, PosFreeze]
type = PosFreeze
trigger1 = time = [1,6]
value = 1

[State 3401, VelSet]
type = VelSet
trigger1 = time > -32
x = 7.5
y = 8

[State 3401, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S1,15
volume = 0
channel = -1

[State 3401, AfterImage]
type=afterimage
trigger1=animelem=1
time=35
timegap=1
framegap=10
length=21
paladd=0,0,0
palmul=.75,.75,.75
palcontrast=128,128,128
palpostbright=0,0,0
trans=add1

[State 3401, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S1,14
volume = 0
channel = -1

[State 3401, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S7,5
volume = 10
channel = 1

[State 3401, HitDef]
type = hitdef
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 5
priority = 6,Hit
attr = S, NA
damage = 30,16
animtype = Light
guardflag = HA
hitflag = MAF
pausetime = 5,5
sparkno = -1 + 0 * (var(33) := 8014)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 76), var(36) := -38
hitsound = s2,13
guardsound = s2,4
air.type = High
ground.slidetime = 24
ground.hittime = 24
ground.velocity = 0,0
ground.cornerpush.veloff = -1
air.velocity = -6,-1
p2facing = 1
;fall = 1
fall.recover = 0
getpower = 0
envshake.time = 16
envshake.freq = 100
envshake.ampl = 6
palfx.time = ifelse(var(59)<=1 && power>=1000,60,0)
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128

[State 3401 flames]
type = helper
triggerall = movehit && numtarget && numhelper(7180) < 1
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = !(target, time) && (target, movetype = H)
helpertype = normal
stateno = 7180
ID = 7180
name = "Flames"
postype = p2
ownpal = 1
facing = -1
size.ground.front = 0
size.ground.back = 0
ignorehitpause = 1
persistent = 0

[State 3401, dash]
type = PlaySnd
trigger1 = time = 1
value = 4,3

[State 3401, Explod]
type = Explod
trigger1 = animelem = 2
anim = 3493
ID = 3493
pos = 8,-75
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = .5,.5
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause =1
;persistent =

[State 3401 ]
type = explod
triggerall = power >= 1000
triggerall = var(59) = 0
trigger1 = AnimElem = 2
persistent = 0
ignorehitpause = 0
anim = 7555
ID = 7555
scale = 1 , 1
pos = 20,-22
postype = p1
bindtime = -1
facing = 1
ownpal =1
pausemovetime = 0
removetime = -2
sprpriority = 2
supermove = 0
vel = 0,0
removeongethit = 1
ignorehitpause = 1
removeongethit = 1
persistent = 0

[State -2, VarSet]
type = VarSet
trigger1 = WinKO
var(6) = 1

[State 3401, ChangeState]
type = ChangeState
trigger1 = Pos Y > -4.6 && Vel Y > 0 && Time > 1
value = IfElse(var(5) = 2, 3402,3402)

;-------------------------------------------------------------------------------
;Garyuu Messhuu Ryuubu
[Statedef 3402]
type = S
movetype= A
physics = S
ctrl = 0
anim = 31000
velset = 0,0

[State 3402, Explod]
type = Explod
trigger1 = animelem = 1
anim = 7502
ID = 7502
pos = 10,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = .5,.5
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause =1
;persistent =

[State 3402, 1]
type = playsnd
trigger1 = time = 0
value = 7,5

[State 3402, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S1,0
volume = 0
channel = 0

[State 3402, 3]
type = posadd
trigger1 = AnimElem = 2, = 0
trigger2 = animelem = 3, = 0
x = 16

[State 3402, 3]
type = posadd
trigger1 = AnimElem = 4, = 0
x = 8

[State 3402 , 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 3403
ctrl = 1

;-------------------------------------------------------------------------------
; Garyuu Messhuu Ryuubu in air
[Statedef 3403]
type = A
movetype= A
physics = N
ctrl = 0
anim = 3110
juggle = 1
poweradd = 0

[State 3403, 1]
type = posadd
trigger1 = AnimElem = 1, = 0
x = 2
y = -3

[State 3403, 1]
type = posadd
trigger1 = AnimElem = 1, = 1
x = 3
y = -2

[State 3403, 1]
type = posadd
trigger1 = AnimElem = 2, = 0
x = 11
y = -2

[State 3403, 1]
type = posadd
trigger1 = AnimElem = 1, = 2
trigger2 = AnimElem = 2, = 1
x = 2
y = -2

[State 3403, 1]
type = posadd
trigger1 = AnimElem = 2, = 2
trigger2 = AnimElem = 2, = 3
x = 2
y = -1

[State 3403, 1]
type = posadd
trigger1 = AnimElem = 3, = 0
x = 1

[State 3403, 1]
type = posadd
trigger1 = AnimElem = 3, = 1
x = 2

[State 3403, 1]
type = posadd
trigger1 = AnimElem = 3, = 2
trigger2 = AnimElem = 3, = 3
y = 1

[State 3403, 1]
type = posadd
trigger1 = AnimElem = 4, = 0
trigger2 = AnimElem = 4, = 1
y = 2

[State 3403, 1]
type = posadd
trigger1 = AnimElem = 4, = 2
y = 3

[State 3403, 1]
type = posadd
trigger1 = AnimElem = 5, = 0
y = 4

[State 3403 , 1]
type = Hitdef
trigger1 = AnimElem = 2
attr=s,sa
animtype=hard
damage = 30,3
givepower = 25
getpower = 0
hitflag=maf
guardflag=ma
pausetime = 5,5
sparkno = -1 + 0 * (var(33) := 8014)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 129), var(36) := -63
hitsound = s2,13
guardsound = s2,4
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -3,0
air.velocity = -2.2,-3.2
air.animtype = Back
envshake.time = 16
envshake.freq = 100
envshake.ampl = 6
fall = 0
fall.recover = 0
palfx.time = ifelse(var(59)<=1 && power>=1000,30,0)
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128

[State 3403 , 2]
type = Hitdef
trigger1 = AnimElem = 3
attr=s,sa
animtype=hard
damage = 75,11
givepower = 25
getpower = 0
hitflag=maf
guardflag=ma
pausetime = 35,35
sparkno = -1 + 0 * (var(33) := 8014)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0 * (var(35) := 129), var(36) := -63
hitsound = S2000,31
guardsound = S2,4
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -6, -4
air.velocity = -2.2,-3.2
air.animtype = Back
envshake.time = 16
envshake.freq = 100
envshake.ampl = 6
fall = 1
fall.recover = 0
id=2050
palfx.time = ifelse(var(59)<=1 && power>=1000,80,0)
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128

[State 3401, flames]
type = helper
triggerall = movehit && numtarget && numhelper(7180) < 1
triggerall = var(59) = 0
triggerall = power >= 1000
trigger1 = !(target, time) && (target, movetype = H)
helpertype = normal
stateno = 7180
ID = 7180
name = "Flames"
postype = p2
ownpal = 1
facing = -1
size.ground.front = 0
size.ground.back = 0
ignorehitpause = 1
persistent = 0

[state 3403,guardbreak]
type=targetstate
trigger1=moveguarded=1
trigger1=numtarget(2050)
value=5430
id=2050
ignorehitpause=1

[State 3403, Helper]
type = Helper
trigger1 = animelemtime(3) >= 0
trigger1 = movehit = 1
helpertype = normal
name = "circle"
ID = 7050
stateno = 7050
pos = 42,-68
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
persistent = 0
ignorehitpause = 1
 id=2050
 
[State 3403 ]
type = explod
triggerall = power >= 1000
triggerall = var(59) = 0
trigger1 = AnimElem = 2
persistent = 0
ignorehitpause = 0
anim = 1205
ID = 1205
scale = .5 , .5
pos = 20, 30
postype = p1
bindtime = -1
facing = 1
pausemovetime = 0
removetime = -2
sprpriority = 2
supermove = 0
removeongethit = 1
ignorehitpause = 1
removeongethit = 1
persistent = 0
ownpal = 1

[State 3403, Explod]
type = Explod
trigger1 = animelem = 1
anim = 9402
ID = 9402
pos = 26, 5
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 1, .7
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause =1
;persistent =

[State 3403, 8]
type = ChangeState
trigger1 = animelemtime(5) = 1
value = 3404

;-------------------------------------------------------------------------------
; Garyuu Messhuu Ryuubu landing
[Statedef 3404]
type = S
movetype= I
physics = S
ctrl = 0
anim = 3120
velset = 0,0

[State 3404 , 3]
type = posset
trigger1 = time = 0
y = 0

[State 3404, 3]
type = VarSet
trigger1 = AnimTime = 0
var(2) = 0

[State 3404, 1]
type = playsnd
trigger1 = time = 0
value = 3,4

[State 3404 , 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; SUPERS (2 power bars minimum)
;-------------------------------------------------------------------------------
; Maki Shinki Hatsudou
[Statedef 3000]
type = S
movetype= A
physics = N
juggle = 10
velset = 0,0
anim = 2000
ctrl = 0
poweradd = -2000

[State 3000, PALFX]
type = PalFX
triggerall = timemod = 2,0 && time <= 13
trigger1 = prevstateno = [1000,1004]
trigger2 = prevstateno = [1201,1213]
ignorehitpause = 1
time = 1
add = 255,255,255
sinadd = -100,-100,-100, 2
ignorehitpause = 1

[State 3200, carga]
type = helper
trigger1 = time = 1
helpertype = normal
stateno = 8510
ID = 8510
name = "Superpause FX"
postype = p1
pos = 25,-65
supermovetime = 255
size.xscale = 1
size.yscale = 1
ownpal = 1

[State 3000, SuperPause]
type = SuperPause
trigger1 = animelem = 1
time = 40
anim = 0
pos = 0,10000
movetime =  30
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 1

[State 3000, super]
type = PlaySnd
trigger1 = animelem = 1
value = 2000,30

[State 3000, Super D]
type = NotHitBy
trigger1 = AnimElem = 1
value = , NA, SA, AT
time = 15

[State 3000, Super E]
type = NotHitBy
trigger1 = AnimElemTime(2) >= 0 && Time < 25
value2 = C, NA
time = 1

[State 3000, voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3,1
channel = 0

[State 3000, 4] ;Changestate
type = changestate
trigger1 = animtime = 0
value = 3001
ctrl = 0

;-------------------------------------------------------------------------------
; Maki Shinki Hatsudou
[Statedef 3001]
Type = S
Movetype = A
physics = S
anim = 2001
sprpriority = 0

[State 3001, efect]
type = PlaySnd
trigger1 = AnimElem = 4
value = 2001,5

[State 3001, efect]
type = PlaySnd
trigger1 = AnimElem = 5
value = 2001,5

[State 3001, efect]
type = PlaySnd
trigger1 = AnimElem = 6
value = 2001,5

[State 3001, 1]
type = BindToParent
trigger1 = 1
time = 1
pos = 95,-75

[State 3001, Super B]
type = AfterImage
trigger1 = AnimElem = 1
time = 35
lenght = 15
paladd=0,0,0
palmul=.75,.75,.75
palcontrast=32,32,160
palpostbright=0,0,0
trans=add1

[State 3001, blast]
type=helper
trigger1= animelem=4
helpertype=normal
stateno=3002
ID=2246
name="blast"
postype=p1
pos=40,-57
ownpal=1
size.xscale= .3
size.yscale= .5

[State 3001, blast]
type=helper
trigger1= animelem=5
helpertype=normal
stateno=3002
ID=2246
name="blast"
postype=p1
pos=40,-57
ownpal=1
size.xscale= .3
size.yscale= .5

[State 3001, blast]
type=helper
trigger1= animelem=6
helpertype=normal
stateno=3003
ID=2247
name="blast"
postype=p1
pos=40,-57
ownpal=1
size.xscale= .3
size.yscale= .5

[State 3001, recoil]
type = helper
trigger1 = AnimElem = 4
helpertype = normal
stateno = 8000
ID = 8000
name = "recoil"
postype = p1
pos = 21,-65
size.xscale = .8
size.yscale = 1.4
ownpal = 1
facing = -1

[State 3001, Explod]
type = Explod
trigger1 = animelem = 4
anim = 7502
ID = 7502
pos = 30,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 36
supermovetime = 9999
pausemovetime = 9999
scale = 1,.5
sprpriority = 6
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause =1
;persistent =

[State 1600, dust]
type = explod
trigger1 = AnimElem = 2
persistent = 0
anim = 3193
pos = -60,-8
scale = .4,.3
postype = p1
removetime = -2
sprpriority = 3
removeongethit = 1

[State 1600, Position]
type = Posadd
trigger1 = animelem = 4
x = -7

[State 3001, 5]
type = NotHitBy
trigger1 = AnimElem = 1
value = SCA
time = 30

[State 3001, 4] ;Changestate
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Kyouja Renbu
[Statedef 3500]
type = S
movetype= A
physics = N
juggle = 10
velset = 0,0
anim = 2100
ctrl = 0
poweradd = -2000

[State 3200, PALFX]
type = PalFX
triggerall = timemod = 2,0 && time <= 13
trigger1 = prevstateno = [1000,1004]
trigger2 = prevstateno = [1201,1213]
ignorehitpause = 1
time = 1
add = 255,255,255
sinadd = -100,-100,-100, 2
ignorehitpause = 1

[State 3500, voz]
type = PlaySnd
trigger1 = AnimElem = 1
value = 2000,19
channel = 0

[State 3200, carga]
type = helper
trigger1 = time = 1
helpertype = normal
stateno = 8510
ID = 8510
name = "Superpause FX"
postype = p1
pos = 3,-90
supermovetime = 255
size.xscale = 1
size.yscale = 1
ownpal = 1

[State 3500, SuperPause]
type = SuperPause
trigger1 = animelem = 1
time = 40
anim = 0
pos = 0,10000
movetime =  30
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 1

[State 3400, super]
type = PlaySnd
trigger1 = animelem = 1
value = 2000,30

[State 3500, Super D]
type = NotHitBy
trigger1 = AnimElem = 1
value = , NA, SA, AT
time = 15

[State 3500, Super E]
type = NotHitBy
trigger1 = AnimElemTime(2) >= 0 && Time < 25
value2 = C, NA
time = 1

[State 3500, 4] ;Changestate
type = changestate
trigger1 = animtime = 0
value = 3501
ctrl = 0

;-------------------------------------------------------------------------------
; Kyouja Renbu
[Statedef 3501]
Type = S
Movetype = A
physics = N
anim = 100
sprpriority = 3

[State 3501, Super B]
type = AfterImage
trigger1 = AnimElem = 1
time = 100
lenght = 15
paladd=0,0,0
palmul=.75,.75,.75
palcontrast=32,32,160
palpostbright=0,0,0
trans=add1

[State 3501, dash]
type = PlaySnd
trigger1 = time = 1
value = 4,3

[State 3501, snd]
type = PlaySnd
trigger1 = animelem = 3 || animelem = 6
value = 2, 5

[State 3501, voz]
type = PlaySnd
trigger1 = AnimElem = 1
value = 2000,16
channel = 0

[State 3501, voz]
type = PlaySnd
trigger1 = time = 0
value = 4,3

[State 3501, 4]
type = AfterImageTime
trigger1 = Time >= 2
time = 2

[State 3501, Vel]
type=velset
trigger1= 1
x= 7

[State 3501, NHB]
type = NotHitBy
trigger1 = time < 1
time = 1
value = SCA
ignorehitpause = 1

[State 3501, Hit]
type = HitDef
trigger1 = time
attr = S, HA
animtype = Low
damage = 0,5
getpower = 0
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 4,12
sparkno= -1
getpower = 0
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -30 + 0 * (var(35) := 80), var(36) := -60
hitsound = -1
guardsound = s2,4
ground.type = High
ground.slidetime = 30
p1stateno = 3504
p2stateno = 3520
p2facing = 1
ID = 1
kill = 0

[State 3501, hitadd]
type = hitadd
trigger1 = 1
value = -1

[State 3501, guarded]
type = changestate
trigger1 = animelemtime(8) >= 0 && moveguarded
value = 3502

[State 3501, Explod]
type = Explod
trigger1 = animelem = 2
anim = 7502
ID = 7502
pos = 10,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 1,.5
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause =1
;persistent =

[State 3501, 5]
type = CtrlSet
trigger1 = movetype = H
value = 1

[State 3501, 7]
type = Changestate
trigger1= !animtime
value=3503
ctrl= 0

;-------------------------------------------------------------------------------
;Kyouja Renbu guarded
[Statedef 3502]
type = S
physics = S
ctrl = 0
anim = 417

[State 3502, Snd]
type=playsnd
trigger1= 1
value=0,101
persistent=0

[State 3502, 1]
type = PosSet
trigger1 = 1
y = 0

[State 3502, 1]
type = VelAdd
trigger1 = 1
x = -1

[State 3502, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
;Kyouja Renbu miss
[Statedef 3503]
type = S
physics = S
ctrl = 0
anim = 101

[State 3503, Snd]
type=playsnd
trigger1= 1
value=0,101
persistent=0

[State 3503, 1]
type = VelAdd
trigger1 = 1
x = -1

[State 3503, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Kyouja Renbu - Hit!!
[Statedef 3504]
type=S
physics=S
movetype=A
ctrl=0
velset=0,0
sprpriority= 2
anim = 2105

[State 3504, voice]
type = PlaySnd
trigger1 = animelem = 1
value = 2000,18
channel = 1

[State 3504, Super B]
type = AfterImage
trigger1 = AnimElem = 1
time = 200
timegap=1
framegap=10
length=21
paladd=0,0,0
palmul=.75,.75,.75
palcontrast=32,32,160
palpostbright=0,0,0
trans=add1

[State 3504, Width]
type = Width
trigger1 = AnimElemTime(1)>=0 &&animelemtime(22)<0
edge = 63,0

[State 3504, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
damage = 35, 0
getpower = 0
animtype = medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1,8
guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8014)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = 40 + 0 * (var(35) := 79), var(36) := -75
hitsound = s2,0
guardsound = s2,4
ground.type = High
ground.slidetime = 5
ground.hittime = 12
ground.velocity = ifelse(var(20), -2.66, -4)
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 12
p2stateno = 3520
kill = 0

[State 3504, 2]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
animtype = Medium
damage = 35, 0
getpower = 0
guardflag = MA
pausetime = 1,8
guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8014)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = 40 + 0 * (var(35) := 79), var(36) := -75
hitsound = s2,1
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = ifelse(var(20), -3.70, -5.5)
air.velocity = -2.5,-4
p2stateno = 3530
kill = 0

[State 3504, 3]
type = HitDef
trigger1 = animelem = 14
attr = S, NA
animtype = light
damage = 35, 0
getpower = 0
guardflag = MA
pausetime = 1,8
guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8014)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = 40 + 0 * (var(35) := 79), var(36) := -85
hitsound = s2,11
guardsound = s2,4
ground.type = low
ground.slidetime = 10
ground.hittime = 12
ground.velocity = ifelse(var(20), -2.66, -4)
air.velocity = -2.5,-3.5
p2stateno = 3520
kill = 0

[State 3504, 4]
type = HitDef
trigger1 = animelem = 17
attr = S, NA
animtype = light
damage = 35, 0
getpower = 0
guardflag = MA
pausetime = 1,8
guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8014)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = 40 + 0 * (var(35) := 79), var(36) := -30
hitsound = s2,11
guardsound = s2,4
ground.type = low
ground.slidetime = 10
ground.hittime = 12
ground.velocity = ifelse(var(20), -2.66, -4)
air.velocity = -2.5,-3.5
p2stateno = 3530
kill = 0

[State 3504, 5]
type = HitDef
trigger1 = animelem = 21
attr = S, NA
animtype = light
damage = 35, 0
getpower = 0
guardflag = MA
pausetime = 1,8
guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8014)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = 40 + 0 * (var(35) := 79), var(36) := -85
hitsound = s2,11
guardsound = s2,4
ground.type = low
ground.slidetime = 10
ground.hittime = 12
ground.velocity = ifelse(var(20), -2.66, -4)
air.velocity = -2.5,-3.5
p2stateno = 3520
kill = 0

[State 3504, 6]
type = HitDef
trigger1 = AnimElem = 26
attr = S, NA
animtype = Medium
damage = 35, 0
getpower = 0
guardflag = MA
pausetime = 1,8
guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8014)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = 40 + 0 * (var(35) := 70), var(36) := -70
hitsound = s2,1
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -5.5
air.velocity = -2.5,-4
p2stateno = 3530
kill = 0

[State 3504, 6]
type = HitDef
trigger1 = AnimElem = 34
attr = S, NA
animtype = Medium
ID = 8000
damage = 290, 0
getpower = 0
guardflag = MA
pausetime = 1,8
guard.pausetime = 14, 14
sparkno = -1 + 0 * (var(33) := 8015)
guard.sparkno = -1 + 0 * (var(34) := 8000)
sparkxy = 40 + 0 * (var(35) := 80), var(36) := -55
hitsound = s2000,9
guardsound = s2,4
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -5.5
air.velocity = -2.5,-4
p2stateno = ifelse (p2life >= 290, 3540, 3541)
kill = 1

[State 0, BGPalFX]
type = BGPalFX
triggerall = p2life > 20
trigger1 = animelemtime(34)>=0 && animelemtime(35)<0
time = 15
add = 256,256,256
mul = 256,256,256
sinadd = 0,0,0,1
invertall = 0
color = 256
ignorehitpause =1
;persistent =

[State 0, PalFX]
type = PalFX
triggerall = p2life > 20
trigger1 = animelemtime(34)>=0 && animelemtime(35)<0
time = 1
add = -256,-256,-256
mul = 256,256,256
sinadd = 0,0,0,1
invertall = 0
color = 256
ignorehitpause =1
;persistent =

[State 3504, TargetBind]
type = TargetBind
trigger1 = AnimElemTime(1)>=0 &&animelemtime(22)<0
pos = 50,0
time = 1

[State 3504, vel]
type = velset
trigger1 = AnimElemTime(33)>=0
x = 10

[State 3504, vel]
type = velset
trigger1 = AnimElemTime(34)>=0
x = 0

[State 3504, sprpriority]
type = sprpriority
trigger1 = AnimElemTime(33)>=0
value = -1

[State 3504, sprpriority]
type = sprpriority
trigger1 = AnimElemTime(35)>=0
value = 2

[State 3504, EnvShake]
type = EnvShake
trigger1 = !Time
trigger1 = AnimElem = 2
trigger2 = AnimElem = 6
trigger3 = AnimElem = 14
trigger4 = AnimElem = 17
trigger5 = AnimElem = 21
trigger6 = AnimElem = 26
time = 12
ampl = 3

[State 3320, Blood (Additive)]
type = Explod
trigger1 = AnimElem = 34
anim = 7241
sprPriority = 5
pos = 45,-55
postype = p1
scale = 0.5,0.5
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 3320, (Subtractive)]
type = Explod
trigger1 = AnimElem = 34
anim = 7242
sprPriority = 5
pos = 45,-55
postype = p1
scale = 0.5,0.5
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 3320, Blood (Additive)]
type = Explod
trigger1 = AnimElem = 36
anim = 7241
sprPriority = 8
pos = 45,-55
postype = p1
scale = 0.5,0.5
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 3320, (Subtractive)]
type = Explod
trigger1 = AnimElem = 36
anim = 7242
sprPriority = 8
pos = 45,-55
postype = p1
scale = 0.5,0.5
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 3320,hand]
type = Explod
trigger1 = AnimElem = 34
anim = 2106
sprPriority = -2
pos = 0,0
postype = p1
scale = 1,1
removetime = 60
pauseMoveTime = -1
superMoveTime = -1
ownPal = 0

[State 3504, 0]
type = EnvColor
trigger1 = AnimElem = 34
ignorehitpause = 1
time = 2
value = 255,255,255
under = 2

[State 3504, PlaySnd]
type = PlaySnd
trigger1 = !Time
trigger1 = AnimElem = 1
trigger2 = AnimElem = 5
trigger3 = AnimElem = 13
trigger4 = AnimElem = 16
trigger5 = AnimElem = 20
trigger6 = AnimElem = 25
value = S7,3
volume = 255

[State 3504, PlaySnd]
type = PlaySnd
trigger1 = animelem=31
value = S7,2
volume = 255

[State 3504, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S2,0

[State 3504, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
value = S2,1

[State 3504, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 26
value = S2,2

[State 3504, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 34
value = s2000, ifelse(random<500, 32, 33)
volume = 255

[State 3504, PlaySnd]
type = PlaySnd
trigger1 = animelem=36
value = S2000,14
volume = 255

[State 3504, PlaySnd]
type = PlaySnd
trigger1 = animelem=38
value = S2000,11
volume = 255

[State 3504, EnvShake]
type = EnvShake
trigger1 = animelem = 34
time = 15
freq = 75
ampl = -8

[State 3504, ChangeState]
type = ChangeState
trigger1= !AnimTime
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Kyouja Renbu - P2 get hit!
;---------------------------------------------------------------------------
[Statedef 3520]
type = A
movetype= H
physics = N
velset = 0,0

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3520

[State 1830]
type = SelfState
trigger1 = time > 15 && Enemynear,Stateno != [2000,3999]
value = 5000

[State 1830]
type = SelfState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 3530]
type = A
movetype= H
physics = N
velset = 0,0

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3530

[State 1830]
type = SelfState
trigger1 = time > 15 && Enemynear,Stateno != [2000,3999]
value = 5000

[State 1830]
type = SelfState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
[Statedef 3540]
type = A
movetype= H
physics = N
velset = 0,0

[State 0, PalFX]
type = PalFX
triggerall = p2life > 20
trigger1 = time = 0
time = 60
add = -256,-256,-256
mul = 256,256,256
sinadd = 0,0,0,1
invertall = 0
color = 256
ignorehitpause =1
;persistent =

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3540

[State 1830]
type = SelfState
trigger1 = time > 15 && Enemynear,Stateno != [2000,3999]
value = 5000

[State 1830]
type = changestate
trigger1 = time >= 60
value = 3545
ctrl = 0

;-------------------------------------------------------------------------------
[Statedef 3541]
type = A
movetype= H
physics = N
velset = 0,0

[State 52, 1]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3540

[State 1830]
type = SelfState
trigger1 = time > 15 && Enemynear,Stateno != [2000,3999]
value = 5000

[State 1830]
type = changestate
trigger1 = time >= 60
value = 3545
ctrl = 0

;-------------------------------------------------------------------------------
; Kyouja Renbu - P2 falling
[Statedef 3545]
type = A
movetype = H
physics = N
sprpriority=6

[State 1114100, anim]
type=changeanim
trigger1= !time && selfanimexist(5950)
value=5950

[State 1114100, anim]
type=changeanim2
trigger1= !time && !selfanimexist(5950)
value=1114100

[State 3506, EnvShake]
type = EnvShake
trigger1= vel y > 0
trigger1= pos y > -vel y
time = 14
freq = 120
ampl = -4

[State 1114100, stop]
type=posset
trigger1= 1
y=0
[State 1114100, stop]
type=velset
trigger1= 1
y=0
[State 1114100, dust]
type=gamemakeanim
trigger1= anim=1114100 && animelem=34
value=60
pos=0,0
under=sysvar(1)<=14

[State 1114100, anim]
type=changeanim
trigger1= time>=110 && selfanimexist(5111)
value=5111

[State 1114100, end]
type=selfstate
trigger1= time>=110
value=ifelse(alive,5120,5150)



;==============================================================================
; {C:\Users\Luis\Desktop\Kairi\states\Hypers.cns}
;==============================================================================


;KAIRI FROM STREET FIGHTER EX + EDITS BY Mr.KARATE AND GUSTAVO C. MORAES
;CODES - Mr.KARATE
;SPRITES - GUSTAVO C. MORAES

;==============================================================================================
;=======================================<HYPER MOVES>==========================================
;==============================================================================================

;---------------------------------------------------------------------------
; HYPERS (3 powers bar minimum)
;---------------------------------------------------------------------------
;Shouky Hatsudou Level 3
[Statedef 3600]
type=S
physics=S
movetype=A
anim=20000
ctrl=0
velset=0,0
sprpriority=1
facep2=1
poweradd=-3000
lifeadd = -400

[State 3000, PALFX]
type = PalFX
triggerall = timemod = 2,0 && time <= 13
trigger1 = prevstateno = [1000,1004]
ignorehitpause = 1
time = 1
add = 255,255,255
sinadd = -100,-100,-100, 2
ignorehitpause = 1

[State 4500, portrait]
type=helper
trigger1= animelem = 1
helpertype=normal
stateno=8511
ID=8511
name="Super Charge Portrait"
postype=p1
supermovetime=300
ownpal=1

[State 0, 1]
type = BGPalFX
trigger1 = time < 0
time = 15
add = -75,-75,-75
sinadd = 75,75,75,60
ignorehitpause = 1

[State 3200, carga]
type = helper
trigger1 = time = 1
helpertype = normal
stateno = 8520
ID = 8520
name = "Superpause FX"
postype = p1
pos = 37,-70
supermovetime = 255
size.xscale = 1
size.yscale = 1
ownpal = 1

[State -2, Helper]
type = Helper
triggerall = !numhelper(40001)
trigger1 = time = 0
helpertype = normal
name = "HYPER BACK GROUND"
ID = 40001
stateno = 40001
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 4500, SuperPause]
type = SuperPause
trigger1 = animelem = 1
time = 45
anim = 0
pos = 0,10000
movetime =  30
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 1

[State 4500, b1]
Type = BGPalfx
triggerall = var(5)=0
Trigger1 = time = [0, 133]
Add = -70,-70,-90
IgnoreHitPause = 1
time = 1

[State 4500, super]
type = PlaySnd
trigger1 = animelem = 1
value = 2000,25

[State 4500, 2]
type = EnvColor
trigger1 = time = 0
value = 0,0,0
time = 45
under = 1

[State 4500, Super D]
type = NotHitBy
trigger1 = AnimElem = 1
value = , NA, SA, AT
time = 15

[State 4500, Super E]
type = NotHitBy
trigger1 = AnimElemTime(2) >= 0 && Time < 25
value2 = C, NA
time = 1

[State 4500, strengthvar]
type=varset
trigger1= var(10)!=5
var(10)=5

[State 4500, 1];One time per round
type = VarSet
trigger1 = animelem = 1
v =  59
value = 1

[State 4500, width]
type=width
trigger1= anim=20010 && animelemtime(7)<0
value=30,0

[State 4500, Snd]
type=playsnd
trigger1= anim=20000 && animelem=1
value=171,14
channel=1
volume=200

[State 4500, Snd]
type=playsnd
trigger1= anim=20000 && animelem=1
value=171,1
channel = 0

[State 4500, Snd]
type=playsnd
trigger1= anim=20010 && animelem=4
value=1,2
channel = 0

[State Corner Push]
type=varset
trigger1= anim=20000 && animelem=3
fvar(5)= 0

[State 4500, nhb]
type=nothitby
trigger1= anim=20000
trigger2= anim=20010 && animelemtime(2)<1
time=1
value=SCA

[State 4500, Anim]
type=changeanim
trigger1= anim=20000 && time=45
value=20010

[State 4500, blast]
type=helper
trigger1= anim=20010 && animelem=1
helpertype=normal
stateno=3602
ID=3602
name="Shouky Hatsudou blast"
postype=p1
pos=0,-57
size.xscale = 1
size.yscale = 0.6
ownpal=1

[State 4500, Dust]
type=explod
trigger1= anim=20010 && animelem=2
vel=0,0
anim=7106
sprpriority=3
postype=p1
pos=42,0
ownpal=1
scale=.75,.75
pausemovetime=-1
supermovetime=-1

[State 4500, Snd]
type=playsnd
trigger1= anim=20010 && animelem= 40
value=11,1

[State 3001, recoil]
type = explod
trigger1 = AnimElem = 2, = 1
trigger1 = Anim = 20010
persistent = 0
anim = 8566
pos = 30,0
scale = 1,1
postype = p1
removetime = 85
sprpriority = 5
removeongethit = 1

[State 3001, dust]
type = explod
trigger1 = AnimElem = 2, = 1
trigger1 = Anim = 20010
persistent = 0
anim = 7504
pos = 30,0
scale = 1,1
postype = p1
removetime = 85
sprpriority = 5
removeongethit = 1

[State 4500, recoil]
type = explod
trigger1 = AnimElem = 2, = 1
trigger1 = Anim = 20010
persistent = 0
anim = 3494
pos = 37,-110
scale = .3, .3
postype = p1
removetime = 85
removeongethit = 1
sprpriority = 5

[State 4500, Explod]
type = Explod
trigger1 = animelem = 2
trigger1 = Anim = 20010
anim = 7502
ID = 7502
pos = 10,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 85
supermovetime = 9999
pausemovetime = 9999
scale = 1,.5
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause =1
;persistent =

[State 4500, Explod]
type = Explod
trigger1 = animelem = 2
trigger1 = Anim = 20010
anim = 7502
ID = 7502
pos = 10,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 85
supermovetime = 9999
pausemovetime = 9999
scale = 1,.4
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause =1
;persistent =

[State 4500, Explod]
type = Explod
trigger1 = animelem = 2
trigger1 = Anim = 20010
anim = 8057
ID = 8057
pos = -20,-5
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 85
supermovetime = 9999
pausemovetime = 9999
scale = .5,.5
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause =1
;persistent =

[State 4500, Explod]
type = Explod
trigger1 = animelem = 4
trigger1 = Anim = 20000
anim = 2222
ID = 2222
pos = 27,-65
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 52
supermovetime = 9999
pausemovetime = 9999
scale = .4,.4
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause =1
;persistent =

[State 4500, modifyexplod]
type=modifyexplod
triggerall = time <= 90
trigger1=1
ID=2222
scale=.015*time,.015*time

[State 4500, Explod]
type = Explod
trigger1 = animelem = 1
trigger1 = Anim = 20000
anim = 8581
ID = 8581
pos = 27,-65
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 54
supermovetime = 9999
pausemovetime = 9999
scale = 1,1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause =1
;persistent =

[State 4500, Explod]
type = Explod
trigger1 = animelem = 1
trigger1 = Anim = 20000
anim = 8582
ID = 8582
pos = 27,-65
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 54
supermovetime = 9999
pausemovetime = 9999
scale = 1,1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause =1
;persistent =

[State 3001, dust]
type = explod
trigger1 = AnimElem = 1
trigger1 = Anim = 20010
persistent = 0
anim = 3193
pos = -80,0
scale = .5,.5
postype = p1
removetime = -2
sprpriority = 10
removeongethit = 1

[State 4500, 1]
type = LifeAdd
trigger1= anim=20010
trigger1 = time = 1
trigger2 = animelem = 40;11
value = -500
kill = 0
absolute = 1

[State 4500, End]
type=changestate
trigger1= anim=20010 && !animtime
value= 3601
ctrl= 0

;-------------------------------------------------------------------------------
[Statedef 3601]
type = S
physics = S
movetype = A
anim = 20011
ctrl=0
velset=0,0

[State 4500, Anim]
type=changeanim
trigger1= anim=20011 && time=100
value=20012

[State 4500, End]
type=changestate
trigger1= anim=20012 && !animtime
value= 0
ctrl= 1

;-------------------------------------------------------------------------------
;Kyouja Renbu Shun Goku satsu
[Statedef 7200]
type=S
physics=S
movetype=A
anim=1479
ctrl=0
velset=0,0
juggle=15
facep2=1
poweradd=-3000
sprpriority=1

[State 5200, portrait]
type=helper
trigger1= animelem = 1
helpertype=normal
stateno=8511
ID=8511
name="Super Charge Portrait"
postype=p1
supermovetime=300
ownpal=1

[State -2, Helper]
type = Helper
triggerall = !numhelper(40001)
trigger1 = time = 0
helpertype = normal
name = "HYPER BACK GROUND"
ID = 40001
stateno = 40001
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 5200, Snd]
type=playsnd
trigger1= !time
value=1,2
channel=0

[State 5200, carga]
type=helper
trigger1 = animelem = 1
time = 60
helpertype=normal
stateno = 8520
ID = 8520
name="Carga3"
postype=p1
pos= 15,-66
ownpal=1
persistent=0
supermovetime=9999

[State 5200, super]
type = PlaySnd
trigger1 = animelem = 1
value = 2000,25

[State 5200, 2]
type = EnvColor
trigger1 = time = 0
value = 0,0,0
time = 45
under = 1

[State 5200, Super D]
type = NotHitBy
trigger1 = AnimElem = 1
value = , NA, SA, AT
time = 15

[State 5200, Super E]
type = NotHitBy
trigger1 = AnimElemTime(2) >= 0 && Time < 25
value2 = C, NA
time = 1

[State 5200, Super B]
type = AfterImage
trigger1 = AnimElem = 1
time = 35
lenght = 15
palbright=0,0,0
paladd=0,0,0
palmul=.9,.9,.9
PalContrast = 180,70,70
palpostbright=0,0,0
trans=add1

[State 5200, Varset]
type = VarSet
trigger1 = p2stateno = [5000,5999]
v = 19    ;fv =
value = 1

[State 5200, Varset]
type = VarSet
trigger1 = p2stateno != [5000,5999]
v = 19    ;fv =
value = 0

[State 5200, Super Pause]
type=superpause
trigger1= !time
time=60
anim=-1
sound=s7,0
p2defmul=1
darken=0

[State Corner Push]
type=varset
trigger1= !time
fvar(5)= 0

[State 5200, nhb]
type=nothitby
trigger1= time<10
time=1
value=SCA

[State 5200, Vel]
type=velset
trigger1= 1
x=8

[State 5200 , 4]
type = PlaySnd
trigger1 = animelem = 4 || animelem = 6 || animelem = 8
value = 2, 5

[State 5200, Miss]
type=hitdef
trigger1= time
attr=S,HT
hitflag=

[State 5200, Hit]
type=hitdef
trigger1= time
trigger1= !var(38)
trigger1= p2dist x>=0 && p2bodydist x<=20
attr=S,HT
hitflag=M-
priority=6,Miss
numhits=0
sparkno = -1 + 0 * (var(33) := 8010)
sparkxy = -10 + 0 * (var(35) := 79), var(36) := -75
p1facing=1
p1stateno=7201
fall=1
fall.recover=0

[State 0, re]
type= removeexplod
trigger1= time = 0
ID = 43260

[State 0, re]
type= removeexplod
trigger1= time = 0
ID = 21111

[State 0, re]
type= removeexplod
trigger1= time = 0
ID = 43250

[State 0, re]
type= removeexplod
trigger1= time = 0
ID = 12111

[State 0, re]
type= removeexplod
trigger1= time = 0
ID = 43210

[State 0, re]
type= removeexplod
trigger1= time = 0
ID = 43220

[State 0, re]
type= removeexplod
trigger1= time = 0
ID = 432101

[State 0, re]
type= removeexplod
trigger1= time = 0
ID = 432202

[State 0, re]
type= removeexplod
trigger1= time = 0
ID = 4326

[State 0, re]
type= removeexplod
trigger1= time = 0
ID = 4321

[State 0, re]
type= removeexplod
trigger1= time = 0
ID = 4325

[State 0, re]
type= removeexplod
trigger1= time = 0
ID = 20

[State 5200, End]
type=changestate
trigger1= !animtime
value= 7202
ctrl=1

;---PLAYER---
[Statedef 7201]
type=S
physics=N
movetype=A
anim=9991
ctrl=0
velset=0,0
sprpriority=1

[State 4001, throw]
type=targetstate
trigger1= !time
value=1114002

[State 4001, throw]
type=targetfacing
trigger1= !time
value=-1

[State 4001, Snd]
type=playsnd
trigger1= !time
value=180,2

[State 4001, Snd]
type=playsnd
trigger1= animelem= 15
value= 2000, 24

[State 4001, grabsound]
type=playsnd
trigger1= !time
value=2,10

[State 1700, Kanji]
type = Helper
trigger1 = animelem = 12
helpertype = normal
name = "kanji"
id = 12005
pos = 165,-95
postype = left
stateno =12005
ontop = 1

[State 1700, Kanji]
type = Helper
trigger1 = animelem = 2
helpertype = normal
name = "kanji"
id = 12006
pos = 165,-155
postype = left
stateno =12006
ontop = 1

[State 4001, vsothers]
type = varset
trigger1 = !time
var(41) = 234

[State 4001, vsgouken]
type = varset
triggerall = !time && numtarget
trigger1 = target, name = "Gouken" || target, name = "cvsgouken" || target, name = "Gouken SSF4"
var(41) = 15

[State 4001, vsgoukiorgen]
type = varset
triggerall = !time && numtarget
trigger1 = target, name = "Gouki" || target, name = "Shin Gouki" || target, name = "Akuma" || target, name = "Shin Akuma"
trigger2 = target, name = "Mech Gouki" || target, name = "Cyber Akuma" || target, name = "Gen"
trigger3 = target, name = "Pocket Shin Gouki" || target, name = "cvsgouki" || target, name = "SF3Gouki"
trigger4 = target, name = "SoulGen" || target, name = "Gouki_Cota" || target, name = "Gouki CVS 3"
var(41) = 20

[State 4001, vsevilryu]
type = varset
triggerall = !time && numtarget
trigger1 = target, name = "Evil Ryu" || target, name = "ERyu"
trigger2 = target, name = "Ryu" && target, authorname = "Phantom.of.the.Server" && target, var(1) != 1
trigger3 = target, name = "CVSEvilRyu" || target, name = "Destrudo Ryu"
trigger4 = target, name = "Ryu" && target, authorname = "N64Mario" && target, palno >= 7
trigger5 = target, name = "cvsryu" && target, authorname = "Warusaki3" && target, var(12) = 10
trigger6 = target, name = "eRYU -SvsC"
var(41) = 25

[State 4001, vsothersgsusers]
type = varset
triggerall = !time && numtarget
trigger1 = target, name = "God Rugal" || target, name = "Dark Sakura"
trigger2 = target, name = "Oyaji" && target, authorname = "Mr.Chainsaw & Phantom.of.the.Server"
trigger3 = target, name = "cvsrugal" && target, authorname = "Warusaki3" && target, var(12) = 10
trigger4 = target, name = "cvsg_rugal" && target, authorname = "Warusaki3"
trigger5 = target, name = "Tin's S_Gouki" || target, name = "Blaze Agent"
var(41) = 25

[State 4001, vsCAPCOMbadguys]
type = varset
triggerall = !time && numtarget
trigger1 = target, name = "Demitri" || target, name = "Jedah"
trigger2 = target, name = "Vega" && (target, authorname = "Phantom.of.the.Server" || target, authorname = "Messatsu")
trigger3 = target, name = "cvsvega" && (target, authorname = "Warusaki3" || target, authorname = "Gargoyle")
trigger4 = target, name = "M.Bison" && target, authorname = "N -Mario"
trigger5 = target, name = "[Necromancer's] M. Bison"
trigger6 = target, name = "M. Bison" && target, authorname = "VK, Updated by Terry Kuo, adapted by Tenebrous"
trigger7 = target, name = "CvSBison" && target, authorname = "Team Kai (Saiai and Koga)"
trigger8 = target, name = "Shadow DIO" || target, name = "Gill"
var(41) = 456

[State 4001, vsSNKbadguys]
type = varset
triggerall = !time && numtarget
trigger1 = target, name = "Geese" || target, name = "Orochi" || target, name = "Mukai" || target, name = "Ryuji Yamazaki"
trigger2 = target, name = "Geese Howard" || target, name = "Yamazaki"
trigger3 = target, name = "cvsgeese" || target, name = "DGeese" || target, name = "ORIGINAL ZERO"
trigger4 = target, name = "cvsyamazaki" || target, name = "Orochi Rebirth" || target, name = "Tin's Mukai"
trigger5 = target, name = "geese_mmx" || target, name = "Setsuna"
var(41) = 456

[State 4001, vsrugal]
type = varset
triggerall = !time && numtarget
trigger1 = target, name = "Rugal" || target, name = "Rugal Bernstein" || target, name = "Omega Rugal"
trigger2 = target, name = "Rugal94" || target, name = "Rugal94(BOSS)" || target, name = "rugal_B"
trigger3 = target, name = "Rugal_TLE" || target, name = "Omega Rugal Gb" || target, name = "Tin G_rugal"
trigger4 = target, name = "Mech Rugal" || target, name = "Tin 2002_rugal"
trigger5 = target, name = "Rugal CvS"
trigger6 = target, name = "cvsrugal" && target, authorname = "Warusaki3" && target, var(12) != 10
var(41) = 456

[State 4001, vsMKbadguys]
type = varset
triggerall = !time && numtarget
trigger1 = target, name = "Shao Kahn" || target, name = "Shang Tsung" || target, name = "Goro"
trigger2 = target, name = "Kintaro" || target, name = "Motaro"
trigger3 = target, name = "shaokahn"
var(41) = 456

[State 4001, vsMARVELbadguys]
type = varset
triggerall = !time && numtarget
trigger1 = target, name = "Dr.Doom"
trigger2 = target, name = "Dr. Doom by WhiteMagic2002"
var(41) = 456

[State 4001, vsGGbadguys]
type = varset
triggerall = !time && numtarget
trigger1 = target, name = "Justice" || target, name = "Testament"
var(41) = 456

[State 4001, vsrandombadguys >= )]
type = varset
triggerall = !time && numtarget
trigger1 = target, name = "Sevil Nahte" || target, name = "Perfect Weapon MB -02"
trigger2 = target, name = "Jaian"; lol = D
var(41) = 456

[State 4001, Recover]
type = varadd
triggerall = animelemtime(2) > 0 && animelemtime(16) < 0
triggerall = (var(41) = [1, 99]) && numtarget
triggerall = target, life >= 0.33 * (target, lifemax)
trigger1 = (target, command = "x") || (target, command = "y") || (target, command = "z")
trigger2 = (target, command = "a") || (target, command = "b") || (target, command = "c")
trigger3 = (target, command = "up") || (target, command = "down") || (target, command = "back") || (target, command = "fwd")
var(41) = -1

[State 4001, Debug]
type = displaytoclipboard
trigger1 = var(41) < 100
text = " %d button presses to recover"
params = var(41)

[State 4001, Debug]
type = displaytoclipboard
trigger1 = var(41) = 234
text = "Normal Damage"

[State 4001, Debug]
type = displaytoclipboard
trigger1 = var(41) = 456
text = "Extra Damage"

[State 4001, pause]
type=pause
trigger1= animelemtime(9)>=0 && animelemtime(14)<0;animelemtime(7)>=0 && animelemtime(14)<0
time=2
movetime=2

[State 4001, push]
type=playerpush
trigger1=1
value=0

[State 4001, nothitby]
type=nothitby
trigger1= animelemtime(14)<0
value=SCA
time=1

[State 4001, imageoff]
type=afterimagetime
trigger1= animelemtime(5)>0
time=0

[State 4001, fadeout]
type=allpalfx
trigger1= animelemtime(1)=10
time=30
sinadd=-255,-255,-255,120

[State 4001, black]
type=envcolor
trigger1= animelemtime(2)>=0 && animelemtime(14)<4
time=25
value=0,0,0

[State 4001, Assert]
type=assertspecial
trigger1= animelemtime(2)>=0 && animelemtime(14)<0
flag=nobardisplay
flag2=noFG
flag3=NOBG

[State 4001, spr]
type=sprpriority
trigger1= animelemtime(14)>=0
value=-1

[State 4001, Bind]
type=targetbind
trigger1= animelemtime(14)<0
pos=45,0

[State 4001, hitadd]
type=hitadd
triggerall= var(41)>0
trigger1= animelem=2 || animelem=3 || animelem=4 || animelem=5 || animelem=6 || animelem=7 || animelem=8 || animelem=9
trigger2= animelem=10 || animelem=11 || animelem=12 || animelem=13
value=1

[State 4001, hitdamage]
type=targetlifeadd
triggerall= numtarget
trigger1= animelem=2 || animelem=3 || animelem=4 || animelem=5 || animelem=6 || animelem=7 || animelem=8 || animelem=9 || animelem=10
trigger2= animelem=11 || animelem=12 || animelem=13 || animelem=18
value= -33
kill=animelem=18
absolute=1

[State 4001, givepower]
type=targetpoweradd
triggerall= numtarget
trigger1= animelem=2 || animelem=3 || animelem=4 || animelem=5 || animelem=6 || animelem=7 || animelem=8 || animelem=9 || animelem=10
trigger2= animelem=10 || animelem=11 || animelem=12 || animelem=13
value=36

[State 4001, HitSound]
type=playsnd
trigger1= animelem=2 || animelem=3 || animelem=4 || animelem=5 || animelem=6 || animelem=7 || animelem=8 || animelem=9 || animelem=10
trigger2= animelem=10 || animelem=11 || animelem=12 || animelem=13
value=2,0+(random%3)

;[State 4001, Sparks]
;type = explod
;trigger1= animelem=2 || animelem=3 || animelem=4 || animelem=5 || animelem=6 || animelem=7 || animelem=8 || animelem=9
;trigger2= animelem=10 || animelem=11 || animelem=12 || animelem=13
;anim = 3194 +(random%3)
;ID = 3194
;sprpriority=-2
;postype=p2
;pos=0,(target,const(size.mid.pos.y));-70
;random=60,60
;facing=-1
;ownpal=1
;ontop=1
;pausemovetime=300
;supermovetime=300
;scale = .3,.3

;choose this code if you want the hi res sparks
[State 4001, Sparks]
type=helper
helpertype = normal
trigger1= animelem=2 || animelem=3 || animelem=4 || animelem=5 || animelem=6 || animelem=7 || animelem=8 || animelem=9
trigger2= animelem=10 || animelem=11 || animelem=12 || animelem=13
stateno=8016
ID=8016
sprpriority=20
postype=p2
pos=40-(random%90),(target,const(size.mid.pos.y))+(random%-40)
random=60,60
facing=-1
ownpal=1
ontop=1
pausemovetime=300
supermovetime=300

[State 4001, shake]
type=envshake
trigger1= animelem=2 || animelem=3 || animelem=4 || animelem=5 || animelem=6 || animelem=7 || animelem=8 || animelem=9 || animelem=10
trigger2= animelem=10 || animelem=11 || animelem=12 || animelem=13
time=6
freq=120
ampl=-4

[State 4001, Snd]
type=playsnd
trigger1= animelem=16
value=2000,24
channel=6

[State 4001, Snd]
type=playsnd
trigger1= animelem=18
value=12,0
channel=5

[State 4001, throw]
type=targetstate
trigger1= animelemtime(13)>=0 && numtarget
value=1114003
persistent=0

[State 4001, interrupt]
type=changestate
triggerall= animelemtime(2)>0 && animelemtime(14)<0
trigger1= !var(30) && numtarget
trigger2= target,stateno=1114010
value=7009

[State 4001, End]
type=changestate
trigger1= animelemtime(18)>=0 && winko
value=183

[State 4001, End]
type=changestate
trigger1= !animtime
value=0
ctrl=1

;---TARGET---
[Statedef 1114002]
type=S
physics=N
movetype=H
velset=0,0
ctrl=0

[State 1114002, Anim]
type=changeanim2
trigger1= !time
value=9993

;-------------------------------------------------------------------------------
[Statedef 1114003]
type=L
physics=C
movetype=H
velset=0,0
ctrl=0

[State 1114003, Anim]
type=changeanim2
trigger1= !time
value=9994

[State 1114003, End]
type=selfstate
trigger1= !alive
value=5150

[State 1114003, End]
type=selfstate
trigger1= time>=97 && alive
value=5120

;-----------------
;Kyouja Renbu Shun Goku satsu - miss
[Statedef 7202]
type = S
physics = S
ctrl = 0
anim = 101

[State 4002, Snd]
type=playsnd
trigger1= 1
value=0,101
persistent=0

[State 4002, 1]
type = VelAdd
trigger1 = 1
x = -1

[State 4002, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--- PLAYER ---
[Statedef 7009]
type = S
physics = S
movetype = H
anim = 5910
velset = -5, 0
ctrl = 0

[State 4009, target]
type = targetstate
trigger1 = !time && numtarget
value = 1114010

[State 4009, imageoff]
type = afterimagetime
trigger1 = 1
time = 0

[State 4009, Snd]
type = playsnd
trigger1 = !time
value = 11, 1
channel = 0

[State 4009, Anim]
type = changeanim
trigger1 = anim = 5910 && time = 45
value = 5911

[State 4009, Flash]
type = palfx
trigger1 = !time
add = 30, 30, 100
sinadd = 30, 30, 100, 8
time = 8

[State 4009, lightning]
type = helper
trigger1 = !time
helpertype = normal
stateno = 7250
ID = 7250
postype = p1
pos = 0, -60
ownpal = 1
persistent = 0
pausemovetime = 99
supermovetime = 99

[State 4009, End]
type = changestate
trigger1 = anim = 5911 && !animtime
value = 0
ctrl = 1

;--- PLAYER ---
[Statedef 1114010]
type = S
physics = S
movetype = H
anim = 0
velset = -5, 0
ctrl = 0

[State 1114010, Anim]
type = changeanim
trigger1 = !time && selfanimexist(150)
value = 150

[State 1114010, Anim]
type = changeanim
trigger1 = anim = 150 && selfanimexist(140) && time >= 45
value = 140

[State 1114010, Flash]
type = palfx
trigger1 = !time
add = 30, 30, 100
sinadd = 30, 30, 100, 8
time = 8

[State 1114010, End]
type = selfstate
trigger1 = anim = 140 && !animtime
trigger2 = anim = 0 && time >= 54
value = 0
ctrl = 1



;==============================================================================
; {C:\Users\Luis\Desktop\Kairi\states\Helpers.cns}
;==============================================================================


;KAIRI FROM STREET FIGHTER EX + EDITS BY Mr.KARATE AND GUSTAVO C. MORAES
;CODES - Mr.KARATE
;SPRITES - GUSTAVO C. MORAES

;==============================================================================================
;=======================================<HELPERS STATES>=======================================
;==============================================================================================

;====================<PARRY HELPER>=========================
[StateDef 765]
type = A
physics = N
moveType = I
anim = ifElse(Root, StateType = C, 766, ifElse(Root, StateType = A, 767, 765))
velSet = 0,0
ctrl = 0

[State 765, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 765, BindToRoot]
type = BindToRoot
trigger1 = 1
time = -1

[State 765, Change to Crouching]
type = ChangeAnim
triggerAll = !Time
trigger1 = Root, command = "down"
value = 766

[State 765, Change to Standing / Jumping]
type = ChangeAnim
triggerall = !Time
trigger1 = Root, command = "fwd"
value = ifElse((Root, StateType = A), 767, 765)

[State 765, Change to Standing / Jumping]
type = ChangeAnim
trigger1 = Anim = 765 || Anim = 767
value = ifElse((Root, StateType = A), 767, 765)

[State 765, Disable]
type = VarSet
trigger1 = Time >= ifElse((Root, StateType = A), 7, 8)
trigger2 = Facing != (Root, Facing)
trigger3 = !(Root, ctrl)
trigger3 = (Root, StateNo != [760,762]) && (Root, StateNo != 5120)
var(0) = 1

[State 765, Disable]
type = VarSet
trigger1 = (Root, command = "holdback")
trigger2 = Time < 4 && (Root, command = "holdfwd" + Root, command = "holddown") > 1
trigger3 = Time >= 4 && (Root, command = "holdfwd" || Root, command = "holddown")
trigger4 = Time >= 1 && (((Anim = 765 || Anim = 767) && Root, command = "fwd") || (Anim = 766 && Root, command = "down"))
var(0) = 1

[State 765, Disable]
type = ChangeAnim
trigger1 = var(0) = 1
value = 1

[State 765, Standing/Air]
type = ReversalDef
trigger1 = !var(0) && (Anim = 765 || Anim = 767)
trigger1 = (Root, StateNo != 5120) || !(Root, AnimTime)
reversal.attr = SCA,AA
p1StateNo = 766
pauseTime = 0,0
sparkNo = -1
numHits = 0

[State 765, Crouching]
type = ReversalDef
trigger1 = !var(0) && Anim = 766
reversal.attr = SC,AA
p1StateNo = 766
pauseTime = 0,0
sparkNo = -1
numHits = 0

[State 765, Disable]
type = ReversalDef
trigger1 = var(0) = 1
reversal.attr =
pauseTime = 0,0
sparkNo = -1
numHits = 0

[State 765, End]
type = DestroySelf
trigger1 = Time >= 18
trigger2 = (Root, MoveType != I)
trigger3 = !(Root, ctrl) && (Root, StateNo != [760,762]) && (Root, StateNo != 5120)
trigger4 = (Root, StateNo = [760,762]) && (Root, Time <= 1)


;---Success---
[StateDef 766]
moveType = I
ctrl = 0

[State 766, Disable]
type = VarSet
trigger1 = 1
var(0) = 1

[State 766, End]
type = DestroySelf
trigger1 = Root, StateNo = [760,762]
trigger2 = Time >= 2

;-------------------------------------------------------------------------------
;Fireball destroyer
;-------------------------------------------------------------------------------
;Fireball Destroyer-stand low punch
[Statedef 1007]
type=S
physics=N
movetype=A
anim=1112
ctrl=0
velset=0,0
sprpriority=4

[State 1007, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=1008
ignorehitpause=1

[State 1007, HB]
type=hitby
trigger1= 1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 1007, timevar]
type=varadd
trigger1= time && var(1)<25
var(1)=1

[State 1007, 0]
type = DestroySelf
trigger1 = AnimTime = 0 ;Time = 86
trigger2 = parent, MoveType = H
trigger3 = parent, StateNo != 200

[State 1007, End]
type=changestate
trigger1= movecontact
value=1008
ignorehitpause=1

[State 1007, End]
type=destroyself
trigger1=pos x!=[-240,240]
;--------------
[Statedef 1008]
type=A
physics=N
movetype=I
anim=-1
velset=0,0
ctrl=0
sprpriority=4
movehitpersist=1

[State 1008 ]
type = explod
trigger1 = Anim = 1112
trigger1 = time!
persistent = 1
ignorehitpause = 0
anim = 7305
scale = 1 , 1
pos = 60,-80
postype = p1
removetime = 14
removeongethit = 1
sprpriority = 4

[State 1008, Snd]
type=playsnd
trigger1= !time
value=2000,20
ignorehitpause=1
persistent=0

[State 1008, End]
type=destroyself
trigger1= !animtime

;-------------------------------------------------------------------------------
;Fireball Destroyer - stand medium punch
[Statedef 2003]
type=S
physics=N
movetype=A
anim=1119
ctrl=0
velset=0,0
sprpriority=4

[State 2003, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=2004
ignorehitpause=1

[State 2003, HB]
type=hitby
trigger1= 1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 2003, timevar]
type=varadd
trigger1= time && var(1)<25
var(1)=1

[State 2003, 0]
type = DestroySelf
trigger1 = AnimTime = 0 ;Time = 86
trigger2 = parent, MoveType = H
trigger3 = parent, StateNo != 205
trigger3 = parent, StateNo != 210
trigger3 = parent, StateNo != 304

[State 2003, End]
type=changestate
trigger1= movecontact
value=2004
ignorehitpause=1

[State 2003, End]
type=destroyself
trigger1=pos x!=[-240,240]
;--------------
[Statedef 2004]
type=A
physics=N
movetype=I
anim=-1
velset=0,0
ctrl=0
sprpriority=4
movehitpersist=1

[State 2004 ]
type = explod
trigger1 = Anim = 1119
trigger1 = time!
persistent = 1
ignorehitpause = 0
anim = 7305
scale = 1 , 1
pos = 60,-80
postype = p1
removetime = 14
removeongethit = 1
sprpriority = 4

[State 2004, Snd]
type=playsnd
trigger1= !time
value=2000,20
ignorehitpause=1
persistent=0

[State 2004, End]
type=destroyself
trigger1= !animtime

;-------------------------------------------------------------------------------
;Fireball Destroyer - stand strong punch
[Statedef 1005]
type=S
physics=N
movetype=A
anim=1111
ctrl=0
velset=0,0
sprpriority=4

[State 1005, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=1006
ignorehitpause=1

[State 1005, HB]
type=hitby
trigger1= 1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 1005, timevar]
type=varadd
trigger1= time && var(1)<25
var(1)=1

[State 3005, 9]
type = DestroySelf
trigger1 = AnimTime = 0 ;Time = 86
trigger2 = parent, MoveType = H
trigger3 = parent, StateNo != 211

[State 1005, End]
type=changestate
trigger1= movecontact
value=1006
ignorehitpause=1

[State 1006, End]
type=destroyself
trigger1=pos x!=[-240,240]
;--------------
[Statedef 1006]
type=A
physics=N
movetype=I
anim=-1
velset=0,0
ctrl=0
sprpriority=4
movehitpersist=1

[State 210 ]
type = explod
trigger1 = Anim = 1111
trigger1 = time!
persistent = 1
ignorehitpause = 0
anim = 7305
scale = 1 , 1
pos = 60,-60
postype = p1
removetime = 14
removeongethit = 1
sprpriority = 4

[State 1006, Snd]
type=playsnd
trigger1= !time
value=2000,20
ignorehitpause=1
persistent=0

[State 1006, End]
type=destroyself
trigger1= !animtime

;-------------------------------------------------------------------------------
;Fireball Destroyer - crouch low punch
[Statedef 1010]
type=S
physics=N
movetype=A
anim=1114
ctrl=0
velset=0,0
sprpriority=4

[State 1010, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=1011
ignorehitpause=1

[State 1010, HB]
type=hitby
trigger1= 1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 1010, timevar]
type=varadd
trigger1= time && var(1)<25
var(1)=1

[State 1010, 9]
type = DestroySelf
trigger1 = AnimTime = 0 ;Time = 86
trigger2 = parent, MoveType = H
trigger3 = parent, StateNo != 400

[State 1010, End]
type=changestate
trigger1= movecontact
value=1011
ignorehitpause=1

[State 1010, End]
type=destroyself
trigger1=pos x!=[-240,240]
;--------------
[Statedef 1011]
type=A
physics=N
movetype=I
anim=-1
velset=0,0
ctrl=0
sprpriority=4
movehitpersist=1

[State 1011 ]
type = explod
trigger1 = Anim = 1114
trigger1 = time!
persistent = 1
ignorehitpause = 0
anim = 7305
scale = 1 , 1
pos = 60,-60
postype = p1
removetime = 14
removeongethit = 1
sprpriority = 4

[State 1011, Snd]
type=playsnd
trigger1= !time
value=2000,20
ignorehitpause=1
persistent=0

[State 1011, End]
type=destroyself
trigger1= !animtime

;-------------------------------------------------------------------------------
;Fireball Destroyer - crouch medium punch
[Statedef 1012]
type=S
physics=N
movetype=A
anim=1115
ctrl=0
velset=0,0
sprpriority=4

[State 1012, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=1013
ignorehitpause=1

[State 1012, HB]
type=hitby
trigger1= 1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 1012, timevar]
type=varadd
trigger1= time && var(1)<25
var(1)=1

[State 1012, 9]
type = DestroySelf
trigger1 = AnimTime = 0 ;Time = 86
trigger2 = parent, MoveType = H
trigger3 = parent, StateNo != 410

[State 1012, End]
type=changestate
trigger1= movecontact
value=1013
ignorehitpause=1

[State 1012, End]
type=destroyself
trigger1=pos x!=[-240,240]
;--------------
[Statedef 1013]
type=A
physics=N
movetype=I
anim=-1
velset=0,0
ctrl=0
sprpriority=4
movehitpersist=1

[State 1013 ]
type = explod
trigger1 = Anim = 1115
trigger1 = time!
persistent = 1
ignorehitpause = 0
anim = 7305
scale = 1 , 1
pos = 60,-60
postype = p1
removetime = 14
removeongethit = 1
sprpriority = 4

[State 1013, Snd]
type=playsnd
trigger1= !time
value=2000,20
ignorehitpause=1
persistent=0

[State 1013, End]
type=destroyself
trigger1= !animtime

;-------------------------------------------------------------------------------
;Fireball Destroyer - crouch strong punch
[Statedef 1014]
type=S
physics=N
movetype=A
anim=1116
ctrl=0
velset=0,0
sprpriority=4

[State 1014, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=1015
ignorehitpause=1

[State 1014, HB]
type=hitby
trigger1= 1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 1014, timevar]
type=varadd
trigger1= time && var(1)<25
var(1)=1

[State 1014, 9]
type = DestroySelf
trigger1 = AnimTime = 0 ;Time = 86
trigger2 = parent, MoveType = H
trigger3 = parent, StateNo != 415

[State 1014, End]
type=changestate
trigger1= movecontact
value=1015
ignorehitpause=1

[State 1014, End]
type=destroyself
trigger1= pos x!=[-240,240]

;--------------
[Statedef 1015]
type=A
physics=N
movetype=I
anim=-1
velset=0,0
ctrl=0
sprpriority=4
movehitpersist=1

[State 1015 ]
type = explod
trigger1 = Anim = 1116
trigger1 = time!
persistent = 1
ignorehitpause = 0
anim = 7305
scale = 1 , 1
pos = 60,-60
postype = p1
removetime = 14
removeongethit = 1
sprpriority = 4

[State 1015, Snd]
type=playsnd
trigger1= !time
value=2000,20
ignorehitpause=1
persistent=0

[State 1015, End]
type=destroyself
trigger1= !animtime

;-------------------------------------------------------------------------------
;Fireball Destroyer - aerial light punch
[Statedef 1016]
type=S
physics=N
movetype=A
anim=1117
ctrl=0
velset=0,0
sprpriority=4

[State 1016, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=1017
ignorehitpause=1

[State 1016, HB]
type=hitby
trigger1= 1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 1016, timevar]
type=varadd
trigger1= time && var(1)<25
var(1)=1

[State 1016, 9]
type = DestroySelf
trigger1 = AnimTime = 0 ;Time = 86
trigger2 = parent, MoveType = H
trigger3 = parent, StateNo != 600

[State 1016, End]
type=changestate
trigger1= movecontact
value=1017
ignorehitpause=1

[State 1016, End]
type=destroyself
trigger1=pos x!=[-240,240]
;--------------
[Statedef 1017]
type=A
physics=N
movetype=I
anim=-1
velset=0,0
ctrl=0
sprpriority=4
movehitpersist=1

[State 1017 ]
type = explod
trigger1 = Anim = 1117
trigger1 = time!
persistent = 1
ignorehitpause = 0
anim = 7305
scale = 1 , 1
pos = 60,-60
postype = p1
removetime = 14
removeongethit = 1
sprpriority = 4

[State 1017, Snd]
type=playsnd
trigger1= !time
value=2000,20
ignorehitpause=1
persistent=0

[State 1017, End]
type=destroyself
trigger1= !animtime

;-------------------------------------------------------------------------------
;Fireball Destroyer - aerial strong punch
[Statedef 1018]
type=S
physics=N
movetype=A
anim=1118
ctrl=0
velset=0,0
sprpriority=4

[State 1018, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=1019
ignorehitpause=1

[State 1018, HB]
type=hitby
trigger1= 1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[State 1018, timevar]
type=varadd
trigger1= time && var(1)<25
var(1)=1

[State 1018, 9]
type = DestroySelf
trigger1 = AnimTime = 0 ;Time = 86
trigger2 = parent, MoveType = H
trigger3 = parent, StateNo != 610

[State 1018, End]
type=changestate
trigger1= movecontact
value=1019
ignorehitpause=1

[State 1018, End]
type=destroyself
trigger1=pos x!=[-240,240]

;--------------
[Statedef 1019]
type=A
physics=N
movetype=I
anim=-1
velset=0,0
ctrl=0
sprpriority=4
movehitpersist=1

[State 1019 ]
type = explod
trigger1 = Anim = 1118
trigger1 = time!
persistent = 1
ignorehitpause = 0
anim = 7305
scale = 1 , 1
pos = 60,-60
postype = p1
removetime = 14
removeongethit = 1
sprpriority = 4

[State 1019, Snd]
type=playsnd
trigger1= !time
value=2000,20
ignorehitpause=1
persistent=0

[State 1019, End]
type=destroyself
trigger1= !animtime

;-------------------------------------------------------------------------------
;Shinki Hatsdou blast
[Statedef 2244]
type=S
physics=N
movetype=A
anim= 1051
ctrl=0
velset=0,0
sprpriority=4

[State 2244, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 2244, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=10060
ignorehitpause=1

[State 2244, Hit]
type=hitdef
trigger1= 1
priority=4,Hit
attr=S,SP
damage= 70,20
animtype=Hard
hitflag=MAF
guardflag=MA
pausetime=2,4
sparkno=-1
sparkxy = -10,0
hitsound =  s171,12
guard.sparkno = -1
guardsound = S2,4
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity= -9.22, 0
ground.cornerpush.veloff=0
air.velocity= -2.9
getpower= ifelse(p2movetype=H,72,144)*!(root,var(20)), 36*!(root,var(20))
givepower=36,36
envshake.time=14
envshake.freq=120
envshake.ampl=4
sprpriority=4
airguard.ctrltime= 16
airguard.velocity= ifelse((root,var(20)),-4,-8), -1.5
forcestand=1

[State 2244, End]
type=changestate
trigger1= movecontact
value=10061
ignorehitpause=1

[State 2244, End]
type=destroyself
trigger1= animtime = 0

;-------------------------------------------------------------------------------
;EX Shinki Hatsdou blast
[Statedef 2245]
type=S
physics=N
movetype=A
anim=1005
ctrl=0
velset=0,0
sprpriority=4

[State 1194, AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 2245, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 2245, Vel]
type = velset
trigger1 = !time && !prevstateno
x = 16
y = 0

[State 2245, Vel]
type = velmul
trigger1 = 1
x = 0.9

[State 2245, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=10060
ignorehitpause=1

[State 2245, Hit]
type=hitdef
trigger1= animelem = 1
priority = 7,Hit
attr=S,SP
damage= 90,20
animtype=Hard
hitflag=MAF
guardflag=MA
pausetime=0,4
sparkno=-1
sparkxy = -10,0
hitsound =  s171,12
guard.sparkno = -1
guardsound = S2,4
ground.type=High
ground.hittime = 18
ground.slidetime = 18
ground.velocity = -3, -6
ground.cornerpush.veloff = 0
guard.velocity = -10.52
air.hittime = 18
air.velocity = -3, -6
air.cornerpush.veloff = 0
airguard.velocity = -6, -1
airguard.ctrltime = 16
yaccel = 0.5
fall = 1
fall.recover = 0
fall.recovertime = 120
envshake.time = 14
envshake.freq = 120
envshake.ampl = 4
givepower = 30, 30
getpower = 0,0

[State 2245, trans]
type = palfx
trigger1 = 1
time = 1
add = -time*3,-time*3,-time*3

[State 2245, End]
type=changestate
trigger1= movecontact
value=10061
ignorehitpause=1

[State 2245, End]
type=destroyself
trigger1=!animtime

;-------------------------------------------------------------------------------
;Maki Shinki Hatsdou blast
[Statedef 3002]
type=S
physics=N
movetype=A
anim=1006
ctrl=0
velset=0,0
sprpriority=4

[State 2732: AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 2246, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 2247, vel]
type=velset
trigger1=1
x=ifelse((time<2&&var(2)>1),1,9)
y=0

[State 2246, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=10060
ignorehitpause=1

[State 2246, Hit]
type=hitdef
trigger1= animelem = 1
priority = 7,Hit
attr=S,SP
damage= 95,10
animtype=Hard
hitflag=MAF
guardflag=MA
pausetime=0,4
sparkno=-1
sparkxy = -10,0
hitsound =  s171,12
guard.sparkno = -1
guardsound = S2,4
ground.type=High
ground.hittime = 16
ground.slidetime = 16
ground.velocity= -2.5
ground.cornerpush.veloff=0
guard.velocity = -10.52
air.hittime = 18
air.velocity=-.75*vel x,-2
air.cornerpush.veloff = 0
airguard.velocity = -6, -1
airguard.ctrltime = 16
yaccel = 0.5
fall = 0
fall.recover = 0
fall.recovertime = 120
envshake.time = 14
envshake.freq = 120
envshake.ampl = 4
givepower = 30, 30
getpower = 0,0

[State 2246, End]
type=changestate
trigger1= movecontact
value=10061
ignorehitpause=1

[State 2246, End]
type=destroyself
trigger1=pos x!=[-240,240]

;-------------------------------------------------------------------------------
;Maki Shinki Hatsdou blast
[Statedef 3003]
type=S
physics=N
movetype=A
anim=1006
ctrl=0
velset=0,0
sprpriority=4

[State 2732: AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 2247, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 2247, vel]
type=velset
trigger1=1
x=ifelse((time<2&&var(2)>1),1,9)
y=0

[State 2247, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=10060
ignorehitpause=1

[State 2247, Hit]
type=hitdef
trigger1= animelem = 1
priority = 7,Hit
attr=S,SP
damage= 95,10
animtype=Hard
hitflag=MAF
guardflag=MA
pausetime=4,6
sparkno=-1
sparkxy = -10,0
hitsound =  s171,12
guard.sparkno = -1
guardsound = S2,4
ground.type=High
ground.hittime = 18
ground.slidetime = 18
ground.velocity = -3, -5
ground.cornerpush.veloff = 0
guard.velocity = -10.52
air.hittime = 18
air.velocity = -3, -6
air.cornerpush.veloff = 0
airguard.velocity = -6, -1
airguard.ctrltime = 16
yaccel = 0.5
fall = 1
fall.recover = 0
fall.recovertime = 120
envshake.time = 14
envshake.freq = 120
envshake.ampl = 4
givepower = 30, 30
getpower = 0,0

[State 2247, End]
type=changestate
trigger1= movecontact
value=10061
ignorehitpause=1

[State 2246, End]
type=destroyself
trigger1=pos x!=[-240,240]

;-------------------------------------------------------------------------------
; Shinki Hatsudou Kai blast
[Statedef 3204]
Type = S
Movetype = A
physics = S
sprpriority = 5
velset = 0,0

[State 7509, spin]
type=angleadd
trigger1= time = 0
value=-30

[State 7509, spin]
type=angledraw
trigger1= 1
scale=1,1

[State 1772, AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 1772, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 8133
value = 8133

[State 1772, Transparency]
type = Trans
trigger1 = 1
trans = AddAlpha
alpha = 256,256
ignoreHitPause = 1

[State 1772, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1772, HitDef]
type = hitdef
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
trigger4 = animelem = 4
trigger5 = animelem = 5
trigger6 = animelem = 6
trigger7 = animelem = 7
priority = 7,Hit
attr = S,HP
damage = 32,18
animtype = Back
hitflag = MAF
guardflag = MA
pauseTime = 7,15
sparkno= -1
sparkxy = -1
guard.sparkno = s7006
hitsound =  s171,12
guardsound = s2,4
ground.type = High
ground.slidetime = 24
ground.hittime = 24
ground.velocity = -4,-5
ground.cornerpush.veloff = -1
air.velocity = -4,-2
p2facing = 1
fall = 1
fall.recover = 0
getpower = 0
envshake.time = 16
envshake.freq = 100
envshake.ampl = 6

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1 = !(Target, HitShakeOver)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8013)
ID = 8000
name = "Spark"
posType = P2
pos = -5,-85
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 0
sprpriority = 4

[State 1772, Fireball Destroyer]
type = Projectile
trigger1 = TIME = 0
projanim = 1773
id = 1773
projshadow = 68,68,68
offset = 0, 0
velocity = 0,0
projremovetime = 58
attr = S, SP
hitflag = NP, SP
guardflag = NP, SP
sparkno = -1
guard.sparkno = -1
sparkxy = -1
hitsound = -1
projpriority = 7
guardsound = -1

[State 1772, shield]
type = explod
trigger1 = animelemtime(3) = 1
vel = 0, 0
anim = 3008
sprpriority = 5
removetime = 43
postype = p1
pos = -15, -10
ownpal = 1
scale = .75, .75

[State 1772, beam]
type = PlaySnd
trigger1 = animelem = 1
value = 5,4

[State 1772, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, AA, AT
ignorehitpause = 1

[State 4001, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;-------------------------------------------------------------------------------
; Shinki Hatsudou Kai blast - Recoil
[Statedef 3205]
Type = S
Movetype = A
physics = S
sprpriority = 5
velset = 0,0
anim = 3495

[State 1775, spin]
type=angleadd
trigger1= time = 0
value=14

[State 1775, spin]
type=angledraw
trigger1= 1
scale=1,1

[State 1775, Transparency]
type = Trans
trigger1 = 1
trans = AddAlpha
alpha = 256,256
ignoreHitPause = 1

[State 1775, AfterImage]
type = AfterImage
trigger1 = (!Time)
time = 999
length = 4
palbright = 0,0,0;,136
palcontrast = 128,128,128;,136
paladd = 0,0,0
timegap = 2
framegap = 1
trans = add

[State 1775, DestroySelf]
type = DestroySelf
trigger1 = time >= 24

;-------------------------------------------------------------------------------
;Circle
[Statedef 3889]
physics=N
velset=0,0
anim=9741

[State 4300, fade]
type=palfx
trigger1=!time
time=40
sinadd=-255,-255,-255,160

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 4300, circle]
type=explod
trigger1=time = 1
anim=4301
ID=43011
sprpriority=5
postype=p1
supermovetime=300
ownpal=1

[State 4300, shrink]
type=modifyexplod
trigger1=numexplod(43011)
ID=43011
scale=.25+(.380*time),.25+(.380*time)

[State 4300, noshadow]
type=assertspecial
trigger1=1
flag=noshadow
flag2=invisible
ignorehitpause=1

[State 7500, safety]
type=removeexplod
trigger1=time>=46

[State 4300, end]
type=destroyself
trigger1=time>=30

;-------------------------------------------------------------------------------
;Shouki Hatsudou blast
[Statedef 3602]
type = A
movetype= A
anim = 30050
sprpriority = 3
poweradd = 0

[State 4501, 5] ; lose power charge
type = ParentVarSet
trigger1 = NumTarget > 0
trigger1 = !target, IsHelper
v = 59
value = 2

[State 4501, 2]
type = HitDef
trigger1 = Time % 3 = 0 && Time <= 72
attr = A, HP
damage = 16 , 6
animtype = Heavy
guardflag = MA
hitflag = MAFP
priority = 6 + var(43), Hit
sprpriority = 6
pausetime = 0, 2
guard.sparkno = -1
sparkno= -1
sparkxy = -1;ifelse((Random < 330),0,ifelse((Random = [330,660]),-15,-45)), 0
hitsound =  s171,12
guardsound = S2, 4
ground.type = Low
ground.slidetime = 57;27
ground.hittime = 20
ground.velocity = -5
airguard.velocity = -1
air.type = Low
air.velocity = -5, -1
air.hittime = 20
envshake.time = 10
envshake.ampl = -9
envshake.freq = 60
getpower = 0
givepower = 5

[State 4501, 3]
type = HitDef
trigger1 = Time > 72
attr = A, HP
damage = 19 , 6
animtype = Heavy
guardflag = MA
hitflag = MAFP
priority = 7 + var(43), Hit
sprpriority = 6
pausetime = 0, 2
guard.sparkno = -1;S8200
sparkno = -1;S8500
sparkxy = 0, 0
hitsound = S171, 12
guardsound = S2, 4
ground.type = High
ground.slidetime = 50
ground.hittime = 20
ground.velocity = -26, -7
airguard.velocity = -5
air.type = High
air.velocity = -28, -9
air.hittime = 20
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = -9
envshake.freq = 60
getpower = 0
givepower = 5

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1 = !(Target, HitShakeOver)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8014)
ID = 8000
name = "Spark"
posType = P2
pos = -15,-65
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 4501, 6]
type = NotHitBy
trigger1 = 1
value = SCA

[State 4501, 7]
type = PlaySnd
trigger1 = animelem = 1
value = 7, 7
ignorehitpause = 1

[State 4501, 9]
type = DestroySelf
trigger1 = AnimTime = 0 ;Time = 86
trigger2 = parent, MoveType = H
trigger3 = parent, StateNo != 3600

;-------------------------------------------------------------------------------
; SUPER FINISH BACKGROUND
;-------------------------------------------------------------------------------
;Super finish background
[Statedef 4000]
type = A
velSet = 0,0
anim = 1

[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 15600

[State 8600, Move Name: Shouky Hatsudou]
type = VarSet
trigger1 = !Time && Root, var(5) = [3600,3601]
var(7) = 2

[State 8600, Move Name: Maki Shinky Hatsudou]
type = VarSet
trigger1 = !Time && Root, var(5) = [3000,3003]
var(7) = 3

[State 8600, Move Name: Kyouja Renbu]
type = VarSet
trigger1 = !Time && (Root, var(5) = [3500,3545])
var(7) = 4

[State 8600, Move Name: Shinky Hatsudou Kai]
type = VarSet
trigger1 = !Time && Root, var(5) = [3200,3204]
var(7) = 5

[State 8600, Move Name: Gairyu Meshuu]
type = VarSet
trigger1 = !Time && (Root, var(5) = [3400,3404])
var(7) = 6

[State 8600, Move Name: Sairou Kyushuu]
type = VarSet
trigger1 = !Time && Root, var(5) = 3300
var(7) = 7

[State 8600, Text 1]
type = Explod
trigger1 = !Time && var(7)
anim = 8610 + var(7)
ID = 10
onTop = 1
posType = Left
pos = 160,120
scale = 0.5,0.5
bindTime = -1
removeTime = 32
pauseMoveTime = -1
superMoveTime = -1
trans = add

[State 8600, Text 2]
type = Explod
trigger1 = !Time && var(7)
anim = 8610 + var(7)
ID = 11
onTop = 1
posType = left
pos = 160,120
scale = 0.5,0.5
bindTime = -1
removeTime = 8
pauseMoveTime = -1
superMoveTime = -1
trans = add

[State 8600, Text 1 Fade]
type = ModifyExplod
trigger1 = NumExplod(10)
ID = 10
trans = AddAlpha
alpha = ifElse(Time < 16, 256, 256 - 32 * (Time - 16)), ifElse(Time < 16, 0, 32 * (Time - 16))

[State 8600, Text 2 Fade]
type = ModifyExplod
trigger1 = NumExplod(11)
ID = 11
scale = 0.5 + (0.0625 * Time), 0.5 + (0.0625 * Time)
trans = AddAlpha
alpha = 256 - (32 * Time), 32 * Time

[State 7600, Snd]
type=playsnd
trigger1= !time
value= 2001, 6

[State 8600, BG PalFX]
type = BGpalFX
trigger1 = Time < 16
time = 1
mul = 0, 0, 0

[State 8600, BG PalFX]
type = BGpalFX
trigger1 = Time = [16,24)
time = 1
mul = 32 * (Time - 16), 32 * (Time - 16), 32 * (Time - 16)

[State 4005, assert]
type=assertspecial
trigger1=time<60
flag=nomusic

[State 8520, background]
type = Explod
trigger1 = !Time
anim = 7611
ID = 22
sprPriority = -17
posType = Back
removeTime = 32
superMoveTime = -1

[State 8600, Super Finish Explod]
type = Explod
trigger1 = !Time
anim = 7601
ID = 7601
ontop = 1
postype = Left
pos = 0,0
scale = 1, 1
bindTime = -1
removeTime = 32
pauseMoveTime = -1
superMoveTime = -1

[State 8600, Super Finish Explod Fade]
type = ModifyExplod
trigger1 = NumExplod(7601)
ID = 7601
trans = AddAlpha
alpha = ifElse(Time < 16, 256, 256 - 32 * (Time - 16)), 256

[State 8600, Circle Explod]
type = Explod
trigger1 = !Time
anim = 7600
ID = 7600
under = 1
posType = Left
pos = 160,120
bindTime = -1
removeTime = 16
pauseMoveTime = -1
superMoveTime = -1

[State 8600, Circle Fade]
type = ModifyExplod
trigger1 = NumExplod(7600)
ID = 7600
scale = (0.25 * Time), (0.25 * Time)
trans = AddAlpha
alpha = 256 - (16 * Time), 256

[State 8600, Assert: NoFG]
type = AssertSpecial
trigger1 = Time < 16
flag = NoFG

[State 8600, Assert: NoBarDisplay]
type = AssertSpecial
trigger1 = Time < 24
flag = NoBarDisplay

[State 8600, RemoveExplod]
type = RemoveExplod
trigger1 = Time >= 24
trigger2 = RoundState < 3

[State 8600, End]
type = DestroySelf
trigger1 = RoundState < 3

;-------------------------------------------------------------------------------
;Excell finish background
[Statedef 4005]
type = S
anim = 8050
ctrl = 0
sprpriority=-10

[State 8600, Text 1]
type = Explod
trigger1 = !Time
anim = 8618
ID = 10
onTop = 1
posType = Left
pos = 160,120
scale = 0.5,0.5
bindTime = -1
removeTime = 32
pauseMoveTime = -1
superMoveTime = -1
trans = add

[State 8600, Text 2]
type = Explod
trigger1 = !Time
anim = 8618
ID = 11
onTop = 1
posType = left
pos = 160,120
scale = 0.5,0.5
bindTime = -1
removeTime = 8
pauseMoveTime = -1
superMoveTime = -1
trans = add

[State 8600, Text 1 Fade]
type = ModifyExplod
trigger1 = NumExplod(10)
ID = 10
trans = AddAlpha
alpha = ifElse(Time < 16, 256, 256 - 32 * (Time - 16)), ifElse(Time < 16, 0, 32 * (Time - 16))

[State 8600, Text 2 Fade]
type = ModifyExplod
trigger1 = NumExplod(11)
ID = 11
scale = 0.5 + (0.0625 * Time), 0.5 + (0.0625 * Time)
trans = AddAlpha
alpha = 256 - (32 * Time), 32 * Time

[State 4005, ParentVarSet]
type = ParentVarSet
trigger1 = time = 0
var(5) = 1

[State 4005, AS]
type = AssertSpecial
trigger1 = 1
flag = nobg
flag2 = nobardisplay
flag3 = nofg

[State 4005, assert]
type=assertspecial
trigger1=time<60
flag=nomusic

[State 4005]
type = PosSet
trigger1 = 1
x = 0
y = -80

[State 4005]
type = PlaySnd
trigger1 = animelem = 1
value = 8500,0

[State 4005]
type = PlaySnd
trigger1 = animelem = 1
value = 8500,1

[State 4005]
type = AngleAdd
trigger1 = 1
value = 25

[State 4005]
type = AngleDraw
trigger1 = time<6
scale = .5+(time)*.025,.5+(time)*.025

[State 4005]
type = AngleDraw
trigger1 = time=[6,25]
scale = .625-(time-6)*.025,.625-(time-6)*.025

[State 4005]
type = AngleDraw
trigger1 = time=[26,80]
scale = .2+(time-26)*.025,.2+(time-26)*.025

[State 4005]
type = Trans
trigger1 = 1
trans = add

[State 4005]
type = DestroySelf
trigger1 = time=80

;-------------------------------------------------------------------------------
; Maki Hatsudou bean
[Statedef 6002]
Type = S
Movetype = A
physics = S
anim = 3390
sprpriority = 5

[State 6002, beam]
type = PlaySnd
trigger1 = time = 0
value = 2000,29

[State 6002, 1]
type = BindToParent
trigger1 = 1
time = 1
pos = 55,-65

[State 6002, 1]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

;[State 6002, 2]
;type = PlayerPush
;trigger1 = Time >= 0
;value = 0

[State 6002, HitDef]
type = HitDef
trigger1 = animelemtime(7) < 0
attr = S, HP
animtype = Hard
damage = 35,7
hitflag = MAF
guardflag = MA
pausetime = 0, 0
sparkno= s7030+(random%4)
guard.sparkno = s7006
sparkxy = 0,0
hitsound =  s171,12
guardsound = s2,4
ground.type = High
ground.slidetime = 13
ground.hittime = 26
ground.velocity = -7,-3
guard.velocity = -4
air.velocity = -7,-1
airguard.velocity = -4,-1
getpower = 0
envshake.time = 10
envshake.ampl = -9
envshake.freq = 60
fall.envshake.time = 20
p1sprpriority = 3
fall = 1
fall.recover = 0
yaccel = .5

[State 3001, bean efect]
type = explod
trigger1 = AnimElem = 25
persistent = 0
anim = 3391
pos = 0,6
scale = 1,.5
postype = p1
removetime = 5
sprpriority = 5

[State 6002, trans]
type = palfx
trigger1 = 1
time = 1
add = -time*3,-time*3,-time*3

[State 6002, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, AA, AT
ignorehitpause = 1

[State 6002, 9]
type = DestroySelf
trigger1 = AnimTime = 0 ;Time = 86
trigger2 = parent, MoveType = H
trigger3 = parent, StateNo != 3001

;-------------------------------------------------------------------------------
;Circle
[Statedef 7050]
physics = N
velset = 0, 0
anim = 9741

[State 7050, palfx]
type = palfx
trigger1 = time = 5
time = 10
add = 0, 0, 0
sinadd = -255, -255, -255, 40

[State 7050, Circle]
type = explod
trigger1 = !time
anim = 7051
ID = 7051
sprpriority = 5
postype = p1
removetime = 15
pausemovetime = -1
supermovetime = -1

[State 7050, Circle]
type = explod
trigger1 = !time
anim = 7050
ID = 7050
sprpriority = 5
postype = p1
removetime = 15
pausemovetime = -1
supermovetime = -1

[State 7050, Shrink]
type = modifyexplod
trigger1 = 1
ID = 7051
scale = 0.15 * time, 0.15 * time

[State 7050, Shrink]
type = modifyexplod
trigger1 = 1
ID = 7050
scale = 0.05 * time, 0.05 * time

[State 7050, No Shadow]
type = assertspecial
trigger1 = 1
flag = invisible
ignorehitpause = 1

[State 7050, Safety]
type = removeexplod
trigger1 = time >= 15
ID = 7050

[State 7050, End]
type = destroyself
trigger1 = time >= 15

;-------------------------------------------------------------------------------
;jump dust
[Statedef 7100]
physics=N
velset=0,0
anim=9741

[State 7100, Bind]
type=bindtoroot
trigger1= time

[State 7100, Dust]
type=explod
trigger1= !time
anim=7100
ID=7100
sprpriority=3
postype=p1
scale=.5,.5
pausemovetime=-1
supermovetime=-1

[State 7100, Dust]
type=explod
trigger1= !time || time=2 || time=6
anim=7101
ID=7100
sprpriority=3
postype=p1
scale=.5,.5
pausemovetime=-1
supermovetime=-1

[State 7100, Assert]
type=assertspecial
trigger1= 1
flag=invisible

[State 7100, End]
type=destroyself
trigger1= time>=7

;-------------------------------------------------------------------------------
;jump flames
[Statedef 7101]
physics=N
velset=0,0
anim=9741

[State 7101, Bind]
type=bindtoroot
trigger1= time

[State 7101, explod]
type = Explod
triggerall = var(59) = 0
trigger1 = (timemod = 3,2)
trigger1 =  power >= 1000
trigger1 =  power <3000
anim = 71001
postype = p1
pos = 19,-73
supermove = 9999
random = 10,40
scale = .2,.1
sprpriority = 5
ownpal = 1
ignorehitpause=1
ID = 1113

[State 7101, explod]
type = Explod
triggerall = var(59) = 0
trigger1 = (timemod = 4,3)
trigger1 =  power >= 1000
trigger1 =  power <3000
anim = 71002
postype = p1
pos = 19,-73
supermove = 9999
supermove = 9999
random = 10,40
scale = .2,.2
sprpriority = 5
ownpal = 1
ignorehitpause=1
ID = 1113

[State 7101, explod]
type = Explod
triggerall = var(59) = 0
trigger1 = (timemod = 5,3)
trigger1 =  power >= 3000
anim = 71001
postype = p1
pos = -19,-92
supermove = 9999
random = 10,40
scale = .3,.3
sprpriority = 5
ownpal = 1
ignorehitpause=1
ID = 1113

[State 7101, explod]
type = Explod
triggerall = var(59) = 0
trigger1 = (timemod = 3,2)
trigger1 =  power >= 3000
anim = 71001
postype = p1
pos = 19,-93
supermove = 9999
random = 10,40
scale = .3,.3
sprpriority = 5
ownpal = 1
ignorehitpause=1
ID = 1113

[State 7101, Assert]
type=assertspecial
trigger1= 1
flag=invisible

[State 7101, End]
type=destroyself
trigger1= time>=15

;-------------------------------------------------------------------------------
;Blue flames efect
[Statedef 7180]
physics = N
velset = 0, 0
anim = 9741
sprpriority = 4

[State 7180, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 7180, flames]
type = explod
trigger1 = 1
anim = 7180
ID = 7180
sprpriority = 3
postype = p2
vel = -.2, -.75
pos = (enemynear, const(size.mid.pos.x)), ifelse((enemynear, statetype = L), 0, (enemynear, const(size.mid.pos.y) + 10))
random = 40, 40
removetime = -2
scale = 0.5, 0.5
ownpal = 1

[State 7180, Pos]
type = posadd
trigger1 = 1
x = ceil(p2dist x)
y = ceil(p2dist y)
[State End]
type = destroyself
triggerall = numenemy
trigger1 = enemynear, ctrl
trigger2 = enemynear, movetype != H || enemynear, stateno = 5300
trigger3 = enemynear, statetype = L && (enemynear, stateno != [5080, 5081])

[State End]
type = destroyself
trigger1 = !numenemy || time >= 120

;-------------------------------------------------------------------------------
;Zero counter charge
[Statedef 7250]
physics=N
velset=0,0
anim=9741

[State 350, Snd]
type=playsnd
trigger1= !time
value=2000,34
channel=0

[State 7250, BG PalFX]
type=bgpalfx
trigger1= !time
time=20
add=-255,-128,-64
sinadd=255,128,64,80
persistent=0

[State 7250, palfx]
type=palfx
trigger1= !time
time=20
sinadd=-255,-255,-255,80

[State 7250, thunder]
type=explod
trigger1= !time
anim=7250
ID=7250
sprpriority=-2
postype=p1
pos=0,-ceil(pos y)
removetime=-2
supermovetime=30
ownpal=1

[State 7250, Circle]
type=explod
trigger1= !time
anim=7251
ID=7251
sprpriority=5
postype=p1
removetime=20
supermovetime=30

[State 7250, Shrink]
type=modifyexplod
trigger1= numexplod(7251)
ID=7251
scale=.2+(.09*time),.2+(.09*time)

[State 7250, No Shadow]
type=assertspecial
trigger1= 1
flag=noshadow
flag2=invisible
ignorehitpause=1

[State 7250, End]
type=destroyself
trigger1= time>=20

;-------------------------------------------------------------------------------
;Excel - Original combo charge
[Statedef 7260]
physics=N
velset=0,0
anim=9741

[State 7260, BG PalFX]
type=bgpalfx
trigger1= !time
time=30
add=-255,-255,-128
sinadd=255,255,128,120

[State 7260, palfx]
type=palfx
trigger1= time=20
time=11
sinadd=-255,-255,-255,40
persistent=0

[State 7260, FX]
type = explod
trigger1 = !time
anim = 7500
ID = 8300
sprpriority = 5
postype = p1
removetime = 20
supermovetime = -1

[State 7260, FX]
type = explod
trigger1 = time = 15
anim = 7501
ID = 8301
sprpriority = 5
postype = p1
supermovetime = -1

[State 7260, FX]
type = explod
trigger1 = !time
anim = 7503
ID = 8302
sprpriority = 5
postype = p1
removetime = 15
supermovetime = -1

[State 7260, logo]
type = explod
trigger1 = !time
anim = 8303
ID = 8303
sprpriority = -5
postype = p1
facing = facing
supermovetime = -1

[State 7260, Scale]
type = modifyexplod
trigger1 = numexplod(8300)
ID = 8300
scale = 0.02 * time, 0.02 * time

[State 7260, Scale]
type = modifyexplod
trigger1 = numexplod(8300) && time >= 15
ID = 8300
scale = 0.02 * time, 0.02 * time
trans = addalpha
alpha = ceil(256 -(51.2 * (time -15))), 256

[State 7260, Scale]
type = modifyexplod
trigger1 = numexplod(8301)
ID = 8301
scale = 0.1 + (0.1 * (time -15)), 0.1 + (0.1 * (time -15))
trans = addalpha
alpha = ceil(256 -(25.6 * (time -15))), 256

[State 7260, Scale]
type = modifyexplod
trigger1 = numexplod(8302)
ID = 8302
scale = 2 -(0.133 * time), 2 -(0.133 * time)

[State 7260, Scale]
type = modifyexplod
trigger1 = numexplod(8303)
ID = 8303
scale = 0.0385 * time, 0.0385 * time
trans = addalpha
alpha = ifelse(time < 15, ceil(17.1 * time), ceil(256 -23.3 * (time -15))), 256

[State 7260, No Shadow]
type=assertspecial
trigger1= 1
flag=noshadow
flag2=invisible
ignorehitpause=1

[State 7260, bound]
type=screenbound
trigger1= 1
value=0

[State 7260, Safety]
type=removeexplod
trigger1= time>=30

[State 7260, End]
type=destroyself
trigger1= time>=30

;-------------------------------------------------------------------------------
;KANJI B.G.
[Statedef 7610]
physics=N
velset=0,0
anim=9741

[State 8600, Text 1]
type = Explod
trigger1 = time>1
anim = 8619
ID = 10
onTop = 1
posType = Left
pos = 160,120
scale = 0.5,0.5
bindTime = -1
removeTime = 32
pauseMoveTime = -1
superMoveTime = -1
trans = add

[State 8600, Text 2]
type = Explod
trigger1 = time>1
anim = 8619
ID = 11
onTop = 1
posType = left
pos = 160,120
scale = 0.5,0.5
bindTime = -1
removeTime = 8
pauseMoveTime = -1
superMoveTime = -1
trans = add

[State 8600, Text 1 Fade]
type = ModifyExplod
trigger1 = NumExplod(10)
ID = 10
trans = AddAlpha
alpha = ifElse(Time < 16, 256, 256 - 32 * (Time - 16)), ifElse(Time < 16, 0, 32 * (Time - 16))

[State 8600, Text 2 Fade]
type = ModifyExplod
trigger1 = NumExplod(11)
ID = 11
scale = 0.5 + (0.0625 * Time), 0.5 + (0.0625 * Time)
trans = AddAlpha
alpha = 256 - (32 * Time), 32 * Time

[State 7610, assert]
type=assertspecial
trigger1=time<90
flag=nomusic

[State 7610, black]
type=bgpalfx
trigger1=time<120
time=45
add=-255,-255,-255

[State 7610, black]
type=bgpalfx
trigger1=time=120
time=60
add=-255,-255,-255
sinadd=255,255,255,240

[State 6200, fade]
type=palfx
trigger1=time=120
time=60
sinadd=-255,-255,-255,240

[State 7610, kanji]
type=explod
trigger1=!time
anim=7610
ID=7610
sprpriority=-5
postype=left
pos=160,80
scale=.9,.9
bindtime=-1

[State 7610, flamebg]
type = explod
trigger1 = !time
anim = 7612
ID = 7611
sprpriority = 5
postype = left
pos = 0, 0 ;0, floor((gameheight / gamewidth) * 80) - 60
bindtime = -1
removetime = -1
pausemovetime = 300
supermovetime = 300

[State 7610, assert]
type=assertspecial
trigger1=1
flag=invisible
flag2=nobardisplay
ignorehitpause=1

[State 7610, assert]
type=assertspecial
trigger1=time<120
flag=noFG
ignorehitpause=1

[State 7610, safety]
type=removeexplod
trigger1=time>=180

[State 7610, end]
type=destroyself
trigger1=time>=180

;---------------------------------------------------------------------------
[Statedef 7950]
ctrl = 0
anim = 12236
sprpriority = 2

[State 9000, 1]
type = varadd
trigger1 = 1
var(0) = 1

[State 9000, 1]
type = velset
trigger1 = 1
x = -.18*cos(var(0)*0.095)
y = -.18*sin(var(0)*0.095)

[State 9000, 1]
type = posadd
trigger1 = time = 0
x = -1

[State 8200, PalFX]
type = PalFX
trigger1 = 1;var(1)
mul = 230,230,230;ceil(152-abs(76*sin(gametime*.05))),ceil(128-abs(64*sin(gametime*.05)))
time = 1

[State 9000, 1]
type = trans
trigger1 = 1
trans = add1
alpha = 128,192

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, ChangeState]
type = ChangeState
trigger1 = time = 30
value = 7951

;---------------------------------------------------------------------------
[Statedef 7951]
ctrl = 0
ownpal = 1
sprpriority = 2

[State 9000, 1]
type = varadd
trigger1 = 1
var(0) = 1

[State 9000, 1]
type = velset
trigger1 = 1
x = -.18*cos(var(0)*0.095)
y = -.18*sin(var(0)*0.095)

[State 8200, PalFX]
type = PalFX
trigger1 = 1
mul = (256-(time*16))*ifelse(var(1),.8984375,1),(256-(time*16))*ifelse(var(1),ceil(152-abs(76*sin(gametime*.05)))*.00390265,1),(256-(time*16))*ifelse(var(1),ceil(128-abs(64*sin(gametime*.05)))*.00390265,1)
time = 1

[State 9000, 1]
type = trans
trigger1 = 1
trans = add1
alpha = 64,256

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 8200, Destroy]
type = DestroySelf
trigger1 = time = 10

;---------------------------------------------------------------------------
[Statedef 7952]
ctrl = 0
anim = 12237
sprpriority = 2

[State 9000, 1]
type = varadd
trigger1 = 1
var(0) = 1

[State 9000, 1]
type = velset
trigger1 = 1
x = .18*cos(var(0)*0.095)
y = .18*sin(var(0)*0.095)

[State 9000, 1]
type = posadd
trigger1 = time = 0
x = 1

[State 8200, PalFX]
type = PalFX
trigger1 = 1;var(1)
mul = 230,230,230;ceil(152-abs(76*sin(gametime*.05))),ceil(128-abs(64*sin(gametime*.05)))
time = 1

[State 9000, 1]
type = trans
trigger1 = 1
trans = add1
alpha = 128,192

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, ChangeState]
type = ChangeState
trigger1 = time = 30
value = 7953

;---------------------------------------------------------------------------
[Statedef 7953]
ctrl = 0
ownpal = 1
sprpriority = 2

[State 9000, 1]
type = varadd
trigger1 = 1
var(0) = 1

[State 9000, 1]
type = velset
trigger1 = 1
x = .18*cos(var(0)*0.095)
y = .18*sin(var(0)*0.095)

[State 8200, PalFX]
type = PalFX
trigger1 = 1
mul = (256-(time*16))*ifelse(var(1),.8984375,1),(256-(time*16))*ifelse(var(1),ceil(152-abs(76*sin(gametime*.05)))*.00390265,1),(256-(time*16))*ifelse(var(1),ceil(128-abs(64*sin(gametime*.05)))*.00390265,1)
time = 1

[State 9000, 1]
type = trans
trigger1 = 1
trans = add1
alpha = 64,256

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 8200, Destroy]
type = DestroySelf
trigger1 = time = 10

;---------------------------------------------------------------------------
[Statedef 7954]
ctrl = 0
anim = 12238
sprpriority = 2

[State 9000, 1]
type = varadd
trigger1 = 1
var(0) = 1

[State 9000, 1]
type = velset
trigger1 = 1
x = -.18*cos(var(0)*0.095)
y = -.18*sin(var(0)*0.095)

[State 9000, 1]
type = posadd
trigger1 = time = 0
x = -1

[State 8200, PalFX]
type = PalFX
trigger1 = 1;var(1)
mul = 230,230,230;ceil(152-abs(76*sin(gametime*.05))),ceil(128-abs(64*sin(gametime*.05)))
time = 1

[State 9000, 1]
type = trans
trigger1 = 1
trans = add1
alpha = 128,192

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, ChangeState]
type = ChangeState
trigger1 = time = 30
value = 7955

;---------------------------------------------------------------------------
[Statedef 7955]
ctrl = 0
ownpal = 1
sprpriority = 2

[State 9000, 1]
type = varadd
trigger1 = 1
var(0) = 1

[State 9000, 1]
type = velset
trigger1 = 1
x = -.18*cos(var(0)*0.095)
y = -.18*sin(var(0)*0.095)

[State 8200, PalFX]
type = PalFX
trigger1 = 1
mul = (256-(time*16))*ifelse(var(1),.8984375,1),(256-(time*16))*ifelse(var(1),ceil(152-abs(76*sin(gametime*.05)))*.00390265,1),(256-(time*16))*ifelse(var(1),ceil(128-abs(64*sin(gametime*.05)))*.00390265,1)
time = 1

[State 9000, 1]
type = trans
trigger1 = 1
trans = add1
alpha = 64,256

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 8200, Destroy]
type = DestroySelf
trigger1 = time = 10

;---------------------------------------------------------------------------
[Statedef 7956]
ctrl = 0
anim = 12240
sprpriority = 2

[State 9000, 1]
type = varadd
trigger1 = 1
var(0) = 1

[State 9000, 1]
type = velset
trigger1 = 1
x = .18*cos(var(0)*0.095)
y = .18*sin(var(0)*0.095)

[State 9000, 1]
type = posadd
trigger1 = time = 0
x = 1

[State 8200, PalFX]
type = PalFX
trigger1 = 1;var(1)
mul = 230,230,230;ceil(152-abs(76*sin(gametime*.05))),ceil(128-abs(64*sin(gametime*.05)))
time = 1

[State 9000, 1]
type = trans
trigger1 = 1
trans = add1
alpha = 128,192

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, ChangeState]
type = ChangeState
trigger1 = time = 30
value = 7957

;---------------------------------------------------------------------------
[Statedef 7957]
ctrl = 0
ownpal = 1
sprpriority = 2

[State 9000, 1]
type = varadd
trigger1 = 1
var(0) = 1

[State 9000, 1]
type = velset
trigger1 = 1
x = .18*cos(var(0)*0.095)
y = .18*sin(var(0)*0.095)

[State 8200, PalFX]
type = PalFX
trigger1 = 1
mul = (256-(time*16))*ifelse(var(1),.8984375,1),(256-(time*16))*ifelse(var(1),ceil(152-abs(76*sin(gametime*.05)))*.00390265,1),(256-(time*16))*ifelse(var(1),ceil(128-abs(64*sin(gametime*.05)))*.00390265,1)
time = 1

[State 9000, 1]
type = trans
trigger1 = 1
trans = add1
alpha = 64,256

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 8200, Destroy]
type = DestroySelf
trigger1 = time = 10

;---------------------------------------------------------------------------
[Statedef 7958]
ctrl = 0
anim = 12239
sprpriority = 2

[State 9000, 1]
type = varadd
trigger1 = 1
var(0) = 1

[State 9000, 1]
type = velset
trigger1 = 1
x = -.18*cos(var(0)*0.095)
y = -.18*sin(var(0)*0.095)

[State 9000, 1]
type = posadd
trigger1 = time = 0
x = -1

[State 8200, PalFX]
type = PalFX
trigger1 = 1;var(1)
mul = 230,230,230;ceil(152-abs(76*sin(gametime*.05))),ceil(128-abs(64*sin(gametime*.05)))
time = 1

[State 9000, 1]
type = trans
trigger1 = 1
trans = add1
alpha = 128,192

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, ChangeState]
type = ChangeState
trigger1 = time = 30
value = 7959

;---------------------------------------------------------------------------
[Statedef 7959]
ctrl = 0
ownpal = 1
sprpriority = 2

[State 9000, 1]
type = varadd
trigger1 = 1
var(0) = 1

[State 9000, 1]
type = velset
trigger1 = 1
x = -.18*cos(var(0)*0.095)
y = -.18*sin(var(0)*0.095)

[State 8200, PalFX]
type = PalFX
trigger1 = 1
mul = (256-(time*16))*ifelse(var(1),.8984375,1),(256-(time*16))*ifelse(var(1),ceil(152-abs(76*sin(gametime*.05)))*.00390265,1),(256-(time*16))*ifelse(var(1),ceil(128-abs(64*sin(gametime*.05)))*.00390265,1)
time = 1

[State 9000, 1]
type = trans
trigger1 = 1
trans = add1
alpha = 64,256

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 8200, Destroy]
type = DestroySelf
trigger1 = time = 10

;---------------------------------------------------------------------------
[Statedef 7960]
ctrl = 0
anim = 12241
sprpriority = 2

[State 9000, 1]
type = varadd
trigger1 = 1
var(0) = 1

[State 9000, 1]
type = velset
trigger1 = 1
x = -.18*cos(var(0)*0.095)
y = -.18*sin(var(0)*0.095)

[State 9000, 1]
type = posadd
trigger1 = time = 0
x = -1

[State 8200, PalFX]
type = PalFX
trigger1 = 1;var(1)
mul = 230,230,230;ceil(152-abs(76*sin(gametime*.05))),ceil(128-abs(64*sin(gametime*.05)))
time = 1

[State 9000, 1]
type = trans
trigger1 = 1
trans = add1
alpha = 128,192

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, ChangeState]
type = ChangeState
trigger1 = time = 30
value = 7959

;---------------------------------------------------------------------------
[Statedef 7961]
ctrl = 0
ownpal = 1
sprpriority = 2

[State 9000, 1]
type = varadd
trigger1 = 1
var(0) = 1

[State 9000, 1]
type = velset
trigger1 = 1
x = -.18*cos(var(0)*0.095)
y = -.18*sin(var(0)*0.095)

[State 8200, PalFX]
type = PalFX
trigger1 = 1
mul = (256-(time*16))*ifelse(var(1),.8984375,1),(256-(time*16))*ifelse(var(1),ceil(152-abs(76*sin(gametime*.05)))*.00390265,1),(256-(time*16))*ifelse(var(1),ceil(128-abs(64*sin(gametime*.05)))*.00390265,1)
time = 1

[State 9000, 1]
type = trans
trigger1 = 1
trans = add1
alpha = 64,256

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 8200, Destroy]
type = DestroySelf
trigger1 = time = 2

;-------------------------------------------------------------------------------
[Statedef 7999]
type = S
movetype = I
physics = N
anim = 6900
ctrl = 0

[State 20000, Bind]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 20000, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 600 && root,animelem = 2
value = 6060

[State 20000, ChangeState]
type = ChangeState
triggerall = root,movetype != H
trigger1 = root,stateno = 610 && root,animelem = 2
value = 6060

;-------------------------------------------------------------------
;------------------------ 3-1
[Statedef 8003]
type = A
movetype= I
physics = N
anim = 8003
velset = 0,0
ctrl = 0
sprpriority = 5

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State -3, Burst]
type = VarSet
trigger1 = time = 0
fvar(0) = .5

[State -3, Burst]
type = VarAdd
trigger1 = Time > 17
fvar(0) = -.032

[State -3, Burst]
type = VarSet
trigger1 = time = 0
fvar(1) = .125

[State -3, Burst]
type = VarAdd
trigger1 = Time < 13
fvar(1) = .032

[State 1000, 0]
type = AngleSet
trigger1 = 1
value = 64-time

[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = fvar(0),fvar(1)

[State 1000, 1]
type = Trans
trigger1 = 1
trans = add

[State 1000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, DestroySelf]
type = DestroySelf
trigger1 = time = 31

;------------------------ 3-2
[Statedef 8004]
type = A
movetype= I
physics = N
anim = 8003
velset = 0,0
ctrl = 0
sprpriority = 5

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State -3, Burst]
type = VarSet
trigger1 = time = 0
fvar(0) = .5

[State -3, Burst]
type = VarAdd
trigger1 = Time > 17
fvar(0) = -.032

[State -3, Burst]
type = VarSet
trigger1 = time = 0
fvar(1) = .125

[State -3, Burst]
type = VarAdd
trigger1 = Time < 13
fvar(1) = .032

[State 1000, 0]
type = AngleSet
trigger1 = 1
value = 184-time

[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = fvar(0),fvar(1)

[State 1000, 1]
type = Trans
trigger1 = 1
trans = add

[State 1000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, DestroySelf]
type = DestroySelf
trigger1 = time = 31

;------------------------ 3-3
[Statedef 8005]
type = A
movetype= I
physics = N
anim = 8003
velset = 0,0
ctrl = 0
sprpriority = 5

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State -3, Burst]
type = VarSet
trigger1 = time = 0
fvar(0) = .5

[State -3, Burst]
type = VarAdd
trigger1 = Time > 17
fvar(0) = -.032

[State -3, Burst]
type = VarSet
trigger1 = time = 0
fvar(1) = .125

[State -3, Burst]
type = VarAdd
trigger1 = Time < 13
fvar(1) = .032

[State 1000, 0]
type = AngleSet
trigger1 = 1
value = 304-time

[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = fvar(0),fvar(1)

[State 1000, 1]
type = Trans
trigger1 = 1
trans = add

[State 1000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, DestroySelf]
type = DestroySelf
trigger1 = time = 31

;------------------------ 3-4
[Statedef 8006]
type = A
movetype= I
physics = N
anim = 8003
velset = 0,0
ctrl = 0
sprpriority = 5

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State -3, Burst]
type = VarSet
trigger1 = time = 0
fvar(0) = .5

[State -3, Burst]
type = VarAdd
trigger1 = Time > 17
fvar(0) = -.032

[State -3, Burst]
type = VarSet
trigger1 = time = 0
fvar(1) = .125

[State -3, Burst]
type = VarAdd
trigger1 = Time < 13
fvar(1) = .032

[State 1000, 0]
type = AngleSet
trigger1 = 1
value = 4

[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = fvar(0),fvar(1)

[State 1000, 1]
type = Trans
trigger1 = 1
trans = add

[State 1000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, DestroySelf]
type = DestroySelf
trigger1 = time = 31

;------------------------ 3-5
[Statedef 8007]
type = A
movetype= I
physics = N
anim = 8003
velset = 0,0
ctrl = 0
sprpriority = 5

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State -3, Burst]
type = VarSet
trigger1 = time = 0
fvar(0) = .5

[State -3, Burst]
type = VarAdd
trigger1 = Time > 17
fvar(0) = -.032

[State -3, Burst]
type = VarSet
trigger1 = time = 0
fvar(1) = .125

[State -3, Burst]
type = VarAdd
trigger1 = Time < 13
fvar(1) = .032

[State 1000, 0]
type = AngleSet
trigger1 = time = 0
value = 124

[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = fvar(0),fvar(1)

[State 1000, 1]
type = Trans
trigger1 = 1
trans = add

[State 1000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, DestroySelf]
type = DestroySelf
trigger1 = time = 31

;------------------------ 3-6
[Statedef 8008]
type = A
movetype= I
physics = N
anim = 8003
velset = 0,0
ctrl = 0
sprpriority = 5

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State -3, Burst]
type = VarSet
trigger1 = time = 0
fvar(0) = .5

[State -3, Burst]
type = VarAdd
trigger1 = Time > 17
fvar(0) = -.032

[State -3, Burst]
type = VarSet
trigger1 = time = 0
fvar(1) = .125

[State -3, Burst]
type = VarAdd
trigger1 = Time < 13
fvar(1) = .032

[State 1000, 0]
type = AngleSet
trigger1 = time = 0
value = 244

[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = fvar(0),fvar(1)

[State 1000, 1]
type = Trans
trigger1 = 1
trans = add

[State 1000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, DestroySelf]
type = DestroySelf
trigger1 = time = 31

;-------------------------------------------------------------------------------
;sparks
;---Guard Normal---
[Statedef 8000]
type=A
physics=N
movetype=I
anim=8000
velset=0,0
sprpriority=5

[State 8000, Assert]
type=assertspecial
trigger1= 1
flag=noshadow

[State 8000, Scale]
type=angledraw
trigger1= 1
scale= .125+(.046875*time), .125+(.046875*time)

[State 8000, Trans]
type=trans
trigger1= time<4
trans= addalpha
alpha= 256, 256

[State 8000, Trans]
type=trans
trigger1= time>=4
trans= addalpha
alpha= 256 - 64*(time-4), 256

[State 8000, End]
type=destroyself
trigger1= time>=8

;---Guard Special---
[Statedef 8001]
type=A
physics=N
movetype=I
anim=8001
velset=0,0
sprpriority=5

[State 8001, Assert]
type=assertspecial
trigger1= 1
flag=noshadow

[State 8001, Scale]
type=angledraw
trigger1= 1
scale= .25+(.03125*time), .25+(.03125*time)

[State 8001, Trans]
type=trans
trigger1= time<4
trans= addalpha
alpha= 256, 256

[State 8001, Trans]
type=trans
trigger1= time>=4
trans= addalpha
alpha= 256 - 64*(time-4), 256

[State 8001, End]
type=destroyself
trigger1= time>=8

;---Weak---
[Statedef 8010]
type=A
physics=N
movetype=I
anim=8010
velset=0,0
sprpriority=5

[State 8010, Assert]
type=assertspecial
trigger1= 1
flag=noshadow

[State 8010, Angle]
type=angleset
trigger1= !time
value=30*(random%12)

[State 8010, Angle]
type=angleadd
trigger1= 1
value=30

[State 8010, Scale]
type=angledraw
trigger1= time<10
scale= .3-(time*.03), .3-(time*.03)
[State 8010, Scale]
type=angledraw
trigger1= time>=10
scale=0,0

[State 8010, Trans]
type=trans
trigger1= 1
trans=addalpha
alpha=256,256

[State 8010, Center]
type=explod
trigger1= !time
anim=8011
ID=1
postype=p1
facing=ifelse(random<500,-1,1)
vfacing=ifelse(random<500,-1,1)
sprpriority=5
removetime=16
pausemovetime=-1
supermovetime=-1

[State 8010, Scale]
type=modifyexplod
trigger1= numexplod(1)
ID=1
scale=.15+(.009375*time),.15+(.009375*time)
trans=addalpha
alpha=256-(16*time),256

[State 8010, Streaks]
type=explod
trigger1= !time
anim=8012
ID=2
postype=p1
facing=ifelse(random<500,-1,1)
vfacing=ifelse(random<500,-1,1)
sprpriority=5
removetime=16
pausemovetime=-1
supermovetime=-1

[State 8010, Scale]
type=modifyexplod
trigger1= numexplod(2)
ID=2
scale=.15+(.009375*time),.15+(.009375*time)
trans=addalpha
alpha=256-(16*time),256

[State 8010, Impact]
type=explod
trigger1= !time
anim=8014
ID=4
postype=p1
facing=ifelse(random<500,-1,1)
vfacing=ifelse(random<500,-1,1)
sprpriority=3
removetime=8
pausemovetime=-1
supermovetime=-1
[State 8010, Scale]
type=modifyexplod
trigger1= numexplod(4)
ID=4
scale=.3-(.0375*time),.3-(.0375*time)
trans=addalpha
alpha=128-(16*time),256

[State 8010, End]
type=removeexplod
trigger1= time>=16

[State 8010, End]
type=destroyself
trigger1= time>=16

;---Medium---
[Statedef 8011]
type=A
physics=N
movetype=I
anim=8010
velset=0,0
sprpriority=5

[State 8011, Assert]
type=assertspecial
trigger1= 1
flag=noshadow

[State 8011, Angle]
type=angleset
trigger1= !time
value=30*(random%12)

[State 8011, Angle]
type=angleadd
trigger1= 1
value=30
[State 8011, Scale]
type=angledraw
trigger1= time<10
scale= .35-(time*.035), .35-(time*.035)

[State 8011, Scale]
type=angledraw
trigger1= time>=10
scale=0,0

[State 8011, Trans]
type=trans
trigger1= 1
trans=addalpha
alpha=256,256

[State 8011, Center]
type=explod
trigger1= !time
anim=8011
ID=1
postype=p1
facing=ifelse(random<500,-1,1)
vfacing=ifelse(random<500,-1,1)
sprpriority=5
removetime=16
pausemovetime=-1
supermovetime=-1

[State 8011, Scale]
type=modifyexplod
trigger1= numexplod(1)
ID=1
scale=.175+(.0109375*time),.175+(.0109375*time)
trans=addalpha
alpha=256-(16*time),256

[State 8011, Streaks]
type=explod
trigger1= !time
anim=8012
ID=2
postype=p1
facing=ifelse(random<500,-1,1)
vfacing=ifelse(random<500,-1,1)
sprpriority=5
removetime=16
pausemovetime=-1
supermovetime=-1
[State 8011, Scale]
type=modifyexplod
trigger1= numexplod(2)
ID=2
scale=.175+(.0109375*time),.175+(.0109375*time)
trans=addalpha
alpha=256-(16*time),256

[State 8011, Impact]
type=explod
trigger1= !time
anim=8014
ID=4
postype=p1
facing=ifelse(random<500,-1,1)
vfacing=ifelse(random<500,-1,1)
sprpriority=3
removetime=8
pausemovetime=-1
supermovetime=-1
[State 8011, Scale]
type=modifyexplod
trigger1= numexplod(4)
ID=4
scale=.35-(.04375*time),.35-(.04375*time)
trans=addalpha
alpha=128-(16*time),256

[State 8011, End]
type=removeexplod
trigger1= time>=16

[State 8011, End]
type=destroyself
trigger1= time>=16

;---Strong---
[Statedef 8012]
type=A
physics=N
movetype=I
anim=8010
velset=0,0
sprpriority=5

[State 8012, Assert]
type=assertspecial
trigger1= 1
flag=noshadow

[State 8012, Angle]
type=angleset
trigger1= !time
value=30*(random%12)

[State 8012, Angle]
type=angleadd
trigger1= 1
value=30

[State 8012, Scale]
type=angledraw
trigger1= time<10
scale= .4-(time*.04), .4-(time*.04)
[State 8012, Scale]
type=angledraw
trigger1= time>=10
scale=0,0

[State 8012, Trans]
type=trans
trigger1= 1
trans=addalpha
alpha=256,256

[State 8012, Center]
type=explod
trigger1= !time
anim=8011
ID=1
postype=p1
facing=ifelse(random<500,-1,1)
vfacing=ifelse(random<500,-1,1)
sprpriority=5
removetime=16
pausemovetime=-1
supermovetime=-1

[State 8012, Scale]
type=modifyexplod
trigger1= numexplod(1)
ID=1
scale=.2+(.0125*time),.2+(.0125*time)
trans=addalpha
alpha=256-(16*time),256

[State 8012, Streaks]
type=explod
trigger1= !time
anim=8012
ID=2
postype=p1
facing=ifelse(random<500,-1,1)
vfacing=ifelse(random<500,-1,1)
sprpriority=5
removetime=16
pausemovetime=-1
supermovetime=-1

[State 8012, Scale]
type=modifyexplod
trigger1= numexplod(2)
ID=2
scale=.2+(.0125*time),.2+(.0125*time)
trans=addalpha
alpha=256-(16*time),256

[State 8012, Impact]
type=explod
trigger1= !time
anim=8014
ID=4
postype=p1
facing=ifelse(random<500,-1,1)
vfacing=ifelse(random<500,-1,1)
sprpriority=3
removetime=8
pausemovetime=-1
supermovetime=-1

[State 8012, Scale]
type=modifyexplod
trigger1= numexplod(4)
ID=4
scale=.4-(.05*time),.4-(.05*time)
trans=addalpha
alpha=128-(16*time),256

[State 8012, End]
type=removeexplod
trigger1= time>=16

[State 8012, End]
type=destroyself
trigger1= time>=16

;---Special---
[Statedef 8013]
type=A
physics=N
movetype=I
anim=8010
velset=0,0
sprpriority=5

[State 8013, Assert]
type=assertspecial
trigger1= 1
flag=noshadow

[State 8013, Angle]
type=angleset
trigger1= !time
value=30*(random%12)

[State 8013, Angle]
type=angleadd
trigger1= 1
value=30

[State 8013, Scale]
type=angledraw
trigger1= time<10
scale= .45-(time*.045), .45-(time*.045)

[State 8012, Scale]
type=angledraw
trigger1= time>=10
scale=0,0

[State 8013, Trans]
type=trans
trigger1= 1
trans=addalpha
alpha=256,256

[State 8013, Center]
type=explod
trigger1= !time
anim=8011
ID=1
postype=p1
facing=ifelse(random<500,-1,1)
vfacing=ifelse(random<500,-1,1)
sprpriority=5
removetime=16
pausemovetime=-1
supermovetime=-1
[State 8013, Scale]
type=modifyexplod
trigger1= numexplod(1)
ID=1
scale=.225+(.0140625*time),.225+(.0140625*time)
trans=addalpha
alpha=256-(16*time),256

[State 8013, Streaks]
type=explod
trigger1= !time
anim=8012
ID=2
postype=p1
facing=ifelse(random<500,-1,1)
vfacing=ifelse(random<500,-1,1)
sprpriority=5
removetime=16
pausemovetime=-1
supermovetime=-1
[State 8013, Scale]
type=modifyexplod
trigger1= numexplod(2)
ID=2
scale=.225+(.0140625*time),.225+(.0140625*time)
trans=addalpha
alpha=256-(16*time),256

[State 8013, P2 Back]
type=explod
trigger1= !time
anim=8013
ID=3
postype=p1
vfacing=ifelse(random<500,-1,1)
sprpriority=-3
removetime=8
pausemovetime=-1
supermovetime=-1
[State 8013, Scale]
type=modifyexplod
trigger1= numexplod(3)
ID=3
scale=.4,.4
trans=addalpha
alpha=256-(32*time),256

[State 8013, Impact]
type=explod
trigger1= !time
anim=8014
ID=4
postype=p1
facing=ifelse(random<500,-1,1)
vfacing=ifelse(random<500,-1,1)
sprpriority=3
removetime=8
pausemovetime=-1
supermovetime=-1

[State 8013, Scale]
type=modifyexplod
trigger1= numexplod(4)
ID=4
scale=.45-(.05625*time),.45-(.05625*time)
trans=addalpha
alpha=192-(24*time),256

[State 8013, End]
type=removeexplod
trigger1= time>=16

[State 8013, End]
type=destroyself
trigger1= time>=16

;---Super---
[Statedef 8014]
type=A
physics=N
movetype=I
anim=8010
velset=0,0
sprpriority=5

[State 8014, Assert]
type=assertspecial
trigger1= 1
flag=noshadow

[State 8014, Angle]
type=angleset
trigger1= !time
value=30*(random%12)

[State 8014, Angle]
type=angleadd
trigger1= 1
value=30
[State 8014, Scale]
type=angledraw
trigger1= time<10
scale= .5-(time*.05), .5-(time*.05)

[State 8012, Scale]
type=angledraw
trigger1= time>=10
scale=0,0

[State 8014, Trans]
type=trans
trigger1= 1
trans=addalpha
alpha=256,256

[State 8014, Center]
type=explod
trigger1= !time
anim=8011
ID=1
postype=p1
facing=ifelse(random<500,-1,1)
vfacing=ifelse(random<500,-1,1)
sprpriority=5
removetime=16
pausemovetime=-1
supermovetime=-1

[State 8014, Scale]
type=modifyexplod
trigger1= numexplod(1)
ID=1
scale=.25+(.015625*time),.25+(.015625*time)
trans=addalpha
alpha=256-(16*time),256

[State 8014, Streaks]
type=explod
trigger1= !time
anim=8012
ID=2
postype=p1
facing=ifelse(random<500,-1,1)
vfacing=ifelse(random<500,-1,1)
sprpriority=5
removetime=16
pausemovetime=-1
supermovetime=-1

[State 8014, Scale]
type=modifyexplod
trigger1= numexplod(2)
ID=2
scale=.25+(.015625*time),.25+(.015625*time)
trans=addalpha
alpha=256-(16*time),256

[State 8014, P2 Back]
type=explod
trigger1= !time
anim=8013
ID=3
postype=p1
vfacing=ifelse(random<500,-1,1)
sprpriority=-3
removetime=8
pausemovetime=-1
supermovetime=-1

[State 8014, Scale]
type=modifyexplod
trigger1= numexplod(3)
ID=3
scale=.5,.5
trans=addalpha
alpha=256-(32*time),256

[State 8014, Impact]
type=explod
trigger1= !time
anim=8014
ID=4
postype=p1
facing=ifelse(random<500,-1,1)
vfacing=ifelse(random<500,-1,1)
sprpriority=3
removetime=8
pausemovetime=-1
supermovetime=-1

[State 8014, Scale]
type=modifyexplod
trigger1= numexplod(4)
ID=4
scale=.5-(.0625*time),.5-(.0625*time)
trans=addalpha
alpha=256-(32*time),256

[State 8014, End]
type=removeexplod
trigger1= time>=16

[State 8014, End]
type=destroyself
trigger1= time>=16

;---Slash---
[Statedef 8015]
type = A
physics = N
moveType = I
anim = 8015
velSet = 0,0
sprPriority = 5

[State 8015, Assert: NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignoreHitPause = 1

[State 8015, AngleSet]
type = AngleSet
trigger1 = !Time
value = 15 * (Random % 24)

[State 8015, Scale]
type = AngleDraw
trigger1 = Time < 10
scale = (0.5 + (Time * 0.15)) / 2, (1 - (Time * 0.1)) / 2
ignoreHitPause = 1

[State 8015, Scale]
type = AngleDraw
trigger1 = Time >= 10
scale = 0,0
ignoreHitPause = 1

[State 8015, Transparency]
type = Trans
trigger1 = 1
trans = AddAlpha
alpha = 256,256
ignoreHitPause = 1

[State 8015, Circle]
type = Explod
trigger1 = !Time
anim = 8016
ID = 8016
posType = p1
removeTime = 10
sprPriority = 5
pauseMoveTime = -1
superMoveTime = -1

[State 8015, Circle Scale]
type = ModifyExplod
trigger1 = NumExplod(8016)
ID = 8016
scale = 0.3 + (0.03 * Time), 0.3 + (0.03 * Time)
trans = AddAlpha
alpha = ceil(256 - 25.6 * Time), 256

[State 8015, Streaks Explod]
type = Explod
trigger1 = !Time
anim = 8012
ID = 2
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 5
removeTime = 16
pauseMoveTime = -1
superMoveTime = -1

[State 8015, Scale Streaks Explod]
type = ModifyExplod
trigger1 = NumExplod(2)
ID = 2
scale = 0.25 + (0.015625 * Time), 0.25 + (0.015625 * Time)
trans = AddAlpha
alpha = 256 - (16 * Time), 256

[State 8015, Remove Explods]
type = RemoveExplod
trigger1 = Time >= 16

[State 8015, End]
type = DestroySelf
trigger1 = Time >= 16

;--Super Hit Spark (Shun Goku Satsu)--
[StateDef 8016]
type = A
physics = N
moveType = I
anim = 8010
velSet = 0,0
sprPriority = 5

[State 8015, Assert: NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignoreHitPause = 1

[State 8014, AngleSet]
type = AngleSet
trigger1 = !Time
value = 30 * (Random % 12)

[State 8014, AngleAdd]
type = AngleAdd
trigger1 = 1
value = 30

[State 8014, Scale]
type = AngleDraw
trigger1 = Time < 10
scale = 0.5 - (Time * 0.05), 0.5 - (Time * 0.05)
ignoreHitPause = 1

[State 8014, Scale]
type = AngleDraw
trigger1 = Time >= 10
scale = 0,0
ignoreHitPause = 1

[State 8014, Transparency]
type = Trans
trigger1 = 1
trans = AddAlpha
alpha = 256,256
ignoreHitPause = 1

[State 8014, Center Explod]
type = Explod
triggerAll = !Time
trigger1 = (Root, StateNo = 7201)
anim = 8010
ID = 10
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 5
removeTime = 16
pauseMoveTime = -1
superMoveTime = -1
onTop = 1

[State 8014, Scale Center Explod]
type = ModifyExplod
trigger1 = NumExplod(10)
trigger1 = time < 10
ID = 10
scale = 0.5 - (Time * 0.05), 0.5 - (Time * 0.05)
trans = AddAlpha
alpha = 256 - (16 * Time), 256

[State 8014, Center Explod]
type = Explod
triggerAll = !Time
trigger1 = (Root, StateNo = 7201)
anim = 8011
ID = 1
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 5
removeTime = 16
pauseMoveTime = -1
superMoveTime = -1
onTop = 1

[State 8014, Scale Center Explod]
type = ModifyExplod
trigger1 = NumExplod(1)
ID = 1
scale = 0.25 + (0.015625 * Time), 0.25 + (0.015625 * Time)
trans = AddAlpha
alpha = 256 - (16 * Time), 256

[State 8014, Streaks Explod]
type = Explod
triggerAll = !Time
trigger1 = (Root, StateNo = 7201)
anim = 8012
ID = 2
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 5
removeTime = 16
pauseMoveTime = -1
superMoveTime = -1
onTop = 1

[State 8014, Scale Streaks Explod]
type = ModifyExplod
trigger1 = NumExplod(2)
ID = 2
scale = 0.25 + (0.015625 * Time), 0.25 + (0.015625 * Time)
trans = AddAlpha
alpha = 256 - (16 * Time), 256

[State 8014, P2 Back Explod]
type = Explod
triggerAll = !Time
trigger1 = (Root, StateNo = 7201)
anim = 8013
ID = 3
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = -3
removeTime = 8
pauseMoveTime = -1
superMoveTime = -1
onTop = 1

[State 8014, Scale P2 Back Explod]
type = ModifyExplod
trigger1 = NumExplod(3)
ID = 3
scale = 0.5,0.5
trans = AddAlpha
alpha = 256 - (32 * Time), 256

[State 8014, Impact Explod]
type = Explod
triggerAll = !Time
trigger1 = (Root, StateNo = 7201)
anim = 8014
ID = 4
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 3
removeTime = 8
pauseMoveTime = -1
superMoveTime = -1
onTop = 1

[State 8014, Scale Impact Explod]
type = ModifyExplod
trigger1 = NumExplod(4)
ID = 4
scale = 0.5 - (0.0625 * Time), 0.5 - (0.0625 * Time)
trans = AddAlpha
alpha = 256 - (32 * Time),256

[State 8014, Remove Explods]
type = RemoveExplod
trigger1 = time >= 16

[State 8014, End]
type = DestroySelf
trigger1 = Time >= 16

;========================<RECOVER FX>=============================
[StateDef 8200]
type = A
velSet = 0,0
anim = 8200
sprPriority = 5

[State 8200, Assert: NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 8200, Scale]
type = AngleDraw
trigger1 = 1
scale = 0.25 + (0.017 * Time), 0.25 + (0.017 * Time)

[State 8200, Transparency]
type = Trans
trigger1 = 1
trans = AddAlpha
alpha = ceil(256 - 17.1 * Time), 256

[State 8200, End]
type = DestroySelf
trigger1 = Time >= 15

;========================<COUNTER FX>=============================
[StateDef 8290]
type = A
physics = N
velSet = 0,0
anim = 1

[State 8290, "Counter!" Text Explod]
type = Explod
trigger1 = !NumExplod(8290)
anim = 8290
ID = 8290
sprPriority = 64
posType = P1
facing = Facing
removeTime = 32
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 8290, Scale]
type = ModifyExplod
trigger1 = Time < 8
ID = 8290
scale = 0.5, .5
trans = AddAlpha
alpha = 256,0

[State 8290, Scale]
type = ModifyExplod
trigger1 = Time >= 8
ID = 8290
scale = 0.5 + 0.0625 * (Time - 8), 0.5 + 0.0625 * (Time - 8)
trans = AddAlpha
alpha = 256 - 32 * (Time - 8), 32 * (Time - 8)

[State 8290, Safety]
type = RemoveExplod
trigger1 = Time >= 16

[State 8290, End]
type = DestroySelf
trigger1 = Time >= 16

;-------------------------------------------------------------------------------
;Excel timer
[Statedef 8305]
physics = N
velset = 0, 0
anim = 9741

[State 8305, Turn]
type = turn
trigger1 = facing = -1

[State 8305, back]
type = explod
trigger1 = !numexplod(8306)
anim = 8306
ID = 8306
postype = p1
bindtime = -1
removetime = -1
pausemovetime = -1
supermovetime = -1
ontop = 1

[State 8395, front]
type = explod
trigger1 = !numexplod(8307)
anim = 8307
ID = 8307
postype = p1
bindtime = -1
removetime = -1
pausemovetime = -1
supermovetime = -1
ontop = 1

[State 8305, frame]
type = explod
trigger1 = !numexplod(8305)
anim = 8305
ID = 8305
postype = p1
bindtime = -1
removetime = -1
pausemovetime = -1
supermovetime = -1
ontop = 1

[State 8305, Scale]
type = modifyexplod
trigger1 = numexplod(8307)
ID = 8307
scale = (root, var(20)) / 180.0, 1

[State 8305, Bind]
type = bindtoroot
trigger1 = 1
pos = 20 * (root, facing), 4
time = -1

[State 8305, Safety]
type = removeexplod
trigger1 = (root, var(20) <= 0)

[State 8305, End]
type = destroyself
trigger1 = (root, var(20) <= 0)

;-------------------------------------------------------------------------------
;Particles
[StateDef 8331]
type = A
physics = N
moveType = I
anim = 1
ctrl = 0
velSet = 0,0

[State 8331, BindToRoot]
type = BindToRoot
trigger1 = !(Time % 8)
pos = ceil(-151 + (Random / 3.125)), ceil(98 - (Random / 3.125))

[State 8331, Particle]
type = Explod
trigger1 = (Time % 8) = 1
anim = 8331
sprPriority = ifElse(Random < 750, 5, -1)
posType = P1
vel = ((RootDist x + 5) / 32.0), ((RootDist y - 75) / 32.0);values to adjust
scale = ifElse(Random < 500, 0.5, -0.5), ifElse(Random < 500, 0.5, -0.5)
pauseMoveTime = -1
superMoveTime = -1
ownpal = 1

[State 8331, RemoveExplod]
type = RemoveExplod
trigger1 = Root, StateNo != 340

[State 8331, End]
type = DestroySelf
trigger1 = Root, StateNo != 340

;========================< SUPERPAUSE FX >=============================
;--- --Level 1 -----
[Statedef 8500]
type = A
velset = 0, 0
anim = 8500
sprpriority = 5

[State 8500, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 8500, BG PalFX]
type = bgpalfx
trigger1 = time < 39
time = 1
color = 0
mul = 0, 0, 256

[State 8500, Rotate]
type = angleset
trigger1 = !time
value = 6 * (random % 60)
[State 8500, Rotate]
type = angleadd
trigger1 = 1
value = -6

[State 8500, Scale]
type = angledraw
trigger1 = time < 16
scale = (0.03125 * time), (0.03125 * time)

[State 8500, Scale]
type = angledraw
trigger1 = time >= 16
scale = 0.5, 0.5

[State 8500, Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256

[State 8500, Lines]
type = explod
trigger1 = time = 0 || time = 8 || time = 16 || time = 24
anim = 8501
ID = ifelse(time = 24, 4, ifelse(time = 16, 3, ifelse(time = 8, 2, 1)))
sprpriority = 5
postype = p1
facing = ifelse(random < 500, -1, 1)
vfacing = ifelse(random < 500, -1, 1)
removetime = 16
supermovetime = -1

[State 8500, Scale]
type = modifyexplod
trigger1 = numexplod(1)
ID = 1
scale = 1 -(0.0625 * time), 1 -(0.0625 * time)
trans = addalpha
alpha = ifelse(time < 4, 64 * time, 256), 256

[State 8500, Scale]
type = modifyexplod
trigger1 = numexplod(2)
ID = 2
scale = 1 -(0.0625 * (time -8)), 1 -(0.0625 * (time -8))
trans = addalpha
alpha = ifelse((time -8) < 4, 64 * (time -8), 256), 256

[State 8500, Scale]
type = modifyexplod
trigger1 = numexplod(3)
ID = 3
scale = 1 -(0.0625 * (time -16)), 1 -(0.0625 * (time -16))
trans = addalpha
alpha = ifelse((time -16) < 4, 64 * (time -16), 256), 256

[State 8500, Scale]
type = modifyexplod
trigger1 = numexplod(4)
ID = 4
scale = 1 -(0.0625 * (time -24)), 1 -(0.0625 * (time -24))
trans = addalpha
alpha = ifelse((time -24) < 4, 64 * (time -24), 256), 256

[State 8500, Circle]
type = explod
trigger1 = time = 24
anim = 8502
ID = 10
sprpriority = 5
postype = p1
facing = ifelse(random < 500, -1, 1)
vfacing = ifelse(random < 500, -1, 1)
removetime = 32
supermovetime = -1

[State 8500, Scale]
type = modifyexplod
trigger1 = numexplod(10)
ID = 10
scale = 2 -(0.125 * (time -24)), 2 -(0.125 * (time -24))
trans = addalpha
alpha = ifelse((time -24) < 4, 64 * (time -24), 256), 256

[State 8500, Safety]
type = removeexplod
trigger1 = time >= 40

[State 8500, End]
type = destroyself
trigger1 = time >= 40


;--- --Level 2 -----
[Statedef 8510]
type = A
velset = 0, 0
anim = 8510
sprpriority = 5

[State 8510, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 8510, BG PalFX]
type = bgpalfx
trigger1 = time < 39
time = 1
color = 0
mul = 192, 0, 256

[State 8510, Rotate]
type = angleset
trigger1 = !time
value = 6 * (random % 60)

[State 8510, Rotate]
type = angleadd
trigger1 = 1
value = -6

[State 8510, Scale]
type = angledraw
trigger1 = time < 16
scale = (0.03125 * time), (0.03125 * time)

[State 8510, Scale]
type = angledraw
trigger1 = time >= 16
scale = 0.5, 0.5

[State 8510, Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256

[State 8510, Lines]
type = explod
trigger1 = time = 0 || time = 8 || time = 16 || time = 24
anim = 8511
ID = ifelse(time = 24, 4, ifelse(time = 16, 3, ifelse(time = 8, 2, 1)))
sprpriority = 5
postype = p1
facing = ifelse(random < 500, -1, 1)
vfacing = ifelse(random < 500, -1, 1)
removetime = 16
supermovetime = -1

[State 8510, Scale]
type = modifyexplod
trigger1 = numexplod(1)
ID = 1
scale = 1 -(0.0625 * time), 1 -(0.0625 * time)
trans = addalpha
alpha = ifelse(time < 4, 64 * time, 256), 256

[State 8510, Scale]
type = modifyexplod
trigger1 = numexplod(2)
ID = 2
scale = 1 -(0.0625 * (time -8)), 1 -(0.0625 * (time -8))
trans = addalpha
alpha = ifelse((time -8) < 4, 64 * (time -8), 256), 256

[State 8510, Scale]
type = modifyexplod
trigger1 = numexplod(3)
ID = 3
scale = 1 -(0.0625 * (time -16)), 1 -(0.0625 * (time -16))
trans = addalpha
alpha = ifelse((time -16) < 4, 64 * (time -16), 256), 256

[State 8510, Scale]
type = modifyexplod
trigger1 = numexplod(4)
ID = 4
scale = 1 -(0.0625 * (time -24)), 1 -(0.0625 * (time -24))
trans = addalpha
alpha = ifelse((time -24) < 4, 64 * (time -24), 256), 256

[State 8510, Circle]
type = explod
trigger1 = time = 24
anim = 8512
ID = 10
sprpriority = 5
postype = p1
facing = ifelse(random < 500, -1, 1)
vfacing = ifelse(random < 500, -1, 1)
removetime = 32
supermovetime = -1

[State 8510, Scale]
type = modifyexplod
trigger1 = numexplod(10)
ID = 10
scale = 2 -(0.125 * (time -24)), 2 -(0.125 * (time -24))
trans = addalpha
alpha = ifelse((time -24) < 4, 64 * (time -24), 256), 256

[State 8510, Safety]
type = removeexplod
trigger1 = time >= 40

[State 8510, End]
type = destroyself
trigger1 = time >= 40


;--- --Level 3 -----
[Statedef 8520]
type = A
velset = 0, 0
anim = 8520
sprpriority = 5

[State 8520, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 8520, Assert]
type = assertspecial
trigger1 = time < 40
flag = nobardisplay
flag2 = noBG
flag3 = noFG

[State 8520, Rotate]
type = angleset
trigger1 = !time
value = 6 * (random % 60)
[State 8520, Rotate]
type = angleadd
trigger1 = 1
value = -6

[State 8520, Scale]
type = angledraw
trigger1 = time < 16
scale = (0.03125 * time), (0.03125 * time)

[State 8520, Scale]
type = angledraw
trigger1 = time >= 16
scale = 0.5, 0.5
[State 8520, Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256

[State 8520, Portrait]
type = explod
trigger1 = !time
anim = 8525
ID = 20
sprpriority = -16
postype = back
removetime = 40
supermovetime = -1

[State 8520, Portrait]
type = explod
trigger1 = !time
anim = 8525
ID = 21
sprpriority = -16
postype = back
removetime = 40
supermovetime = -1

[State 8520, Scale]
type = modifyexplod
trigger1 = numexplod(20) && time < 16
ID = 20
postype = back
pos = 160, floor((1.3333333 * (320 / 240)) * 120)
scale = 1 - (0.03125 * time), 1 - (0.03125 * time)
trans = addalpha
alpha = (8 * time), 256

[State 8520, Scale]
type = modifyexplod
trigger1 = numexplod(21) && time < 16
ID = 21
postype = back
pos = 160, floor((1.3333333 * (320 / 240)) * 120)
scale = 2 - (0.09375 * time), 2 - (0.09375 * time)
trans = addalpha
alpha = (8 * time), 256

[State 8520, Scale]
type = modifyexplod
trigger1 = numexplod(20) && (time = [16, 32])
ID = 20
postype = back
pos = 160, floor((1.3333333 * (320 / 240)) * 120)
scale = 0.5, 0.5
trans = addalpha
alpha = 256, 256

[State 8520, Scale]
type = modifyexplod
trigger1 = numexplod(21) && (time = [16, 32])
ID = 21
scale = 0, 0

[State 8520, Scale]
type = modifyexplod
trigger1 = numexplod(20) && time >= 32
ID = 20
postype = back
pos = 160, floor((1.3333333 * (320 / 240)) * 120)
scale = 0.5, 0.5
trans = addalpha
alpha = 128 - 16 * (time -32), 256

[State 8520, Scale]
type = modifyexplod
trigger1 = numexplod(21) && time >= 32
ID = 21
postype = back
pos = 160, floor((1.3333333 * (320 / 240)) * 120)
scale = 0.5, 0.5
trans = addalpha
alpha = 128 - 16 * (time -32), 256

[State 8520, Lines]
type = explod
trigger1 = time = 0 || time = 8 || time = 16 || time = 24
anim = 8521
ID = ifelse(time = 24, 4, ifelse(time = 16, 3, ifelse(time = 8, 2, 1)))
sprpriority = 5
postype = p1
facing = ifelse(random < 500, -1, 1)
vfacing = ifelse(random < 500, -1, 1)
removetime = 16
supermovetime = -1

[State 8520, Scale]
type = modifyexplod
trigger1 = numexplod(1)
ID = 1
scale = 1 -(0.0625 * time), 1 -(0.0625 * time)
trans = addalpha
alpha = ifelse(time < 4, 64 * time, 256), 256

[State 8520, Scale]
type = modifyexplod
trigger1 = numexplod(2)
ID = 2
scale = 1 -(0.0625 * (time -8)), 1 -(0.0625 * (time -8))
trans = addalpha
alpha = ifelse((time -8) < 4, 64 * (time -8), 256), 256

[State 8520, Scale]
type = modifyexplod
trigger1 = numexplod(3)
ID = 3
scale = 1 -(0.0625 * (time -16)), 1 -(0.0625 * (time -16))
trans = addalpha
alpha = ifelse((time -16) < 4, 64 * (time -16), 256), 256

[State 8520, Scale]
type = modifyexplod
trigger1 = numexplod(4)
ID = 4
scale = 1 -(0.0625 * (time -24)), 1 -(0.0625 * (time -24))
trans = addalpha
alpha = ifelse((time -24) < 4, 64 * (time -24), 256), 256

[State 8520, Circle]
type = explod
trigger1 = time = 24
anim = 8522
ID = 10
sprpriority = 5
postype = p1
facing = ifelse(random < 500, -1, 1)
vfacing = ifelse(random < 500, -1, 1)
removetime = 32
supermovetime = -1

[State 8520, Scale]
type = modifyexplod
trigger1 = numexplod(10)
ID = 10
scale = 2 -(0.125 * (time -24)), 2 -(0.125 * (time -24))
trans = addalpha
alpha = ifelse((time -24) < 4, 64 * (time -24), 256), 256

[State 8520, Safety]
type = removeexplod
trigger1 = time >= 40

[State 8520, End]
type = destroyself
trigger1 = time >= 40

;-------------------------------------------------------------------------------
;Lv3 supercharge portrait
[Statedef 8511]
physics=N
anim=9741

[State 7510, assert]
type=assertspecial
trigger1= 1
flag=invisible
flag2=nobardisplay
ignorehitpause=1

[State 7510, portrait]
type=explod
trigger1= !time
anim=70100
ID=70100
postype=back
pos=160,120
under=1
bindtime=-1
facing = ifelse((root,facing= 1),1,-1)
removetime=60
pausemovetime=300
supermovetime=300

[State 7510, shrink]
type=modifyexplod
trigger1= time<45
ID=70100
scale=.6,.4;

[State 7510, shrink]
type=modifyexplod
trigger1= time>=45
ID=70100
scale=.5225+(.13*(time-45)),.5225+(.13*(time-45))

[State 7510, fade]
type=palfx
trigger1= time<45
time=2
mul = 72+(time*6),72+(time*6),72+(time*6)

[State 7510, fade]
type=palfx
trigger1= time=45
time=15
sinadd=-255,-255,-255,60

[State 8520, Portrait 3]
type = Explod
trigger1 = !Time
anim = 7611
ID = 22
sprPriority = -17
posType = Back
removeTime = 61
superMoveTime = -1

[State 7510, safety]
type=removeexplod
trigger1= time>=61

[State 7510, end]
type=destroyself
trigger1= time>=61

;-------------------------------------------------------------------------------
;Power charge aura
[Statedef 72400]
type=S
anim=72400
velset=0,0
ctrl=0

[State 72400, Bind]
type=bindtoroot
trigger1= (root,stateno=340) && (root,anim=740)
pos=12,0

[State 72400, Snd]
type=playsnd
trigger1= !time
value=171,0
channel=0

[State 340, ShakeSnd]
type=playsnd
trigger1= anim=740
value=171,9
channel=0

[State 72400, Aura]
type=explod
trigger1= !numexplod(72420)
ID=72420
anim=72420
sprpriority=18
postype=p1
bindtime=-1
removetime=-1
pausemovetime=-1
supermovetime=-1
scale=.5,.5
ownpal=1

[State 72400, FX]
type=modifyexplod
trigger1= numexplod(72420) && (root,power<3000)
ID=72420
scale=.5,.1+.4*(root,power/3000.0)

[State 72400, FX]
type=modifyexplod
trigger1= numexplod(72420) && (root,power>=3000)
ID=72420
scale=.5,.5

[State 72400, No Shadow]
type=assertspecial
trigger1= 1
flag=noshadow

[State 72400, End]
type=stopsnd
trigger1= (root,stateno!=340) || (root,anim!=740) || (root,movetype=H)
channel=0

[State 72400, End]
type=removeexplod
trigger1= (root,stateno!=340) || (root,anim!=740) || (root,movetype=H)

[State 4110, changestate]
type = changestate
trigger1 = Root,anim = 741
value = 72421

[State 72400, End]
type=destroyself
trigger1= (root,stateno!=340) || (root,anim!=740) || (root,movetype=H)

;-------------------------------------------------------------------------------
; Power Charge Fade
[Statedef 72421]
type = A
movetype = I
physics = N
ctrl = 0
anim = 72421
velset = 0,0
sprpriority = 2

[State 0, posadd]
type = posadd
trigger1 = time = 0
x = -10

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 72422
ID = 8784
pos = 0,0
postype = p1
bindtime = 1
removetime = 3
scale = .4,.4
sprpriority = -1
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = s170,1
volume = 50
channel = 15
freqmul = 2.0

[State -2,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State -2, 1]
type = Trans
trigger1 = 1
trans = add

[State -2, scale]
type = AngleDraw
trigger1 = 1
scale= .6-(time*.1), (.6 + .6*(root,power/3000.0))+(time*.065)

[State 72421, DestroySelf]
type = DestroySelf
trigger1 = time >5

;-------------------------------------------------------------------------------
;Shinki Hatsudou blast efects
[Statedef 10060]
type=A
physics=N
movetype=I
anim=9992
velset=-.7,0
ctrl=0
sprpriority=4
movehitpersist= 1

[State 10060, Explod]
type = Explod
trigger1 = animelem = 1
anim = 70000
ID = 70000
posType = P1
pos = ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < 20, ceil(P2Dist x), 20)), 0
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = .7,.7
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause =1

[State 10060, Trans]
type=trans
trigger1= 1
trans=addalpha
alpha=256,256
ignorehitpause=1

[State 10060, End]
type=destroyself
trigger1= time>= 30

;-------------------------------------------------------------------------------
[Statedef 10061]
type=A
physics=N
movetype=I
anim=9992
velset=-.7,0
ctrl=0
sprpriority=4
movehitpersist= 1

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1 = !(Target, HitShakeOver)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8013)
ID = 8000
name = "Spark"
posType = P1
pos = -20,-5
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 10061, Explod]
type = Explod
trigger1 = animelem = 1
anim = 70000
ID = 70000
pos = 0,-5
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = .7,.7
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause =1

[State 10061, Trans]
type=trans
trigger1= 1
trans=addalpha
alpha=256,256
ignorehitpause=1

[State 10061, End]
type=destroyself
trigger1= time>= 30

;-------------------------------------------------------------------------------
;Kyouja Renbu Shun Goku satsu - Kanjis
[Statedef 12005]
physics=N
anim=9992
ctrl=0
velset=0,0

[State 12005, Snd]
type=playsnd
trigger1= time=5
value=171,5
channel=0

[State 12005, Kanjis]
type=explod
trigger1= animelem=1
anim= 12230
ID=7000
sprpriority=5
postype=p1
pos=0,0
scale = .2,.2
facing=1
removetime = 40
ownpal=1
ontop=1
pausemovetime=300
supermovetime=300

[State 12005, shrink]
type=modifyexplod
trigger1=time<6
ID=7000
scale=(5.5-time),(5.5-time)

[State 12005, shrink]
type=modifyexplod
trigger1=time>=6
ID=7000
scale=.3,.3

[State 12005, End]
type=destroyself
trigger1= time >= 20

;-------------------------------------------------------------------------------
[Statedef 12006]
physics=N
anim=9992
ctrl=0
velset=0,0

[State 12006, Kanjis, letra de cima]
type=explod
trigger1= time >=4
anim= 12231
ID=7000
sprpriority=5
postype=p1
pos=0,-35
scale = .3,.3
facing=1
removetime = 60
ownpal=1
ontop=1
pausemovetime=-1
supermovetime=-1

[State 12006, Kanjis, letra de cima direita]
type=explod
trigger1= time >=7
anim= 12232
ID=7000
sprpriority=5
postype=p1
pos=80,20
scale = .3,.3
facing=1
removetime = 60
ownpal=1
ontop=1
pausemovetime=300
supermovetime=300

[State 12006, Kanjis letra de baixo, direita]
type=explod
trigger1= time >=10
anim= 12233
ID=7000
sprpriority=5
postype=p1
pos=80,110
scale = .3,.3
facing=1
removetime = 60
ownpal=1
ontop=1
pausemovetime=300
supermovetime=300

[State 12006, Kanjis letra de baixo]
type=explod
trigger1= time >=13
anim= 12234
ID=7000
sprpriority=5
postype=p1
pos=0,140
scale = .3,.3
facing=1
removetime = 60
ownpal=1
ontop=1
pausemovetime=300
supermovetime=300

[State 12006, Kanjis letra de baixo esquerda]
type=explod
trigger1= time >=16
anim= 12235
ID=7000
sprpriority=5
postype=p1
pos=-80,110
scale = .3,.3
facing=1
removetime = 60
ownpal=1
ontop=1
pausemovetime=300
supermovetime=300

[State 12006, Kanjis letra de cima esquerda]
type=explod
trigger1= time >=19
anim= 12236
ID=7000
sprpriority=5
postype=p1
pos=-80,20
scale = .3,.3
facing=1
removetime = 60
ownpal=1
ontop=1
pausemovetime=300
supermovetime=300

[State 12006, End]
type=destroyself
trigger1= time >= 20

;========================<HYPER BACKGROUND>=============================
[Statedef 40001]
anim = 9992

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG

[State 40001, Tile #1-7]
type = Explod
trigger1 = !time
anim = 15600
ID = 15600
pos = 0,0
postype = left  ;p2,front,back,left,right
removetime = -1
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -50
ownpal = 1
ignorehitpause = 1
bindtime = -1
persistent = 0
ontop = 0

[State 40001, Glass Break]
type = ChangeState
triggerall = parent, stateno != [7200,7209]
trigger1 = parent, stateno != [3600,3600]
trigger2 = Parent,Stateno = 3600 && Parent,Time >= 192
trigger3 = Parent,Stateno = 3600 && Parent,Time >= 191
value = stateno+1

;-------------------------------------------------------------------------------
[Statedef 40002]
anim = 9992

[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15600

[State 40002, PlaySnd]
type = PlaySnd
triggerall = root,stateno != 183
trigger1 = !time
value = 13000,1
channel = 0

[State 40001, Glass Break]
type = Explod
triggerall = root,stateno != 183
triggerall = !numexplod(15640)
trigger1 = !time
anim = 15604
ID = 2550
pos = 0,0
postype = left  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
scale = 1,1
sprpriority = -20
ownpal = 1
bindtime = -1
ignorehitpause = 1

[State 40001, DestroySelf]
type = DestroySelf
trigger1 = time = 1



;==============================================================================
; {C:\Users\Luis\Desktop\Kairi\states\-2and-3.cns}
;==============================================================================


;KAIRI FROM STREET FIGHTER EX + EDITS BY Mr.KARATE AND GUSTAVO C. MORAES
;CODES - Mr.KARATE
;SPRITES - GUSTAVO C. MORAES

;-------------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;-------------------------------------------------------------------------------

[Statedef -2]

;#ADD004BASIC PIEs#
;//==========================
;// add004 supplementary sctrls v1.103
;//==========================

;// partner jump-out ; ???????
[state 0]
	type=selfstate
	triggerall=!ishelper && numpartner && roundstate=2
	triggerall=(stateno!=[190190,190199]) && alive && sysfvar(0)>0 && playeridexist(floor(sysfvar(0)))
	triggerall=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(22)=4
	;;---// change ;(??)
	trigger1=sysfvar(4)<1 && movetype!=h && gethitvar(isbound)=0 && (pos y>=0) && (ctrl||(stateno<600&&time<2)) && (playerid(floor(sysfvar(0))),var(48)=11)
	;;---// as partner-asist ;(??)
	trigger2=sysfvar(4)>0 && (movetype!=h||(stateno=[120,149])) && (ctrl||stateno<600)
	;;---// player priority ;(??)
	trigger3=sysfvar(4)<1 && playerid(floor(sysfvar(0))),var(15)!=id
	value=190190
	ignorehitpause=1

;// edited life & power bar ; ?????
[state 0]
	type=helper
	triggerall=!ishelper && !numhelper(90900)
	trigger1=numpartner
	trigger1=id<(partner,id) && partner,numhelper(90900)=0
	trigger2=!numpartner
	id=90900
	stateno=90900
	helpertype=normal
	ownpal=1
	size.air.front=1602150 ;; <<-version
	size.height=0 ;; 1;; <<-powerbar off mode
	ignorehitpause=1
	supermovetime=88888
	pausemovetime=88888
	pos=0,88888

;// input players id ; ID??
[state 0]
	type=varset
	trigger1=!ishelper && numhelper(90900)
	trigger1=(helper(90900),var(0)=90900) && (sysfvar(0)!=helper(90900),id)
	sysfvar(0)=(helper(90900),id)
[state 0]
	type=varset
	trigger1=!ishelper && numpartner
	trigger1=!numhelper(90900) && (partner,numhelper(90900)) && (sysfvar(0)!=(partner,sysfvar(0)))
	sysfvar(0)=(partner,sysfvar(0))

;// bk/jd system ; ?????/????D
[state 0]
	type=hitoverride
	trigger1=(numprojid(195502)||numprojid(195503)) && !ishelper && roundstate=2 && alive && (ctrl || stateno=52)
	attr=sca,na,sa,ha,np,sp,hp
	stateno=195500
	time=1
	ignorehitpause=1

;//==========================
;;>>@Config.Face>>
;; face / portrait (?)
[state 0]
	type=explod
	trigger1=!ishelper && roundstate=2 && alive && !numexplod(490600) && selfanimexist(909002)
	trigger1=sysfvar(0)>id && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),numexplod(490600)
	id=490600
	anim=909002
	space=screen
	postype=left
	facing=ifelse(teamside=1,1,-1)
	scale=0,0 ;; <- default
	ownpal=1
	bindtime=-1
	removetime=-1
	ignorehitpause=1
	supermovetime=-1
	pausemovetime=-1

[state 0] ;; player is NOT in a custom state 
	type=modifyexplod
	trigger1=numexplod(490600) && sysfvar(0)>id && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900
	trigger1=movetype!=h || (stateno=[120,159]) || (stateno=[5000,5199]) || (stateno=[190190,190196])
	id=490600
	scale=playerid(floor(sysfvar(0))),fvar(32-(id=playerid(floor(sysfvar(0))),var(15))*10), playerid(floor(sysfvar(0))),fvar(33-(id=playerid(floor(sysfvar(0))),var(15))*10)
	ignorehitpause=1

[state 0]
	type=modifyexplod
	trigger1=numexplod(490600) && sysfvar(0)>id && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900
	id=490600
	space=screen
	postype=left
	pos=floor(const240p(playerid(floor(sysfvar(0))),fvar(30-(id=playerid(floor(sysfvar(0))),var(15))*10))), floor(const240p(playerid(floor(sysfvar(0))),fvar(31-(id=playerid(floor(sysfvar(0))),var(15))*10) -(roundstate!=2||(!alive&&stateno=5150))*88888))
;;(* if the player has been placed in a custom state, the result of "scale" is affected" by the different player's local coordinate space
	sprpriority=floor(playerid(floor(sysfvar(0))),fvar(36-(id=playerid(floor(sysfvar(0))),var(15))*10))
	trans=addalpha
	alpha=floor(playerid(floor(sysfvar(0))),fvar(34-(id=playerid(floor(sysfvar(0))),var(15))*10)), floor(playerid(floor(sysfvar(0))),fvar(35-(id=playerid(floor(sysfvar(0))),var(15))*10))
	ignorehitpause=1

;//==========================
;;>>@Config.Camera>>
;; change camera / ????
[state 0]
	type=screenbound
	trigger1=!ishelper && sysfvar(0)>id && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && numpartner && (sysfvar(4)>0 || stateno=5150)
	value=0
	movecamera=0,0
	ignorehitpause=1
[state 0]
	type=playerpush
	trigger1=!ishelper && sysfvar(0)>id && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && numpartner && (sysfvar(4)>0 || stateno=5150)
	value=0
	ignorehitpause=1
[state 0]
	type=screenbound
	trigger1=!ishelper && sysfvar(0)>id && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && (playerid(floor(sysfvar(0))),var(7)&65536) ;; system_switch
	value= ((numpartner && sysfvar(4)<1) || !numpartner) ;; [def=0]
	movecamera=0,0 ;; [x,y]
	ignorehitpause=1

;//==========================
;; optional settings
;//==========================
;;--- guard crush ; ????????
[state 0]
	type=palfx
	trigger1=(stateno=150 || stateno=152) && alive && !ishelper && (gametime%5=0) && sysfvar(0)>id && playeridexist(floor(sysfvar(0)))
	trigger1=(playerid(floor(sysfvar(0))),var(0)=90900) && (playerid(floor(sysfvar(0))),var(36)>=40)
	time=2
	add=200,0,0
[state 0]
	type=changestate
	trigger1=(stateno=150 || stateno=152) && alive && !ishelper && sysfvar(0)>id && playeridexist(floor(sysfvar(0)))
	trigger1=(playerid(floor(sysfvar(0))),var(0)=90900) && (playerid(floor(sysfvar(0))),var(36)>=50)
	value=190010
	ignorehitpause=1
;;--- dizzy
[state 0]
	type=changestate
	trigger1=stateno=5120 && (animtime=0) && !ishelper && numhelper(403000) ;;<-dizzy birds
	value=190116 ;;<- goto dizzy/stun state
;;--- fadeout when KOed ; KO????
[state 0]
	type=varset
	trigger1=stateno=5150 && time=1 && alive=0 && !ishelper && numpartner
	sysvar(1)=(roundstate<=2)
[state 0]
	type=assertspecial
	trigger1=stateno=5150 && alive=0 && !ishelper && numpartner && sysvar(1) && (((time=[80,150]) && time%10<5) || time>150)
	flag=invisible
	flag2=noshadow
[state 0]
	type=posset
	trigger1=stateno=5150 && time>=80 && alive=0 && !ishelper && numpartner && sysvar(1)
	y=(800-partner,pos y) *(((time=[80,150]) && time%10<5) || time>150)

;;--- pos reset debug (for mugen only) ---
[state 0]
	type=turn
	trigger1=stateno=5900 && time=0
	trigger1=!ishelper && numpartner>1 && facing=ifelse(teamside=1,-1,1)
[state 0]
	type=posset
	trigger1=stateno=5900 && time=0
	trigger1=!ishelper && numpartner>1 && playeridexist(id-2)
	trigger1=playerid(id-2),ishelper=0 && playerid(id-2),teamside=teamside
	x=const240p(120)*ifelse(teamside=1,-1,1)
[state 0]
	type=posset
	trigger1=stateno=5900 && time=0
	trigger1=!ishelper && numpartner>2 && playeridexist(id-3)
	trigger1=playerid(id-3),ishelper=0 && playerid(id-3),teamside=teamside
	x=const240p(144)*ifelse(teamside=1,-1,1)
;//==========================
;//==========================



;-------------------------------------------------------------------------------
;Hitsparks
[State -2, Hit Detection]
type=varset
trigger1= movecontact=1 && var(30)<0
var(30)= hitpausetime
ignorehitpause=1

[State -2, HitSound]
type=playsnd
trigger1= movecontact=1 && var(30)=hitpausetime
trigger1= movehit=1 && var(31)>=0
value= 2, var(31)
channel=2
ignorehitpause=1

[State -2, GuardSound]
type=playsnd
trigger1= movecontact=1 && var(30)=hitpausetime
trigger1= moveguarded=1 && var(32)>=0
value= 3, var(32)
channel=2
ignorehitpause=1

[State -2, Sparks]
type=helper
triggerall= movecontact=1 && var(30)=hitpausetime
trigger1= movehit=1 && numenemy
trigger1= var(33)=8010 || var(33)=8011 || var(33)=8012 || var(33)=8013 || var(33)=8014 || var(33)=8015
trigger2= moveguarded=1 && numenemy
trigger2= var(34)=8000 || var(34)=8001
helpertype=normal
stateno=ifelse(moveguarded, var(34), var(33))
ID=8000
name="Spark"
postype=p1
pos= ceil(ifelse(p2dist x=0, 0, ifelse(p2dist x<var(35), ceil(p2dist x), var(35))) * const(size.xscale)), ceil(var(36) * const(size.yscale))
ownpal=1
pausemovetime=65535
supermovetime=65535
ignorehitpause=1


[State -2, Hit Detection]
type=varset
trigger1= 1
var(30)=-1

[State -2, Hit Detection]
type=varrangeset
trigger1= movetype=I
trigger2= movetype=H && time
first=30
last=36
value=-1
ignorehitpause=1

;-------------------------------------------------------------------------------
;EVIL FLAMES
;-------------------------------------------------------------------------------
;Level 1 flames

;evil flames low punch
[State -2, Explod]
type = Explod
triggerall = power >= 1000
triggerall = power <2000
triggerall = animelem = 2
trigger1 = anim = 200 && numexplod(432134)=0
trigger1 = var(59) = 0
ID = 432134
anim = 7192
pos = 12,-75
postype = p1 ;p2,front,back,left,right
scale = 1, .5
bindtime = -1
removetime = 5
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 200 && numexplod(432134)
id = 432134

;evil flames crouch low punch
[State -2, Explod]
type = Explod
triggerall = power >= 1000
triggerall = power <2000
triggerall = animelem = 2
trigger1 = anim = 400 && numexplod(432134)=0
trigger1 = var(59) = 0
ID = 171
anim = 7192
pos = -22,-45
postype = p1 ;p2,front,back,left,right
scale = 1, .5
bindtime = -1
removetime = 5
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 400 && numexplod(432134)
id = 171

;evil flames crouch strong punch
[State -2, Explod]
type = Explod
triggerall = power >= 1000
triggerall = power <2000
triggerall = animelem = 4
trigger1 = anim = 415 && numexplod(432134)=0
trigger1 = var(59) = 0
ID = 172
anim = 7192
pos = -20,-65
postype = p1 ;p2,front,back,left,right
scale = 1, .5
bindtime = -1
removetime = 13
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 415 && numexplod(432134)
id = 172

;evil flames jump up
[State -2, Explod]
type = Explod
triggerall = power >= 1000
triggerall = power <2000
triggerall = animelem = 2
trigger1 = anim = 41 && numexplod(25)=0
trigger1 = var(59) = 0
ID = 174
anim = 7192
pos = -8,-110
postype = p1 ;p2,front,back,left,right
scale = 1, .5
bindtime = -1
removetime = 4
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 41 && numexplod(25)
id = 174

[State -2, Explod]
type = Explod
triggerall = power >= 1000
triggerall = power <2000
triggerall = animelem = 2
trigger1 = anim = 41 && numexplod(25)=0
trigger1 = var(59) = 0
ID = 174
anim = 7192
pos = 20,-110
postype = p1 ;p2,front,back,left,right
scale = 1, .5
bindtime = -1
removetime = 4
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 41 && numexplod(25)
id = 174

;evil flames jump up falling
[State -2, Explod]
type = Explod
triggerall = power >= 1000
triggerall = power <2000
triggerall = animelem = 3
trigger1 = anim = 41 && numexplod(25)=0
trigger1 = var(59) = 0
ID = 174
anim = 7192
pos = 10,-90
postype = p1 ;p2,front,back,left,right
scale = 1, .5
bindtime = -1
removetime = 18
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 41 && numexplod(25)
id = 174

[State -2, Explod]
type = Explod
triggerall = power >= 1000
triggerall = power <2000
triggerall = animelem = 3
trigger1 = anim = 41 && numexplod(25)=0
trigger1 = var(59) = 0
ID = 174
anim = 7192
pos = 24,-80
postype = p1 ;p2,front,back,left,right
scale = 1, .5
bindtime = -1
removetime = 18
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 41 && numexplod(25)
id = 174

;evil flames jump up foward
[State -2, Explod]
type = Explod
triggerall = power >= 1000
triggerall = power <2000
triggerall = animelem = 2
trigger1 = anim = 42 && numexplod(25)=0
trigger1 = var(59) = 0
ID = 174
anim = 7192
pos = 7,-100
postype = p1 ;p2,front,back,left,right
scale = 1, .5
bindtime = -1
removetime = 7
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 42 && numexplod(25)
id = 174

[State -2, Explod]
type = Explod
triggerall = power >= 1000
triggerall = power <2000
triggerall = animelem = 2
trigger1 = anim = 42 && numexplod(25)=0
trigger1 = var(59) = 0
ID = 174
anim = 7192
pos = 24,-100
postype = p1 ;p2,front,back,left,right
scale = 1, .5
bindtime = -1
removetime = 7
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 42 && numexplod(25)
id = 174

;evil flames jump up back
[State -2, Explod]
type = Explod
triggerall = power >= 1000
triggerall = power <2000
triggerall = animelem = 2
trigger1 = anim = 43 && numexplod(25)=0
trigger1 = var(59) = 0
ID = 174
anim = 7192
pos = -7,-100
postype = p1 ;p2,front,back,left,right
scale = 1, .5
bindtime = -1
removetime = 7
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 43 && numexplod(25)
id = 174

[State -2, Explod]
type = Explod
triggerall = power >= 1000
triggerall = power <2000
triggerall = animelem = 2
trigger1 = anim = 43 && numexplod(25)=0
trigger1 = var(59) = 0
ID = 174
anim = 7192
pos = -24,-100
postype = p1 ;p2,front,back,left,right
scale = 1, .5
bindtime = -1
removetime = 7
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 43 && numexplod(25)
id = 174

;evil flames stand level 1
[State -2, Explod]
type = Explod
triggerall = power >= 1000
triggerall = power <2000
trigger1 = anim = 0 && numexplod(4321)=0
trigger1 = var(59) = 0
ID = 4321
anim = 7192
pos = 27,-74
postype = p1 ;p2,front,back,left,right
scale = 1, .5
bindtime = -1
removetime = -1
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 0 && numexplod(4321)
id = 4321

[State -2, Explod]
type = Explod
triggerall = power >= 1000
triggerall = power <2000
trigger1 = anim = 0 && numexplod(4322)=0
trigger1 = var(59) = 0
ID = 4322
anim = 7193
pos = 12,-72
postype = p1 ;p2,front,back,left,right
scale = 1, .5
bindtime = -1
removetime = -1
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 0 && numexplod(4322)
id = 4322

;evil flame crouch
[State -2, Explod]
type = Explod
triggerall = power >= 1000
triggerall = power <2000
trigger1 = anim = 11 && numexplod(4323)=0
trigger1 = var(59) = 0
ID = 4323
anim = 7192
pos = -18,-44
postype = p1 ;p2,front,back,left,right
scale = 1, .5
bindtime = -1
removetime = -1
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 11 && numexplod(4323)
id = 4323

[State -2, Explod]
type = Explod
triggerall = power >= 1000
triggerall = power <2000
trigger1 = anim = 11 && numexplod(4324)=0
trigger1 = var(59) = 0
ID = 4324
anim = 7193
pos = 19,-35
postype = p1 ;p2,front,back,left,right
scale = 1, .5
bindtime = -1
removetime = -1
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 11 && numexplod(4324)
id = 4324

;evil flame walk foward
[State -2,ex ]
type = Explod
triggerall = power >= 1000
triggerall = power <2000
trigger1 = anim = 20 && numexplod(20) = 0
trigger1 = var(59) = 0
anim = 7192
ID = 20
pos = -4,-72
bindtime = -1
scale = 1, .5
sprpriority = 3
ownpal = 1
removeongethit = 1
removetime = -1
ownpal = 1

[State -2,re ]
type = RemoveExplod
trigger1 = anim != 20
ID = 20

[State -2, Explod]
type = Explod
triggerall = power >= 1000
triggerall = power <2000
trigger1 = anim = 20 && numexplod(4325)=0
trigger1 = var(59) = 0
ID = 4325
anim = 7193
pos = 25,-65
postype = p1 ;p2,front,back,left,right
scale = 1, .5
bindtime = -1
removetime = -1
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim != 20
id = 4325

;evil flame walk back
[State -2,ex ]
type = Explod
triggerall = power >= 1000
triggerall = power <2000
trigger1 = anim = 21 && numexplod(21) = 0
trigger1 = var(59) = 0
anim = 7192
ID = 21
facing = -1
pos = -14,-69
scale = 1, .5
bindtime = -1
sprpriority = 3
ownpal = 1
removeongethit = 1
removetime = -1
ownpal = 1

[State -2,re ]
type = RemoveExplod
trigger1 = anim != 21
ID = 21

[State -2, Explod]
type = Explod
triggerall = power >= 1000
triggerall = power <2000
trigger1 = anim = 21 && numexplod(4326)=0
trigger1 = var(59) = 0
ID = 4326
anim = 7193
pos = 17,-65
postype = p1 ;p2,front,back,left,right
scale = 1, .5
bindtime = -1
removetime = -1
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim != 21
id = 4326

;-------------------------------------------------------------------------------
;Level 2 Flames

;evil flames low punch
[State -2, Explod]
type = Explod
triggerall = power >= 2000
triggerall = animelem = 2
trigger1 = anim = 200 && numexplod(432134)=0
trigger1 = var(59) = 0
ID = 432134
anim = 4321
pos = 12,-75
postype = p1 ;p2,front,back,left,right
scale = .6, .3
bindtime = -1
removetime = 5
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 200 && numexplod(432134)
id = 432134

;evil flames crouch low punch
[State -2, Explod]
type = Explod
triggerall = power >= 2000
triggerall = animelem = 2
trigger1 = anim = 400 && numexplod(432134)=0
trigger1 = var(59) = 0
ID = 171
anim = 4321
pos = -22,-45
postype = p1 ;p2,front,back,left,right
scale = .6, .3
bindtime = -1
removetime = 5
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 400 && numexplod(432134)
id = 171

;evil flames crouch strong punch
[State -2, Explod]
type = Explod
triggerall = power >= 2000
triggerall = animelem = 4
trigger1 = anim = 415 && numexplod(432134)=0
trigger1 = var(59) = 0
ID = 172
anim = 4321
pos = -20,-65
postype = p1 ;p2,front,back,left,right
scale = .6, .3
bindtime = -1
removetime = 13
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 415 && numexplod(432134)
id = 172

;evil flames jump up
[State -2, Explod]
type = Explod
triggerall = power >= 2000
triggerall = animelem = 2
trigger1 = anim = 41 && numexplod(25)=0
trigger1 = var(59) = 0
ID = 174
anim = 4321
pos = -8,-110
postype = p1 ;p2,front,back,left,right
scale = .6, .3
bindtime = -1
removetime = 4
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 41 && numexplod(25)
id = 174

[State -2, Explod]
type = Explod
triggerall = power >= 2000
triggerall = animelem = 2
trigger1 = anim = 41 && numexplod(25)=0
trigger1 = var(59) = 0
ID = 174
anim = 4321
pos = 20,-110
postype = p1 ;p2,front,back,left,right
scale = .6, .3
bindtime = -1
removetime = 4
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 41 && numexplod(25)
id = 174

;evil flames jump up falling
[State -2, Explod]
type = Explod
triggerall = power >= 2000
triggerall = animelem = 3
trigger1 = anim = 41 && numexplod(25)=0
trigger1 = var(59) = 0
ID = 174
anim = 4321
pos = 10,-90
postype = p1 ;p2,front,back,left,right
scale = .6, .3
bindtime = -1
removetime = 18
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 41 && numexplod(25)
id = 174

[State -2, Explod]
type = Explod
triggerall = power >= 2000
triggerall = animelem = 3
trigger1 = anim = 41 && numexplod(25)=0
trigger1 = var(59) = 0
ID = 174
anim = 4321
pos = 24,-80
postype = p1 ;p2,front,back,left,right
scale = .6, .3
bindtime = -1
removetime = 18
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 41 && numexplod(25)
id = 174

;evil flames jump up foward
[State -2, Explod]
type = Explod
triggerall = power >= 2000
triggerall = animelem = 2
trigger1 = anim = 42 && numexplod(25)=0
trigger1 = var(59) = 0
ID = 174
anim = 4321
pos = 7,-100
postype = p1 ;p2,front,back,left,right
scale = .6, .3
bindtime = -1
removetime = 7
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 42 && numexplod(25)
id = 174

[State -2, Explod]
type = Explod
triggerall = power >= 2000
triggerall = animelem = 2
trigger1 = anim = 42 && numexplod(25)=0
trigger1 = var(59) = 0
ID = 174
anim = 4321
pos = 24,-100
postype = p1 ;p2,front,back,left,right
scale = .6, .3
bindtime = -1
removetime = 7
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 42 && numexplod(25)
id = 174

;evil flames jump up back
[State -2, Explod]
type = Explod
triggerall = power >= 2000
triggerall = animelem = 2
trigger1 = anim = 43 && numexplod(25)=0
trigger1 = var(59) = 0
ID = 174
anim = 4321
pos = -7,-100
postype = p1 ;p2,front,back,left,right
scale = .6, .3
bindtime = -1
removetime = 7
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 43 && numexplod(25)
id = 174

[State -2, Explod]
type = Explod
triggerall = power >= 2000
triggerall = animelem = 2
trigger1 = anim = 43 && numexplod(25)=0
trigger1 = var(59) = 0
ID = 174
anim = 4321
pos = -24,-100
postype = p1 ;p2,front,back,left,right
scale = .6, .3
bindtime = -1
removetime = 7
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 43 && numexplod(25)
id = 174

;evil flames stand level 2
[State -2, Explod]
type = Explod
triggerall = power >= 2000
trigger1 = anim = 0 && numexplod(4321)=0
trigger1 = var(59) = 0
ID = 4321
anim = 4321
pos = 27,-70
postype = p1 ;p2,front,back,left,right
scale = .6, .3
bindtime = -1
removetime = -1
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 0 && numexplod(4321)
id = 4321

[State -2, Explod]
type = Explod
triggerall = power >= 2000
trigger1 = anim = 0 && numexplod(4322)=0
trigger1 = var(59) = 0
ID = 4322
anim = 4322
pos = 12,-72
postype = p1 ;p2,front,back,left,right
scale = .6, .3
bindtime = -1
removetime = -1
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 0 && numexplod(4322)
id = 4322

;evil flame crouch
[State -2, Explod]
type = Explod
triggerall = power >= 2000
trigger1 = anim = 11 && numexplod(4323)=0
trigger1 = var(59) = 0
ID = 4323
anim = 4321
pos = -18,-44
postype = p1 ;p2,front,back,left,right
scale = .6, .3
bindtime = -1
removetime = -1
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 11 && numexplod(4323)
id = 4323

[State -2, Explod]
type = Explod
triggerall = power >= 2000
trigger1 = anim = 11 && numexplod(4324)=0
trigger1 = var(59) = 0
ID = 4324
anim = 4321
pos = 19,-35
postype = p1 ;p2,front,back,left,right
scale = .6, .3
bindtime = -1
removetime = -1
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 11 && numexplod(4324)
id = 4324

;evil flame walk foward
[State -2,ex ]
type = Explod
triggerall = power >= 2000
trigger1 = anim = 20 && numexplod(20) = 0
trigger1 = var(59) = 0
anim = 4321
ID = 20
pos = -4,-72
bindtime = -1
scale = .6, .3
sprpriority = 3
ownpal = 1
removeongethit = 1
removetime = -1
ownpal = 1

[State -2,re ]
type = RemoveExplod
trigger1 = anim != 20
ID = 20

[State -2, Explod]
type = Explod
triggerall = power >= 2000
trigger1 = anim = 20 && numexplod(4325)=0
trigger1 = var(59) = 0
ID = 4325
anim = 4322
pos = 25,-65
postype = p1 ;p2,front,back,left,right
scale = .6, .3
bindtime = -1
removetime = -1
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim != 20
id = 4325

;evil flame walk back
[State -2,ex ]
type = Explod
triggerall = power >= 2000
trigger1 = anim = 21 && numexplod(21) = 0
trigger1 = var(59) = 0
anim = 4321
ID = 21
facing = -1
pos = -14,-69
scale = .6, .3
bindtime = -1
sprpriority = 3
ownpal = 1
removeongethit = 1
removetime = -1
ownpal = 1

[State -2,re ]
type = RemoveExplod
trigger1 = anim != 21
ID = 21

[State -2, Explod]
type = Explod
triggerall = power >= 2000
trigger1 = anim = 21 && numexplod(4326)=0
trigger1 = var(59) = 0
ID = 4326
anim = 4321
pos = 17,-65
postype = p1 ;p2,front,back,left,right
scale = .6, .3
bindtime = -1
removetime = -1
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim != 21
id = 4326

;during power charge
[State -2, Explod]
type = Explod
trigger1 = anim = 740 && numexplod(4327)=0
trigger1 = animelem = 4
ID = 4327
anim = 4321
pos = -13,-60
postype = p1 ;p2,front,back,left,right
scale = .6, .3
bindtime = -1
removetime = -1
sprpriority = 1
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 740 && numexplod(4327)
id = 4327

[State -2, Explod]
type = Explod
trigger1 = anim = 740 && numexplod(4328)=0
trigger1 = animelem = 4
ID = 4328
anim = 4322
pos = 35,-65
postype = p1 ;p2,front,back,left,right
scale = .6, .3
bindtime = -1
removetime = -1
sprpriority = 1
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 740 && numexplod(4328)
id = 4328

;-------------------------------------------------------------------------------
;Level 3 flames

;evil flames low punch
[State -2, Explod]
type = Explod
triggerall = power >= 3000
triggerall = animelem = 2
trigger1 = anim = 200 && numexplod(432134)=0
trigger1 = var(59) = 0
ID = 432134
anim = 4321
pos = 12,-75
postype = p1 ;p2,front,back,left,right
scale = .55, .32
bindtime = -1
removetime = 5
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 200 && numexplod(432134)
id = 432134

;evil flames crouch low punch
[State -2, Explod]
type = Explod
triggerall = power >= 3000
triggerall = animelem = 2
trigger1 = anim = 400 && numexplod(432134)=0
trigger1 = var(59) = 0
ID = 171
anim = 4321
pos = -22,-45
postype = p1 ;p2,front,back,left,right
scale = .55, .32
bindtime = -1
removetime = 5
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 400 && numexplod(432134)
id = 171

;evil flames crouch strong punch
[State -2, Explod]
type = Explod
triggerall = power >= 3000
triggerall = animelem = 4
trigger1 = anim = 415 && numexplod(432134)=0
trigger1 = var(59) = 0
ID = 172
anim = 4321
pos = -20,-65
postype = p1 ;p2,front,back,left,right
scale = .55, .32
bindtime = -1
removetime = 13
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 415 && numexplod(432134)
id = 172

;evil flames jump up
[State -2, Explod]
type = Explod
triggerall = power >= 3000
triggerall = animelem = 2
trigger1 = anim = 41 && numexplod(25)=0
trigger1 = var(59) = 0
ID = 174
anim = 4321
pos = -8,-110
postype = p1 ;p2,front,back,left,right
scale = .55, .32
bindtime = -1
removetime = 4
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 41 && numexplod(25)
id = 174

[State -2, Explod]
type = Explod
triggerall = power >= 3000
triggerall = animelem = 2
trigger1 = anim = 41 && numexplod(25)=0
trigger1 = var(59) = 0
ID = 174
anim = 4321
pos = 20,-110
postype = p1 ;p2,front,back,left,right
scale = .55, .32
bindtime = -1
removetime = 4
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 41 && numexplod(25)
id = 174

;evil flames jump up falling
[State -2, Explod]
type = Explod
triggerall = power >= 3000
triggerall = animelem = 3
trigger1 = anim = 41 && numexplod(25)=0
trigger1 = var(59) = 0
ID = 174
anim = 4321
pos = 10,-90
postype = p1 ;p2,front,back,left,right
scale = .55, .32
bindtime = -1
removetime = 18
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 41 && numexplod(25)
id = 174

[State -2, Explod]
type = Explod
triggerall = power >= 3000
triggerall = animelem = 3
trigger1 = anim = 41 && numexplod(25)=0
trigger1 = var(59) = 0
ID = 174
anim = 4321
pos = 24,-80
postype = p1 ;p2,front,back,left,right
scale = .55, .32
bindtime = -1
removetime = 18
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 41 && numexplod(25)
id = 174

;evil flames jump up foward
[State -2, Explod]
type = Explod
triggerall = power >= 3000
triggerall = animelem = 2
trigger1 = anim = 42 && numexplod(25)=0
trigger1 = var(59) = 0
ID = 174
anim = 4321
pos = 7,-100
postype = p1 ;p2,front,back,left,right
scale = .55, .32
bindtime = -1
removetime = 7
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 42 && numexplod(25)
id = 174

[State -2, Explod]
type = Explod
triggerall = power >= 3000
triggerall = animelem = 2
trigger1 = anim = 42 && numexplod(25)=0
trigger1 = var(59) = 0
ID = 174
anim = 4321
pos = 24,-100
postype = p1 ;p2,front,back,left,right
scale = .55, .32
bindtime = -1
removetime = 7
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 42 && numexplod(25)
id = 174

;evil flames jump up back
[State -2, Explod]
type = Explod
triggerall = power >= 3000
triggerall = animelem = 2
trigger1 = anim = 43 && numexplod(25)=0
trigger1 = var(59) = 0
ID = 174
anim = 4321
pos = -7,-100
postype = p1 ;p2,front,back,left,right
scale = .55, .32
bindtime = -1
removetime = 7
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 43 && numexplod(25)
id = 174

[State -2, Explod]
type = Explod
triggerall = power >= 3000
triggerall = animelem = 2
trigger1 = anim = 43 && numexplod(25)=0
trigger1 = var(59) = 0
ID = 174
anim = 4321
pos = -24,-100
postype = p1 ;p2,front,back,left,right
scale = .55, .32
bindtime = -1
removetime = 7
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 43 && numexplod(25)
id = 174

;evil flames level 3 stand
[State -2, Explod]
type = Explod
triggerall = power >= 3000
trigger1 = anim = 2 && numexplod(43210)=0
trigger1 = var(59) = 0
ID = 43210
anim = 43210
pos = -45,-99
postype = p1 ;p2,front,back,left,right
scale = .55, .32
bindtime = -1
removetime = -1
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 2 && numexplod(43210)
id = 43210

[State -2, Explod]
type = Explod
triggerall = power >= 3000
trigger1 = anim = 2 && numexplod(43220)=0
trigger1 = var(59) = 0
ID = 43220
anim = 43220
pos = 25,-95
postype = p1 ;p2,front,back,left,right
scale = .55, .32
bindtime = -1
removetime = -1
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 2 && numexplod(43220)
id = 43220

[State -2, Explod]
type = Explod
triggerall = power >= 3000
trigger1 = anim = 2 && numexplod(432101)=0
trigger1 = var(59) = 0
ID = 432101
anim = 43210
pos = -45,-99
postype = p1 ;p2,front,back,left,right
scale = .55, .32
bindtime = -1
removetime = -1
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 2 && numexplod(432101)
id = 432101

[State -2, Explod]
type = Explod
triggerall = power >= 3000
trigger1 = anim = 2 && numexplod(432202)=0
trigger1 = var(59) = 0
ID = 432202
anim = 43220
pos = 25,-95
postype = p1 ;p2,front,back,left,right
scale = .55, .32
bindtime = -1
removetime = -1
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 2 && numexplod(432202)
id = 432202

;evil flame crouch
[State -2, Explod]
type = Explod
triggerall = power >= 3000
trigger1 = anim = 11 && numexplod(43230)=0
trigger1 = var(59) = 0
ID = 43230
anim = 4321
pos = -18,-44
postype = p1 ;p2,front,back,left,right
scale = .55, .32
bindtime = -1
removetime = -1
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 11 && numexplod(43230)
id = 43230

[State -2, Explod]
type = Explod
triggerall = power >= 3000
trigger1 = anim = 11 && numexplod(43240)=0
trigger1 = var(59) = 0
ID = 43240
anim = 4321
pos = 19,-35
postype = p1 ;p2,front,back,left,right
scale = .55, .32
bindtime = -1
removetime = -1
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim > 11 && numexplod(43240)
id = 43240

;evil flame walk foward
[State -2,ex ]
type = Explod
triggerall = power >= 3000
trigger1 = anim = 20 && numexplod(12111) = 0
trigger1 = var(59) = 0
anim = 4321
ID = 12111
pos = -4,-72
bindtime = -1
scale = .55, .32
sprpriority = 3
ownpal = 1
removeongethit = 1
removetime = -1
ownpal = 1

[State -2,re ]
type = RemoveExplod
trigger1 = anim != 20
ID = 12111

[State -2, Explod]
type = Explod
triggerall = power >= 3000
trigger1 = anim = 20 && numexplod(43250)=0
trigger1 = var(59) = 0
ID = 43250
anim = 4322
pos = 25,-60
postype = p1 ;p2,front,back,left,right
scale = .55, .32
bindtime = -1
removetime = -1
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim != 20
id = 43250

;evil flame walk back
[State -2,ex ]
type = Explod
triggerall = power >= 3000
trigger1 = anim = 21 && numexplod(21111) = 0
trigger1 = var(59) = 0
anim = 4321
ID = 21111
facing = -1
pos = -14,-69
scale = .55, .32
bindtime = -1
sprpriority = 3
ownpal = 1
removeongethit = 1
removetime = -1
ownpal = 1

[State -2,re ]
type = RemoveExplod
trigger1 = anim != 21
ID = 21111

[State -2, Explod]
type = Explod
triggerall = power >= 3000
trigger1 = anim = 21 && numexplod(43260)=0
trigger1 = var(59) = 0
ID = 43260
anim = 4321
pos = 17,-60
postype = p1 ;p2,front,back,left,right
scale = .55, .32
bindtime = -1
removetime = -1
sprpriority = 3
removeongethit = 1
ownpal = 1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim != 21
id = 43260

;-------------------------------------------------------------------------------
; Kairi`s debug
[State -2, Display To Debug]
type = DisplayToClipboard
trigger1 = 1
text = "Distance= X %f, Y %f  VELS= X %f, Y %d, var1= %d"
params = p2Dist x, p2Dist y, vel x, floor(vel y), var(1)

;-------------------------------------------------------------------------------
; Sounds of state 5000
[State -3, GetHit Snd]
type=playsnd
triggerall= alive && time=1
triggerall= stateno=5000 || stateno=5010
trigger1= gethitvar(animtype)>=2 && random<500
trigger2= gethitvar(animtype)=1 && random<375
trigger3= gethitvar(animtype)=0 && random<250
value=11,1+(random%3)
channel=0
ignorehitpause=1

[State -3, GetHit Snd]
type=playsnd
triggerall= alive && time=1
trigger1= (stateno=5000 || stateno=5010) && numenemy
trigger1= gethitvar(fall) || (enemynear,hitdefattr=SCA,SA,HA)
trigger2= (stateno=5020 || stateno=5070 || stateno=5080)
trigger3= (stateno=5050 || stateno=5100) && (prevstateno!=[5000,5199])
value=11,1+(random%3)
channel=0
ignorehitpause=1

[State -2 , 5]
type = PlaySnd
trigger1 = stateno = 5300
value = 4,0

;stop sounds
[State -2]
type = StopSnd
trigger1 = stateno != 195
trigger2 = movetype = H
channel = 4

[State -2]
type = StopSnd
trigger1 = stateno != 100
trigger2 = movetype = H
channel = 4

;-------------------------------------------------------------------------------
;original combo (EXCELL COMBO)

[State -2, Original Combo End]
type=varset
trigger1= var(20)<0
trigger2= movetype=H
trigger3= roundstate!=2
var(20)=0
ignorehitpause=1

[State -2, Original Combo Time]
type=varadd
trigger1= var(20)>0
var(20)=-1
ignorehitpause=1

[State -2, Throws Disallowed]
type=varset
trigger1= 1
var(38)= 0

[State -2, Throws Disallowed]
type=varset
trigger1= (enemynear,stateno=[150,155])
trigger2= (enemynear,movetype=H && enemynear,statetype!=A) && !var(20)
trigger3= (enemynear,stateno=[5020,5040]) && !(enemynear,hitfall)
trigger4= ((enemynear,stateno=0) || (enemynear,stateno=52)) && (enemynear,prevstateno=[5000,5040]) && ((enemynear,time<=0) || !(enemynear,ctrl))
trigger5= (enemynear,stateno=0) && (enemynear,prevstateno=52) && ((enemynear,time<=0) || !(enemynear,ctrl))
trigger6= (enemynear,stateno=40) && (enemynear,time>=1 || enemynear,prevstateno=0 || enemynear,prevstateno=52)
var(38)= 1

[State -2, attackvarbyhits]
type=varset
trigger1= numenemy
fvar(10)= ifelse(enemynear,gethitvar(hitcount)<3, 24, ifelse(enemynear,gethitvar(hitcount)>=24, 2, 26-enemynear,gethitvar(hitcount)))/24.0
ignorehitpause=1

[State -2, attackvarbyhits]
type=varset
trigger1= numenemy && var(20)
fvar(10)= .72 * (10-ifelse(enemynear,gethitvar(hitcount)>=9, 9, enemynear,gethitvar(hitcount))) / 10.0
ignorehitpause=1

[State -2, attackvarbyhitsreset]
type=varset
trigger1= numenemy
trigger1= (enemynear,movetype!=H)
fvar(10)= ifelse(var(20), .72, 1)
ignorehitpause=1

[State -2, dampener var]
type=varset
trigger1=numenemy
fvar(12)= fvar(10) + (fvar(13)*!var(20)) + (var(29)*.2)
ignorehitpause=1

[State -2, dampener]
type=attackmulset
trigger1= 1
value=fvar(12) + .5*(var(37)>0)
ignorehitpause=1

[State -2, attackincreasereset]
type=varset
triggerall= var(37)
trigger1= movecontact || movereversed
trigger1= stateno!=1500 && (stateno!=1505 || time)
trigger2= (stateno=[801,849]) || (stateno=[851,899]) || (stateno=[1320,1339])
trigger3= stateno=4001 || stateno=4100
var(37)=0
ignorehitpause=1

[State -2, OTG]
type= varset
trigger1= p2statetype=L
var(24)= 1
ignorehitpause=1

[State -2, OTG]
type= varset
trigger1= movecontact=1 && p2statetype!=L
trigger2= p2statetype!=A && p2statetype!=L
var(24)= 0
ignorehitpause=1

[State -2, Free Juggling]
type=assertspecial
trigger1= var(20)>0 || var(24) || numtarget(3300)
trigger2= roundstate!=2
flag=nojugglecheck
ignorehitpause=1

[State -2, Original Combo Guard]
type=assertspecial
trigger1= var(20)>0
flag= nostandguard
flag2=nocrouchguard
flag3=noairguard
ignorehitpause=1

[State -2, Original Combo PalFX]
type=palfx
trigger1= var(20)>60
time=2
add=32+ceil(sin(var(20)/16.0*pi)*32),32+ceil(sin(var(20)/16.0*pi)*32),32+ceil(sin(var(20)/16.0*pi)*32)
ignorehitpause=1

[State -2, Original Combo PalFX]
type=palfx
trigger1= var(20)=[1,60]
time=2
add=64+ceil(sin(var(20)/8.0*pi)*64),64+ceil(sin(var(20)/8.0*pi)*64),64+ceil(sin(var(20)/8.0*pi)*64)
ignorehitpause=1

[State -2, No Dizzy >:)]
type=selfstate
trigger1= anim=5300
trigger1= numenemy && !pos y
trigger1= enemynear,movetype!=A
trigger1= ((enemy,name="Catwalk") + (enemy,authorname="Phantom.of.the.Server")) != 2
value=0
ctrl=1

[State -2, stopsnd]
type=stopsnd
trigger1= !time && prevstateno=187
channel=4

[State -2, Excel Timer]
type = helper
trigger1 = !numhelper(8305) && var(20) > 0
helpertype = normal
stateno = 8305
ID = 8305
name = "Excel Timer"
postype = p1
ownpal = 1
pausemovetime = 2147483647
supermovetime = 2147483647
ignorehitpause = 1

;-------------------------------------------------------------------------------
[State -2, varKOsnd]
type=varset
trigger1= alive && var(8)>0
trigger2= !alive && var(8)<2
var(9)=ifelse(alive,0,var(8)+1)
ignorehitpause=1

[State -2, KOsnd]
type=playsnd
trigger1= !alive && var(8)=1
trigger1= var(8):=2
value= 11, ifelse(stateno=5130, 1, ifelse(random<500, 1, 1))
ignorehitpause=1

;-------------------------------------------------------------------------------
[State -2, P2 Recovery]
type=targetstate
;trigger1= !var(20)
trigger1= (stateno=[200,299]) && anim!=226 && stateno!=270 && stateno!=285
trigger1= movehit=1 && numtarget
trigger1= (target,stateno=5020) && (target,alive) && (target,hitfall)
value=5025
ignorehitpause=1

[State -2, P2 OTG Recovery]
type=targetstate
trigger1= (stateno=[200,299])
trigger1= movehit=1 && numtarget
trigger1= (target,stateno=5080) && (target,alive) && (target,gethitvar(yvel)<0)
value=5085
ignorehitpause=1

[State -2, P2 Facing]
type=targetfacing
trigger1= movecontact=1 && numtarget
trigger1= !(target,hitshakeover) && !(target,hitfall) && (target,time<=1)
value= ifelse(p2dist x>=0, -1, 1)
ignorehitpause=1

[State -2, P2 Tech Flip]
type= varset
trigger1= movehit=1
var(25)= (stateno=[195,2999])
ignorehitpause=1

[State -2, P2 Tech Flip]
type= targetstate
;trigger1= var(25)
trigger1= roundstate=2 && (ctrl || movetype=H)
trigger1= numtarget
trigger1= target,command="recovery"
trigger1= target,alive && target,hitfall
trigger1= target,stateno=5030 || target,stateno=5035 || target,stateno=5050 || target,stateno=5071
value= 5205 + 0*(var(25):=0)
ignorehitpause=1

[State -2, P2 Tech Flip]
type= varset
;triggerall= var(25)
trigger1= !numtarget || var(20)>0>0
trigger2= numenemy=1
trigger2= enemy,statetype!=A
trigger3= numenemy>=2
trigger3= enemynear(0),statetype!=A && enemynear(1),statetype!=A
var(25)= 0
ignorehitpause=1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim = 131
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim = 131
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim = 131
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = anim = 131
id = 43240

[State -2,Removeafterimage]
type = afterimagetime
trigger1 = movetype = H
time = 0

[State -2,Removeafterimage]
type = stopsnd
trigger1 = movetype = H
time = 0
channel = 0

;---------------------------------------------------------------------------
;Hit Wall States
;---------------------------------------------------------------------------

[State -2]
type = removeexplod
triggerall = numtarget
trigger1 = target,stateno = 5100
ID = 8420

[State -2, Hit Wall Spark]
type = Explod
triggerall = numtarget
trigger1 = target, StateNo = 1111302
trigger1 = target, Time = 1
anim = 8410
pos = 0, -70 + floor(ScreenPos Y + P2Dist Y)
postype = front
sprpriority = 3
ownpal = 1
facing = facing
ignorehitpause = 1
bindtime = -1
ontop = 1
scale = .5,.5

[State -2, Hit Wall Spark]
type = Explod
triggerall = numtarget
trigger1 = target, StateNo = 1111302
trigger1 = target, Time = 1
anim = 8411
pos = 0, -70 + floor(ScreenPos Y + P2Dist Y)
postype = front
sprpriority = -3
ownpal = 1
facing = facing
ignorehitpause = 1
bindtime = -1
scale = .5,.5

[State -2, Hit Wall Sound]
type = PlaySnd
triggerall = numtarget
trigger1 = target, StateNo = 1111302
trigger1 = target, Time = 1
value = 40, 1
ignorehitpause = 1
supermovetime = -1

;-------------------------------------------------------------------------------
[State -2, Hit Wall Spark]
type = Explod
trigger1 = P2StateNo = 1111302
trigger1 = P2MoveType = H
trigger1 = NumExplod(8410) = 0
anim = 8410
ID= 8410
pos = 0, -70 + floor(ScreenPos Y + P2Dist Y)
postype = front
facing = facing
ignorehitpause = 1
bindtime = -1
ontop = 1
sprpriority = 3
ownpal = 1
scale = .5,.5

[State -2, Hit Wall Spark]
type = Explod
trigger1 = P2StateNo = 1111302
trigger1 = P2MoveType = H
trigger1 = NumExplod(8411) = 0
anim = 8411
ID = 8411
pos = 0, -70 + floor(ScreenPos Y + P2Dist Y)
postype = front
sprpriority = -3
ownpal = 1
facing = facing
ignorehitpause = 1
bindtime = -1
scale = .5,.5

[State -2, Hit Wall Sound]
type = PlaySnd
trigger1 = P2StateNo = 1111302 && enemynear,time=1
value = 40, 1
ignorehitpause = 1
supermovetime = -1

;-------------------------------------------------------------------------------

[State -2, Counter FX]
type = Helper
trigger1 = MoveHit = 1 && var(30) = HitPauseTime
trigger1 = NumEnemy && var(7)
trigger1 = !(HitDefAttr = SCA, AT) && (EnemyNear, MoveReversed != 1)
helperType = Normal
stateNo = 8290
ID = 8290
name = "Counter FX"
posType = P1
pos = ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < var(35), ceil(P2Dist x), var(35))), var(36)
facing = -1
ownPal = 1
pauseMoveTime = 255
superMoveTime = 255
ignoreHitPause = 1

[State -2, Counter Flag]
type = VarSet
trigger1 = NumEnemy
var(7) = (EnemyNear, MoveType = A)
ignoreHitPause = 1

;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3]

[State -3, NoWalk after Parry]
type = assertspecial
trigger1 = var(26)
trigger1 = var(26) := (var(26) -1)
flag = nowalk

[State -3, moveshadow]
type=afterimage
triggerall= time=1 && !var(20)
trigger1= stateno=50 && var(9)=3
trigger2= stateno=[710,720]
time=2
timegap=1
framegap=4
length=9
palbright=0,0,0
paladd=0,0,0
palmul=.9,.9,.9
palcontrast=120,120,120
palpostbright=0,0,0
trans=add1

[State -3, AfterImagePersist]
type=afterimagetime
trigger1= stateno=50 && var(9)=3 && vel y<-1
trigger2= var(20)>0
trigger3= stateno=40000 && anim!=100
time=2

;Sounds
[State -3, Landing Sound]
type = PlaySnd
triggerall = time = 1
trigger1 = stateno = 52 || stateno = 107 || stateno = 47
value = 2,6

[State -3, DM Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 6000 || stateno = 6100 || stateno = 6200 || stateno = 6300
value = 3,0

[State -3, Landing Sound 2]; besando el suelo
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 5100 || stateno = 5080 || stateno = 5110
value = 2,8

[State -3, VarSet]
type = VarSet
trigger1 = time = 0 &&  (stateno = 0 || stateno = 20 || stateno = 40 )
trigger1 = var(45) != 0
v = 45
value = 0

[State -3, RemoveExplod]
type = RemoveExplod
trigger1 = stateno != 6060
id = 6060

;-------------------------------------------------------------------------------
;Super BG
[State -3, Super finish background]
type = Helper
triggerall = WinKO && !var(5)
trigger1 = stateno = [3000,4999]
trigger1 = var(5) := StateNo
helpertype=normal
name = "SuperKO"
ID = 4000
stateno = 4000
supermovetime = 99999
pausetime = 99999
ignorehitpause = 1

[State -3,Shouky hatsudou]
type = VarSet
trigger1 = roundstate = 0
v =  6
value = 0

[State -3, Excel Finish]
type=helper
triggerall= winKO
triggerall= var(20) && !numhelper(7400)
trigger1= (movehit=[1,4])
trigger2= numhelper(stateno+5)
trigger2= helper(stateno+5),var(3)
helpertype=normal
stateno=4005
ID=4005
name="KO FX"
postype=left
pos=160,-120
ownpal=1
ignorehitpause=1
pausemovetime=999
supermovetime=999

;------------------------------------------------------------------------------

[State -3, collapse]
type=changestate
trigger1= !alive && (stateno=[5000,5030])
trigger1= (prevstateno=[130,131]) || (prevstateno=[140,141]) || (prevstateno=[150,153])
value=5130

;-------------------------------------------------------------------------------

[State -3, Prevent Undergound Juggles]
type= targetbind
trigger1= movehit=1
trigger1= numtarget=1 && numenemy
trigger1= (target,time<=1) && (target,ID=enemynear,ID); this is just to prevent Simul issues as usual
trigger1= !(target,hitshakeover) && (target, hitfall) && (target, pos y>0)
pos= ceil(p2dist x), ceil(-pos y); keeps P2 at the same horizontal distance, but resets his Y position
ignorehitpause= 1

;-------------------------------------------------------------------------------

[State -3, Parry Detection]
type = Helper
triggerAll = RoundState = 2 && !NumHelper(765) ;&& !var(20)
triggerAll = (MoveType = I && ctrl) || (StateNo = [760,762]) || StateNo = 5120
triggerAll = (command != "rlsfwd" && command != "rlsback" && command != "rlsup" && command != "rlsdown")
trigger1 = (StateType = S || StateType = C || StateNo = 5120) && (command = "fwd" || command = "down")
trigger2 = StateType = A && (var(3) != 1 && var(3) != 2) && command = "fwd"
helperType = Normal
stateNo = 765
ID = 765
name = "Parry Detection"
posType = P1
pauseMoveTime = 65535
superMoveTime = 65535

[State -3, Parry Attacks]
type = ChangeState
trigger1 = (StateNo != [760,762]) && NumHelper(765)
trigger1 = Helper(765), StateNo = 766
value = ifElse((Helper(765), Anim = 767), 762, ifElse((Helper(765), Anim = 766), 761, 760))
ignoreHitPause = 1

[State -3, Parry Projectiles]
type = HitOverride
trigger1 = (StateNo != [760,762]) && NumHelper(765)
trigger1 = !(Helper(765), var(0)) && (Helper(765), Anim = 765)
attr = SA, AP
stateNo = 760
slot = 0
time = 1
ignoreHitPause = 1

[State -3, Parry Projectiles]
type = HitOverride
trigger1 = (StateNo != [760,762]) && NumHelper(765)
trigger1 = !(Helper(765), var(0)) && (Helper(765), Anim = 766)
attr = C, AP
stateNo = 761
slot = 0
time = 1
ignoreHitPause = 1

[State -3, Parry Projectiles]
type = HitOverride
trigger1 = (StateNo != [760,762]) && NumHelper(765)
trigger1 = !(Helper(765), var(0)) && (Helper(765), Anim = 767)
attr = SCA, AP
stateNo = 762
slot = 0
time = 1
ignoreHitPause = 1

[State -3, Assert: NoWalk after Parry]
type = AssertSpecial
trigger1 = var(26) > 0
trigger1 = var(26) := (var(26)-1)
flag = NoWalk



;==============================================================================
; {C:\Users\Luis\Desktop\Kairi\states\common_Kairi.cns}
;==============================================================================


;KAIRI FROM STREET FIGHTER EX + EDITS BY Mr.KARATE AND GUSTAVO C. MORAES
;CODES - Mr.KARATE
;SPRITES - GUSTAVO C. MORAES

;==============================================================================================
;=======================================<COMMON STATES>========================================
;==============================================================================================
; Common state file for M.U.G.E.N beta 2002.04.14
;
; System variables usage
; ----------------------
; Var name    Type   Purpose
; --------    ----   -------
; sysvar(0)   Temp   Set by state 5081 (HITL_SLIDE) to 1 to prevent
;                    showing ground hit frame in state 5110 (HIT_LIEDOWN).
;                    Used by guarding states.
; sysvar(1)   Temp   Used by state 40 (Jump Start) amd 45 (Air Jump Start)
;                    to keep track of which way to jump.
;                    Used by state 5100 and 5110 to remember downward
;                    velocity of player just before hitting the ground.
;                    Used in state 5080 for storing the anim # to display.

; The following states have special handling within MUGEN, and should be
; overridden with caution:
; Jump Start (40): airjumping bookkeeping at time = 0
; All guard states (120-155): guard handling throughout state
; Hit_trip, shaking (5070): defence increases at time = 0
; Hit_bounce (5100): defence increases at time = 0, player becomes
;                    invincible if within 10 ticks of getting up
; Hit_liedown (5110): player changes to get-up state (5120) when ready
; Hit_getup (5120): player's defence is restored to normal at time = 0
; Hitfall_recover (5200): player's defence is restored at time = 0
; Hitfall_airrecover (5210): player's defence is restored at time = 0

;==============================================================================================
;=======================================<COMMON STATES>========================================
;==============================================================================================
; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0

[State 0, 1]
type = ChangeAnim
triggerall = power < 3000
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 0

[State 0, 1]
type = ChangeAnim
triggerall = power >= 3000
trigger1 = Anim != ifelse(var(59),0,2) && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = ifelse(var(59),0,2)

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050

;---------------------------------------------------------------------------
; Stand to Crouch
[Statedef 10]
type = C
physics = C
anim = 10

[State 10, 1]
type = VelMul
trigger1 = Time = 0
x = .75

[State 10, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type = C
physics = C
anim = 11
sprpriority = 0

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1 && anim = 6
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1 && anim = 6
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1 && anim = 6
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1 && anim = 6
id = 43240

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 6 && AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouch to Stand
[Statedef 12]
type = S
physics = S
anim = 12

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 12, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type = S
physics = S
sprpriority = 0

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

[State 20, explod]
type = Explod
triggerall = var(59) = 0
trigger1 = (timemod = 3,2)
trigger1 =  power >= 2000
trigger1 =  power <3000
anim = 71001
postype = p1
pos = 19,-73
vel = 0,-random%3
supermove = 9999
random = 10,40
scale = .1,.1
sprpriority = 5
ownpal = 1
ignorehitpause=1
ID = 1113

[State 20, explod]
type = Explod
triggerall = var(59) = 0
trigger1 = (timemod = 4,3)
trigger1 =  power >= 2000
trigger1 =  power <3000
anim = 71002
postype = p1
pos = 19,-73
supermove = 9999
vel = 0,-random%2
supermove = 9999
random = 10,40
scale = .1,.1
sprpriority = 5
ownpal = 1
ignorehitpause=1
ID = 1113

[State 20, explod]
type = Explod
triggerall = var(59) = 0
trigger1 = (timemod = 5,3)
trigger1 =  power >= 3000
anim = 71001
postype = p1
pos = -19,-92
vel = 0,-random%3
supermove = 9999
random = 10,40
scale = .2,.2
sprpriority = 5
ownpal = 1
ignorehitpause=1
ID = 1113

;[State 20, explod]
;type = Explod
;triggerall = var(59) = 0
;trigger1 = (timemod = 4,2)
;trigger1 =  power >= 3000
;anim = 71002
;postype = p1
;pos = 19,-92
;vel = 0,-random%2
;supermove = 9999
;random = 10,50
;scale = .2,.2
;sprpriority = 5
;ownpal = 1
;ignorehitpause=1
;ID = 1113

[State 20, explod]
type = Explod
triggerall = var(59) = 0
trigger1 = (timemod = 3,2)
trigger1 =  power >= 3000
anim = 71001
postype = p1
pos = 19,-93
vel = 0,-random%3
supermove = 9999
random = 10,40
scale = .2,.2
sprpriority = 5
ownpal = 1
ignorehitpause=1
ID = 1113

;[State 20, explod]
;type = Explod
;triggerall = var(59) = 0
;trigger1 = (timemod = 4,3)
;trigger1 =  power >= 3000
;anim = 71002
;postype = p1
;pos = 19,-93
;supermove = 9999
;vel = 0,-random%2
;supermove = 9999
;random = 10,40
;scale = .2,.2
;sprpriority = 5
;ownpal = 1
;ignorehitpause=1
;ID = 1113

[State 20, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4321

[State 20, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4322

[State 20, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43210

[State 20, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43220

[State 20, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 432101

[State 20, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 432202

;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, Dust]
type=helper
trigger1= !animtime
helpertype=normal
stateno=7100
ID=7100
name="Dust"
postype=p1
ownpal=1

[State 40, Dust]
type=helper
triggerall = var(59) = 0
trigger1= !animtime
helpertype=normal
stateno=7101
ID=7101
name="flames"
postype=p1
ownpal=1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, var]
type=varset
trigger1= !time && var(40)<=0
var(9)=ifelse(command="highjump",3,1)

[State 40, var]
type=varset
trigger1= var(40)<=0
sysvar(1)=ifelse(!time,0,ifelse(command="holdfwd",1,ifelse(command="holdback",-1,sysvar(1))))

[State 40, var]
type=varset
trigger1= var(40)<=0 && var(9)!=3 && command!="holdup"
trigger2= var(40)>=1 && var(9)!=3 && random<100
var(9)=2

[State 40, Vel]
type=velset
trigger1= !animtime && var(9)!=3
x=ifelse(!sysvar(1),const(velocity.jump.neu.x),ifelse(sysvar(1)=1,const(velocity.jump.fwd.x),const(velocity.jump.back.x)))
y=ifelse(var(9)=2,.75,1)*const(velocity.jump.y)

[State 40, Vel]
type=velset
trigger1= !animtime && var(9)=3
x=ifelse(sysvar(1)=0,const(velocity.jump.neu.x),ifelse(sysvar(1)=1,1.5*const(velocity.jump.fwd.x),1.5*const(velocity.jump.back.x)))
y=ifelse(!sysvar(1),1,1)*const(velocity.jump.y)

[State 40, Vel]
type=velset
trigger1= !animtime && (prevstateno= [100,101]) && sysvar(1)=1
trigger1= var(9):=3
x=const(velocity.runjump.fwd.x)

[State 40, End]
type=changestate
trigger1= !animtime
value=50
ctrl=1

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; AirJump Start
[Statedef 45]
type = A
physics = N
ctrl = 0
velset = 0,0

[State 45, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(44)
value = 44

[State 45, 2]
type = ChangeAnim
trigger1 = !SelfAnimExist(44)
value = 41

[State 45, 3]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 45, 4]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 45, 5]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 45, 6]
type = VelSet
trigger1 = Time = 2
x = ifelse(sysvar(1)=0, const(velocity.airjump.neu.x), ifelse(sysvar(1)=1, const(velocity.airjump.fwd.x), const(velocity.airjump.back.x)))
y = const(velocity.airjump.y)

[State 45, 7]
type = ChangeState
trigger1 = Time = 2
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Up
[Statedef 50]
type = A
physics = A

[State 50, Snd]
type=playsnd
trigger1= !time
value=3,ifelse(var(9)=3,6,5)

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

;---------------------------------------------------------------------------
; Jump Down (empty state for compatibility)
[Statedef 51]
type = A
physics = A

[State 51, 1]
type = Null
trigger1 = 1

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type = S
physics = S
ctrl = 0
anim = 47

[State 52, changeanim]
type = ChangeAnim
trigger1 = time = 1
trigger1 = prevstateno =[1400,4200]
value = 49

[State 52, changeanim]
type = ChangeAnim
trigger1 = time = 1
trigger1 = prevstateno =[1051,1063]
value = 49

[State 52, Snd]
type=playsnd
trigger1= !time
value=3,4

[State 52, Dust]
type=explod
trigger1= !time
anim=7102
ID=7102
sprpriority=-2
postype=p1
scale=.5,.5
ownpal=1
pausemovetime=-1
supermovetime=-1

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 600

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type = S
physics = S

[State 1005, recoil]
type = explod
trigger1 = AnimElem = 1 && anim = 131
persistent = 0
anim = 1052
pos = 31,-70
scale = .5,.5
postype = p1
removetime = !time
sprpriority = 3
vel = -.7

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130
value = 130

[State 130, Hi to Lo]
type = ChangeState
trigger1 = command = "holddown"
value = 131

[State 130, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type = C
physics = C

[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131
value = 131

[State 131, Lo to Hi]
type = ChangeState
trigger1 = command != "holddown"
value = 130

[State 131, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type = A
physics = N

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 132, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; GUARD (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 140 + (statetype = C) + (statetype = A)*2

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 140, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

;[State 140, 5] ;Implemented within engine
;type = ChangeState
;trigger1 = AnimTime = 0
;value = (statetype = C)*11 + (statetype = A)*51

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 150, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type = S
movetype= H
physics = S
anim = 150

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type = C
movetype= H
physics = N
velset = 0,0

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152, 3]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 152, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type = C
movetype= H
physics = C
anim = 151

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type = A
movetype= H
physics = N
velset = 0,0

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type = A
movetype= H
physics = N
anim = 152

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

;---------------------------------------------------------------------------
; LOSE (Time over)
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; DRAWGAME (Time over)
[Statedef 175]
type = S
ctrl = 0
velset = 0,0

[State 175, 1] ; If no anim, use go to lose state.
type = ChangeState
trigger1 = Time = 0
trigger1 = !SelfAnimExist(175)
value = 170

[State 175, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 175

[State 175, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; PREINTRO
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 190, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(190)
value = 190

[State 190, 2] ;Go straight to intro.
type = ChangeState
trigger1 = Time = 0
value = 191

;---------------------------------------------------------------------------
; INTRO (override this state to give character an intro)
[Statedef 191]
type = S
ctrl = 0

[State 191, 1]
type = ChangeState
trigger1 = Time = 0
value = 0

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 5000]
type = S
movetype= H
physics = N
velset = 0,0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 400,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5001 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;-----------------------------------------------------------------------------
;Sairou Kyushuu P2 states
[Statedef 4150]
type = A
movetype= H
physics = N
velset = 0,0

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 5016

[State 0, VelSet]
type = VelSet
trigger1 = time >= 0
y = 0
x = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 5
value = 4155
ctrl = 0

;---------------------------------------------------------------------------
[Statedef 4155]
type = A
movetype= H
physics = N
velset = 0,0

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 5070

[State 0, VelSet]
type = VelSet
trigger1 = time >= 0
y = 0
x = 0

[State 0, VelSet]
type = VelSet
trigger1 = time >= 4
x = -2
y = 20

[State 0, snd]
type = PlaySnd
trigger1 = time = 9
value = f171,3

[State 0, efect]
type = explod
trigger1 = time = 9
anim = f79
postype = p2
pos = 20, 90
scale = 2,2.1
bindtime = 1
removetime = 16
sprpriority = -1

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 9
value = 4185
ctrl = 0

;-------------------------------------------------------------------------------
[Statedef 4185]
type = A
movetype= H
physics = N
velset = 0,0

[State 0, VelSet]
type = VelSet
trigger1 = time >= 40
x = 0
y = -10

[State 0, SelfState]
type = SelfState
trigger1 = time = 5
value = 5100

;---------------------------------------------------------------------------
; HITG_SLIDE
[Statedef 5001]
type = S
movetype= H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 400,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 5001, 6]
type = ChangeState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITC_SHAKE
[Statedef 5010]
type = C
movetype= H
physics = N
velset = 0,0

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5010, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
triggerall = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5010, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5011 ;HITC_SLIDE

[State 5010, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5010, FFB Light]
type = ForceFeedback
trigger1 = anim = 5020
persistent = 0
time = 6
waveform = square

[State 5010, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5021
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5010, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5022
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITC_SLIDE
[Statedef 5011]
type = C
movetype= H
physics = C

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 5011, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5025 + GetHitVar(animtype)

[State 5011, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5011, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5011, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5011, 6]
type = ChangeState
trigger1 = HitOver
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 5020]
type = A
movetype= H
physics = N
velset = 0,0

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 400,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 5030]
type = A
movetype= H
physics = N
ctrl = 0

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 400,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 5030, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5040 ;HITA_RECOV

[State 5030, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5050 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 5035 ;HITA_UP (transition)

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 5035]
type = A
movetype= H
physics = N

[State 400,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5040 ;HITA_RECOV

[State 5035, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5050 ;HITA_FALL

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 5040]
type = A
movetype= H
physics = N

[State 5040, 1]
type = ChangeState
trigger1 = !Alive
value = 5050

[State 5040, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim != 5040
trigger2 = Time = 0
trigger2 = Anim != 5035
value = 5040

[State 5040, 3]
type = CtrlSet
trigger1 = HitOver
value = 1

[State 5040, 4]
type = StateTypeSet
trigger1 = HitOver
movetype = I

[State 5040, 5]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 400,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 5040, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMPLAND

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type = A
movetype= H
physics = N

[State 400,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HIT_TRIP (shaking)
[Statedef 5070]
type = A
movetype= H
physics = N
velset = 0,0

[State 400,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 5070, 1]
type = ChangeAnim 
trigger1 = 1
value = 5070

[State 5070, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 5071

[State 5070, 3]
type = ForceFeedback
trigger1 = time = 0
time = 12
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 5071]
type = A
movetype= H
physics = N

[State 400,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 5071, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5071, 3] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 15
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HITL_SHAKE
[Statedef 5080]
type = L
movetype= H
physics = N
velset = 0,0

[State 400,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 5080, 1] ;Set default anim
type = VarSet
trigger1 = time = 0
sysvar(2) = ifelse (GetHitVar(yvel) = 0, 5080, 5090)

[State 5080, 2]
type = VarAdd
trigger1 = time = 0
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 5080, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0
trigger1 = sysvar(2) = 5090
trigger1 = !SelfAnimExist(5090)
sysvar(2) = 5030

[State 5080, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)

[State 5080, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5081 ;HITL_SLIDE

[State 5080, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) != 0
value = 5030 ;HITA_UP

;---------------------------------------------------------------------------
; HITL_SLIDE
[Statedef 5081]
type = L
movetype= H
physics = C

[State 400,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 5081, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5081, 2]
type = VelSet
trigger1 = HitOver
x = 0

[State 5081, 3] ;Don't show hit ground frame
type = VarSet
trigger1 = Time = 0
sysvar(0) = 1

[State 5081, 4]
type = ChangeState
trigger1 = HitOver
value = 5110 ;HIT_LIEDOWN

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type = L
movetype= H
physics = N

[State 400,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 5101]
type = L
movetype= H
physics = N

[State 400,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 5110]
type = L
movetype= H
physics = N

[State 400,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

;---------------------------------------------------------------------------
; HIT_GETUP
[Statedef 5120]
type = L
movetype= I
physics = N

[State 400,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5111,5119]
trigger2 = !SelfAnimExist(5120 + (anim % 10))
value = 5120

[State 5120, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5111,5119]
trigger1 = SelfAnimExist(5120 + (anim % 10))
value = 5120 + (anim % 10)

[State 5120, 2]
type = VelSet
trigger1 = Time = 0
x = 0

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5120, 4]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 5120, 5] ;Can't be thrown right after getting up
type = NotHitBy
trigger1 = AnimTime = 0
value = , NT,ST,HT
time = 12

[State 5120, 6] ;Can't be hit right after getting up (short time)
type = NotHitBy
trigger1 = AnimTime = 0
value2 = SCA
time = 3

[State 5120, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
;CHEAP K.O.
[Statedef 5130]
type=S
movetype=H
physics=S
anim=5951

[State 5130, nhb]
type=nothitby
trigger1= !alive
value=SCA

[State 5130, Pos]
type=posset
trigger1= 1
y=0

[State 5130, End]
type=changestate
trigger1= !animtime
value=5131
;--------------------
[Statedef 5131]
type=L
movetype=H
physics=C
anim=5950

[State 5131, nhb]
type=nothitby
trigger1= !alive
value=SCA

[State 5131, Pos]
type=posset
trigger1= 1
y=0

[State 5131, posfix]
type=posadd
trigger1= animelem=4 || animelem=5
x=ifelse((animelem=4),-12,-24)

[State 5131, Explod]
type = Explod
trigger1 = animelem = 4
persistent = 0
anim = 173
pos = 0,0
scale= .2,.2
postype = p1
sprpriority = -1
removetime = 15

[State 5131, Snd]
type=playsnd
trigger1= !time
trigger2= animelem=6
value= 3,4

[State 5131, End]
type=changestate
trigger1= !animtime
value=ifelse(alive,5110,5150)

;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type = L
movetype= H
physics = N
sprpriority = -3

[State 400,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
;trigger1 = Time = 0
trigger1 = MatchOver = 1
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;==========<FALL RECOVERY>==========
[Statedef 5200]
type=A
movetype=H
physics=N

[State 400,re ]
type = RemoveExplod
trigger1 = anim != 210
ID = 210

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 5200, Anim]
type=changeanim
trigger1= anim=5035 && !animtime
value=5050

[State 5200, Vel]
type=veladd
trigger1= 1
y=gethitvar(yaccel)

[State 5200, End]
type=selfstate
trigger1= vel y>0 && pos y>=-20
value=5201

;-------------------------------------------------------------------------------
[Statedef 5201]
type=S
movetype=I
physics=N
anim=5200
ctrl=0
facep2=1

[State 5201, Pos]
type=posset
trigger1= 1
y=0

[State 5201, Vel]
type=velset
trigger1= !time
x=-8
y=0

[State 5201, Vel]
type=velmul
trigger1= 1
x=.9

[State 5201, Snd]
type=playsnd
trigger1= animelem=1
value=1,0
channel=0

[State 5201, Recover Sound]
type = PlaySnd
trigger1 = !Time
value = 5200,0
channel = 1

[State 5201, Dust]
type=playsnd
trigger1= !time
value=0,101

[State 5201, flash]
type=palfx
trigger1= !time
add=255,255,255
sinadd=-255,-255,-255,40
time=10

[State 5201, Recover FX]
type = Helper
trigger1 = !Time
helperType = Normal
stateNo = 8200
ID = 8200
name = "Recover FX"
posType = P1
pos = 0, ceil(-18 * const(size.yScale))
size.xScale = 1
size.yScale = 1
ownpal = 1

[State 5201, Dust]
type=explod
trigger1= !(time%6) && abs(vel x)>=1
anim=7100
sprpriority=3
postype=p1
pos=0,0
vel=1,0
scale=1,1
pausemovetime=-1
supermovetime=-1
ownpal=1

[State 5201, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, End]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

[State 5201, nhb]
type=nothitby
trigger1= 1
value=SCA
time=1

[State 5201, End]
type=changestate
trigger1= !animtime
value=0
ctrl=1

;---------------------------------------------------------------------------
; HIT_AIRFALLRECOVER
[Statedef 5210]
type = A
movetype= I
physics = N
anim = 5210
ctrl = 0

[State 5210, 1]
type = PosFreeze
trigger1 = Time = 0
value = 4

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -20

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
x = .8
y = .8

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
y = -4.5

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
trigger1 = Vel Y > 0
y = .5

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -3
y = -2

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -2
y = -1

[State 5210, 2] ;Go up
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdup"
y = -2

[State 5210, 2] ;Go down
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holddown"
y = 1.5

[State 5210, 2] ;Go fwd
type = VelMul
trigger1 = Time = 4
trigger1 = Command = "holdfwd"
x = 1

[State 5210, 2] ;Go back
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdback"
x = -1

[State 5210, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 15

[State 5210, 4]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 5210, 5]
type = VelAdd;Gravity
trigger1 = Time >= 4
y = .35

[State 5201, Snd]
type=playsnd
trigger1= animelem=1
value=1,0
channel=0

[State 5201, Recover Sound]
type = PlaySnd
trigger1 = !Time
value = 5200,0
channel = 1

[State 5201, Dust]
type=playsnd
trigger1= !time
value=0,101

[State 5201, flash]
type=palfx
trigger1= !time
add=255,255,255
sinadd=-255,-255,-255,40
time=10

[State 5201, Recover FX]
type = Helper
trigger1 = !Time
helperType = Normal
stateNo = 8200
ID = 8200
name = "Recover FX"
posType = P1
pos = 0, ceil(-18 * const(size.yScale))
size.xScale = 1
size.yScale = 1
ownpal = 1

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMP_LAND
ctrl = 1

;-------------------------------------------------------------------------------
;RECOVERY ROLL
[Statedef 5220]
type=A
movetype=H
physics=N
ctrl = 0

[State 5220, Anim]
type=changeanim
trigger1= anim=5035 && !animtime
value=5050

[State 5220, Vel]
type=veladd
trigger1= 1
y=gethitvar(yaccel)

[State 5220, End]
type=selfstate
trigger1= vel y>0 && pos y>=-10
value=5221

;==========<FORCED P2 RECOVERY>==========
[Statedef 5025]
type=A
movetype=H
physics=N
velset=0,0
facep2=1

[State 5025, hfs]
type=hitfallset
trigger1=1
value=0

[State 5025, End]
type=selfstate
trigger1=1
value= ifelse(pos y, 5020, 5000)


;---Tech Flip---
[Statedef 5205]
type=A
movetype=H
physics=N

[State 5205, Vel]
type=velset
trigger1= !time
trigger1= pos y<-20 && vel y<-7
y=-7

[State 5205, End]
type=selfstate
trigger1=1
value= ifelse(pos y>=-20, 5200, 5210)


;---OTG---
[Statedef 5085]
type=A
physics=N
movetype=H
velset=0,0
anim=5090
ctrl=0
facep2=1

[State 5085, nothitby]
type=nothitby
trigger1= gethitvar(fallcount)>1
value=SCA
time=1

[State 5085, hfs]
type=hitfallset
trigger1= 1
value=0

[State 5085, End]
type=changestate
trigger1= hitshakeover
value= 5086
;--------------
[Statedef 5086]
type=A
physics=N
movetype=H
anim=5040
ctrl=0

[State 5086, nothitby]
type=nothitby
trigger1= gethitvar(fallcount)>1
value=SCA
time=1

[State 5086, Vel]
type=hitvelset
trigger1= !time
x=1
y=1

[State 5086, grav]
type=veladd
trigger1= 1
y=gethitvar(yaccel)

[State 5086, End]
type=selfstate
trigger1= vel y>0 && pos y>=0
value= 52

;-------------------------------------------------------------------------------
[Statedef 5221]
type=C
movetype=I
physics=N
anim=5220
facep2=1

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4323

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 4324

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43230

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 1
id = 43240

[State 5221, Pos]
type=posset
trigger1= 1
y=0

[State 5221, Vel]
type=velset
trigger1= 1
x=5
y=0

[State 5221, push]
type=playerpush
trigger1= animelemtime(15)<0
value=0

[State 5221, Anim]
type=changeanim
trigger1= animelem=8
trigger1= var(59)<=0 && command!="holdfwd"
value=5220
elem=12

[State 5221, Type]
type=statetypeset
trigger1= animelemtime(15)>=0
physics=S

[State 5221, End]
type=changestate
trigger1= !animtime
value=0
ctrl=1

;-------------------------------------------------------------------------------
;Garyuu Mshuu - guard break
[statedef 5430]
type=u
movetype=h
physics=u
ctrl=0
vel=0,0

[state 5430,AjX()]
type=changeanim
triggerall=selfanimexist(5930)
trigger1=statetype=a
value=5930

[state 5430,AjX()]
type=changeanim
triggerall=selfanimexist(5920)
trigger1=statetype=c
trigger2=statetype=a
trigger2=!selfanimexist(5930)
value=5920

[state 5430,AjX()]
type=changeanim
triggerall=selfanimexist(5910)
trigger1=statetype=s
trigger2=statetype=c
trigger2=!selfanimexist(5920)
trigger3=statetype=a
trigger3=!selfanimexist(5920)
trigger3=!selfanimexist(5930)
value=5910

[state 5430,AjX(Ol)]
type=changeanim2
trigger1=!selfanimexist(5910)
trigger1=!selfanimexist(5920)
trigger1=!selfanimexist(5930)
value=ifelse(statetype=c,5431,5430)

[state 5430,d]
type=posfreeze
trigger1=1

[state 5430,Jn]
type=changestate
trigger1=hitshakeover
value=5431

;-------------------------------------------------------------------------------
;Garyuu Mshuu - guard break
[statedef 5431]
type=u
movetype=h
physics=u
ctrl=0

[state 5431,]
type=statetypeset
trigger1=time=0
trigger1=statetype=s
physics=s

[state 5431,]
type=statetypeset
trigger1=time=0
trigger1=statetype=c
physics=c

[state 5431,]
type=statetypeset
trigger1=time=0
trigger1=statetype=a
physics=a

[state 5431,x]
type=hitvelset
trigger1=time=0
x=1
y=statetype=a

[state 5431,I]
type=selfstate
trigger1=time>=30
value=ifelse(statetype=a,50,ifelse(statetype=c,11,0))
ctrl=1

;---------------------------------------------------------------------------
; Continue?
[Statedef 5500]
type = S
ctrl = 0
anim = 5300
velset = 0,0

[State 5500, 1] ;Use continue animation if available
type = ChangeAnim
trigger1 = time = 0
trigger1 = SelfAnimExist(5500)
value = 5500

;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundsexisted = 0
value = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundsexisted = 0
fvalue = 0

[State 5900, 3] ;Intro for round 1
type = ChangeState
trigger1 = 1
value = IfElse(RoundNo>=2,0,190)

;========================< KICKED by Moryu Kasen`s - Last hit >=============================
;--- Hit Pause ---
[Statedef 1111300]
type = A
movetype = H
physics = N
velset = 0, 0

[State 1111300, Anim]
type = changeanim
trigger1 = 1
value = 5002

[State 1111300, End]
type = changestate
trigger1 = hitshakeover
value = 1111301

;--- Falling ---
[Statedef 1111301]
type = A
movetype = H
physics = N

[State 1111301, Vel]
type = hitvelset
trigger1 = !time
x = 1
y = 1

[State 1111301, Accel]
type = veladd
trigger1 = 1
y = gethitvar(yaccel)

[State 1111301, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = 0, 1

[State 1111301, Push]
type = playerpush
trigger1 = 1
value = 0

[State 1111301, Anim]
type = changeanim
trigger1 = !time
value = 5030

[State 1111301, bounce]
type = changestate
trigger1 = backedgebodydist <= 10 || frontedgebodydist <= 10
value = 1111302

[State 1111301, End]
type = selfstate
trigger1 = vel y > 0 && pos y >= 0
value = 5100

;--- Hitting Wall ---
[Statedef 1111302]
type = A
movetype = H
physics = N

[State 1111302, turn]
type = turn
trigger1 = !time
trigger1 = frontedgedist < backedgedist

[State 1111302, Pos]
type = posset
trigger1 = 1
x = -160 * facing

[State 1111302, Pos]
type = posfreeze
trigger1 = 1
x = 1
y = 1

[State 1111302, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = 0, 1

[State 1111302, Push]
type = playerpush
trigger1 = 1
value = 1

[State 1111302, Anim]
type = changeanim
trigger1 = 1
value = 5000

[State 1111302, End]
type = changestate
trigger1 = time >= 4
value = 1111303

;--- Falling ---
[Statedef 1111303]
type = A
movetype = H
physics = N

[State 1111303, turn]
type = turn
trigger1 = !time

[State 1111303, Accel]
type = veladd
trigger1 = 1
y = 0.5

[State 1111303, Vel]
type = velset
trigger1 = !time
x = -1.5;-2;5
y = -9

[State 1111303, Anim]
type = changeanim
trigger1 = !time
value = ifelse(selfanimexist(5051), 5051, 5030)

[State 1111303, Anim]
type = changeanim
trigger1 = anim = 5030 && !animtime
value = 5050

[State 1111303, Anim]
type = changeanim
trigger1 = vel y > -3 && anim = 5051
value = 5061

[State 1111303, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = 0, 0

[State 1111303, Push]
type = playerpush
trigger1 = 1
value = 0

[State 1111303, Recover]
type = selfstate
trigger1 = alive
trigger1 = command = "recovery"
trigger1 = vel y > 0 && pos y >= 0
value = 5200

[State 1111303, End]
type = selfstate
trigger1 = vel y > 0 && pos y >= 0
value = 5100



