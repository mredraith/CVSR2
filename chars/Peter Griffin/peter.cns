; Peter's constants and state file. by Warner
; Edits and additions by: JudgeSpear, aperson98 & The 14th Doctor
; Version 1.1

[Data]
;Amount of life to start with
life = 1000
;attack power (more is stronger)
attack = 100
;defensive power (more is stronger)
defence = 100
;Percentage to increase defense everytime player is knocked down
fall.defence_up = 50
;Time which player lies down for, before getting up
liedown.time = 15
;Number of points for juggling
airjuggle = 30
;Default hit spark number for HitDefs
sparkno = 2
;Default guard spark number
guard.sparkno = 40
;1 to enable echo on KO
KO.echo = 0
;Volume offset (negative for softer)
;volume = 0
;Variables with this index and above will not have their values
;reset to 0 between rounds or matches. There are 60 int variables,
;indexed from 0 to 59, and 40 float variables, indexed from 0 to 39.
;If omitted, then it defaults to 60 and 40 for integer and float
;variables repectively, meaning that none are persistent, i.e. all
;are reset. If you want your variables to persist between matches,
;you need to override state 5900 from common1.cns.
IntPersistIndex = 60
FloatPersistIndex = 40

[Size]
xscale = 0.8           ;Horizontal scaling factor.
yscale = 0.8           ;Vertical scaling factor.
ground.back = 22     ;Player width (back, ground)
ground.front = 23    ;Player width (front, ground)
air.back = 20        ;Player width (back, air)
air.front = 19       ;Player width (front, air)
height = 60          ;Height of player (for opponent to jump over)
attack.dist = 160    ;Default attack distance
proj.attack.dist = 90 ;Default attack distance for projectiles
proj.doscale = 0     ;Set to 1 to scale projectiles too
head.pos = 0, -90   ;Approximate position of head
mid.pos = 0, -50    ;Approximate position of midsection
shadowoffset = 0     ;Number of pixels to vertically offset the shadow
draw.offset = 0,0    ;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd  = 2.0    ;Walk forward
walk.back = -1.7     ;Walk backward
run.fwd  = 3.8, 0    ;Run forward (x, y)
run.back = -3.4,-3.2 ;Hop backward (x, y)
jump.neu = 0,-9.0    ;Neutral jumping velocity (x, y)
jump.back = -2.12    ;Jump back Speed (x, y)
jump.fwd = 2.0       ;Jump forward Speed (x, y)
runjump.back = -2.55,-8.8 ;Running jump speeds (opt)
runjump.fwd = 3,-8.8      ;.
airjump.neu = 0,-8.8      ;.
airjump.back = -2.55      ;Air jump speeds (opt)
airjump.fwd = 2.5         ;.

[Movement]
airjump.num = 1     ;Number of air jumps allowed (opt)
airjump.height = 35  ;Minimum distance from ground before you can air jump (opt)
yaccel = .48         ;Vertical acceleration
stand.friction = .85  ;Friction coefficient when standing
crouch.friction = .82 ;Friction coefficient when crouching

[Quotes]
victory1 = "Ha, ya! Who's the big man now,heh?"
victory2 = "Aw, sweet!"
victory3 = "Yes! Heh,heh,heh,heh,heh,heh,heh!"
victory4 = "Yes! I'm unfreak'en belivable!"
victory5 = "You son of a...!"
victory6 = "Shut up, Meg!"
victory7 = "Can't touch me!"
victory8 = "Bird bird....Bird is the word!!!!"
;---------------------------------------------------------------------------
; RUN_FWD
[Statedef 100]
type    = S
physics = S
anim = 100
sprpriority = 1
ctrl = 0

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 100, MakeDust]
type = MakeDust
trigger1 = AnimElem = 2
trigger2 = AnimElem = 4
trigger3 = AnimElem = 6
trigger4 = AnimElem = 8
trigger5 = AnimElem = 10
pos = -30,0
spacing = 1

[State 100, sound1]
type = PlaySnd
trigger1 = AnimElem = 1
value = S101,1+random%2
channel = 21

[State 100, ChangeState]
type = ChangeState
trigger1 =  command = "x" && command != "holddown"
value = 200

[State 100, ChangeState]
type = ChangeState
trigger1 =  command = "y" && command != "holddown"
value = 210

[State 100, ChangeState]
type = ChangeState
trigger1 =  command = "z" && command != "holddown"
value = 220

[State 100, ChangeState]
type = ChangeState
trigger1 =  command = "b" && command != "holddown"
value = 240

[State 100, ChangeState]
type = ChangeState
trigger1 =  command = "a" && command != "holddown"
value = 230

[State 100, ChangeState]
type = ChangeState
trigger1 =  command = "c" && command != "holddown"
value = 250

[State 100, ChangeState]
type = ChangeState
trigger1 =  command = "x" && command = "holddown"
value = 400

[State 100, ChangeState]
type = ChangeState
trigger1 =  command = "y" && command = "holddown"
value = 410

[State 100, ChangeState]
type = ChangeState
trigger1 =  command = "z" && command = "holddown"
value = 420

[State 100, ChangeState]
type = ChangeState
trigger1 =  command = "a" && command = "holddown"
value = 430

[State 100, ChangeState]
type = ChangeState
trigger1 =  command = "b" && command = "holddown"
value = 440

[State 100, ChangeState]
type = ChangeState
trigger1 =  command = "c" && command = "holddown"
value = 450

[State 100, 4]
type = ChangeState
trigger1 = command = "holdup"
value = 40

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 4 || AnimElem = 8
value = 40,0+random%4

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
trigger1 = command != "holdfwd"
value = 101
;------------------------------------------------------------------------
; New run stop
[Statedef 101]
type    = S
physics = S
anim = 102
sprpriority = 1
velset = 0, 0

[State 101, VelSet]
type = VelSet
trigger1 = animelem = 1
x = 6

[State 101, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S101,0

[State 101,]
type = Makedust
trigger1 = 1
pos = -10,0
spacing = 1

[State 101, 1]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 101, 2]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 101, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;It's Peanut butter Jelly time
[Statedef 112]
type    = S
movetype = A
physics = S
ctrl = 0
velset = 0,0
anim = 111
sprpriority = 2

[State 112, NotHitBy]
type = NotHitBy
trigger1 = 1 
value = SCA
time = 1 

[State 112, SuperPause]
type = SuperPause
trigger1 = time = 0
pos = 7, -62
anim = 100
sound = S20, 0
poweradd = -3000

[State 112, BGPalFX]
type = BGPalFX
trigger1 = AnimElem = 1
time = 1460
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,1
invertall = 0
color = 256

[State 112,HitDef]
type = Hitdef
triggerall = p2statetype !=A
trigger1 = AnimElem = 1
attr = S, HT ;Really more like Joke Throw
priority = 2,Miss
getpower = 0
hitflag = MAF 
numhits = 1
sparkno = -1
p2facing = 1
p2stateno = 114
p2getp1state = 1
guard.dist = 0 
hitsound = -1
fall = 1
fall.recover = 0

[State 112,HitDef]
type = Hitdef
triggerall = p2statetype =A
trigger1 = AnimElem = 1
attr = S, NT
priority = 2,Miss
getpower = 0
hitflag = MAF 
numhits = 1
sparkno = -1
p2facing = 1
p2stateno = 115
p2getp1state = 1
guard.dist = 0 
hitsound = -1
fall = 1
fall.recover = 0

[State 112, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = unguardable
flag2 = noMusic
flag3 = timerfreeze

[State 112, 1]
type = PlaySnd
trigger1 = animelem = 4
value = S112, 1

[State 112, Brain] 
type = Explod
triggerall = frontedgedist >90
trigger1 = time = 1
anim = 112
pos = 10,0
sprpriority = -4
postype = p1
bindtime = 1
ownpal = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0

[State 112, Brain] 
type = Explod
triggerall = frontedgedist <90
trigger1 = time = 1
anim = 112
pos = -150,0
sprpriority = -4
postype = p1
bindtime = 1
ownpal = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0

[State 112, sound1]
type = PlaySnd
trigger1 = AnimElem = 7
value = S112, 0

[State 112, 3]
type = ChangeState
trigger1 = Time = 1400
value = 0
ctrl = 1
;------------------------------------------------------------------------------
; Dance p2
[Statedef 114]
type    = S
physics = S
anim = 181
sprpriority = 1
ctrl = 0
velset = 0,0

[State 114, NotHitBy]
type = NotHitBy
trigger1 = 1 
value = SCA
time = 1 

[State 114, ChangeState]
type = ChangeState
trigger1 = selfanimexist(99988732)
value = 116

[State 114, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 114, 3]
type = SelfState
trigger1 = Time = 1400
value = 0
ctrl = 1
;------------------------------------------------------------------------------
; Dance p2 in air
[Statedef 115]
type    = A
physics = N
anim = 41
sprpriority = 1
ctrl = 0

[State 115, NotHitBy]
type = NotHitBy
trigger1 = 1 
value = SCA
time = 1 

[State 115, VelAdd]
type = VelAdd
trigger1 = 1
y = 0.7

[State 115, 3]
type = ChangeState
trigger1 = pos y>-10
value = 114
ctrl = 0
;------------------------------------------------------------------------------
; Dance p2 taunt number
[Statedef 116]
type    = S
physics = S
anim = 99988732
sprpriority = 1
ctrl = 0
velset = 0,0

[State 116, NotHitBy]
type = NotHitBy
trigger1 = 1 
value = SCA
time = 1 

[State 116, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 116, 3]
type = SelfState
trigger1 = Time = 1400
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Stand guard hit (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, Meg]
type = PlaySnd
trigger1 = time = 0
value = S55,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 150, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3
;---------------------------------------------------------------------------
; Lose by Time Over
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S11,1

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;---------------------------------------------------------------------------
; Win state decider
[Statedef 180]
type = S

[State 180, 1]
type = VarRandom
trigger1 = Time = 0
v = 1
range = 0,149

[State 180, 2] ;Who's The Big Man Now Eh?
type = ChangeState
trigger1 = Var(1) = [0,24]
value = 181

[State 180, 3] ;Giant Chicken
type = ChangeState
triggerall = Enemynear, Name != "Giant Chicken"
triggerall = Enemynear, Name != "big chicken"
trigger1 = Var(1) = [25,49]
value = 182

[State 180, 3] ;Who's The Big Man Now Eh?
type = ChangeState
triggerall = Enemynear, Name = "Giant Chicken"
triggerall = Enemynear, Name != "big chicken"
trigger1 = Var(1) = [25,49]
value = 181

[State 180, 4] ;Tube Men
type = ChangeState
trigger1 = Var(1) = [50,74]
value = 184

[State 180, 5] ;Quagmire
type = ChangeState
triggerall = Enemynear, Anim != 9108112
trigger1 = Var(1) = [75,99]
value = 185

[State 180, 7] ;Can't Touch Me
type = ChangeState
trigger1 = Var(1) = [100,124]
value = 186

[State 180, 8] ;Yes I'm freak'en belivable!
type = ChangeState
trigger1 = Var(1) = [125,149]
value = 187
;---------------------------------------------------------------------------
; Win pose 1 - Who's The Big Man Now Eh?
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 181, 2] ;Who's The Big Man Now Eh?
type = PlaySnd
trigger1 = animelem = 1
value = s800, 2

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[state 181, 1]
type = assertspecial
trigger1 = time < 300
flag = roundnotover
;--------------------------------------------------------------------------
; Win pose 2 - Giant Chicken surprise
[Statedef 182]
type = S
ctrl = 0
anim = 182
velset = 0,0
sprpriority = 4

[State 182, sound1]
type = PlaySnd
trigger1 = Time = 0
value = 800, 2
channel = 1

[State 182, stopsound1]
type = StopSnd
trigger1 = Animelem = 13
channel = 1

[State 182, sound2]
type = PlaySnd
trigger1 = AnimElem = 13
value = 11, 4

[State 182, sound3]
type = PlaySnd
trigger1 = AnimElem = 14
value = 1, 4

[State 182, sound4]
type = PlaySnd
trigger1 = AnimElem = 9
value = 800, 4

[State 182, Shake Screen]
type = EnvShake
trigger1 = AnimElem = 14
time = 88     
ampl = 2     
freq = 180   

[State 182, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[state 182, 2]
type = AssertSpecial
trigger1 = time < 300
flag = roundnotover
;---------------------------------------------------------------------------
; Win pose 3 - Wacky Waving Inflatable Arm-Flailing Tube Men
; CNS difficulty: basic
[Statedef 184]
type = S
ctrl = 0
anim = 184 + random%2
velset = 0,0

[State 184, sound1]
type = PlaySnd
trigger1 = Animelem = 5
value = 0, 18

[State 184, sound2]
type = PlaySnd
trigger1 = Animelem = 8
value = S1300, 0

[State 184, sound3]
type = PlaySnd
triggerall = Anim = 184
trigger1 = AnimElem = 10
value = S184, 0

[State 184, sound4]
type = PlaySnd
triggerall = Anim = 185
trigger1 = AnimElem = 10
trigger2 = AnimElem = 30
value = 0, 12

[State 184, Shake Screen]
type = EnvShake
trigger1 = AnimElem = 9
time = 8     
ampl = 4     
freq = 180  

[State 184, monos]
type = Explod
trigger1 = animelem = 8
anim = 189
pos = 0,0
sprpriority = -1
removetime = 702

[State 184, monos2]
type = Explod
trigger1 = animelem = 8
anim = 188
pos = 70,0
sprpriority = -1
removetime = 702

[State 184, monos3]
type = Explod
trigger1 = animelem = 8
anim = 188
pos = -70,0
sprpriority = -1
removetime = 702

[State 184, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[state 184, 2]
type = assertspecial
trigger1 = time < 350
flag = roundnotover
;--------------------------------------------------------------------------
; Win Pose 4 - Quagmire Scores!
[Statedef 185]
type = S
ctrl = 0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 185, stand]
type = Explod
trigger1 = Time = 0
persistent = 0
anim = 2
postype = p1
pos = 0, 0

[State 185,1]
type = AssertSpecial
trigger1 = time < 140
flag = roundnotover

[State 185, distance X_right]
type = varset
trigger1 = facing = 1
trigger1 = time = 0
var(20) = floor(ifelse((enemy,facing = -1),(enemy,FrontEdgeDist - BackEdgeDist),(enemy,BackEdgeDist - BackEdgeDist)))

[State 185, distance X_left]
type = varset
trigger1 = facing = -1
trigger1 = time = 0
var(20) = floor(ifelse((enemy,facing = 1),(FrontEdgeDist - enemy,BackEdgeDist),(FrontEdgeDist - enemy,FrontEdgeDist)))

[State 185, time for distance]
type = varset
trigger1 = time = 0
var(21) = floor(var(20)/30)

[State 185, run_anim]
type = changeanim
trigger1 = time = 0
value = ifelse( (var(21) >= 0), 1830, 105 )

[State 185, run]
type = velset
trigger1 = time = 0
x = var(21)

[State 185, stop]
type = velset
trigger1 = time = 30
x = 0

[State 185, anim]
type = changeanim
trigger1 = time = 30
value = ifelse( (var(21) >= 0), 183, 181 )


[State 200,PlaySnd]
type = PlaySnd
trigger1 = Time = 12
value = 1, 11
channel = 0

;[State 185, 0]
;type = null;Explod
;triggerall = anim= 183
;trigger1 = animelem = 5
;anim = F1
;pos = ifelse( (anim=183), 40, -40), -1
;random = 5, 5
;sprpriority = 4

;---------------------------------------------------------------------------
; Win pose 5 - Can't Touch Me!
[Statedef 186]
type = S
ctrl = 0
anim = 186
velset = 0,0

[State 186, sound1]
type = PlaySnd
trigger1 = Animelem = 1
value = 0, 25

[state 186, 1]
type = assertspecial
trigger1 = time < 300
flag = roundnotover
flag2 = NoMusic
;---------------------------------------------------------------------------
; Win Pose 6 - Yes! I'm freak'en belivable!
[Statedef 187]
type = S
ctrl = 0
anim = 187
velset = 0,0

[State 187, sound1]
type = PlaySnd
trigger1 = Animelem = 2
value = 187, 0

[state 187, 1]
type = assertspecial
trigger1 = time < 200
flag = roundnotover
;---------------------------------------------------------------------------
; Introduction
; CNS difficulty: basic
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 190,VarSet]
type = VarRandom;type = VarSet
trigger1 = Time = 0
v = 1
range = 0,59 ;value = Random

[State 191,4]
type = ChangeState
Triggerall = Teamside = 1
triggerall = NumPartner
triggerall = partner, stateno != 194 || partner,stateno != 193 || partner,stateno != 1902
triggerall = partner, stateno != 10900 || partner,stateno != 10901
trigger1 = partner, Name = "Homer J. Simpson"
trigger1 = partner, Pos X >= Pos X
value = 11190

[State 191,4]
type = ChangeState
Triggerall = Teamside = 1
triggerall = NumPartner
triggerall = partner, stateno != 194 || partner,stateno != 193 || partner,stateno != 1902
triggerall = partner, stateno != 10900 || partner,stateno != 10901
trigger1 = partner, Name = "Homer J. Simpson"
trigger1 = partner, Pos X < Pos X
value = 11192

[State 191,4]
type = ChangeState
Triggerall = Teamside = 2
triggerall = NumPartner
triggerall = partner, stateno != 194 || partner,stateno != 193 || partner,stateno != 1902
triggerall = partner, stateno != 10900 || partner,stateno != 10901
trigger1 = partner, Name = "Homer J. Simpson"
trigger1 = partner, Pos X <= Pos X
value = 11190

[State 191,4]
type = ChangeState
Triggerall = Teamside = 2
triggerall = NumPartner
triggerall = partner, stateno != 194 || partner,stateno != 193 || partner,stateno != 1902
triggerall = partner, stateno != 10900 || partner,stateno != 10901
trigger1 = partner,Name = "Homer J. Simpson"
trigger1 = partner, Pos X > Pos X
value = 11192

[State 190,2]
type = ChangeState
triggerall = NumPartner = 0
trigger1 = p2name = "Homero J Simpson" ; by warner
trigger2 = p4name = "Homero J Simpson"
trigger3 = p2name = "Homer J Simpson" ; by warner
trigger4 = p4name = "Homer J Simpson"
trigger5 = p2name = "Homer J. Simpson" ; by warner
trigger6 = p4name = "Homer J. Simpson"
value = 193

[State 190,1]
type = ChangeState
trigger1 = p2name = "leela" ; by warner
trigger2 = p4name = "leela"
trigger3 = p2name = "kula_new"
trigger4 = p4name = "kula_new"
trigger5 = p2name = "Shermie" || p4name = "Shermie"
trigger6 = p2name = "morrigan" || p4name = "morrigan" 
trigger7 = p2name = "morrigan by ryokucha" || p4name = "morrigan by ryokucha" 
trigger8 = P2name = "felicia" || p4name = "felicia"
trigger9 = P2Name = "psylocke by Qkrtkf!" || P4Name = "psylocke by Qkrtkf!" 
trigger10 = P2Name = "psylocke" || P4Name = "psylocke"
trigger11 = P2Name = "viuda negra" || P4Name = "viuda negra" 
trigger12 = P2Name = "chun li" || P4Name = "chun li"
trigger13 = P2Name = "elastigirl" || P4Name = "elastigirl" 
trigger14 = p2name = "cammy" || p4name = "cammy"
trigger15 = P2name = "Sakura Kasugano" || p4name = "Sakura Kasugano" 
trigger16 = p2name = "R.mika" || p4name = "R.mika" 
trigger17 = P2name = "Karin Kanzuki" || p4name =  "Karin Kanzuki"
trigger18 = p2name = "juli" || p4name = "juli" 
trigger19 = p2name = "juni" || p4name = "juni" 
trigger20 = p2name = "rose" || p4name = "rose"
trigger21 = p2name = "Chunli" || p4name = "Chunli"
trigger22 = p2name = "Chun-Li" || p4name = "Chun-Li"
trigger23 = p2name = "Mika"   || p4name = "Mika"
trigger24 = P2name = "SF3 Chun Li" || p4name = "SF3 Chun Li"
trigger25 = P2Name = "SSF2Cammy" || P4Name = "SSF2Cammy"
trigger26 = P2Name = "cvscammy" || P4Name = "cvscammy"
trigger27 = P2Name = "J_Rose" || P4Name = "J_Rose"
trigger28 = P2Name = "sakura" || P4Name = "sakura"
trigger29 = P2name = "Morrigan Aensland" || p4name = "Morrigan Aensland"
trigger30 = p2name = "Lilith" || p4name = "Lilith"
trigger31 = P2name = "Hinata Wakaba" || p4name = "Hinata Wakaba"
trigger32 = P2name = "Mariah" || p4name = "Mariah" 
trigger33 = p2name = "MIDLER"   || p4name = "MIDLER"
trigger34 = P2name = "Mai" || p4name = "Mai"
trigger35 = P2Name = "svcathena" || P4Name = "svcathena"
trigger36 = p2name = "cvsathena"   || p4name = "cvsathena"
trigger37 = p2name = "cvsvice" || p4name = "cvsvice"
trigger38 = P2name = "B.Jenet" || p4name = "B.Jenet" 
trigger39 = P2name = "ARINA" || p4name = "ARINA" 
trigger40 = p2name = "Hikari Reiko" || p4name = "Hikari Reiko"
trigger41 = p2name = "Yuki Morikawa" || p4name = "Yuki Morikawa" 
trigger42 = P2Name = "dizzy" || P4Name = "dizzy"
trigger43 = P2name = "Raiya Mikazuchi" || p4name = "Raiya Mikazuchi"
trigger44 = P2name = "MysP" || p4name = "MysP"
trigger45 = P2name = "roomi" || p4name = "roomi"
trigger46 = p2name = "Blue Mary" || p4name = "Blue Mary"
trigger47 = p2name = "Mai Shiranui" || p4name = "Mai Shiranui"
trigger48 = p2name = "cvsfelicia" || p4name = "cvsfelicia"
trigger49 = p2name = "Nanashi Kimura" || p4name = "Nanashi Kimura"
trigger50 = p2name = "Wonder Woman Reloaded" || p4name = "Wonder Woman Reloaded"
trigger51 = p2name = "Felicia MvC2 Style by MGBenz" || p4name = "Felicia MvC2 Style by MGBenz"
trigger52 = p2name = "SHIRANUI MAI" || p4name = "SHIRANUI MAI"
trigger53 = p2name = "She-ra"  || p4name = "She-ra" 
trigger54 = p2name = "Cammy_MVC2" || p4name = "Cammy_MVC2"
trigger55 = p2name = "Red Snake" || p4name = "Red Snake"
trigger56 = p2name = "Blair Dame" || p4name = "Blair Dame"
trigger57 = p2name = "Blair Dame MvsC" || p4name = "Blair Dame MvsC"
trigger58 = p2name = "athena-rkn" || p4name = "athena-rkn"
trigger59 = p2name = "Kelly Blender(Elektra) by AHRIMANES" || p4name = "Kelly Blender(Elektra) by AHRIMANES"
trigger60 = p2name = "B.ORCHID BY AHRIMANES"  || p4name = "B.ORCHID BY AHRIMANES"
trigger61 = p2name = "Tiazinha"  || p4name = "Tiazinha"
trigger62 = p2name = "Sailor Jupiter"  || p4name = "Sailor Jupiter"
trigger63 = p2name = "Tifa Lockhart"  || p4name = "Tifa Lockhart"
trigger64 = p2name = "Sailor Moon"  || p4name = "Sailor Moon"
trigger65 = p2name = "Sailor Mercury"  || p4name = "Sailor Mercury"
trigger66 = p2name = "Sailor Mars"  || p4name = "Sailor Mars"
trigger67 = p2name = "Sailor Venus"  || p4name = "Sailor Venus"
trigger68 = p2name = "Sailor Saturn"  || p4name = "Sailor Saturn"
trigger69 = p2name = "Sailor Uranus"  || p4name = "Sailor Uranus"
trigger70 = p2name = "Sailor Neptune"  || p4name = "Sailor Neptune"
trigger71 = p2name = "Sailor Pluto"  || p4name = "Sailor Pluto"
trigger72 = p2name = "Poison"  || p4name = "Poison"
trigger73 = p2name = "C.Viper"  || p4name = "C.Viper"
trigger74 = p2name = "CFJ_JuriHan"  || p4name = "CFJ_JuriHan"
trigger75 = p2name = "Blaze"  || p4name = "Blaze"
trigger76 = p2name = "Maki"  || p4name = "Maki"
trigger77 = p2name = "marge" ; by warner
trigger78 = p4name = "marge"
trigger79 = p2name = "Turanga Leela" ; by warner
trigger80 = p4name = "Turanga Leela" ; by warner
value = 192

[State 190,3]
type = ChangeState
trigger1 = p2name = "Giant Chicken" || p4name = "Giant Chicken"
trigger2 = p2name = "big chicken" || p4name = "big chicken"
value = 197

; Custom Intro versus himself - Player 1 Side
[State 190, 4]
type = ChangeState
triggerall = TeamSide = 1
trigger1 = enemy, name = "Peter Griffin"  ; by warner
value = 10196

; Custom Intro versus himself - Player 2 Side
[State 190,5]
type = ChangeState
triggerall = TeamSide = 2
trigger1 = enemy, name = "Peter Griffin"  ; by warner
value = 10197

[State 190,Special Intro]
type = ChangeState
trigger1 = p2name = "Stan Smith"  ; by warner
trigger2 = p4name = "Stan Smith"
value = 1934

[State 190,Special Inrto]
type = ChangeState
trigger1 = p2name = "Roger Smith"
trigger2 = p4name = "Roger Smith" ; by Warner
value = 1935

[State 190,8]
type = ChangeState
trigger1 = p2name = "Juano`s Sub guy" 
trigger2 = p4name = "Juano`s Sub guy" 
value = 1936

; Retep intro
[State 190,5]
type = ChangeState
trigger1 = Palno = 2  
value = 1192

[State 190, 6]
type = ChangeState
trigger1 = Var(1) = [0,29]
value = 191

[State 190, 7]
type = ChangeState
trigger1 = Var(1) = [30,59]
value = 194
;--------------------------------------------------------------------------
;Intro - What'ya got? What'ya got? Eh? Eh? Come on!
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0
sprpriority = -1

[State 191,Vs.Special]
type = AssertSpecial
trigger1 = AnimTime > 0
flag = Intro


[State 190, sound1]
type = PlaySnd
trigger1 = animelem = 2
value = 800, 1
channel = 3

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = AnimTime > 0
flag = Intro

[State 191, 3] ;Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;--------------------------------------------------------------------------
;Intro vs. Female Characters
[Statedef 192]
type = S
ctrl = 0
anim = 192
velset = 0,0
sprpriority = -1

[State 193,Vs.Special]
type = AssertSpecial
trigger1 = AnimTime > 0
flag = Intro

flag3 = nomusic

[State 192, sound1]
type = PlaySnd
trigger1 = Animelem = 2
value = 0, 14

[State 192, sound2]
type = PlaySnd
trigger1 = Animelem = 29
value = 56, 0

[State 192, sound3]
type = PlaySnd
trigger1 = Animelem = 33
value = 0, 15

[State 192, sound4]
type = PlaySnd
trigger1 = Animelem = 45
value = 0, 21

[State 192, 2] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------
;Retep intro
[Statedef 1192]
type = S
ctrl = 0
anim = 198
velset = 0,0
sprpriority = -1

[State 1192,Vs.Special]
type = AssertSpecial
trigger1 = AnimTime > 0
flag = Intro


[State 192, sound1]
type = PlaySnd
trigger1 = Time = 0
value = S1192, 0
channel = 0

;Punch hand
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
trigger2 = animelem = 9
trigger3 = animelem = 16
trigger4 = animelem = 18
trigger5 = animelem = 20
value = 0,11

[State 1192, 2] 
type = ChangeState
trigger1 = Animtime = 0
value = 0
;---------------------------------------------------------------------------
;Intro vs. Homer
[Statedef 193]
type = S
physics = N
ctrl = 0
anim = 191
velset = 0, 0
sprpriority = 3

[State 193,Vs.Special]
type = AssertSpecial
trigger1 = AnimTime > 0
flag = Intro

flag3 = Nomusic

[State 193, Helper]
type = Helper
trigger1 = time = 0
name = "Peter"
ID = 193
stateno = 1933
pos = 0,0
postype = p2
facing = 1
ownpal = 0
sprpriority = 3

[State 193,s1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1,4

[State 193,s2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1,13

[State 193,s3]
type = PlaySnd
trigger1 = AnimElem = 15
value = 193,0
channel = 7

[State 193,s4]
type = PlaySnd
trigger1 = AnimElem = 11
value = 1,15

[State 193,s5]
type = PlaySnd
trigger1 = AnimElem = 15
value = 193,0
channel = 7

[State 193,s6]
type = PlaySnd
trigger1 = AnimElem = 18
value = 193,1
channel = 7

[State 193,s7]
type = PlaySnd
trigger1 = AnimElem = 21
value = 193,2
channel = 7

[State 193,s8]
type = PlaySnd
trigger1 = AnimElem = 24
value = 193,3
channel = 7

[State 193,s9]
type = PlaySnd
trigger1 = AnimElem = 27
value = 193,4
channel = 7

[State 193,s10]
type = PlaySnd
trigger1 = AnimElem = 30
value = 193,5
channel = 7

[State 193, 4]
type = EnvShake
trigger1 = AnimElem = 11
time = 15
ampl = -2
freq = 60
phase = 60

;Punch hand
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 40
trigger2 = animelem = 42
trigger3 = animelem = 44
trigger4 = animelem = 46
trigger5 = animelem = 48
value = 0,11

; "Oh that's it. You're history, pal!"
[State 100,s2]
type = PlaySnd
trigger1 = AnimElem = 38
value = 0,28

;"Simpson"
[State 100,s3]
type = PlaySnd
trigger1 = AnimElem = 52
value = 194,0

;"Nice day isn't it? nice day for stabing a friend in the back!"
[State 100,s4]
type = PlaySnd
trigger1 = AnimElem = 56
value = 194,1

[State 193,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;--------------------------------------------------------------------------
;Peter Helper Team up intro
[Statedef 1933]
type = S
ctrl = 0
anim = 1911
sprpriority = 3
velset = 0,0

;[State 1933,PlaySnd]
;type = PlaySnd
;trigger1 = AnimElem = 3
;value = S11,4

[State 1933, Destroyself] 
type = Destroyself
trigger1 = AnimTime = 0
;-------------------------------------------------------------------------------
;Intro vs. Stan
[Statedef 1934]
type = S
ctrl = 0
anim = 1934
velset = 0,0

[State 1934,1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 195,1

[State 1934,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 23
value = 0,28

;Punch hand
[State 1934, PlaySnd]
type = PlaySnd
trigger1 = animelem = 25
trigger2 = animelem = 27
trigger3 = animelem = 29
trigger4 = animelem = 31
trigger5 = animelem = 33
value = 0,11

[State 1934,Vs.Special]
type = AssertSpecial
trigger1 = AnimTime > 0
flag = Intro

[State 1934,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;-------------------------------------------------------------------------------
;Intro vs. Roger
[Statedef 1935]
type = S
ctrl = 0
anim = 1935
velset = 0,0

[State 193,1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 195,0

[State 1934, hand]
type = Explod
trigger1 = AnimElem = 2
anim = 19355
postype = p1
pos = 0,0
sprpriority = -1
removetime = 106
removeongethit = 1
ignorehitpause = 1
persistent = 0
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0

[State 193,1]
type = PlaySnd
trigger1 = AnimElem = 18
value = 1,14

[State 1934,Vs.Special]
type = AssertSpecial
trigger1 = AnimTime > 0
flag = Intro

[State 1934,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;--------------------------------------------------------------------------
;Mortal Komat Intro
[Statedef 1936]
type = S
ctrl = 0
anim = 1936
velset = 0,0
sprpriority = -1

[State 1936,Vs.Special]
type = AssertSpecial
trigger1 = AnimTime > 0
flag = Intro


[State 1936, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 1936, 0

[State 1936, ChangeState] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;--------------------------------------------------------------------------
;Intro - Hey I'm here to kick your Ass!
[Statedef 194]
type = S
ctrl = 0
anim = 193
velset = 0,0
sprpriority = -1

[State 194, AssertSpecial]
type = AssertSpecial
trigger1 = AnimTime > 0
flag = Intro

[State 194, sound1]
type = PlaySnd
trigger1 = Animelem = 2
value = 0, 5
channel = 4

[State 194, sound1]
type = PlaySnd
trigger1 = Animelem = 4
value = 0, 6
channel = 4

[State 194, sound2]
type = PlaySnd
trigger1 = Animelem = 15
trigger2 = Animelem = 17
value = 0, 11

[State 194, 2] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;--------------------------------------------------------------------------
;Intro vs. himself (P1 Side)
[Statedef 10196]
type = S
ctrl = 0
anim = 196
velset = 0,0

[State 193,Vs.Special]
type = AssertSpecial
trigger1 = AnimTime > 0
flag = Intro

[State 196, sound1]
type = PlaySnd
trigger1 = Time = 0
value = s0, 26

[State 196, sound1]
type = PlaySnd
trigger1 = animelem = 23
value = s0, 31

[State 196, 2]
type = ChangeAnim
trigger1 = animtime = 0
value = 0

[State 196, 2]
type = ChangeState
trigger1 = Time = 650
value = 0
;--------------------------------------------------------------------------
;Intro vs. himself (P2 Side)
[Statedef 10197]
type = S
ctrl = 0
anim = 0
velset = 0,0

[State 193,Vs.Special]
type = AssertSpecial
trigger1 = AnimTime > 0
flag = Intro

[State 197, sound1]
type = PlaySnd
trigger1 = Time = 280
value = 0, 27
channel = 16

[State 197, 2]
type = ChangeAnim
trigger1 = Time = 280
value = 197

;Punch hand
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
trigger2 = animelem = 9
trigger3 = animelem = 18
trigger4 = animelem = 20
trigger5 = animelem = 24
trigger6 = animelem = 27
trigger7 = animelem = 29
trigger8 = animelem = 16
value = 0,11

[State 197, 2]
type = ChangeAnim
trigger1 = Time = 590
value = 0

[State 197, 2]
type = ChangeState
trigger1 = Time = 640
value = 0
;--------------------------------------------------------------------------
;Peter Helper Team up intro
[Statedef 11189]
type = S
ctrl = 0
anim = 11189
sprpriority = 3
velset = 0,0

[State 11189, 2] 
type = Destroyself
trigger1 = AnimTime = 0
;--------------------------------------------------------------------------
;Teamed up intro (With Homer)
[Statedef 11190]
type = S
ctrl = 0
anim = 11190
velset = 0,0
sprpriority = 2

[State 193, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "Peter"
sprpriority = 3
ID = 11189
stateno = 11189 
pos = 23,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, PosSet]
type = PosSet
trigger1 = Time = 0
y = -320

[State 0, AngleDraw]
type = AngleDraw
trigger1 =  1


[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -22


[State 0, VelSet]
type = VelSet
trigger1 = Animelemtime(2)= 1
y = 16

[State 0, VelSet]
type = VelAdd 
trigger1 = Animelemtime(2)= 1
y = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = AnimTime > 0
flag = intro

flag3 = nomusic

[State 0, ChangeState]
type = ChangeState
trigger1 = pos Y > 0
value = 11191
;--------------------------------------------------------------------------
;Teamed up intro (With Homer)
[Statedef 11191]
type = S
ctrl = 0
anim = 11192
velset = 0,0
sprpriority = 2

[State 193,s4]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1,15

[State 0, SprPriority]
type = SprPriority
trigger1 =  Animelem = 27
value = -2

[State 100,s2]
type = PlaySnd
trigger1 = AnimElem = 5
value = 193,0

[State 193,s6]
type = PlaySnd
trigger1 = AnimElem = 8
value = 193,1

[State 193,s7]
type = PlaySnd
trigger1 = AnimElem = 11
value = 193,2

[State 193,s8]
type = PlaySnd
trigger1 = AnimElem = 14
value = 193,3

[State 193,s9]
type = PlaySnd
trigger1 = AnimElem = 17
value = 193,4

[State 193,s10]
type = PlaySnd
trigger1 = AnimElem = 20
value = 193,5

[State 810 ,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 27
value = S1,14

[State 0, AngleDraw]
type = AngleDraw
trigger1 =  1
value = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = AnimTime > 0
flag = intro

flag3 = nomusic

[State 0, ChangeState]
type = ChangeState
trigger1 = Animtime = 0
value = 0
;--------------------------------------------------------------------------
;Teamed up intro (With Homer Teamside 2)
[Statedef 11192]
type = S
ctrl = 0
anim = 11191
velset = 0,0
sprpriority = 2

[State 193, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "Peter"
sprpriority = 3
ID = 11189
stateno = 11189 
pos = -33,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, PosSet]
type = PosSet
trigger1 = Time = 0
y = -320

[State 0, AngleDraw]
type = AngleDraw
trigger1 =  1

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = 22

[State 0, VelSet]
type = VelSet
trigger1 = Animelemtime(2)= 1
y = 16

[State 0, VelSet]
type = VelAdd 
trigger1 = Animelemtime(2)= 1
y = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = AnimTime > 0
flag = intro

flag3 = nomusic

[State 0, ChangeState]
type = ChangeState
trigger1 = pos Y > 0
value = 11193
;--------------------------------------------------------------------------
;Teamed up intro (With Homer)
[Statedef 11193]
type = S
ctrl = 0
anim = 11193
velset = 0,0
sprpriority = 2

[State 193,s4]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1,15

[State 0, SprPriority]
type = SprPriority
trigger1 =  Animelem = 27
value = -2

[State 100,s2]
type = PlaySnd
trigger1 = AnimElem = 5
value = 193,0

[State 193,s6]
type = PlaySnd
trigger1 = AnimElem = 8
value = 193,1

[State 193,s7]
type = PlaySnd
trigger1 = AnimElem = 11
value = 193,2

[State 193,s8]
type = PlaySnd
trigger1 = AnimElem = 14
value = 193,3

[State 193,s9]
type = PlaySnd
trigger1 = AnimElem = 17
value = 193,4

[State 193,s10]
type = PlaySnd
trigger1 = AnimElem = 20
value = 193,5

[State 810 ,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 27
value = S1,14

[State 0, AngleDraw]
type = AngleDraw
trigger1 =  1
value = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = AnimTime > 0
flag = intro

flag3 = nomusic

[State 0, ChangeState]
type = ChangeState
trigger1 = Animtime = 0
value = 0
;--------------------------------------------------------------------------
; Taunt 1
[Statedef 195]
type = S
ctrl = 0
anim = 194
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 195, sound1]
type = PlaySnd
trigger1 = Animelem = 2
value = 0, 29
channel = 0

[State 195, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Taunt 2
; CNS difficulty: easy
[Statedef 196]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 196, 1]
type = CtrlSet
trigger1 = Time = 196
value = 1

[State 196, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA
slot = 0
stateno = 210
time = 1

[State 196, sound1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 13
channel = 0

[State 196, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Taunt 3
[Statedef 197]
type = S
ctrl = 0
anim = 199
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 197, sound1]
type = PlaySnd
trigger1 = animelem = 2
value = S196,0
channel = 0

[State 197, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 0
;---------------------------------------------------------------------------
;Standing Light Punch
; CNS difficulty: easy
[Statedef 200]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 200                       ;Change animation (Def: no change)
poweradd = 10                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA                    
damage = 15, 0                 
animtype = Light                
guardflag = MA                   
hitflag = MAF                   
priority = 3, Hit               
pausetime = 6, 6                
sparkno = 0                     
sparkxy = -10, -76              
hitsound = S1, 2                  
guardsound = S6, 0            
ground.type = High              
ground.slidetime = 6
ground.hittime  = 10           
ground.velocity = -6
airguard.velocity = -1.9,-.8     
air.type = High                 
air.velocity = -1.4,-3         
air.hittime = 12   

[State 200, VelSet]
type = VelSet
trigger1 = prevstateno = 100 && time <2
x = 2           

[State 200, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Standing Medium Punch
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 41
ctrl = 0
velset = 0,0
anim = 210
sprpriority = 2

[State 210, VelSet]
type = VelSet
trigger1 = prevstateno = 100 && time <2
x = 3

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Medium
damage    = 35
guardflag = MA
pausetime = 8,6
sparkno = 2
sparkxy = -10,-76
priority = 5,hit
hitsound   = S1,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 16
guard.hittime = 8
ground.velocity = -5.5
air.velocity = -2.5,-4

[State 210,3] ;Play a grunt for this attack
type = PlaySnd
triggerall = random % 10 > 5
trigger1 = AnimElem = 3
value = 5, 0
channel = 10

[State 210,3] ;Play a grunt for this attack
type = PlaySnd
triggerall = random % 10 > 5
trigger1 = AnimElem = 3
value = s1, 19
channel = 10


[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Standing Close Medium Punch
[Statedef 215]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 41
ctrl = 0
velset = 0,0
anim = 215
sprpriority = 2

[State 215, VelSet]
type = VelSet
trigger1 = prevstateno = 100 && time <2
x = 3

[State 215, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 215, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Medium
damage    = 35
guardflag = MA
pausetime = 8,6
sparkno = 2
sparkxy = -10,-76
priority = 5,hit
hitsound   = S1,2
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 16
guard.hittime = 8
ground.velocity = -4,0
air.velocity = -2,-4

[State 215,3] ;Play a grunt for this attack
type = PlaySnd
triggerall = random % 10 > 5
trigger1 = AnimElem = 3
value = 5, 0
channel = 10

[State 215,3] ;Play a grunt for this attack
type = PlaySnd
triggerall = random % 10 > 5
trigger1 = AnimElem = 3
value = s1, 19
channel = 10


[State 215, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Standing Heavy Punch
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 55
ctrl = 0
velset = 0,0
anim = 220
sprpriority = 2

[State 220, 1]
type = PosAdd
trigger1 = AnimElem = 3
x = 30

[State 220, sound1]
type = PlaySnd
trigger1 = Animelem = 3
value = 0, 2

[State 220,PlaySnd] ;Play a grunt for this attack
type = PlaySnd
trigger1 = AnimElem = 5
value = 0,9

[State 220, 2]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype  = Medium
damage    = 15
guardflag = MA
pausetime = 6,6
sparkno = 2
sparkxy = 0,-96
hitsound   = S1,3
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = -2.8
air.velocity = -1.5,-4

[State 220, 2]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
animtype  = Hard
damage    = 45
guardflag = MA
pausetime = 11,11
sparkno = 3
sparkxy = 0,-46
hitsound   = S1,4
guardsound = s6,0
ground.type = High
ground.slidetime = 13
ground.hittime  = 23
ground.velocity = -8.5
air.velocity = -4.5,-4

[State 220, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Standing Light Kick
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 15
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2

[State 230, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 0

[State 230, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 15
guardflag = MA
pausetime = 6,6
sparkno = 1
sparkxy = -10,-24
hitsound   = S1,2
guardsound = S6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 11
ground.velocity = -5
air.velocity = -2.5,-3.5

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Standing Close Light Kick
[Statedef 235]
type    = A
movetype= A
physics = S
juggle  = 6
poweradd= 20
ctrl = 0
velset = 0,0
anim = 235
sprpriority = 2

[State 235] 
type = PlaySnd
triggerall = random % 10 > 5
trigger1 = time = 2
value = 5, 0
channel = 10

[State 235] 
type = PlaySnd
triggerall = random % 10 > 5
trigger1 = time = 2
value = s1, 19
channel = 10

[State 235, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 3
movetype = A        ;I,A,H
physics = A         ;A,C,S,N

[State 235, VelAdd]
type = VelAdd
trigger1 = animelem = 2
x = 3.7
y = -2.4

[State 235, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 0

[State 235, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 20
guardflag = MA
pausetime = 6,6
sparkno = 1
sparkxy = -10,-44
priority = 5,hit
hitsound   = S1,2
guardsound = S6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
guard.hittime = 12
ground.velocity = -8
air.velocity = -5.5,-3.5

[State 235, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 0
;---------------------------------------------------------------------------
;Standing Medium Kick
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 42
ctrl = 0
velset = 0,0
anim = 240
sprpriority = 2

[State 240, VelSet]
type = VelSet
trigger1 = prevstateno = 100 && time <2
x = 5

[State 240, 1]
type = PlaySnd
trigger1 = Animelem = 2
value = 0, 1

[State 240] 
type = PlaySnd
triggerall = random % 10 > 5
trigger1 = time = 2
value = 5, 0
channel = 10

[State 240] 
type = PlaySnd
triggerall = random % 10 > 5
trigger1 = time = 2
value = s1, 19
channel = 10

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 35
guardflag = MA
pausetime = 9,9
sparkno = 1
sparkxy = -10,-52
hitsound   = S1,3
guardsound = S6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 20
guard.hittime = 6
ground.velocity = -3,0
air.velocity = -2.2,-3.2

[State 240, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Standing Strong Kick
[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 11
poweradd= 55
velset = 0,0
anim = 250
sprpriority = 2
ctrl = 0

[State 250, VelSet]
type = VelSet
trigger1 = prevstateno = 100 && time <2
x = 7

[State 250, VelSet]
type = VelSet
trigger1 = Animelem = 3
x = 4

[State 250, 1]
type = PlaySnd
trigger1 = Animelem = 3
value = 0, 2

[State 250, 1]
type = PlaySnd
triggerall = random % 10 > 5
trigger1 = Animelem = 3
value = 0, 9
channel = 10

[State 250, 1]
type = PlaySnd
triggerall = random % 10 > 5
trigger1 = Animelem = 3
value = 5, 0
channel = 10

[State 250, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Heavy
damage    = 55,5
guardflag = MA
pausetime = 12,12
priority = 6,hit
sparkno = 3
sparkxy = -10,-90
hitsound   = S1,4
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
guard.hittime = 5
ground.velocity = -9
air.velocity = -6.2,-3.5

[State 250, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Light Bottle Throw
[Statedef 300]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 50
velset = 0,0
anim = 300
ctrl = 0
sprpriority = 2

[State 300, PlaySnd]
type = Playsnd
trigger1 = AnimElem = 1
value = 1, 184

[State 300, Width]
type = Width
trigger1 = time = [33,55]
value = 19,0

[State 300, 1]
type = PlaySnd
trigger1 = animelem = 11
value = 0, 2

[State 300, 2]
type = PlaySnd
trigger1 = animelem = 10
value = 0, 9

[State 300, Helper]
type = Helper
trigger1 = animelem = 11 
helpertype = normal 
name = "Light Bottle"
ID = 301
stateno = 301 
pos = 75,-65
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 300, 7]
type = ChangeState
triggerall = animelem = 4
trigger1 = command = "hold_a"
value = 330

[State 300, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Light Bottle Helper
[Statedef 301]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
anim = 301
ctrl = 0
sprpriority = 3

[State 301, VelSet]
type = VelSet
trigger1 = time = 1
x = 2
y = -8

[State 301, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 301, 3]
type = Hitdef
trigger1 = animelem = 1
attr = S,SP
damage = 70,5
animtype = heavy
guardflag = MA
hitflag = MAFP
;hitflag = MD-
priority = 3, hit
sparkno = -1
pausetime = 2,9
hitsound = -1 
guardsound = S6,0
sparkxy = 0,-0
ground.type = Low
ground.slidetime = 2
ground.hittime  = 15
guard.hittime  = 7
ground.velocity = -2
air.velocity = -2.2,-3.2
P2facing = 1
fall = 1
ground.slidetime = 2
ground.hittime  = 15

;afterimage.time = -1
;afterimage.trans   =  add
;afterimage.framegap = 2
;afterimage.PalBright   =  30, 0,  0
;afterimage.PalContrast =  70, 70, 20
;afterimage.PalAdd      = -3,-3,-3
;afterimage.PalMul      = .85,.85,.50

[State 301, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 0
stateno = 302
time = 1

[State 301, 7]
type = ChangeState
trigger1 = movehit
trigger2 = pos y > -10 
trigger3 = moveguarded
value = 302
ctrl = 0
;-----------------------------------------------------------------------
;Bottle Break
[Statedef 302]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
anim = 302
ctrl = 0
sprpriority = 3

[State 302, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,8

[State 302, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
;---------------------------------------------------------------------------
;Drank Too Long Bottle Helper
[Statedef 303]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
anim = 301
ctrl = 0
sprpriority = 3

[State 303, VelSet]
type = VelSet
trigger1 = time = 1
x = 1.8
y = -2.4

[State 301, 3]
type = Hitdef
trigger1 = animelem = 1
attr = S,SP
damage = 70,5
animtype = heavy
guardflag = MA
hitflag = MAFP
priority = 3, hit
sparkno = -1
pausetime = 2,9
hitsound = -1 
guardsound = S6,0
sparkxy = 0,-0
ground.type = Low
ground.slidetime = 2
ground.hittime  = 20
guard.hittime  = 7
ground.velocity = -2.5
air.velocity = -2.2,-3.2

[State 303, Gravity]
type = VelAdd
trigger1 = 1
y = .55

[State 301, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 0
stateno = 302
time = 1

[State 301, 7]
type = ChangeState
trigger1 = movehit
trigger2 = pos y > -10 
trigger3 = moveguarded
value = 302
ctrl = 0
;---------------------------------------------------------------------------
;Medium Bottle Throw
[Statedef 310]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 50
velset = 0,0
anim = 300
ctrl = 0
sprpriority = 2

[State 310, PlaySnd]
type = Playsnd
trigger1 = AnimElem = 1
value = 1, 184

[State 310, Width]
type = Width
trigger1 = time = [33,55]
value = 19,0

[State 310, 1]
type = PlaySnd
trigger1 = animelem = 11
value = 0, 2

[State 1010, 2]
type = PlaySnd
trigger1 = animelem = 10
value = 0, 9

[State 300, Helper]
type = Helper
trigger1 = animelem = 11 
helpertype = normal 
name = "Medium Bottle"
ID = 311
stateno = 311 
pos = 75,-65
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 310, 7]
type = ChangeState
triggerall = animelem = 4
trigger1 = command = "hold_b"
value = 340

[State 310, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Upwards Bottle Helper
[Statedef 311]
type    = A
movetype= A
physics = N
juggle  = 9
poweradd= 0
anim = 301
ctrl = 0
sprpriority = 3

[State 311, VelSet]
type = VelSet
trigger1 = time = 0
x = 4
y = -10

[State 311, Gravity]
type = VelAdd
trigger1 = 1
y = .50

[State 311, 3]
type = Hitdef
trigger1 = animelem = 1
attr = S,SP
damage = 70,5
animtype = heavy
guardflag = MA
hitflag = MAFP
priority = 3, hit
sparkno = -1
pausetime = 2,9
hitsound = -1 
guardsound = S6,0
sparkxy = 0,-0
ground.type = Low
ground.slidetime = 2
ground.hittime  = 15
guard.hittime  = 7
ground.velocity = -2
air.velocity = -2.2,-3.2
P2facing = 1
fall = 1
ground.slidetime = 2
ground.hittime  = 15

;afterimage.time = -1
;afterimage.trans   =  add
;afterimage.framegap = 2
;afterimage.PalBright   =  30, 0,  0
;afterimage.PalContrast =  70, 70, 20
;afterimage.PalAdd      = -3,-3,-3
;afterimage.PalMul      = .85,.85,.50


[State 311, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 0
stateno = 302
time = 1

[State 311, 7]
type = ChangeState
trigger1 = movehit
trigger2 = pos y > -10 
trigger3 = moveguarded
value = 302
ctrl = 0

;---------------------------------------------------------------------------
;Heavy Bottle Throw
[Statedef 315]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 50
velset = 0,0
anim = 300
ctrl = 0
sprpriority = 2

[State 315, Width]
type = Width
trigger1 = time = [33,55]
value = 19,0

[State 315, 1]
type = PlaySnd
trigger1 = animelem = 11
value = 0, 2

[State 1010, 2]
type = PlaySnd
trigger1 = animelem = 10
value = 0, 9

[State 315, Helper]
type = Helper
trigger1 = animelem = 11 
helpertype = normal 
name = "Heavy Bottle"
ID = 316
stateno = 316 
pos = 75,-65
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 315, 7]
type = ChangeState
triggerall = animelem = 4
trigger1 = command = "hold_c"
value = 350

[State 315, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------------------------------------------------------------------
;Heavy Bottle Helper
[Statedef 316]
type    = A
movetype= A
physics = N
juggle  = 10
poweradd= 0
anim = 301
ctrl = 0
sprpriority = 3

[State 316, VelSet]
type = VelSet
trigger1 = time = 1
x = 3
y = -11

[State 316, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 316, 3]
type = Hitdef
trigger1 = animelem = 1
attr = S,SP
damage = 70,5
animtype = heavy
guardflag = MA
hitflag = MAFP
;hitflag = MD-
priority = 3, hit
sparkno = -1
pausetime = 2,9
hitsound = -1 
guardsound = S6,0
sparkxy = 0,-0
ground.type = Low
ground.slidetime = 2
ground.hittime  = 15
guard.hittime  = 7
ground.velocity = -2
air.velocity = -2.2,-3.2
P2facing = 1
fall = 1
ground.slidetime = 2
ground.hittime  = 15

;afterimage.time = -1
;afterimage.trans   =  add
;afterimage.framegap = 2
;afterimage.PalBright   =  30, 0,  0
;afterimage.PalContrast =  70, 70, 20
;afterimage.PalAdd      = -3,-3,-3
;afterimage.PalMul      = .85,.85,.50


[State 316, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 0
stateno = 302
time = 1

[State 316, 7]
type = ChangeState
trigger1 = movehit
trigger2 = pos y > -10 
trigger3 = moveguarded
value = 302
ctrl = 0
;---------------------------------------------------------------------------
;Bottle Throw EX
[Statedef 320]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= -500
velset = 0,0
anim = 320
ctrl = 0
sprpriority = 2

[State 375, 2]
type = Playsnd
trigger1 = AnimElem = 1
value = 1, 184

[State 320, Explod]
type = Explod
trigger1 = animelem = 1
anim = 7500
pos = 0,-70
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999999
scale = 1,1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 320, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 320, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S20,1

[State 320, Width]
type = Width
trigger1 = time = [22,38]
value = 19,0

[State 320, 1]
type = PlaySnd
trigger1 = animelem = 11
value = 0, 2

[State 1010, 2]
type = PlaySnd
trigger1 = animelem = 10
value = 0, 9

[State 320, Helper]
type = Helper
trigger1 = animelem = 11 
helpertype = normal 
name = "EX Bottle"
ID = 321
stateno = 321 
pos = 75,-65
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 320, 7]
type = ChangeState
triggerall = animelem = 4
trigger1 = command = "DrinkEX"
value = 360

[State 320, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;----------------------------------------------------------------
;EX Bottle Helper
[Statedef 321]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
anim = 301
ctrl = 0
sprpriority = 3

[State 321, VelSet]
type = VelSet
trigger1 = time = 1
x = 7
y = -10

[State 321, Gravity]
type = VelAdd
trigger1 = 1
y = .55

[State 321, 3]
type = Hitdef
trigger1 = animelem = 1
attr = S,SP
damage = 80,7
animtype = heavy
guardflag = MA
hitflag = MAFP
;hitflag = MD-
priority = 6, hit
sparkno = -1
pausetime = 2,9
hitsound = -1 
guardsound = S6,0
sparkxy = 0,-0
ground.type = Low
ground.slidetime = 2
ground.hittime  = 15
ground.velocity = -2
air.velocity = -2.2,-3.2
P2facing = 1
fall = 1
ground.slidetime = 2
ground.hittime  = 15
getpower = 0

;afterimage.time = -1
;afterimage.trans   =  add
;afterimage.framegap = 2
;afterimage.PalBright   =  30, 0,  0
;afterimage.PalContrast =  70, 70, 20
;afterimage.PalAdd      = -3,-3,-3
;afterimage.PalMul      = .85,.85,.50

[State 321, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 0
stateno = 302
time = 1

[State 321, 7]
type = ChangeState
trigger1 = movehit
trigger2 = pos y > -10 
trigger3 = moveguarded
value = 302
ctrl = 0
;---------------------------------------------------------------------------
;Light Bottle Drink
[Statedef 330]
type    = S
movetype= I
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 330
ctrl = 0
sprpriority = 2

[State 330, ChangeState]
type = ChangeState
trigger1 = command = "FF"
value = 100
ctrl = 0

[State 330, ChangeState]
type = ChangeState
trigger1 = command = "BB"
value = 105
ctrl = 0

[State 330, PowerAdd]
type = PowerAdd
trigger1 = time>1 
value = 1

[State 330, LifeAdd]
type = LifeAdd
trigger1 = animelem = 2
value = 1

[State 330, PlaySnd]
type = PlaySnd
trigger1 = time = 10
trigger2 = time = 60
trigger3 = time = 110
trigger4 = time = 160
trigger5 = time = 210
trigger6 = time = 260
trigger7 = time = 310
trigger8 = time = 360
trigger9 = time = 410
trigger10 = time = 460
trigger11 = time = 510
trigger12 = time = 560
trigger13 = time = 610
trigger14 = time = 660
trigger15 = time = 710
trigger16 = time = 760
trigger17 = time = 810
trigger18 = time = 860
trigger19 = time = 910
trigger20 = time = 960
value = S300,0

[State 330, 8]
type = ChangeState
trigger1 = command !="hold_a"
value = 335
ctrl = 0

[State 330, ChangeState]
type = ChangeState
trigger1 = time >1000
value = 370
ctrl = 0
;---------------------------------------------------------------------------
;Light Bottle Throw
[Statedef 335]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 331
ctrl = 0
sprpriority = 2

[State 335, Width]
type = Width
trigger1 = time = [14,36]
value = 19,0

[State 335, 1]
type = PlaySnd
trigger1 = animelem = 7
value = 0, 2

[State 335, 2]
type = PlaySnd
trigger1 = animelem = 6
value = 0, 9

[State 335, Helper]
type = Helper
trigger1 = animelem = 7 
helpertype = normal 
name = "Light Bottle"
ID = 301
stateno = 301 
pos = 75,-65
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 335, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Medium Bottle Drink
[Statedef 340]
type    = S
movetype= I
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 330
ctrl = 0
sprpriority = 2

[State 340, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA
slot = 0
stateno = 370
time = 1

[State 340, ChangeState]
type = ChangeState
trigger1 = command = "FF"
value = 100
ctrl = 0

[State 340, ChangeState]
type = ChangeState
trigger1 = command = "BB"
value = 105
ctrl = 0

[State 340, PowerAdd]
type = PowerAdd
trigger1 = time>1 
value = 1

[State 340, LifeAdd]
type = LifeAdd
trigger1 = animelem = 2
value = 1

[State 340, PlaySnd]
type = PlaySnd
trigger1 = time = 10
trigger2 = time = 60
trigger3 = time = 110
trigger4 = time = 160
trigger5 = time = 210
trigger6 = time = 260
trigger7 = time = 310
trigger8 = time = 360
trigger9 = time = 410
trigger10 = time = 460
trigger11 = time = 510
trigger12 = time = 560
trigger13 = time = 610
trigger14 = time = 660
trigger15 = time = 710
trigger16 = time = 760
trigger17 = time = 810
trigger18 = time = 860
trigger19 = time = 910
trigger20 = time = 960
value = S300,0

[State 340, 8]
type = ChangeState
trigger1 = command !="hold_b"
value = 345
ctrl = 0

[State 340, ChangeState]
type = ChangeState
trigger1 = time >1000
value = 370
ctrl = 0
;---------------------------------------------------------------------------
;Miedum Bottle Throw
[Statedef 345]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 331
ctrl = 0
sprpriority = 2

[State 345, Width]
type = Width
trigger1 = time = [14,36]
value = 19,0

[State 345, 1]
type = PlaySnd
trigger1 = animelem = 7
value = 0, 2

[State 345, 2]
type = PlaySnd
trigger1 = animelem = 6
value = 0, 9

[State 345, Helper]
type = Helper
trigger1 = animelem = 7 
helpertype = normal 
name = "Medium Bottle"
ID = 311
stateno = 311 
pos = 75,-65
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 345, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Heavy Bottle Drink
[Statedef 350]
type    = S
movetype= I
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 330
ctrl = 0
sprpriority = 2

[State 375, 2]
type = Playsnd
trigger1 = AnimElem = 1
value = 1, 184

[State 350, ChangeState]
type = ChangeState
trigger1 = command = "FF"
value = 100
ctrl = 0

[State 350, ChangeState]
type = ChangeState
trigger1 = command = "BB"
value = 105
ctrl = 0

[State 350, PowerAdd]
type = PowerAdd
trigger1 = time>1 
value = 1

[State 350, LifeAdd]
type = LifeAdd
trigger1 = animelem = 2
value = 1

[State 350, PlaySnd]
type = PlaySnd
trigger1 = time = 10
trigger2 = time = 60
trigger3 = time = 110
trigger4 = time = 160
trigger5 = time = 210
trigger6 = time = 260
trigger7 = time = 310
trigger8 = time = 360
trigger9 = time = 410
trigger10 = time = 460
trigger11 = time = 510
trigger12 = time = 560
trigger13 = time = 610
trigger14 = time = 660
trigger15 = time = 710
trigger16 = time = 760
trigger17 = time = 810
trigger18 = time = 860
trigger19 = time = 910
trigger20 = time = 960
value = S300,0

[State 350, 8]
type = ChangeState
trigger1 = command !="hold_c"
value = 355
ctrl = 0

[State 350, ChangeState]
type = ChangeState
trigger1 = time >1000
value = 370
ctrl = 0
;---------------------------------------------------------------------------
;Heay Bottle Throw
[Statedef 355]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 331
ctrl = 0
sprpriority = 2

[State 355, Width]
type = Width
trigger1 = time = [14,36]
value = 19,0

[State 355, 1]
type = PlaySnd
trigger1 = animelem = 7
value = 0, 2

[State 355, 2]
type = PlaySnd
trigger1 = animelem = 6
value = 0, 9

[State 355, Helper]
type = Helper
trigger1 = animelem = 7 
helpertype = normal 
name = "Heavy Bottle"
ID = 316
stateno = 316 
pos = 75,-65
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 355, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;EX Bottle Drink
[Statedef 360]
type    = S
movetype= I
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 330
ctrl = 0
sprpriority = 2

[State 360, ChangeState]
type = ChangeState
trigger1 = command = "FF"
value = 100
ctrl = 0

[State 360, ChangeState]
type = ChangeState
trigger1 = command = "BB"
value = 105
ctrl = 0

[State 360, LifeAdd]
type = LifeAdd
trigger1 = animelem = 2
value = 4

[State 360, PlaySnd]
type = PlaySnd
trigger1 = time = 10
trigger2 = time = 60
trigger3 = time = 110
trigger4 = time = 160
trigger5 = time = 210
trigger6 = time = 260
trigger7 = time = 310
trigger8 = time = 360
trigger9 = time = 410
trigger10 = time = 460
trigger11 = time = 510
trigger12 = time = 560
trigger13 = time = 610
trigger14 = time = 660
trigger15 = time = 710
trigger16 = time = 760
trigger17 = time = 810
trigger18 = time = 860
trigger19 = time = 910
trigger20 = time = 960
value = S300,0

[State 360, 8]
type = ChangeState
trigger1 = command != "DrinkEX"
value = 365
ctrl = 0

[State 360, ChangeState]
type = ChangeState
trigger1 = time >1000
value = 370
ctrl = 0
;---------------------------------------------------------------------------
;EX Bottle Throw
[Statedef 365]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = 331
ctrl = 0
sprpriority = 2

[State 365, Width]
type = Width
trigger1 = time = [14,36]
value = 19,0

[State 365, 1]
type = PlaySnd
trigger1 = animelem = 7
value = 0, 2

[State 365, 2]
type = PlaySnd
trigger1 = animelem = 6
value = 0, 9

[State 365, Helper]
type = Helper
trigger1 = animelem = 7 
helpertype = normal 
name = "EX Bottle"
ID = 321
stateno = 321 
pos = 75,-65
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 365, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Drank Too Long
[Statedef 370]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 370                       ;Change animation (Def: no change)
poweradd = 0                    ;Power to add (Def: 0)
sprpriority = 2  

[State 370, Width]
type = Width
trigger1 = 1
value = 17,0

[State 335, 1]
type = PlaySnd
trigger1 = animelem = 6
value = 0, 2

[State 335, 2]
type = PlaySnd
trigger1 = animelem = 6
value = 0, 9

[State 335, Helper]
type = Helper
trigger1 = animelem = 6
helpertype = normal 
name = "Bottle"
ID = 303
stateno = 303
pos = 75,-65
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0
 
[State 370, 1]
type = PlaySnd
trigger1 = animelem = 11
value = 0, 17
channel = 25

[State 370, Helper]
type = Helper
trigger1 = animelem = 16
helpertype = normal ;player
name = "Puke"
ID = 2001
stateno = 2001 
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0
sprpriority = -4

[State 370, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 5070
ctrl = 0
;---------------------------------------------------------------------------
;Upwards Bottle Throw
[Statedef 375]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 110
velset = 0,0
anim = 375
ctrl = 0
sprpriority = 2

[State 375, 2]
type = Playsnd
trigger1 = AnimElem = 1
value = 1, 21

[State 375, 2]
type = Playsnd
trigger1 = AnimElem = 5
value = 300,0

[State 375, Helper]
type = Helper
trigger1 = AnimElem = 10
triggerall = numhelper(4279) = 0
id = 321
helpertype = normal
name = "Upwards Bottle"
postype = p1
pos = 30,-110
stateno = 311
ID = 311
keyctrl = 1
ownpal = 1

[State 375, 1]
type = PlaySnd
trigger1 = animelem = 10
value = 0, 2

[State 375, 2]
type = PlaySnd
trigger1 = animelem = 10
value = 0, 9

[State 375, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Crouching light punch
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 10
ctrl = 0
anim = 400
sprpriority = 2

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 15
priority  = 3
animtype  = Light
hitflag = MAF
guardflag = MA
pausetime = 10,11
sparkno = 0
sparkxy = -10,-70
hitsound   = S1,2
guardsound = S6,0
ground.type = Low
ground.slidetime = 3
ground.hittime  = 10
ground.velocity = -7.2
air.velocity = -3.5,-3

[State 400, 3]
type = CtrlSet
trigger1 = Time = 5
value = 1

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
;---------------------------------------------------------------------------
;Crouching medium punch
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 40
ctrl = 0
anim = 410
sprpriority = 2

[State 410, posadd]
type = posadd
trigger1 = animelem = 3
x = 5

[State 410, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 1

[State 410, 3]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
damage    = 35
animtype  = Medium
hitflag = MAF
guardflag = MA
pausetime = 9,9
sparkno = 2
sparkxy = -10,-68
hitsound   = S1,3
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -3,-4

[State 410,3.5] ;Play a grunt for this attack
type = PlaySnd
triggerall = random % 10 > 5
trigger1 = AnimElem = 2
value = S1, 19
channel =10 

[State 410,3.5] ;Play a grunt for this attack
type = PlaySnd
triggerall = random % 10 > 5
trigger1 = AnimElem = 2
value = 0, 9
channel =10 

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;Crouching Strong Punch
[Statedef 420]
type    = C
movetype= A
physics = C
juggle  = 15
poweradd= 50
ctrl = 0
anim = 420
sprpriority = 2

[State 420, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 0, 2

[State 420, sound1]
type = PlaySnd
triggerall = random % 10 > 5
trigger1 = AnimElem = 4
value = 5, 0
channel = 10

[State 420, sound1]
type = PlaySnd
triggerall = random % 10 > 5
trigger1 = AnimElem = 4
value = 0, 9
channel = 10

[State 420, 3]
type = HitDef
trigger1 = AnimElem = 5
attr = C, NA
damage    = 55,5
animtype  = Hard
hitflag = MAFD
guardflag = L
priority = 3,hit
pausetime = 9,9
sparkno = 3
sparkxy = -10,-22
hitsound   = S1,5
guardsound = S6,0
ground.type = Low
ground.slidetime = 42
ground.hittime  = 15
guard.hittime = 2
ground.velocity = -7
air.velocity = -5,-4

[State 420, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching light kick
; CNS difficulty: easy
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 15
ctrl = 0
anim = 430
sprpriority = 2

[State 430, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 430, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 15
animtype  = Light
hitflag = MAFD
guardflag = L
pausetime = 6,6
sparkno = 0
sparkxy = -10,-8
hitsound   = S1,2
guardsound = S6,0
ground.type = Low
ground.slidetime = 4
ground.hittime  = 10
ground.velocity = -7
air.velocity = -4,-3
down.velocity = -5,0
down.hittime = 20

[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
;Crouch Medium Kick
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 19
poweradd= 39
ctrl = 0
anim = 440
sprpriority = 2

[State 440, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 440, 3]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 35
hitflag = MAFD
guardflag = L
pausetime = 12,9
sparkno = 2
sparkxy = -5,-10
hitsound   = S1,3
guardsound = S6,0
ground.type = Trip
ground.slidetime = 10
ground.hittime  = 17
guard.hittime = 5
ground.velocity = -2.5,-2
air.velocity = -1.2,-3
guard.velocity = -5
fall = 1
ground.cornerpush.veloff = -11


[State 440,3.5] ;Play a grunt for this attack
type = PlaySnd
triggerall = random % 10 > 5
trigger1 = AnimElem = 3
value = 5, 0
channel = 10

[State 440,3.5] ;Play a grunt for this attack
type = PlaySnd
triggerall = random % 10 > 5
trigger1 = AnimElem = 3
value = S1, 20
channel = 10

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouch Strong Kick
[Statedef 450]
type    = C
movetype= A
physics = C
juggle  = 19
poweradd= 57
ctrl = 0
anim = 450
sprpriority = 2

[State 450, 2]
type = PlaySnd
trigger1 = animelem = 5
value = 0, 2

[State 450, 2]
type = PlaySnd
triggerall = random % 10 > 5
trigger1 = animelem = 4
value = 0, 9
channel = 10

[State 450, 2]
type = PlaySnd
triggerall = random % 10 > 5
trigger1 = animelem = 4
value = 5, 0
channel = 10

[State 450, 3]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 55, 5
hitflag = MAFD
guardflag = L
pausetime = 5,12
sparkno = 3
sparkxy = -5,-90
hitsound   = s1,5
guardsound = S6,0
ground.type = High
animtype = Up
ground.slidetime = 10
ground.hittime  = 18
guard.hittime = 10
ground.velocity = -2,-9
air.velocity = -1,-6
guard.velocity = -5
fall = 1
ground.cornerpush.veloff = -10

[State 450, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Jump Light Punch
; CNS difficulty: easy
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 5
poweradd= 11
ctrl = 0
anim = 600
sprpriority = 2

[State 600, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 600, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 15
guardflag = HA
priority = 4,hit
pausetime = 7,7
sparkno = 0
sparkxy = -10,-28
hitsound   = S1,2
guardsound = S6,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 17
ground.velocity = -4
air.velocity = -1.3,-4

[State 600, 3]
type = CtrlSet
trigger1 = Time = 17
value = 1
;---------------------------------------------------------------------------
;Jump Medium Punch
; CNS difficulty: easy
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 35
ctrl = 0
anim = 610
sprpriority = 2

[State 610, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 610, Grunt]
type = playsnd
trigger1 = Time = 0
value = 0,9

[State 610, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 35
guardflag = HA
priority = 5,hit
pausetime = 8,8
sparkno = 2
sparkxy = -10,-18
hitsound   = S1,3
guardsound = S6,0
animtype = Med
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5
air.velocity = -3,1
;---------------------------------------------------------------------------
;Jump Strong Punch
; CNS difficulty: easy
[Statedef 620]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 45
ctrl = 0
anim = 620
sprpriority = 2

[State 620, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 2

[State 620, 2]
type = PlaySnd
trigger1 = Time = 2
value = S1, 20

[State 620, 3]
type = HitDef
triggerall = p2stateno != 4014
trigger1 = Time = 0
attr = A, NA
damage = 55, 5
guardflag = HA
priority = 6,hit
pausetime = 15,10
sparkno = 3
sparkxy = -10,-8
hitsound   = s1,4
guardsound = S6,0
animtype = Hard
ground.type = High
ground.slidetime = 17
ground.hittime  = 20
guard.hittime  = 10
ground.velocity = -5
air.velocity = -6,5
air.fall = 1
fall = 1

[State 620, 3]
type = HitDef
triggerall = p2stateno = 4014
trigger1 = Time = 0
attr = A, NA
damage = 45
guardflag = HA
priority = 4,hit
pausetime = 15,10
sparkno = 3
sparkxy = -10,-8
hitsound   = s1,4
guardsound = S6,0
animtype = Hard
ground.type = High
ground.slidetime = 17
ground.hittime  = 20
guard.hittime  = 10
ground.velocity = -5
air.velocity = -6,5
air.fall = 1
fall = 1

;---------------------------------------------------------------------------
;Jump Light Kick
; CNS difficulty: easy
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 18
ctrl = 0
anim = 630
sprpriority = 2

[State 630, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 630, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 15
guardflag = HA
priority = 3
pausetime = 6,7
sparkno = 1
sparkxy = -5,-5
hitsound   = S1,2
guardsound = S6,0
ground.type = High
ground.slidetime = 11
ground.hittime  = 20
ground.velocity = -4
air.velocity = -2,-4
;---------------------------------------------------------------------------
;Jump Medium Kick
; CNS difficulty: easy
[Statedef 635]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 39
ctrl = 0
anim = 635
sprpriority = 2

[State 635, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 1

[State 635, Grunt]
type = playsnd
trigger1 = Time = 0
value = S1,19

[State 635, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 35
guardflag = HA
priority = 3
pausetime = 10,10
sparkno = 2
sparkxy = -5,-35
hitsound   = S1,3
guardsound = S6,0
ground.type = High
ground.slidetime = 6
ground.hittime  = 6
ground.velocity = -4
air.velocity = -2,1
;---------------------------------------------------------------------------
;Jump Strong Kick
; CNS difficulty: easy
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd = 50
ctrl = 0
anim = 640
sprpriority = 2

[State 640, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 2

[State 640, 2]
type = PlaySnd
trigger1 = Time = 2
value = S0, 9

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 55, 6
guardflag = HA
priority = 5,hit
pausetime = 12,12
sparkno = 3
sparkxy = -10,-40
hitsound   = s1,5
guardsound = S6,0
animtype = Heavy
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -8
air.velocity = -8,-7

[State 640 VelSet]
type = VelSet
trigger1 = movehit && !moveguarded
x = -2.7
;-------------------------------------------------------------------------------
;Throw Attempt
[Statedef 800]
type = S
movetype = A
physics = S
ctrl = 0
anim = 800  
velset = 0, 0

[State 800,HitDef]
type = Hitdef
trigger1 = AnimElem = 1
trigger1 = P2MoveType != H
trigger1 = P2StateNo != [150,155]
attr = S, NT
priority = 2,Miss
getpower = 0
hitflag = M-
sparkno = -1
p1facing = ifelse (command = "holdfwd", 1,-1)
p2facing = 1
p1stateno = 810
p2stateno = 820
p2getp1state = 1
guard.dist = 0 
hitsound = S1,1
fall = 1
fall.recover = 0

[State 800,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 2

[State 800,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
;Throw Attempt
[Statedef 850]
type = S
movetype = A
physics = S
ctrl = 0
anim = 850 
velset = 0, 0

[State 800,HitDef]
type = Hitdef
trigger1 = AnimElem = 1
trigger1 = P2MoveType != H
trigger1 = P2StateNo != [150,155]
attr = S, NT
priority = 2,Miss
getpower = 0
hitflag = M-
sparkno = -1
p1facing = ifelse (command = "holdfwd", 1,-1)
p2facing = 1
p1stateno = 811
p2stateno = 820
p2getp1state = 1
guard.dist = 0 
hitsound = S1,1
fall = 1
fall.recover = 0

[State 710,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 2
channel = 0

[State 800,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
;Throw
[Statedef 810]
type = S
movetype = A
physics = N
anim = 810 
velset = 0, 0
poweradd = 20
sprpriority = 3
             
[State 810 ,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S1,14

[State 800, HitAdd]
type = HitAdd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 9
trigger3 = AnimElem = 13
trigger4 = AnimElem = 17
trigger5 = AnimElem = 21
value = 1

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 9
trigger3 = AnimElem = 13
trigger4 = AnimElem = 17
trigger5 = AnimElem = 21
value = S1,17

[State 185, 0]
type = Explod
trigger1 = AnimElem = 5
trigger2 = AnimElem = 9
trigger3 = AnimElem = 13
trigger4 = AnimElem = 17
trigger5 = AnimElem = 21
anim = F1
pos = 50, -79
sprpriority = 4

[State 810,0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810,Width]
type = Width
triggerall = AnimElem = 1
trigger1 = FrontEdgeDist < 40
trigger2 = BackEdgeDist < 40
edge = 40,40

[State 810,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn


[State 810,TargetBind]
type = TargetBind
trigger1 = AnimElem = 22,<0
pos = 35,0

[State 810,TargetBind]
type = TargetState
trigger1 = AnimElem = 22,=1
value = 821

[State 810,TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 9
trigger3 = AnimElem = 13
trigger4 = AnimElem = 17
value = -26
kill = 0

[State 810,TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 21
value = -31

[State 810,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
;Kick Barrage
[Statedef 811]
type = S
movetype = A
physics = N
anim = 811 
velset = 0, 0
poweradd = 0
sprpriority = 3

[State 811, Hand]
type = Explod
trigger1 = Time = 1
anim = 812
id = 811
persistent = 0
postype = p1
pos = 0, 0
sprpriority = -1
removetime = 106
removeongethit = 1
ignorehitpause = 1
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0

[State 811, HitAdd]
type = HitAdd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 10
trigger3 = AnimElem = 14
trigger4 = AnimElem = 18
trigger5 = AnimElem = 22
value = 1

[State 811,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 10
trigger3 = AnimElem = 14
trigger4 = AnimElem = 18
trigger5 = AnimElem = 22
value = S1,17

[State 811,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 10
trigger3 = AnimElem = 14
trigger4 = AnimElem = 18
value = S5,0

[State 811,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 22
value = S0,9

[State 185, 0]
type = Explod
trigger1 = AnimElem = 6
trigger2 = AnimElem = 10
trigger3 = AnimElem = 14
trigger4 = AnimElem = 18
trigger5 = AnimElem = 22
anim = F1
pos = 58, -26
sprpriority = 4

[State 811,0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810,Width]
type = Width
triggerall = AnimElem = 1
trigger1 = FrontEdgeDist < 40
trigger2 = BackEdgeDist < 40
edge = 40,40

[State 810,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 810,TargetBind]
type = TargetBind
trigger1 = AnimElem = 24,<0
pos = 35,0

[State 810,TargetBind]
type = TargetState
trigger1 = AnimElem = 24,1
value = 821

[State 810,TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 10
trigger3 = AnimElem = 14
trigger4 = AnimElem = 18
value = -23
kill = 0

[State 810,TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 22
value = -27

[State 810,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
[Statedef 820]
type = A
movetype = H
physics = N
ctrl = 0

[State 52, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 820, screenbound]
type = screenbound
Trigger1 = 1
value = 1
movecamera = 0,0

[State 820,ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 820
;-------------------------------------------------------------------------------
[Statedef 821]
type = A
movetype = H
physics = N
velset = -2.5,-8
ctrl = 0

[State 820,ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 5050

[State 1509, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1509, veladd]
type = veladd
trigger1 = 1
y = .45

[State 1509, SelfState]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100


;---------------------------------------------------------------------------
;Light Fart
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 55
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 7
value = 1000,0

[State 1000, 2]
type = PlaySnd
trigger1 = animelem = 10
value = 0,0

[State 1000, 3]
type = projectile
trigger1 = animelem = 12
projanim = 1001
projhitanim = 1002
projpriority = 1
projremove = 1
projshadow = 1,0,0
projremovetime = 100
projid = 1000
offset  = 0, 0
postype = p1
velocity = 2.7,0
velmul = 1
attr = S,SP
damage = 60,2
animtype = heavy
guardflag = MA
hitflag = MAFP
;hitflag = MD-
priority = 3, Miss
sparkno = -1
guard.sparkno = -1
;pausetime = 0,3
hitsound = s1, 2 
guardsound = s6,0
sparkxy = 60,-50
ground.type = Low
ground.slidetime = 2
ground.hittime  = 15
guard.hittime = 8
ground.velocity = -6
air.velocity = -2.2,-3.2
palfx.time = 15
palfx.invertall = 1
palfx.color = 0
palfx.add = 190,30,0
palfx.sinadd = 0,30,0,4  
P2facing = 1
afterimage.time = -1
afterimage.trans   =  add
afterimage.framegap = 2
afterimage.PalBright   =  30, 0,  0
afterimage.PalContrast =  70, 20, 20
afterimage.PalAdd      = -3,-3,-3
afterimage.PalMul      = .85,.50,.50


[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Medium Fart
[Statedef 1010]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 55
velset = 0,0
anim = 1010
ctrl = 0
sprpriority = 2

[State 1010, 1]
type = PlaySnd
trigger1 = animelem = 7
value = 1000,0

[State 1010, 2]
type = PlaySnd
trigger1 = animelem = 10
value = 0,0

[State 1010, 3]
type = projectile
trigger1 = animelem = 12
projanim = 1001
projhitanim = 1002
projpriority = 1
projremove = 1
projshadow = 1,0,0
projremovetime = 100
projid = 1000
offset  = 0, 0
postype = p1
velocity = 4.8,0
velmul = 1,0
attr = S,SP
damage = 60,2
animtype = heavy
guardflag = MA
hitflag = MAFP
;hitflag = MD-
priority = 3, Miss
sparkno = -1
guard.sparkno = -1
;pausetime = 0,3
hitsound = s1, 2 
guardsound = s6,0
sparkxy = 60,-50
ground.type = Low
ground.slidetime = 2
ground.hittime  = 15
guard.hittime = 8
ground.velocity = -6
air.velocity = -2.2,-3.2
palfx.time = 15
;palfx.invertall = 1
palfx.color = 0
palfx.add = 190,30,0
palfx.sinadd = 0,30,0,4  
P2facing = 1
afterimage.time = -1
afterimage.trans   =  add
afterimage.framegap = 2
afterimage.PalBright   =  30, 0,  0
afterimage.PalContrast =  70, 20, 20
afterimage.PalAdd      = -3,-3,-3
afterimage.PalMul      = .85,.50,.50

[State 1010, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Fast Fart
[Statedef 1015]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 55
velset = 0,0
anim = 1010
ctrl = 0
sprpriority = 2

[State 1015, 1]
type = PlaySnd
trigger1 = animelem = 7
value = 1000,2

[State 1015, 2]
type = PlaySnd
trigger1 = animelem = 10
value = 0,0

[State 1015, 3]
type = projectile
trigger1 = animelem = 12
projanim = 1001
projhitanim = 1002
projpriority = 1
projremove = 1
projshadow = 1,0,0
projremovetime = 100
projid = 1000
offset  = 0, 0
postype = p1
velocity = 7,0
velmul = 1,0
attr = S,SP
damage = 60,2
animtype = heavy
guardflag = MA
hitflag = MAFP
;hitflag = MD-
priority = 3, Miss
sparkno = -1
guard.sparkno = -1
;pausetime = 0,3
hitsound = s1, 2
guardsound = s6,0
sparkxy = 60,-50
ground.type = Low
ground.slidetime = 2
ground.hittime  = 15
guard.hittime = 8
ground.velocity = -6
air.velocity = -2.2,-3.2
palfx.time = 15
;palfx.invertall = 1
palfx.color = 0
palfx.add = 190,30,0
palfx.sinadd = 0,30,0,4  
P2facing = 1
afterimage.time = -1
afterimage.trans   =  add
afterimage.framegap = 2
afterimage.PalBright   =  30, 0,  0
afterimage.PalContrast =  70, 20, 20
afterimage.PalAdd      = -3,-3,-3
afterimage.PalMul      = .85,.50,.50

[State 1015, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;EX Fart
[Statedef 1017]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= -500
velset = 0,0
anim = 1010
ctrl = 0
sprpriority = 2

[State 320, Explod]
type = Explod
trigger1 = animelem = 1
anim = 7500
pos = 0,-70
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999999
scale = 1,1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 320, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 320, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S20,1

[State 1017, 1]
type = PlaySnd
trigger1 = animelem = 7
value = 1000,2

[State 1017, 2]
type = PlaySnd
trigger1 = animelem = 10
value = 0,0

[State 1017, Helper]
type = Helper
trigger1 = animelem = 12
helpertype = normal ;player
name = "Rainbow EX Fart" 
ID = 1018
stateno = 1018
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 1017, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;--------------------------------------------------------------------------
;Rainbow Fart Helper
[Statedef 1018]
type    = A
movetype= A
physics = N
juggle  = 12
poweradd= 0
anim = 1001
ctrl = 0
sprpriority = 3

[State 1018, VelSet]
type = VelSet
trigger1 = time = 0
x = 8.2

[State 1018, 3]
type = Hitdef
trigger1 = time = 0
attr = S,SP
damage = 90,10
animtype = Heavy
guardflag = MA
hitflag = MAFP
priority = 6, hit
sparkno = -1
pausetime = 2,7
hitsound = s1, 2 
guardsound = s6,0
sparkxy = 0,-50
ground.type = Low
ground.slidetime = 2
ground.hittime  = 25
ground.velocity = -6, -7
air.velocity = -4.2,-5.6
palfx.time = 15
;palfx.invertall = 1
palfx.color = 0
palfx.add = 190,30,0
palfx.sinadd = 0,30,0,4  
P2facing = 1
fall =1
fall.recover = 0
getpower = 0
air.juggle = 15

[State 1018, AfterImage]
type = AfterImage
trigger1 = time = 0
length = 20
time = -1
trans   =  add
framegap = 2
PalBright   =  30, 0,  0
PalContrast =  70, 20, 20
PalAdd      = -3,-3,-3
PalMul      = .85,.50,.50

[State 1018, PalFXWiz]
type = PalFX
trigger1 = time = 0
time = 6
add = 0,-200,0
mul = 256,256,256
sinadd = 40,80,40,20
invertall = 0
color = 0

[State 1018, PalFXWiz]
type = PalFX
trigger1 = time = 6
time = 6
add = -104,-104,7
mul = 256,256,256
sinadd = 56,56,0,20
invertall = 0
color = 0

[State 1018, PalFXWiz]
type = PalFX
trigger1 = time = 12
time = 6
add = 0,-200,-200
mul = 256,256,256
sinadd = 40,80,40,20
invertall = 0
color = 0

[State 1018, PalFXWiz]
type = PalFX
trigger1 = time = 18
time = 6
add = 0,100,50
mul = 20,120,24
sinadd = 85,110,55,20
invertall = 0
color = 0

[State 1018, PalFXWiz]
type = PalFX
trigger1 = time = 24
time = 6
add = 100,100,100
mul = 256,256,256
sinadd = -80,-80,-80,20
invertall = 0
color = 0


[State 1018, PalFXWiz]
type = PalFX
trigger1 = time = 30
time = 6 
add = 256,0,100
mul = 256,256,256
sinadd = 0,-10,-10,20
invertall = 0
color = 0

[State 1018, HitBy]
type = HitBy
trigger1 = 1
value = ,AP
time = 1
;ignorehitpause = 
;persistent = 

[State 1018, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 0
stateno = 1019
time = 1

[State 1018, 7]
type = ChangeState
trigger1 = movehit 
trigger2 = moveguarded
trigger3 = time = 40
value = 1019
ctrl = 0
;-----------------------------------------------------------------------
;Fart Destroyed
[Statedef 1019]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
anim = 1002
ctrl = 0
sprpriority = 3

[State 1019, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
;---------------------------------------------------------------------------
;Steroid Man
[Statedef 1020]
type    = S
movetype= A
physics = N
juggle  = 10
poweradd= -3000
velset = 0,0
anim = 1020
ctrl = 0
sprpriority = 2

[State 1020, NotHitBy]
type = NotHitBy
trigger1 = time = [0, 100] 
value = SCA
time = 1

[State 1020, NotHitBy]
type = NotHitBy
trigger1 = time = [101, 127] 
value = ,AP
time = 1

[State 1020, Width]
type = Width
trigger1 = time = [127,187]
value = 10,0

[State 1020, Initial Pause]
type = Pause
trigger1 = AnimElem = 1, 2
time = 20
movetime = 20

[State 1020, SuperPause]
type = SuperPause
trigger1 = AnimElem = 5, 2
;time = 120
pos = 7, -62
anim = 100
sound = S20, 0

[State 1020, Transform Pause]
type = Pause
trigger1 = AnimElem = 6, 2
time = 90
movetime = 90

[State 1020, BGPalFX]
type = BGPalFX
trigger1 = AnimElem = 5
time = 100
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,1
invertall = 0
color = 256

[State 1020, Afterimage]
type = AfterImage
trigger1 = Animelem = 28
length = 19
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -104,-104,7
PalMul      = 256,256,256
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 1020, Afterimage]
type = AfterImageTime
trigger1 = AnimElemTime(53) < 0
time = 2

[State 1020, Blink Yellow]
type = PalFX
trigger1 = Animelem = 14
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1020, Helper]
type = Helper
trigger1 = animelem = 13
helpertype = normal 
name = "Steroids"
ID = 1021
stateno = 1021 
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
sprpriority = -1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 1020, Shake Screen]
type = EnvShake
trigger1 = AnimElem = 15
time = 8     ;Time to shake screen
ampl = 2     ;Amount to shake
freq = 180   ;A frequency of 180 shakes the screen rapidly

;Transform Quote
[State 1020, 1]
type = PlaySnd
trigger1 = AnimElem = 18
value = 0, 22

[State 1020, 2]
type = PosAdd
trigger1 = AnimElem = 27
trigger2 = AnimElem = 28
x = 20

[State 1020, 3]
type = PosAdd
trigger1 = AnimElem = 29
trigger2 = AnimElem = 30
trigger3 = AnimElem = 31
trigger4 = AnimElem = 32
trigger5 = AnimElem = 33
trigger6 = AnimElem = 34
trigger7 = AnimElem = 35
x = 28

[State 1020, 4]
type = PosAdd
trigger1 = AnimElem = 36
trigger2 = AnimElem = 37
trigger3 = AnimElem = 38
trigger4 = AnimElem = 39
x = 20

[State 1020, PosAdd]
type = PosAdd
trigger1 = AnimElem = 39
trigger2 = AnimElem = 43
trigger3 = AnimElem = 47
x = 15

; BAM! BAM! BAM!
[State 1020,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 40
trigger2 = AnimElem = 45
trigger3 = AnimElem = 50
value = 0, 19

;Roll Attack
[State 1020, 5]
type = HitDef
trigger1 = AnimElem = 29
trigger2 = AnimElem = 30
trigger3 = AnimElem = 31
trigger4 = AnimElem = 32
trigger5 = AnimElem = 33
trigger6 = AnimElem = 34
trigger7 = AnimElem = 35
attr = S, HA
animtype  = Hard
damage    = 30, 10
getpower  = 0
priority  = 6,hit
guardflag = MA
pausetime = 8,7
sparkxy = -10,-60
hitsound   = S1,3
guardsound = s6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8
guard.velocity = -7
air.velocity = -6,0
airguard.velocity = -2, -4
kill = 0

;First Three BAM hits
[State 1020, 6]
type = HitDef
trigger1 = AnimElem = 41
trigger2 = AnimElem = 46
trigger3 = AnimElem = 51
attr = S, HA
animtype  = Hard
damage    = 45, 20
getpower  = 0
priority  = 6,hit
guardflag = MA
pausetime = 14,20
sparkno = 3
sparkxy = -10,-60
hitsound   = s1,5
guardsound = s6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 40
ground.velocity = -1
guard.velocity = -3
air.velocity = -1,-3
airguard.velocity = -2, -4
kill = 0

[State 1020, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 55 
value = S0,9

[State 1020, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 53
value = S0,2

;Final BAM! hit
[State 1020, 7]
type = HitDef
trigger1 = AnimElem = 56
attr = S, HA
animtype  = Hard
damage    = 115, 58
getpower  = 0
priority  = 4
guardflag = MA
pausetime = 11,11
sparkno = 3
sparkxy = -10,-60
hitsound   = s1,4
guardsound = s6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 40
guard.hittime = 50
ground.velocity = -5, -19
guard.velocity = -7
air.velocity = -3,-15
airguard.velocity = -2, -4
fall = 1  
fall.recover = 0 
p2facing = 1
kill = 1
fall.damage = 20
fall.envshake.ampl = 6       ;Parameters for shaking the screen on fall
fall.envshake.freq = 180
fall.envshake.time = 15
envshake.ampl = 6
envshake.freq = 180
envshake.time = 15
ground.cornerpush.veloff = -15

[State 1020, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 1020, 9]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1
;--------------------------------------------------------------------------
;Steroids
[Statedef 1021]
type    = S
physics = N
velset = 0,0
anim = 1021
ctrl = 0
sprpriority = -1

[State 3051, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
trigger2 = LoseKo
;---------------------------------------------------------------------------
;Anime Peter
[Statedef 1022]
type    = S
movetype= A
physics = N
juggle  = 4
poweradd= 100
velset = 0,0
anim = 1022
ctrl = 0
sprpriority = 2

[State 1050, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 22, 0
channel = 0

[State 1050, 3]
type = VelAdd
trigger1 = AnimElem = 6
x = 8.2

[State 1050, 3]
type = Velset
trigger1 = AnimElem = 10
x = 0;.2

[State 1020, effect]
type = Explod
trigger1 = AnimElem = 6
anim = 1515
persistent = 0
postype = p1
pos = 20, 0
sprpriority = -1

[State 1020, Afterimage]
type = AfterImage
trigger1 = Animelem = 5
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 4
Trans = Add
time = 30

[State 1050, 4]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Medium
damage    = 85, 4
priority  = 5
guardflag = MA
pausetime = 5,12
sparkxy = -10,-70
hitsound   = S1,4
guardsound = S6,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -3.5,-7
guard.velocity = -7
air.velocity = -3.5,-7
fall = 1

[State 1050, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Shock Peter
[Statedef 1024]
type    = S
movetype= A
physics = N
juggle  = 4
poweradd= 100
velset = 0,0
anim = 1024
ctrl = 0
sprpriority = 2

[State 1050, 1]
type = PlaySnd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 7
trigger3 = AnimElem = 9
trigger4 = AnimElem = 11
value = 0, 0

[State 1050, 2]
type = PlaySnd
trigger1 = AnimElem = 12
value = 51, 0
channel = 0

[State 1050, 3]
type = VelAdd
trigger1 = AnimElem = 2
x = 2

[State 1050, 4]
type = VelMul
trigger1 = AnimElem = 3
x = 2.2

[State 1050, 3]
type = Velset
trigger1 = AnimElem = 12
x = 0

[State 1075, Blink Yellow]
type = PalFX
trigger1 = AnimElem = 11
time = 25
add = 32,16,0
sinadd = 64,32,5,3

[State 1024, 5]
type = HitDef
trigger1 = AnimElem = 12
attr = S, SA
animtype  = Hard
damage    = 80,18
getpower  = 0
priority  = 6
guardflag = MA
pausetime = 5,5
sparkno = 2
sparkxy = -10,-65
hitsound   = S52,0
guardsound = S6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 30
ground.velocity = -6
air.velocity = -3,-2.8
air.fall = 1
fall.animtype = Hard
fall.recover = 0
p2stateno = 7601

[State 1050, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Ryu Peter 
[Statedef 1030]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 120
velset = 0,0
anim = 312
ctrl = 0
sprpriority = 2

[State 1030, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 48, 0
channel = 0

[State 1030, 2]
type = Projectile
trigger1 = animelem = 3
projanim = 313
projhitanim = 314
projpriority = 1
projremove = 1
projshadow = 1,1,1
projid = 1030
offset  = 0, 0
postype = p1
velocity = 5,0
velmul = 1,0
attr = S,SP
damage = 70, 18
animtype = heavy
guardflag = MA
hitflag = MAFP
;hitflag = MD-
priority = 3, Miss
sparkno = -1
;pausetime = 0,3
hitsound = s1, 18 
guardsound = 6,0
sparkxy = 80,-55
guard.sparkno = -1
;guard.type = high
ground.slidetime = 3
ground.hittime = 17
air.hittime = 14
ground.velocity = -6.5
air.velocity = -5.5,-3
guard.hittime = 14
guard.velocity = -13
palfx.time = 8
palfx.color = 0
palfx.add = 10,20,210
;palfx.sinadd = 0,30,0,4  
P2facing = 1
afterimage.time = -1
afterimage.trans   =  add
afterimage.framegap = 2
afterimage.PalBright   =  0, 0,  30
afterimage.PalContrast =  20, 20, 70
afterimage.PalAdd      = -3,-3,-3
afterimage.PalMul      = .50,.50,.85

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Ryu Peter 2
[Statedef 1031]
type    = S
movetype= A
physics = N
juggle  = 4
poweradd= 100
velset = 0,0
anim = 311
ctrl = 0
sprpriority = 2

[State 1050, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 47, 0
channel = 0

[State 1050, 2]
type = VelAdd
trigger1 = AnimElem = 2
x = 2

[State 1050, 3]
type = VelMul
trigger1 = AnimElem = 3
x = 2.2

[State 1050, 4]
type = VelMul
trigger1 = AnimElem = 11
x = 0

[State 1020, effect1]
type = Explod
trigger1 = AnimElem = 2
anim = F61;130
persistent = 0
postype = p1
pos = 20, 0
sprpriority = -1

[State 1050, 4]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 5
trigger3 = AnimElem = 6
trigger4 = AnimElem = 7
trigger5 = AnimElem = 9
attr = A, SA
animtype  = Medium
damage    = 18, 8
priority  = 5
guardflag = MA
pausetime = 5,9
sparkxy = -10,-70
hitsound   = S1,3
guardsound = S6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 18
ground.velocity = -4,-2.5
guard.velocity = -7
air.velocity = -4,-2.5
fall = 1

[State 1050, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Mermaid Peter
[Statedef 1040]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 100
velset = 0,0
anim = 1030
ctrl = 0
sprpriority = 2

[State 1040, Hit]
type = HitOverride
trigger1 = Animelem = 2
attr = SCA,AA,AP
stateno = 1041
time = 86
ignorehitpause = 1

[State 1040, 1]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 12
value = 112, 0
channel = 1

[State 1040, 2]
type = VelAdd
trigger1 = AnimElem = 3
x = 3

[State 1040, 3]
type = VelMul
trigger1 = AnimElem = 3
x = 0.8

[State 1050, 4]
type = VelSet
trigger1 = AnimElem = 20
x = 0

[State 1031, effect1]
type = Explod
trigger1 = AnimElem = 21
anim = 1032
persistent = 1
postype = p1
pos = -5, 0
sprpriority = -1

[State 1031, snd1]
type = PlaySnd
trigger1 = AnimElem = 21
value = 64, 0
channel = 0

[State 1030, 1]
type = PlaySnd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 11
trigger3 = AnimElem = 14
trigger4 = AnimElem = 17
value = 0, 4
channel = 0

[State 1030, 4]
type = HitDef
trigger1 = AnimElem = 9
trigger2 = AnimElem = 12
trigger3 = AnimElem = 15
trigger4 = AnimElem = 18
attr = A, SA
animtype  = Medium
damage    = 18, 4
priority  = 5
guardflag = MA
pausetime = 6,10
sparkno = 3
sparkxy = -10,-80
hitsound   = S1,3
guardsound = S6,0
ground.type = High
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -2.5,-3
guard.velocity = -7
air.velocity = -2.5,-3
fall = 1

[State 1040, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1043
ctrl = 1
;---------------------------------------------------------------------------
;Mermaid Peter hit
[Statedef 1041]
type    = S    
physics = S 
movetype= H      
juggle  = 1
velset = 0,0 
anim = 1031                  
ctrl = 0

[State 1041, 1]
type = LifeAdd
trigger1 = time = 0
value = target,gethitvar(damage)

[State 1041, 1]
type = StopSnd
trigger1 = Time = 0
channel = 1

[State 1041, 2]
type = PlaySnd
triggerall = Alive = 1
trigger1 = Time = 1
value = S11,5

[State 1041, snd1]
type = PlaySnd
trigger1 = Time = 0
value = 64, 0

[State 1041, effect1]
type = Explod
trigger1 = Time = 0
anim = 1032
persistent = 1
postype = p1
pos = 0, 0
sprpriority = 3

[State 1040, Hit]
type = HitOverride
trigger1 = Time <= 21
attr = SCA,AA,AP
stateno = 1042
time = 1
ignorehitpause = 1
slot = 0

[State 1041, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 5050
ctrl = 1
;---------------------------------------------------------------------------
;Mermaid Peter hit 2
[Statedef 1042]
type    = S    
physics = S 
movetype= H      
juggle  = 1
velset = 0,0 
anim = 1031                  
ctrl = 0

[State 1042, 1]
type = LifeAdd
trigger1 = time = 0
value = target,gethitvar(damage)

[State 1040, Hit]
type = HitOverride
trigger1 = Time <= 21
attr = SCA,AA,AP
stateno = 1042
time = 1
ignorehitpause = 1
slot = 0

[State 1042, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 5050
ctrl = 1
;---------------------------------------------------------------------------
;Mermaid Peter land
[Statedef 1043]
type    = S             
physics = N       
juggle  = 1                      
velset = 0,0 
anim = 1033                  
ctrl = 0

[State 1043, snd1]
type = PlaySnd
trigger1 = animelem = 5
value = 41, 0

[State 1043, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
[Statedef 1025]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1025, Anim] ;Custom animation
type = ChangeAnim2
trigger1 = 1
value = 1025

[State 1025, State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 1026
;------------------
[Statedef 1026]
type    = A
movetype= H
physics = N

[State 1026, Velocity]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1026, Gravity]
type = VelAdd
trigger1 = 1
y = .45

[State 1026, No scroll]
type = ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 1026, Hit wall]
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1027

[State 1026, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100
;---------------------------------------------------------------------------
[Statedef 1027]
type    = A
movetype= H
physics = N

[State 1027, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1027, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 1027, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 1027, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1027, Spark]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 1027, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 1027

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F7,0

[State 1027, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 1028
;---------------------------------------------------------------------------
[Statedef 1028]
type    = A
movetype= H
physics = N

[State 1028, 1]
type = NotHitBy
trigger1 = 1
value = , NA, NP

[State 1028, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1028, Vel X]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 1028, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1028, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1028, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100
;---------------------------------------------------------------------------
; Peter Uppercut
; This is Peter's launcher for aerial raves.
[Statedef 1110]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 120
velset = 0,0
anim = 1110
ctrl = 0
sprpriority = 2


[State 1110, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 2

[State 1110, 3] ; The big hit!
type = HitDef
trigger1 = AnimElem = 5
attr = S, SA
animtype  = Up
damage    = 60, 4
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = 0,-110
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -1,-11
guard.velocity = -6
air.velocity = -1,-8.5
airguard.velocity = -4,-4.5
p2facing = 1
fall = 1
fall.recovertime = 50
yaccel = .4

[State 1110, Grunt]
type = PlaySnd
trigger1 = AnimElem = 5
value = 5, 0

[State 1110, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Headbutt
; CNS difficulty: easy
; Notes: This uses the EnvShake controller to shake the screen. It makes the
;        move look stronger.
[Statedef 1200]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 100
velset = 0,0
anim = 1200
ctrl = 0
sprpriority = 2

[State 1200, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 3

[State 1200, Lunge Forward]
type = PosAdd
trigger1 = Time > 10 && Time < 20
x = 2

[State 1200, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 100, 6
priority  = 5
guardflag = MA
pausetime = 12,12
sparkxy = 0,-65
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 16
ground.hittime  = 28
ground.velocity = -10
ground.cornerpush.veloff = -12 ;To push far away when p2 is in corner
guard.velocity = -7
air.velocity = -3.5,-4.5
airguard.velocity = -3.5,-4.5
envshake.time = 25           
envshake.ampl = 7
envshake.freq = 176

[State 1200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Strong Blow
; CNS difficulty: easy
[Statedef 1210]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 120
velset = 0,0
anim = 1210
ctrl = 0
sprpriority = 2

[State 1210, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 3

[State 1210, Lunge Forward]
type = PosAdd
trigger1 = Time > 15 && Time < 25
x = 4

[State 1210, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 125, 9
priority  = 5
guardflag = MA
pausetime = 12,12
sparkno = 3
sparkxy = 0,-75
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 28
ground.hittime  = 25
ground.velocity = -10
ground.cornerpush.veloff = -15 ;To push far away when p2 is in corner
guard.velocity = -8
air.velocity = -4,-4.5
airguard.velocity = -4,-4.5
envshake.time = 20           
envshake.ampl = 7
envshake.freq = 176

[State 1210, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Headbutt
; CNS difficulty: easy
[Statedef 1220]
type    = S
movetype= A
physics = S
juggle  = 6
poweradd= 71
velset = 0,0
anim = 1220
ctrl = 0
sprpriority = 2


[State 1220, Lunge Forward]
type = PosAdd
trigger1 = Time > 8 && Time < 25
x = 4.5

[State 1220, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 2


[State 1220, 1]
type = PlaySnd
triggerall = random % 10 > 5
trigger1 = AnimElem = 4
value = 0,9
channel = 10

[State 1220, 1]
type = PlaySnd
triggerall = random % 10 > 5
trigger1 = AnimElem = 4
value = 5, 0
channel = 10

[State 1220, Width]
type = Width
trigger1 = time = [9,28]
value = 20,0

[State 1220, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Hard
damage    = 88, 0
getpower  = 0
priority  = 6,hit
guardflag = MA
pausetime = 15,15
sparkno = 3
sparkxy = 0,-65
hitsound   = S1,4
guardsound = S6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 32
Guard.hittime  = 9
ground.velocity = -8
ground.cornerpush.veloff = -11 ;To push far away when p2 is in corner
guard.velocity = -9
air.velocity = -5,-5
airguard.velocity = -5,-5
air.fall = 1
fall.animtype = Hard           ;Show "hard" animtype when hit for a fall
yaccel = .4                    ;Fall faster

[State 1220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Puke Puddle Start
[Statedef 2000]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 2000                       ;Change animation (Def: no change)
poweradd = 10                    ;Power to add (Def: 0)
sprpriority = 2  

[State 2000, Width]
type = Width
trigger1 = 1
value = 17,0

[State 2000, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 9
trigger2 = Animelem = 11
value = S300,1
 
[State 2000, 1]
type = PlaySnd
trigger1 = animelem = 17
value = 0, 30

[State 2000, Helper]
type = Helper
trigger1 = animelem = 17
helpertype = normal 
name = "Puke Bottle"
ID = 3054
stateno = 3051 
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 2000, Helper]
type = Helper
trigger1 = animelem = 23
helpertype = normal ;player
name = "Puke"
ID = 2001
stateno = 2001 
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0
sprpriority = -4

[State 2000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Puke
[Statedef 2001]
type    = S
movetype= A
physics = C
juggle  = 19
poweradd= 57
ctrl = 0
anim = 2001
sprpriority = -5

[State 2001, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 2001, AssertSpecial]
type = AssertSpecial
trigger1 = 1 
flag = noshadow

[State 2001, 3]
type = HitDef
trigger1 = timemod = 40,0
trigger1 = time <170
attr = C, SA
damage    = 0
hitflag = MAFD
guardflag = L
pausetime = 5,12
sparkno = -1
sparkxy = -5,-90
hitsound   = -1
guardsound = S6,0
ground.type = High
animtype = Up
ground.slidetime = 10
ground.hittime  = 0
ground.velocity = 0
air.velocity = 0,0
guard.velocity = -5
fall = 1
p2stateno = 2002
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 2001, 4]
type = destroyself
trigger1 = AnimTime = 0

[State 2001, ChangeState]
type = ChangeState
trigger1 = p2stateno =[2002,2003]
value = 2004
ctrl = 0
;---------------------------------------------------------------------------
;Puke Puddle Slide
[Statedef 2002]
type    = S
movetype= I
physics = N
juggle  = 0
poweradd= 0
ctrl = 0
anim = 5011
velset = 0.6,0
sprpriority = 2

[State 2002, ChangeAnim2]
type = ChangeAnim
trigger1 = selfanimexist(9108109) && time = 0  
value = 9108109

[State 2002, 2]
type = PlaySnd
triggerall = Alive = 1
trigger1 = time = 0
value = 11, 0
channel = 0

[State 2002, SelfState]
type = SelfState
triggerall = Alive = 1
trigger1 = time >60
value = 0
ctrl = 1

[State 2002, SelfState]
type = SelfState
triggerall = Alive = 0
trigger1 = time >60
value = 5100
ctrl = 0
;---------------------------------------------------------------------------
;Puke Dissolve
[Statedef 2004]
type    = S
movetype= I
physics = N
juggle  = 0
poweradd= 0
ctrl = 0
anim = 2003
velset = 0,0
sprpriority = -5

[State 2004, destroyself]
type = destroyself
trigger1 = animtime =0
;---------------------------------------------------------------------------
;Kung Fu Fight
[Statedef 2500]
type    = S
movetype= A
physics = S
juggle  = 16
velset = 0,0
anim = 2500
ctrl = 0
sprpriority = 2

[State 2500, PlaySnd]
type = PlaySnd
trigger1 = time = 4
value = S2500,0
channel = 0 

[State 2500, sound1]
type = PlaySnd
trigger1 = animelem = 8 
trigger2 = animelem = 14 
value = 0, 2

[State 2500, sound2]
type = PlaySnd
trigger1 = animelem = 15; && movehit
value = 0,23

[State 2500, 1]
type = PosAdd
trigger1 = AnimElem = 8
x = 28

[State 1020, Afterimage]
type = AfterImage
trigger1 = time = 15
length = 20
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -104,-104,7
PalMul      = 256,256,256
TimeGap  = 2
FrameGap = 3
Trans = Add
time = 45

[State 2500, SuperPause]
type = SuperPause
trigger1 = time = 3
time = 30
pos = 7, -62
anim = 100
sound = S20, 0
darken = 1
poweradd = -1000

[State 2500, SuperPause]
type = SuperPause
trigger1 = time = 4
time = 15
movetime = 15
pos = 7, -62
anim = -1
sound = -1
darken = 0

[State 2500, 2]
type = HitDef
trigger1 = AnimElem = 8
attr = S, NA
animtype  = Medium
damage    = 30,1
guardflag = MA
pausetime = 7,7
sparkno = 2
sparkxy = 0,-96
hitsound   = S1,3
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = -1.5
air.velocity = -1.1,-4
getpower = 0
kill = 0

[State 2500, 2]
type = HitDef
trigger1 = AnimElem = 9
attr = S, NA
animtype  = Hard
damage    = 85,2
guardflag = MA
pausetime = 15,35
sparkno = 3
sparkxy = 0,-46
hitsound   = S1,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 13
ground.velocity = -2.5
air.velocity = -1.5,-4
getpower = 0
kill = 0

[State 2500, 3]
type = HitDef
trigger1 = AnimElem = 16
attr = S, SA
animtype  = Heavy
guardflag = MA
damage    = 90, 7
getpower  = 0
priority  = 7
pausetime = 11,11
sparkno = 3
sparkxy = -10,-85
hitsound   = S1,4
guardsound = S6,0
ground.type = Low
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -0.9,-11
guard.velocity = -5
air.velocity = -0.7,-9
airguard.velocity = -4,-2
p2facing = 1
fall.animtype = Heavy
fall.recover = 0
air.fall = 1
fall = 1

[State 2500, 4] 
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Anal Torch!
[Statedef 3000]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3000
ctrl = 0
sprpriority = 2

[State 3000, Initial Pause]
type = Pause
trigger1 = AnimElem = 1
time = 20
movetime = 20

[State 3000, Super A]
type = SuperPause
trigger1 = AnimElem = 6, 1
pos = 27, -37
anim = 100
sound = S20, 0
poweradd = -2000

[State 3000, 0]
type = BGPalfx
trigger1 = AnimElem = 6
time = 160
add = 120,0,-80
color = 0

[State 3000, sound]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 12

[State 3000, Super D]
type = NotHitBy
trigger1 = AnimElem = 6
value = , NA, SA, AT
time = 11

[State 3000, Super E]
type = NotHitBy
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(14) < 0
value2 = C, NA
time = 1

[State 3000, 1]
type = PlaySnd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 23
value = 1000,1

[State 3000, 5]
type = HitDef
trigger1 = AnimElem = 12
trigger2 = AnimElem = 13
trigger3 = AnimElem = 14
trigger4 = AnimElem = 15
trigger5 = AnimElem = 16
trigger6 = AnimElem = 17
trigger7 = AnimElem = 18
trigger8 = AnimElem = 19
trigger9 = AnimElem = 20
attr = S, HA
animtype  = Hard
damage    = 18,9
getpower  = 0
priority  = 6
guardflag = MA
pausetime = 5,5
sparkno = 2
sparkxy = -10,-50
hitsound   = s1,18
guardsound = s6,0
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
guard.hittime = 15
ground.velocity = -5.5,0
air.velocity = -3,-1
air.fall = 1
fall.animtype = Hard
fall.recover = 0
palfx.time = 10
palfx.invertall = 1
palfx.color = 0
palfx.add = 192,32,0
palfx.sinadd = 0,32,0,4
fall.recover = 0
ground.cornerpush.veloff =  0
kill = 0

[State 3000, 6]
type = HitDef
trigger1 = AnimElem = 29
trigger2 = AnimElem = 30
trigger3 = AnimElem = 31
trigger4 = AnimElem = 32
trigger5 = AnimElem = 33
trigger6 = AnimElem = 34
trigger7 = AnimElem = 35
trigger8 = AnimElem = 36
trigger9 = AnimElem = 37
attr = S, HA
animtype  = Hard
damage    = 18,9
getpower  = 0
priority  = 5
guardflag = MA
pausetime = 5,5
sparkno = 2
sparkxy = -10,-50
hitsound   = s1,18
guardsound = s6,0
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
guard.hittime = 15
ground.velocity = -6
guard.velocity = -12
air.velocity = -3,-1
airguard.velocity = -3,-3
palfx.time = 40
palfx.invertall = 1
palfx.color = 0
palfx.add = 192,32,0
palfx.sinadd = 0,32,0,4
fall.recover = 0
fall.animtype = Hard
ground.cornerpush.veloff =  0
kill = 0

[State 3000, 7]
type = HitDef
trigger1 = AnimElem = 38
attr = S, HA
animtype  = Hard
damage    = 25,15
getpower  = 0
priority  = 5
guardflag = MA
pausetime = 3,5
sparkno = 2
sparkxy = -10,-60
hitsound   = s1,18
guardsound = s6,0
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
guard.hittime = 15
ground.velocity = -5, -4
guard.velocity = -12
air.velocity = -5,-4
airguard.velocity = -3,-3
palfx.time = 40
palfx.invertall = 1
palfx.color = 0
palfx.add = 192,32,0
palfx.sinadd = 0,32,0,4
fall.recover = 0
fall.animtype = Hard
fall = 1
fall.recover = 0
ground.cornerpush.veloff =  0
p2stateno = 7602

[State 3000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Nausea Nightmare
[Statedef 3050]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
anim = 3050
ctrl = 0
sprpriority = 2

[State 3050, Initial Pause]
type = Pause
trigger1 = AnimElem = 1
time = 128
movetime = 128

[State 3050, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 11
trigger2 = Animelem = 13
trigger3 = Animelem = 15
value = S300,1

[State 3050, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 19
value = S0,20

[State 3050, Super A]
type = SuperPause
trigger1 = AnimElem = 33
pos = 8, -45
anim = 100
time = 256
sound = S0,16
poweradd = -2000

[State 2000, Helper]
type = Helper
trigger1 = animelem = 34
helpertype = normal 
name = "Puke Bottle"
ID = 3054
stateno = 3051 
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 3050, 1]
type = PlaySnd
trigger1 = AnimElem = 35
value = 0, 17

[State 3050, 3]
type = HitDef
trigger1 = AnimElem = 37
trigger2 = AnimElem = 38
trigger3 = AnimElem = 39
trigger4 = AnimElem = 40
trigger5 = AnimElem = 41
trigger6 = AnimElem = 42
trigger7 = AnimElem = 43
trigger8 = AnimElem = 44
trigger9 = AnimElem = 45
trigger10 = AnimElem = 46
trigger11 = AnimElem = 47
trigger12 = AnimElem = 48
trigger13 = AnimElem = 49
trigger14 = AnimElem = 50
trigger15 = AnimElem = 51
trigger16 = AnimElem = 52
trigger17 = AnimElem = 53
trigger18 = AnimElem = 54
trigger19 = AnimElem = 55
attr = S, HA
damage    = 18, 9
getpower  = 0
priority  = 8
guardflag = MA
hitflag = MAF
pausetime = 6,4
sparkno = s3052
sparkxy = 0,-93
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 10
ground.hittime  = 13
ground.velocity = -4
guard.velocity = -4
air.velocity = -1,-1.5
airguard.velocity = -1,-1.5
air.fall = 1
yaccel = .4
fall.animtype = Hard           ;Show "hard" animtype when hit for a fall
fall = 1
palfx.time = 88
palfx.add = 189,70,8
palfx.mul = 70,162,0
palfx.color = 60
fall.recover = 0             ;Prevent p2 from recovering
fall.damage = 20             ;p2 will take 20 damage on hitting the ground
fall.envshake.ampl = 6       ;Parameters for shaking the screen on fall
fall.envshake.freq = 178
fall.envshake.time = 15
kill = 0

[State 3050, 5]
type = Explod
trigger1 = animelem = 58
anim = 3053
postype = p1
sprpriority = -1
pos = 120,0
removetime = 209

[State 3050, 6]
type = Explod
trigger1 = animelem = 58
anim = 3051
postype = p1
sprpriority = -1
pos = 0,0
removetime = 205

[State 3050, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;--------------------------------------------------------------------------
;Puke Bottle
[Statedef 3051]
type    = S
physics = N
velset = 0,0
anim = 3054
ctrl = 0
sprpriority = 3

[State 3051, PlaySnd]
type = PlaySnd
trigger1 = animelem = 9
value = S3054, 0

[State 3051, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
trigger2 = LoseKo
;-------------------------------------------------------------------------
;A.N.N.A. Collider
[statedef 3100]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
anim = 3100
ctrl = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S0,22

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = prevstateno = 1020
id = 9

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time = [1,71]
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 1400, SuperPause]
type = SuperPause
trigger1 = animelem = 1
time = 40
anim = 100
sound = S20,0
pos = 2, -57
darken = 1
p2defmul = 0
poweradd = -3000
unhittable = 1

[State 1400, Explod]
type = Explod
trigger1 = animelem = 2
anim = 3102
ID = 1402
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 7100
ID = 1402
pos = 0,-60
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
scale = .5,.5
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 1

[State 1020, HyperBg1]
type = Explod
trigger1 = animelem = 1
anim = 99988
ID = 32710
pos = 0,0
sprpriority = -7
postype = front
bindtime = -1
removetime = -1
removeongethit = 1
facing = ifelse(Facing = -1, -1, 1)
supermovetime = 99999999
pausemovetime = 99999999
shadow = 68,68,68
ownpal = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 18
id = 32710

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 15
id = 1402

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 20
value = S8500,0

[State 1400, 5]
type = HitDef
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
trigger4 = AnimElem = 5
trigger5 = AnimElem = 6
trigger6 = AnimElem = 7
trigger7 = AnimElem = 8
trigger8 = AnimElem = 9
trigger9 = AnimElem = 10
trigger10 = animelem = 11
trigger11 = animelem = 12
trigger12 = animelem = 13
attr = S, HA
animtype  = Heavy
damage    = 10,3
getpower  = 0
guardflag = MA 
sparkno = 2
sparkxy = -20,-50
hitsound   = s9006,0
guardsound = S6, 0
ground.type = High
ground.slidetime = 0
ground.hittime  = 15
ground.velocity = -7.5,0
air.velocity = -4.5,-4
fall.animtype = Hard
fall.recover = 0
palfx.time = 40
palfx.color = 0
palfx.add = -192,32,220
palfx.sinadd = 0,32,0,4
fall.recover = 0
kill = 0
guard.kill = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = movehit
time = 1
id = -1
pos = 15,0

[State 0, ChangeState]
type = ChangeState
trigger1 = Movehit
value = 3101
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------
;A.N.N.A Part 2
[statedef 3101]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
anim = 3101
ctrl = 0
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time = [1,71]
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 12
id = 1402

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 25
id = 32710

[State 1400, 5]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
trigger3 = AnimElem = 3
trigger4 = AnimElem = 4
trigger5 = AnimElem = 5
trigger6 = AnimElem = 6
trigger7 = AnimElem = 7
trigger8 = AnimElem = 8
trigger9 = AnimElem = 9
trigger10 = animelem = 10
trigger11 = animelem = 11
attr = S, HA
animtype  = Light
damage    = 12,3
getpower  = 0
priority  = 6
guardflag = MA
pausetime = 3,3
sparkno = 2
sparkxy = -20,-50
hitsound   = s9006,0
guardsound = S6, 0
ground.type = high
ground.slidetime = 0
ground.hittime  = 1
ground.velocity = -3,-2
air.velocity = -3,-2
air.fall = 1
fall.animtype = Hard
fall.recover = 0
palfx.time = 40
palfx.color = 0
palfx.add = -192,32,220
palfx.sinadd = 0,32,0,4
fall.recover = 0
kill = 0
guard.kill = 0

[State 1400, 5]
type = HitDef
trigger1 = AnimElem = 12
attr = S, HA
animtype  = Light
damage    = 15,3
getpower  = 0
priority  = 6
guardflag = MA
pausetime = 3,3
sparkno = 2
sparkxy = -20,-50
hitsound   = s9006,0
guardsound = S6, 0
ground.type = high
ground.slidetime = 0
ground.hittime  = 1
ground.velocity = -3,-6
air.velocity = -3,-6
air.fall = 1
fall.animtype = Hard
fall.recover = 0
palfx.time = 40
palfx.color = 0
palfx.add = -192,32,220
palfx.sinadd = 0,32,0,4
fall.recover = 0
kill = 0
guard.kill = 0

[State 1401, Afterimage]
type = AfterImage
trigger1 = animelem = 16
length = 10
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -104,-104,7
PalMul      = 256,256,256
TimeGap  = 2
FrameGap = 2
Trans = Add
time = 45

;Dash
[State 0, VelSet]
type = VelSet
trigger1 = animelem = 16
x = 50
y = 0

;DIE!
[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 16
trigger2 = AnimElem = 17
trigger3 = AnimElem = 18
trigger4 = AnimElem = 19
trigger5 = AnimElem = 20
trigger6 = animelem = 21
trigger7 = animelem = 22
value = S0,9
volume = 0
channel = 1
freqmul = 1.0
pan = 0

[State 0, Width]
type = Width
trigger1 = AnimElem = 16
trigger2 = AnimElem = 17
trigger3 = AnimElem = 18
trigger4 = AnimElem = 19
trigger5 = AnimElem = 20
trigger6 = animelem = 21
trigger7 = animelem = 22
edge = 10,10
player = 10,10
value = 10,10

;Jet Sound
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 16
value = S9007,0
volume = 0
channel = -1
freqmul = 1.0
loop = 0
pan = 0

;Jet Sprites
[State 0, Explod]
type = Explod
trigger1 = animelem = 16
anim = 705
ID = 705
pos = -60,-5
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 16
anim = 705
ID = 705
pos = -2,-20
postype = p1
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
scale = 1,1
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 23
id = 705

;dust
[State 0, Explod]
type = Explod
trigger1 = animelem = 16
anim = 6011
ID = 6011
pos = -42,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = 1,1
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

;[State 0, Helper]
;type = Helper
;trigger1 = animelem = 16
;helpertype = normal
;name = "dash help"
;ID = 6016
;stateno = 6016
;pos = 0,0
;postype = p1
;facing = 1
;keyctrl = 0
;ownpal = 0

[State 1400, 5]
type = HitDef
trigger1 = AnimElem = 16
trigger2 = AnimElem = 17
trigger3 = AnimElem = 18
trigger4 = AnimElem = 19
trigger5 = AnimElem = 20
trigger6 = animelem = 21
attr = S, HA
animtype  = hard
damage    = 46,4
getpower  = 0
priority  = 6
guardflag = MA
pausetime = 11,11
sparkno = 3
sparkxy = -10,-80
hitsound   = s1,4
guardsound = s6, 0
ground.type = Low
ground.slidetime = 0
ground.hittime  = 1
ground.velocity = -5,-1
air.velocity = -5,-1
air.fall = 1
fall.animtype = Hard
fall.recover = 0
envshake.time = 20
envshake.ampl = 7
envshake.freq = 156
fall.recover = 0
kill = 0
guard.kill = 0

[State 1400, 5]
type = HitDef
trigger1 = AnimElem = 22
attr = S, HA
animtype  = hard
damage    = 45,4
getpower  = 0
priority  = 6
guardflag = MA
pausetime = 12,12
sparkno = 3
sparkxy = -10,-80
hitsound   = s1,4
guardsound = s6, 0
ground.type = Low
ground.slidetime = 0
ground.hittime  = 1
ground.velocity = -10,-5
air.velocity = -10,-5
air.fall = 1
fall.animtype = Hard
fall.recover = 0
envshake.time = 20
envshake.ampl = 7
envshake.freq = 156
fall.recover = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;--------------------------------------------------------------------------
;Clown Peter
[Statedef 3150]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 3150
ctrl = 0
sprpriority = 2

[State 3150, PlaySnd]
type = PlaySnd
triggerall = MoveHit && Enemynear, Anim = 9108112
trigger1 = Time = 32
value = 57,0

[State 3150, Super A]
type = SuperPause
trigger1 = AnimElem = 3
pos = 2, -40
anim = 102
sound = S20,0
poweradd = -2000

[State 3150, Super B]
type = BGPalFX
trigger1 = AnimElem = 3
add=-50,-50,-50
mul=120,120,120
time = 214
ignorehitpause = 1

[State 3150, Super D]
type = NotHitBy
trigger1 = AnimElem = 3
value = , NA, SA, AT
time = 2

[State 3150, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 58,0

[State 3150, PlaySnd2]
type = PlaySnd
trigger1 = AnimElem = 9
value = 0,4

[State 3150, 3]
type = VelAdd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 6
trigger3 = AnimElem = 7
trigger4 = AnimElem = 8
x = 4.4

[State 3150, effect1]
type = Explod
trigger1 = AnimElem = 5
anim = F120
persistent = 0
postype = p1
pos = -10, -3
sprpriority = -1
scale = 2.9,1.4

[State 3150, effect2]
type = Explod
trigger1 = AnimElem = 6
anim = F120
persistent = 0
postype = p1
pos = -15, 0
sprpriority = -1
scale = 2,1.1

[State 3150, effect3]
type = Explod
trigger1 = AnimElem = 7
anim = F120
persistent = 0
postype = p1
pos = -10, 0
sprpriority = -1
scale = 1.5,1

[State 3150, 6]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 6
trigger3 = AnimElem = 7
trigger4 = AnimElem = 8
attr = S, HA
animtype  = Medium
damage    = 5,3
priority  = 6
guardflag = MA
pausetime = 2,8
sparkno = 2
sparkxy = -10,-70
hitsound   = S1,2
guardsound = S6,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 22
ground.velocity = -30,0
ground.cornerpush.veloff = -10
air.velocity = -1,-.8
air.fall = 1
fall.animtype = Hard
fall.recover = 0
getpower = 0
kill = 0

[State 3150, VelAdd]
type = VelAdd
trigger1 = AnimElem = 9
x = 3.2

[State 3150, 3]
type = HitDef
trigger1 = AnimElem = 10
attr = S, HA
animtype  = Hard
damage    = 350, 125
priority  = 12
guardflag = MA
pausetime = 1,12
sparkno = 12
sparkxy = -10,-83
hitsound   = S1,3
guardsound = S6,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 22
ground.velocity = -25
ground.cornerpush.veloff = -10 ;To push far away when p2 is in corner
guard.velocity = -8
air.velocity = -14,-4.5
airguard.velocity = -4,-4.5
palfx.time = 8
palfx.add = 32,16,50
palfx.mul = 164,32,50
palfx.color = 100 
fall.envshake.ampl = 6    
fall.envshake.freq = 178
fall.envshake.time = 15
p2stateno = ifelse(p2statetype != A,8007,8008)
getpower = 0

[State 3150, ChangeAnim]
type = ChangeAnim
triggerall = Enemynear, Stateno = 8007 || Enemynear, Stateno = 8008
trigger1 = animtime = 0
value = 3151

[State 3150, ChangeState]
type = ChangeState
trigger1 = Enemynear, Stateno != 8007 && Anim = 3151
trigger1 = Enemynear, Stateno != 8008 && Anim = 3151
trigger2 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Steroid Peter Punch
[statedef 3200]
type    = S
movetype= A
physics = S
juggle  = 10
poweradd= -3000
velset = 0,0
anim = 3200
ctrl = 0
sprpriority = 2

[State 1020, NotHitBy]
type = NotHitBy
trigger1 = time = [0, 100] 
value = SCA
time = 1

[State 1020, NotHitBy]
type = NotHitBy
trigger1 = time = [101, 127] 
value = ,AP
time = 1

[State 1020, Width]
type = Width
trigger1 = time = [127,187]
value = 10,0

[State 1020, Initial Pause]
type = Pause
trigger1 = AnimElem = 1, 2
time = 20
movetime = 20

[State 1020, SuperPause]
type = SuperPause
trigger1 = AnimElem = 5, 2
pos = 7, -62
anim = 100
sound = S20, 0

[State 1020, Transform Pause]
type = Pause
trigger1 = AnimElem = 6, 2
time = 90
movetime = 90

[State 1020, BGPalFX]
type = BGPalFX
trigger1 = AnimElem = 5
time = 100
add = 0,0,0
mul = 100,100,100
sinadd = 0,0,0,1
invertall = 0
color = 256

[State 1020, Afterimage]
type = AfterImage
trigger1 = Animelem = 27
length = 20
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -104,-104,7
PalMul      = 256,256,256
TimeGap  = 2
FrameGap = 3
Trans = Add
time = 15

[State 1020, Blink Yellow]
type = PalFX
trigger1 = Animelem = 14
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 1020, Helper]
type = Helper
trigger1 = animelem = 13
helpertype = normal 
name = "Steroids"
ID = 1021
stateno = 1021 
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
sprpriority = -1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

;Transform Quote
[State 1020, 1]
type = PlaySnd
trigger1 = AnimElem = 19
value = 0, 22

[State 1020, 2]
type = PlaySnd
trigger1 = AnimElem = 28
value = 0,3

[State 1020, 3]
type = PlaySnd
trigger1 = AnimElem = 30
value = 0,9

[State 1020, 2]
type = VelSet
trigger1 = AnimElem = 27
x = -7

[State 1020, 2]
type = VelAdd
trigger1 = AnimElem = 30
x = 25

[State 3200, 5]
type = HitDef
trigger1 = AnimElem = 30
attr = S, HA
animtype  = Hard
damage    = 475, 225
getpower  = 0
priority  = 9,hit
guardflag = MA
hitflag = MAF
pausetime = 10,10
sparkno = 3
sparkxy = -10,-60
hitsound   = s1,4
guardsound = s6,0
ground.type = High
ground.slidetime = 50
ground.hittime  = 0
Guard.hittime  = 15
ground.velocity = -16,-8
ground.cornerpush.veloff = -11 ;To push far away when p2 is in corner
guard.velocity = -10
air.velocity = -10,-6
airguard.velocity = -7,-6
air.fall = 1
fall = 1
fall.animtype = Hard           ;Show "hard" animtype when hit for a fall
yaccel = .4   
p2stateno = 4011  
envshake.time = 30
envshake.ampl = 6
envshake.freq = 160

[State 3200, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Roadhouse Kick
; CNS difficulty: easy
[Statedef 4000]
type    = S
movetype= A
physics = S
juggle  = 6
poweradd= 75
velset = 0,0
anim = 4000
ctrl = 0
sprpriority = -2

[State 4000, SprPriority]
type = SprPriority
trigger1 = AnimElem = 4
value = 3

[State 4000, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 2

[State 4000, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 9

[State 4000, 1]
type = PlaySnd
trigger1 = AnimElem = 13
value = s4000, 0
channel = 18

[State 4000, CtrlSet]
type = CtrlSet
trigger1 = time = 41
value = 1

[State 4000, HitBy]
type = HitBy
trigger1 = time< 13
value = SCA,NT,ST,HT
time = 1

[State 4000, 2]
type = HitDef
triggerall = p2stateno != 4014
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 105, 8
priority  = 7,hit
guardflag = MA
pausetime = 10,10
sparkno = 3
sparkxy = 0,-65
hitsound   = S1,4
guardsound = s6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 32
Guard.hittime  = 16
ground.velocity = -8,-11
ground.cornerpush.veloff = -11 ;To push far away when p2 is in corner
guard.velocity = -9
air.velocity = -8,-5
airguard.velocity = -5,-5
air.fall = 1
fall = 1
fall.animtype = Hard           ;Show "hard" animtype when hit for a fall
yaccel = .4   
p2stateno = 4011  

[State 4000, 2]
type = HitDef
triggerall = p2stateno = 4014
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 55, 0
priority  = 7,hit
guardflag = MA
pausetime = 10,10
sparkno = 3
sparkxy = 0,-65
hitsound   = S1,4
guardsound = s6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 32
Guard.hittime  = 16
ground.velocity = -8,-4
ground.cornerpush.veloff = -11 ;To push far away when p2 is in corner
guard.velocity = -9
air.velocity = -8,-3
airguard.velocity = -5,-5
air.fall = 1
fall = 1
fall.animtype = Hard           ;Show "hard" animtype when hit for a fall
yaccel = .4    

[State 4000, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Roadhouse Kick EX
; CNS difficulty: easy
[Statedef 4010]
type    = S
movetype= A
physics = S
juggle  = 9
poweradd= -500
velset = 0,0
anim = 4010
ctrl = 0
sprpriority = 2

[State 4010, HitBy]
type = HitBy
trigger1 = time< 7
value = SCA,NT,ST,HT
time = 1

[State 4010, 1]
type = PlaySnd
trigger1 = AnimElem = 13
value = s4000, 0
channel = 18

[State 4010, Explod]
type = Explod
trigger1 = animelem = 1
anim = 7500
pos = 0,-70
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999999
scale = 1,1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 4010, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 4010, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S20,1

[State 4010, CtrlSet]
type = CtrlSet
trigger1 = time = 30
value = 1

[State 4010, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 2

[State 4010, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 9

[State 4010, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 102, 8
priority  = 7,hit
guardflag = MA
pausetime = 10,10
sparkno = 3
sparkxy = 0,-65
hitsound   = S1,4
guardsound = s6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 32
Guard.hittime  = 16
ground.velocity = -8,-8
ground.cornerpush.veloff = -11 ;To push far away when p2 is in corner
guard.velocity = -9
air.velocity = -8,-5
airguard.velocity = -5,-5
air.fall = 1
fall = 1
fall.animtype = Hard           ;Show "hard" animtype when hit for a fall
yaccel = .4 
p2stateno = 4011                 ;Fall faster
getpower = 0

[State 4000, 2]
type = HitDef
triggerall = p2stateno = 4014
trigger1 = Time = 0
attr = S, SA
animtype  = Hard
damage    = 55, 0
priority  = 7,hit
guardflag = MA
pausetime = 10,10
sparkno = 3
sparkxy = 0,-65
hitsound   = S1,4
guardsound = s6,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 32
Guard.hittime  = 16
ground.velocity = -8,-4
ground.cornerpush.veloff = -11 ;To push far away when p2 is in corner
guard.velocity = -9
air.velocity = -8,-3
airguard.velocity = -5,-5
air.fall = 1
fall = 1
fall.animtype = Hard           ;Show "hard" animtype when hit for a fall
yaccel = .4    
getpower = 0

[State 4010, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------------
;------------------
; Hit by Roadhouse - shaking from the hit
; (a custom gethit state)
[Statedef 4011]
type    = A
movetype= H
physics = N
velset = 0,0

[State 4011, Anim] ;Custom animation
type = ChangeAnim2
trigger1 = 1
value = 1025

[State 4011, State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 4012

;------------------
; Hit by Fast Kung Fu Palm - flying through the air
; (a custom gethit state)
[Statedef 4012]
type    = A
movetype= H
physics = N

[State 4012, Velocity]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 4012, Gravity]
type = VelAdd
trigger1 = 1
y = .45

[State 4012, No scroll]
type = ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 4012, Hit wall]
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 4013

[State 4012, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------
; Hit by Fast Kung Fu Palm - hit wall
; (a custom gethit state)
[Statedef 4013]
type    = A
movetype= H
physics = N

[State 4013, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 4013, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 4013, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 4013, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 4013, Spark]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 4013, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 1027

[State 4013, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F7,0

[State 4013, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 4014

;------------------
; Hit by Fast Kung Fu Palm - bounce off wall
; (a custom gethit state)
[Statedef 4014]
type    = A
movetype= H
physics = N

;[State 4014, 1]
;type = NotHitBy
;trigger1 = 1
;value = , SA, SP

[State 4014, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 4014, Vel X]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 4014, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 4014, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 4014, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 4014, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 4014, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 4014, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 4014, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------------ 2
[Statedef 4020]
type = A
movetype = H
physics = N
velset =-7,-10
ctrl = 0

[State 4020, PosSet]
type = PosSet
triggerall = facing = -1
trigger1 = backedgedist <-18
x = -250

[State 4020, PosSet]
type = PosSet
triggerall = facing = 1
trigger1 = backedgedist <-18
x = 250

[State 4020, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 4020,ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 1025

[State 4020, veladd]
type = veladd
trigger1 = 1
y = .45

[State 4020, SelfState]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100
;---------------------------------------------------------------------------
;Butt slam Air startup
; CNS difficulty: easy
[Statedef 4500]
type    = A
movetype= A
physics = N
juggle  = 15
velset = 0,0
poweradd= 50
ctrl = 0
anim = 4500
sprpriority = 2

[State 4500, 2]
type = PlaySnd
trigger1 = Time = 18
value = 0, 2

[State 4500, 2]
type = PlaySnd
trigger1 = Time = 1
value = 5, 0

[State 4500, PosAdd]
type = PosAdd
trigger1 = time = 0
y = -13

[State 4500, VelAdd]
type = VelAdd
trigger1 = time = 18
y = 15.9

[State 4500, 3]
type = HitDef
trigger1 = Time = 0
attr = A, SA
damage = 100,10
hitflag = MAFD
guardflag = HA
priority = 6,hit
pausetime = 3,12
sparkno = 3
sparkxy = -10,-15
hitsound   = s1,4
guardsound = S6,0
animtype = Med
ground.type = High
ground.slidetime = 17
ground.hittime  = 12
guard.hittime  = 10
ground.velocity = -5,-6
air.velocity = -3,-4
fall = 1
fall.recover = 0

[State 4500, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 10
freq = 60

[State 4500]
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 4501
ctrl = 0

;--------------------------------------------------------------------------
;Land
; CNS difficulty: easy
[Statedef 4501]
type    = S
movetype= A
physics = N
juggle  = 4
velset = 0,0
ctrl = 0
anim = 4501
sprpriority = 2

[State 4501, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 4501, PlayerPush]
type = PlayerPush
trigger1 = 1 
value = 0

[State 4501, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S1300,0

;[State 4501, NotHitBy]
;type = NotHitBy
;trigger1 = time = 1
;value = SCA
;time = 25

[State 4501, MakeDust]
type = MakeDust
trigger1 = time = 1
pos = 30,0
pos2 = -30,0
spacing = 1

[State 4501, MakeDust]
type = MakeDust
trigger1 = time = 1
pos = 0,0
spacing = 1       


[State 4501, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------------------------------------------------------------
;Buttstomp from ground
[Statedef 4510]
type    = A
movetype= I
physics = N
velset = 2.3,-11
anim = 1055
hitdefpersist = 1 
ctrl = 0

[State 4510 PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S0,0

[State 4510, NotHitBy]
type = NotHitBy
trigger1 = 1 
value = ,AP
time = 1

[State 4510, 1] 
type = VelAdd
trigger1 = 1
y = .45

[State 4510, 3] 
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -190
value = 4500
;-----------------------------------------------------------------------
;Buttstomp from ground
[Statedef 4511]
type    = A
movetype= I
physics = N
velset = 4.5,-11
anim = 1055
hitdefpersist = 1 
ctrl = 0

[State 4511 PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S0,1

[State 4511, NotHitBy]
type = NotHitBy
trigger1 = 1 
value = ,AP
time = 1

[State 4511, 1] 
type = VelAdd
trigger1 = 1
y = .45

[State 4511, 3] 
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -190
value = 4500
;-----------------------------------------------------------------------
;Buttstomp from ground
[Statedef 4512]
type    = A
movetype= I
physics = N
velset = 7,-11
anim = 1055
hitdefpersist = 1 
ctrl = 0

[State 4512 PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S0,2

[State 4512, NotHitBy]
type = NotHitBy
trigger1 = 1 
value = ,AP
time = 1

[State 4512, 1] 
type = VelAdd
trigger1 = 1
y = .45

[State 4512, 3] 
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -190
value = 4500
;---------------------------------------------------------------------------
;Butt slam Air startup
; CNS difficulty: easy
[Statedef 4600]
type    = A
movetype= A
physics = N
juggle  = 15
velset = 0,0
poweradd= 0
ctrl = 0
anim = 4500
sprpriority = 2

[State 4600, 2]
type = PlaySnd
trigger1 = Time = 18
value = 0, 2

[State 4600, 2]
type = PlaySnd
trigger1 = Time = 1
value = 5, 0

[State 4600, PosAdd]
type = PosAdd
trigger1 = time = 0
y = -13

[State 4600, VelAdd]
type = VelAdd
trigger1 = time = 18
y = 25.5

[State 4600, 3]
type = HitDef
trigger1 = Time = 0
attr = A, SA
damage = 100,10
hitflag = MAFD
guardflag = HA
priority = 6,hit
pausetime = 3,12
sparkno = 3
sparkxy = -10,-15
hitsound   = s1,4
guardsound = S6,0
animtype = Med
ground.type = High
ground.slidetime = 17
ground.hittime  = 12
guard.hittime  = 10
ground.velocity = -5,-6
air.velocity = -3,-4
fall = 1
fall.recover = 0
getpower= 0

[State 4600, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 10
freq = 60

[State 4600]
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 4601
ctrl = 0
;--------------------------------------------------------------------------
;Land
; CNS difficulty: easy
[Statedef 4601]
type    = S
movetype= A
physics = N
juggle  = 4
velset = 0,0
ctrl = 0
anim = 4501
sprpriority = 2

[State 4601, Helper]
type = Helper
trigger1 = time = 1 
helpertype = normal ;player
name = "Star" 
ID = 4615
stateno = 4615
pos = 65,-30
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 4601, Helper]
type = Helper
trigger1 = time = 1 
helpertype = normal ;player
name = "Star2" 
ID = 4616
stateno = 4616
pos = -55,-30
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 4601, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 4601, PlayerPush]
type = PlayerPush
trigger1 = 1 
value = 0

[State 4601, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S1300,0

;[State 4501, NotHitBy]
;type = NotHitBy
;trigger1 = time = 1
;value = SCA
;time = 25

[State 4601, MakeDust]
type = MakeDust
trigger1 = time = 1
pos = 30,0
pos2 = -30,0
spacing = 1

[State 4601, MakeDust]
type = MakeDust
trigger1 = time = 1
pos = 0,0
spacing = 1       


[State 4601, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; EX Buttstomp from ground
[Statedef 4610]
type    = A
movetype= I
physics = N
velset = 3.6,-12
anim = 1055
hitdefpersist = 1 
poweradd = -500
ctrl = 0

[State 4610, Explod]
type = Explod
trigger1 = animelem = 1
anim = 7500
pos = 0,-70
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999999
scale = 1,1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 4610, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 4610, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S20,1

[State 4610 PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S0,0

[State 4610, NotHitBy]
type = NotHitBy
trigger1 = 1 
value = SCA
time = 1

[State 4610, 1] 
type = VelAdd
trigger1 = 1
y = .45

[State 4610, 3] 
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -190
value = 4611
;---------------------------------------------------------------------------
;EX Butt slam Air startup
; CNS difficulty: easy
[Statedef 4611]
type    = A
movetype= A
physics = N
juggle  = 15
velset = 0,0
poweradd= 0
ctrl = 0
anim = 4500
sprpriority = 2

[State 4600, 2]
type = PlaySnd
trigger1 = Time = 18
value = 0, 2

[State 4600, 2]
type = PlaySnd
trigger1 = Time = 1
value = 5, 0

[State 4600, PosAdd]
type = PosAdd
trigger1 = time = 0
y = -13

[State 4600, VelAdd]
type = VelAdd
trigger1 = time = 18
y = 25.5

[State 4600, 3]
type = HitDef
trigger1 = Time = 0
attr = A, SA
damage = 130,20
hitflag = MAFD
guardflag = HA
priority = 6,hit
pausetime = 3,12
sparkno = 3
sparkxy = -10,-15
hitsound   = s1,4
guardsound = S6,0
animtype = Med
ground.type = High
ground.slidetime = 17
ground.hittime  = 12
guard.hittime  = 10
ground.velocity = -5,-6
air.velocity = -3,-4
fall = 1
fall.recover = 0
getpower= 0

[State 4600, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 10
freq = 60

[State 4600]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 4601
ctrl = 0
;-----------------------------------------------------------------------
;---------------------------------------------------------------------------
; Star 1
; CNS difficulty: easy
[Statedef 4615]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 4502                      ;Change animation (Def: no change)
poweradd = 0                    ;Power to add (Def: 0)
sprpriority = 6                  ;Set p1's sprite layering priority to 2 (in front)

[State 4615, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, SP                    
damage = 12, 2                 
animtype = Light                
guardflag = MA                   
hitflag = MAF                   
priority = 5, Hit               
pausetime = 6, 6                
sparkno = 0                     
sparkxy = -10, -6              
hitsound = S1, 2                  
guardsound = S6, 0            
ground.type = High              
ground.slidetime = 6
ground.hittime  = 18 
guard.hittime = 18          
ground.velocity = -8
guard.velocity = -15
airguard.velocity = -5.9,-.8     
air.type = High                 
air.velocity = -5.4,-3         
air.hittime = 12  
getpower = 0 
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 4615, 7]
type = destroySelf
trigger1 = AnimTime = 0
;---------------------------------------------------------------------------'
; Star 2
; CNS difficulty: easy
[Statedef 4616]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 4502                      ;Change animation (Def: no change)
poweradd = 0                    ;Power to add (Def: 0)
sprpriority = 6                  ;Set p1's sprite layering priority to 2 (in front)

[State 4616, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, SP                    
damage = 12, 2                 
animtype = Light                
guardflag = MA                   
hitflag = MAF                   
priority = 5, Hit               
pausetime = 6, 6                
sparkno = 0                     
sparkxy = -10, -6              
hitsound = S1, 2                  
guardsound = S6, 0            
ground.type = High              
ground.slidetime = 6
ground.hittime  = 18 
guard.hittime = 18          
ground.velocity = 8
guard.velocity = 15
airguard.velocity = 5.9,-.8     
air.type = High                 
air.velocity = 5.4,-3         
air.hittime = 12  
getpower = 0 
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 4616, 7]
type = DestroySelf
trigger1 = AnimTime = 0
;---------------------------------------------------------------------------
; Downed get-hit (hit ground from fall)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 5100, PlaySnd]
type = PlaySnd
triggerall = Alive
trigger1 = Time = 0
value = S1,13
channel = 0

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;Downed get-hit (lying down)

[State 5100, 8]
type = Explod
trigger1 = Time = 1
anim = F(60 + (sysvar(1) > Const720p(20)) + (sysvar(1) > Const720p(56)))
pos = 0, 0
sprpriority = ifelse (sysvar(1) <= Const720p(56), -10, 10)

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100,10]
type = PlaySnd
trigger1 = Time = 1
value = S1,15
persistent = 0

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101 ;Downed get-hit (bounce off ground)

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20
;---------------------------------------------------------------------------
; Downed get-hit (lying down)
[Statedef 5110]
type    = L
movetype= H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
value = S1,16

[State 5110, 7]
type = Explod
trigger1 = Time = 0
trigger1 = !SysVar(0)
anim = F(60 + (sysvar(1) > Const720p(20)) + (sysvar(1) > Const720p(56)))
pos = 0, 0
sprpriority = ifelse (sysvar(1) <= Const720p(56), -10, 10)

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14] ;Friction
type = VelSet
trigger1 = abs(Vel x) < Const(movement.down.friction.threshold)
persistent = 0
x = 0

[State 5110, 15]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 16]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine
;---------------------------------------------------------------------------
;Downed get-hit (lying defeated)
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 5150, 1] ;Special anim
type = ChangeAnim
triggerall = Name = "Peter Griffin" && Authorname = "The 14th Doctor"
triggerall = prevstateno != 8007
triggerall = prevstateno != 8008
triggerall = SelfAnimExist(5151)
trigger1 = Time = 0
value = 5150 + random%2

[State 5150, 2] ;Normal anim
type = ChangeAnim
triggerall = prevstateno != 8007
triggerall = prevstateno != 8008
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
triggerall = prevstateno != 8007
triggerall = prevstateno != 8008
trigger1 = Time = 0
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
triggerall = prevstateno != 8007
triggerall = prevstateno != 8008
trigger1 = MatchOver = 1
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
triggerall = prevstateno != 8007
triggerall = prevstateno != 8008
trigger1 = Time = 0
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5150,9]
type = AssertSpecial
trigger1 = prevstateno = 8007 && !selfanimexist(9108112)
trigger2 = prevstateno = 8008 && !selfanimexist(9108112)
flag = invisible
ignorehitpause = 1
;---------------------------------------------------------------------------
;Air get-hit (fall recovery in air)
[Statedef 5210]
type    = A
movetype= I
physics = N
anim = 5210
ctrl = 0

[State 5210, 1] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5210, 1]
type = PosFreeze
trigger1 = Time = 0
value = 4

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -20

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
x = .8
y = .8

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
y = -4.5

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
trigger1 = Vel Y > 0
y = .5

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -3
y = -2

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -2
y = -1

[State 5210, 2] ;Go up
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdup"
y = -2

[State 5210, 2] ;Go down
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holddown"
y = 1.5

[State 5210, 2] ;Go fwd
type = VelMul
trigger1 = Time = 4
trigger1 = Command = "holdfwd"
x = 1

[State 5210, 2] ;Go back
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdback"
x = -1

;[State 5210, 3]
;type = NotHitBy
;trigger1 = Time = 0
;value = SCA
;time = 15

[State 5210, 4]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 5210, 5]
type = VelAdd;Gravity
trigger1 = Time >= 4
y = .35

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMP_LAND
ctrl = 1
;---------------------------------------------------------
;Decapitation
[Statedef 91230]
type = S
movetype = H
;physics = A
velset = 0, 0
anim = 91230
ctrl = 0

[State 182, 1]
type = screenbound
trigger1 = 1 
movecamera = 1,0
value = 1

[State 210, Width]
type = Width
trigger1 = alive = 1
value = 50,50

;Chopped Head
[State 1201, helper]
type = Helper
trigger1 = AnimElem = 2
name = "Head"
ID = 4011
stateno = 912320
postype = p1
pos = -5,-34
sprpriority = 7

[State 220, 3]
type = changestate
trigger1 = time = 140
value = 91231
ctrl = 0
;---------------------------------------------------------------------------
;Decapitation
[Statedef 91231]
type = S
movetype = H
ctrl = 0
physics = N
velset = 0, 0

[State 700, 10]
type = Changeanim
trigger1 = Time = 0
value = 91231

[State 182, 1]
type = screenbound
trigger1 = 1 
movecamera = 1,0
value = 1

[State 1050, 1]
type = veladd
trigger1 = 1
y = .3

[State 3050, 5]
type = sprpriority
trigger1 = 1
value = 1

[State 210, Width]
type = Width
trigger1 = alive = 1
value = 50,50

[State 700, 10]
type = selfstate
trigger1 = pos Y >= -20 && vel y > 0
value = 5150
ctrl = 0
;---------------------------------------------------------------------------
;Chopped Head - Flying
[Statedef 912320]
type = A
movetype= I
physics = N
poweradd= 0
ctrl = 0
velset = -1,-4
sprpriority = 7
anim = 912320

[State 210, Width]
type = veladd
trigger1 = 1
y = .3

[State 220, 3]
type = velset
trigger1 = pos Y >= -0 && vel y > 0
y = -4.8

[State 191, Snd 2]
type = PlaySnd
trigger1 = pos Y >= -6 && vel y > 0
value = F7,0
freqmul = 1.3

[State 220, 3]
type = changestate
trigger1 = time = 73
value = 912321
;---------------------------------------------------------------------------
;Chopped Head - On Ground
[Statedef 912321]
type = A
movetype= I
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 7
anim = -1

[State 220, 3]
type = destroyself
trigger1 = time = 2

[State 1010, 9] 
type = explod
trigger1 = time = 1
anim = 912321
persistent = 0
pos = 0,0
postype = p1
sprpriority = 3
shadow = -1
;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S
ctrl = 0

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundsexisted = 0
value = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundsexisted = 0
fvalue = 0

[State 5900, 3] ;Change palette
type = RemapPal
trigger1 = 1
source = 1,1
dest = 1,palno

[State 5900, 4] ;Intro for round 1
type = ChangeState
trigger1 = roundno = 1
value = 190

[State 5900, 5] ;All other rounds
type = ChangeState
trigger1 = 1
value = 0
;---------------------------------------------------------------------------
; Zero/Alpha Counter
[Statedef 8000]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 1110
ctrl = 0
sprpriority = 2

[State 8000, 0]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 8000, PalFXWiz]
type = PalFX
trigger1 = time = 0
time = 15
add = -20,-20,200
mul = 256,256,256
sinadd = 56,56,0,1
invertall = 0
color = 0

[State 8000, 1]
type = Pause
trigger1 = Anim = 1110
trigger1 = AnimElem = 4
movetime = 20
time = 20

[State 8000, 1]
type = PowerAdd
trigger1 = Anim = 1110
trigger1 = AnimElem = 4
value = -1000

[State 8000, 1]
type = PlaySnd
trigger1 = Anim = 1110
trigger1 = AnimElem = 4
value = S8000, 0

[State 8000, 1]
type = PlaySnd
trigger1 = Anim = 1110
trigger1 = AnimElem = 8
value = S8000, 1

[State 8000, 2]
type = EnvColor
trigger1 = Anim = 1110
trigger1 = AnimElem = 4
value = 250,250,250 
time = 1

[State 8000, 2]
type = Explod
trigger1 = Anim = 1110
trigger1 = AnimElem = 4
anim = 8004	;Counter Spark
pos = 0,-35
postype = p1
bindtime = -1
persistent = 0
pausemovetime = -1
ownpal = 1
sprpriority = 4

[State 8000, 3]
type = ChangeAnim
trigger1 = Anim = 1110
trigger1 = AnimTime = 0
value = 1210

;[State 8000, 4]
;type = PlaySnd
;trigger1 = time = 15
;value = S5,0
;channel = 0

;[State 8000, 4]
;type = PlaySnd
;trigger1 = time = 78
;value = S1,19
;channel = 0

[State 8000, 1]
type = PlaySnd
trigger1 = Anim = 1210
trigger1 = AnimElem = 2
value = 0, 2

[State 8000, 5]
type = ChangeAnim
trigger1 = Anim = 1210
trigger1 = AnimElem = 1 > 0
trigger1 = P2BodyDist Y < -130
value = 1210
elem = 2

[State 8000, 5]
type = ChangeAnim
trigger1 = Anim = 1210
trigger1 = AnimElem = 2
trigger1 = P2BodyDist Y > -130
value = 1210
elem = 3

[State 8000, 6]
type = HitDef
trigger1 = Anim = 1110
trigger1 = AnimElem = 7
attr = S, SA
animtype  = Heavy
damage    = 110, 10
getpower  = 0
priority  = 7
pausetime = 12,12
sparkno = 3
sparkxy = 0,-60
hitsound   = S1,4
guardsound = S6,0
ground.type = Low
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -0.2,-15
guard.velocity = -5
air.velocity = -0.4,-14
airguard.velocity = -4,-2
envshake.time = 10
envshake.ampl = 7
envshake.freq = 170
p2facing = 1
fall.animtype = Heavy
fall.recover = 0
air.fall = 1
fall = 1


[State 8000, 6]
type = HitDef
trigger1 = Anim = 1210
trigger1 = AnimElem = 3
attr = S, SA
animtype  = Heavy
damage    = 70, 10
getpower  = 0
priority  = 7
pausetime = 12,12
sparkno = 3
sparkxy = 0,-60
hitsound   = S1,4
guardsound = S6,0
ground.type = Low
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -10,-5
guard.velocity = -10
air.velocity = -10,-4
airguard.velocity = -10,-5
envshake.time = 10
envshake.ampl = 7
envshake.freq = 170
p2facing = 1
p2stateno = 1025
fall.animtype = Heavy
fall.recover = 0

[State 8000, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Zero/Alpha Counter Crouching
[Statedef 8001]
type    = C
movetype= A
physics = C
juggle  = 4
velset = 0,0
anim = 1111
ctrl = 0
sprpriority = 2

[State 8000, 0]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 8000, PalFXWiz]
type = PalFX
trigger1 = time = 0
time = 15
add = -20,-20,200
mul = 256,256,256
sinadd = 56,56,0,1
invertall = 0
color = 0

[State 8000, 1]
type = Pause
trigger1 = Anim = 1111
trigger1 = AnimElem = 4
movetime = 20
time = 20

[State 8000, 1]
type = PowerAdd
trigger1 = Anim = 1111
trigger1 = AnimElem = 4
value = -1000

[State 8000, 1]
type = PlaySnd
trigger1 = Anim = 1111
trigger1 = AnimElem = 4
value = S8000, 0

[State 8000, 1]
type = PlaySnd
trigger1 = Anim = 1111
trigger1 = AnimElem = 8
value = S8000, 1

[State 8000, 2]
type = EnvColor
trigger1 = Anim = 1111
trigger1 = AnimElem = 4
value = 250,250,250 
time = 1

[State 8000, 2]
type = Explod
trigger1 = Anim = 1111
trigger1 = AnimElem = 4
anim = 8004	;Counter Spark
pos = 0,-35
postype = p1
bindtime = -1
persistent = 0
pausemovetime = -1
ownpal = 1
sprpriority = 4

[State 8000, 3]
type = ChangeAnim
trigger1 = Anim = 1111
trigger1 = AnimTime = 0
value = 1210

;[State 8000, 4]
;type = PlaySnd
;trigger1 = time = 15
;value = S5,0
;channel = 0

;[State 8000, 4]
;type = PlaySnd
;trigger1 = time = 78
;value = S1,19
;channel = 0

[State 8000, 1]
type = PlaySnd
trigger1 = Anim = 1210
trigger1 = AnimElem = 2
value = 0, 2

[State 8000, 5]
type = ChangeAnim
trigger1 = Anim = 1210
trigger1 = AnimElem = 1 > 0
trigger1 = P2BodyDist Y < -130
value = 1210
elem = 2

[State 8000, 5]
type = ChangeAnim
trigger1 = Anim = 1210
trigger1 = AnimElem = 2
trigger1 = P2BodyDist Y > -130
value = 1210
elem = 3

[State 8000, 6]
type = HitDef
trigger1 = Anim = 1111
trigger1 = AnimElem = 7
attr = S, SA
animtype  = Heavy
damage    = 110, 10
getpower  = 0
priority  = 7
pausetime = 12,12
sparkno = 3
sparkxy = 0,-60
hitsound   = S1,4
guardsound = S6,0
ground.type = Low
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -0.2,-15
guard.velocity = -5
air.velocity = -0.4,-14
airguard.velocity = -4,-2
envshake.time = 10
envshake.ampl = 7
envshake.freq = 170
p2facing = 1
fall.animtype = Heavy
fall.recover = 0
air.fall = 1
fall = 1


[State 8000, 6]
type = HitDef
trigger1 = Anim = 1210
trigger1 = AnimElem = 3
attr = S, SA
animtype  = Heavy
damage    = 70, 10
getpower  = 0
priority  = 7
pausetime = 12,12
sparkno = 3
sparkxy = 0,-60
hitsound   = S1,4
guardsound = S6,0
ground.type = Low
ground.slidetime = 26
ground.hittime  = 26
ground.velocity = -10,-5
guard.velocity = -10
air.velocity = -10,-4
airguard.velocity = -10,-5
envshake.time = 10
envshake.ampl = 7
envshake.freq = 170
p2facing = 1
p2stateno = 1025
fall.animtype = Heavy
fall.recover = 0

[State 8000, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Shocked Custom State
[Statedef 7601]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0
anim = 5030
juggle = 0

[State 7601, Shock]
type = ChangeAnim
trigger1 = AnimExist(7696)
trigger1 = Anim != 7696
value = 7696

[State 7601, Fau-Shock]
type = Palfx
trigger1 = !AnimExist(7696) && TimeMod = 3, 1
time = 2
mul = 199,198,226

[State 7601, Fau-Shock]
type = Palfx
trigger1 = !AnimExist(7696) && TimeMod = 4, 2
time = 3
mul = 50,26,50

[State 7601, No hit]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 7601, Fall Back]
type = velset
trigger1 = Time = 18
x = -4.5
y = -6.4

[State 7601, Fall Back]
type = gravity
trigger1 = Time >= 18

[State 7601, Change]
type = Selfstate
trigger1 = Pos Y > 0
value = 5100
;---------------------------------------------------------------------------
;Burned Custom State
[Statedef 7602]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0
anim = 5030
juggle = 0

[State 7602, ChangeAnim]
type = ChangeAnim
triggerall = AnimExist(7697)
trigger1 = time = 0; && (pos y >= 0)    
value = 7697

[State 7602, No hit]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 7602, Fall Back]
type = velset
trigger1 = Time = 30
x = -4.5
y = -6.4

[State 7602, Fall Back]
type = gravity
trigger1 = Time >= 30

[State 7602, SelfState]
type = Selfstate
trigger1 = Pos Y > 0
value = 5100
;---------------------------------------------------------------------------
; Super Armor
; v1.1a - Commented out because it caused a "repeating Hyper" bug when Peter is
;         hit white performing a Hyper.
;
;
;

;[Statedef 9000]
;type = U
;movetype = H
;physics = U
;
;[State 9000, PalFX]
;type = PalFX
;trigger1 = Alive
;trigger1 = !Time
;trigger2 = Time = 1
;trigger3 = Time = 5
;trigger4 = Time = 9
;trigger5 = Time = 13
;time = 2
;mul = 256,256,0
;add = 130,30,10
;color = 128
;ignorehitpause = 1
;
;[State 9000, PosFreeze]
;type = PosFreeze
;trigger1 = Alive
;trigger1 = 1
;value = 1
;
;[State 9000, CtrlSet]
;type = CtrlSet
;triggerall = Time < floor(gethitvar(hittime) * 0.8)
;trigger1 = var(46) <= 106
;value = 1
;
;[State 9000, ChangeAnim]
;type = ChangeAnim
;trigger1 = Time < floor(gethitvar(hittime) * 0.8)
;value = Anim
;elem  = AnimElemNo(0)
;
;[State 9000, End]
;type = ChangeState
;trigger1 = Alive
;trigger1 = Time >= floor(gethitvar(hittime) * 0.8)
;value = var(46)
;
;[State 9000, VelSet]
;type = VelSet
;trigger1 = !Alive
;x = gethitvar(xvel)
;y = gethitvar(yvel)
;;
;[State 9000, End]
;type = ChangeState
;trigger1 = !Alive
;value = 5050

;=============================================================================
; Roadhouse Finish
;=============================================================================
[Statedef 9801]
type = A
movetype = I
physics = N
anim = 4050

[State 9801, Hyper Combo Finish]
type = Explod
trigger1 = time = 1
ID = 9802
Anim = 4050
postype = left
bindtime = -1
removetime = -1
pos = 100,-50
supermovetime = 9999
pausemovetime = 9999
sprpriority = -4

[State 9801, Remove Background]
type = AssertSpecial
trigger1 = NumExplod(9802) != 0
flag = NoFG
flag2 = NoBG

;Remove Hyper Combo BG, if any
[State 9801, Hyper Combo Finish]
type = Removeexplod
trigger1 = Time = 0
trigger1 = numexplod(9)>0
ID = 9

[State 9801, Hyper Combo Finish]
type = Removeexplod
trigger1 = Time = 0
trigger1 = numexplod(8)>0
ID = 8

;Play a dramatic Hyper Combo Finish Sound
[State 9801, Hyper Combo Finish]
type = PlaySnd
trigger1 = Time = 1
value = 0, 23

;Remove Hyper Combo Finish BKG
[State 9801, Hyper Combo Finish]
type = Removeexplod
trigger1 = Roundstate = 4
ID = 9802

[State 9801, Hyper Combo Finish]
type = DestroySelf
trigger1 = RoundState = 4
;---------------------------------------------------------------------------
;Head Chopped Off Custom State
[Statedef 8007]
type    = S
movetype= H
physics = N
anim = 5030
velset = 0,0
sprpriority = -1

[State 8007, ChangeAnim]
type = ChangeAnim
triggerall = selfanimexist(9108112)
trigger1 = time = 0
value = 9108112

[State 8007, Palfx]
type = Palfx
trigger1 = !AnimExist(9108112) && TimeMod = 3, 1
time = 2
mul = 199,198,226

[State 8007, Palfx]
type = Palfx
trigger1 = !AnimExist(9108112) && TimeMod = 4, 2
time = 3
mul = 50,26,50

[State 8007, Spinning Head]
type = Explod
triggerall = AnimExist(9108112)
trigger1 = time = 0
anim = 912320
ID = 912320
pos = -5,-50
postype = p1
facing = 1
vel = -0.3,-8
accel = -.03,.3
sprpriority = -1
removetime = 60
scale = const(size.xscale),const(size.yscale)

[State 8007, Head On Ground]
type = Explod
triggerall = AnimExist(9108112)
trigger1 = time = 60
anim = 912321
ID = 912321
pos = -76,0
postype = p1
facing = 1
sprpriority = 3
removetime = ifelse(alive,95,-1)
bindtime = -1
scale = const(size.xscale),const(size.yscale)

[State 8007,PlaySnd]
type = PlaySnd
triggerall = AnimExist(9108112)
trigger1 = time = 60
value = F7, 0

[State 8007, No hit]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 8007, Fall Back]
type = velset
triggerall = Alive = 1
trigger1 = Time = 158
x = -2
y = -0.2

[State 8007, AllPallFX]
type = AllPalFX
triggerall = Alive = 1
trigger1 = time = 155
time = 12
add = 256,0,0
mul = 256,0,0
invertall = 1
color = 256

[State 8007, Death Yell]
type = PlaySnd
triggerall = Alive = 1
trigger1 = time = 0
value = 11,0
channel = 0

[State 8007, Fall Back]
type = gravity
triggerall = Alive = 1
trigger1 = Time >= 158

[State 8007, SelfState]
type = Selfstate
triggerall = Alive = 1
trigger1 = Pos Y > 0
value = 5100

[State 8007, ChangeState]
type = Changestate
triggerall = Alive = 0
trigger1 = time = 130
value = 5150

[State 8007, SelfState]
type = Selfstate
triggerall = Alive = 0 && !AnimExist(9108112)
trigger1 = Time = 80
value = 5100
;---------------------------------------------------------------------------
;Head Chopped Off Custom State (Air)
[Statedef 8008]
type    = A
movetype= H
physics = N
anim = 5030
velset = 0,0
sprpriority = -1

[State 8008, 1]
type = Gravity
trigger1 = 1
ignorehitpause = 1

[State 8008, ChangeAnim]
type = ChangeAnim
triggerall = selfanimexist(9108112)
trigger1 = time = 0
value = 9108112

[State 8008, 2]
type = VelSet
trigger1 = pos y >= 0 && vel y >= 0
y = 0
x = 0

[State 8008, Palfx]
type = Palfx
trigger1 = !AnimExist(9108112) && TimeMod = 3, 1
time = 2
mul = 199,198,226

[State 8008, Palfx]
type = Palfx
trigger1 = !AnimExist(9108112) && TimeMod = 4, 2
time = 3
mul = 50,26,50

[State 8008, Spinning Head]
type = Explod
triggerall = AnimExist(9108112)
trigger1 = time = 0
anim = 912320
ID = 912320
pos = -5,-50
postype = p1
facing = 1
vel = -0.3,-7
accel = -.03,.3
sprpriority = 3
removetime = 60
scale = const(size.xscale),const(size.yscale)

[State 8008, Head On Ground]
type = Explod
triggerall = AnimExist(9108112)
trigger1 = time = 60
anim = 912321
ID = 912321
pos = -76,0
postype = p1
facing = 1
sprpriority = 3
removetime = ifelse(alive,95,-1)
scale = const(size.xscale),const(size.yscale)
bindtime = -1

[State 8008,PlaySnd]
type = PlaySnd
triggerall = AnimExist(9108112)
trigger1 = time = 60
value = F7, 0

[State 8008, No hit]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 8008, AllPallFX]
type = AllPalFX
triggerall = Alive = 1
trigger1 = time = 155
time = 12
add = 256,0,0
mul = 256,0,0
invertall = 1
color = 256

[State 8007, Death Yell]
type = PlaySnd
triggerall = Alive = 1
trigger1 = time = 0
value = 11,0
channel = 0

[State 8008, Fall Back]
type = velset
triggerall = Alive = 1
trigger1 = Time = 158
x = -2
y = -0.2

[State 8008, AllPallFX]
type = AllPalFX
triggerall = Alive = 1
trigger1 = time = 155
time = 12
add = 256,0,0
mul = 256,0,0
invertall = 1
color = 256

[State 8008, Death Yell]
type = PlaySnd
triggerall = Alive = 1
trigger1 = time = 0
value = 11,0
channel = 0

[State 8008, SelfState]
type = Selfstate
triggerall = Alive = 1
trigger1 = time = 155
value = 5100

[State 8007, ChangeState]
type = Changestate
triggerall = Alive = 0
trigger1 = time = 130
value = 5150

[State 8007, SelfState]
type = Selfstate
triggerall = Alive = 0 && !AnimExist(9108112)
trigger1 = Time = 80
value = 5100
;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------
[Statedef -2]

; Super Armor
; ===========
; v1.1a - Commented out because it caused a bug in which Peter, when hit with
;         a light attack in the middle of a super, will repeat that same super
;         without consuming super energy.
;
;[State -2]
;type = VarSet
;trigger1 = Life > 1
;trigger1 = MoveType != H
;trigger1 = StateNo != 9000
;var(46) = StateNo
;ignorehitpause = 1
;
;[State -2]
;type = VarSet
;trigger1 = Life > 1
;trigger1 = StateNo = [120,159]
;trigger1 = StateNo != 9000
;var(46) = StateNo
;ignorehitpause = 1


; Hyper Combo Finish Helper

;[State -2, Trigger Vars] ;If opponent dies, set variable 9 to toggle Hyper Combo
;type = VarSet           ;Finish sequence.
;triggerall = WinKO = 1
;triggerall = var(9) = 0
;trigger1 = Stateno = 3050
;trigger2 = Stateno = 3000
;trigger3 = Stateno = 1020
;v = 9
;value = 1



;[State -2, Hyper Combo Finish] ;THE HELPER SEQUENCE
;type = Helper
;triggerall = RoundState = 3
;;triggerall = Win
;triggerall = NumHelper(9801)=0
;trigger1 = var(9) = 1
;name = "Hyper Combo Finish"
;ID = 9801
;StateNo = 9801
;postype = left
;pos = 0, 0
;ownpal = 1
;ignorehitpause = 1
;supermovetime = 9999
;pausemovetime = 9999
;ownpal = 1

; v1.1
; This state prevents corpse from being hit ater being KO'ed in simul mode,
; if partner is still alive.

[State -2, NoAutoTurn]
type = AssertSpecial
triggerall = Enemynear, Stateno = 8007 && Enemynear, SelfAnimExist(9108112)
triggerall = Enemynear, Stateno = 8008 && Enemynear, SelfAnimExist(9108112)
trigger1 = 1
flag = NoAutoTurn

[State -2, NotHitBy]
type = NotHitBy
trigger1 = Alive = 0
value = SCA

[State -2, StopSnd]
type = StopSnd
trigger1 = stateno !=2000
channel = 22

[State -2, StopSnd]
type = StopSnd
trigger1 = stateno !=370
channel = 25

[State -2, StopSnd]
type = StopSnd
trigger1 = stateno !=191
channel = 9

[State -2, StopSnd]
type = StopSnd
trigger1 = stateno !=194
channel = 8

[State -2, StopSnd]
type = StopSnd
trigger1 = stateno !=10196
channel = 15

[State -2, StopSnd]
type = StopSnd
trigger1 = stateno !=10197
channel = 16

[State -2, StopSnd]
type = StopSnd
trigger1 = stateno !=193
channel = 17

[State -2, StopSnd]
type = StopSnd
trigger1 = stateno !=[4000,4010]
channel = 18

[State -2, StopSnd]
type = StopSnd
trigger1 = stateno !=1192
channel = 30

[State -2, Shocked]
type = PlaySnd
triggerall = Alive = 1
trigger1 = Time = 1
trigger1 = anim = 7696
value = S7697,0
channel = 0

[State -2, Burned]
type = PlaySnd
triggerall = Alive = 1
trigger1 = Time = 1
trigger1 = anim = 7697
value = S11,2
channel = 0

[State -2, Frozen]
type = PlaySnd
trigger1 = Time = 10
trigger1 = anim = 7990
value = S11,3
channel = 0

[State -2, Frozen in Air]
type = PlaySnd
trigger1 = Time = 10
trigger1 = anim = 7991
value = S11,3
channel = 0

[State -2, Face melt]
type = PlaySnd
trigger1 = AnimElem = 15
trigger1 = anim = 9108120
value = S8500,1

[State -2, Face Burnt Scream]
type = PlaySnd
trigger1 = Time = 6
trigger1 = anim = 9108120
value = S11,0

[State -2, Ball Crushed]
type = PlaySnd
triggerall = Alive = 1
trigger1 = Time = 1
trigger1 = anim = 9108100 || anim = 70851
value = S9108, 0
channel = 0

[State -2, Scared]
type = PlaySnd
triggerall = Alive = 1
trigger1 = Time = 1
trigger1 = anim = 9108106
value = S9109, 0
channel = 0
;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------
[Statedef -3]

;This controller plays a sound everytime Peter lands from a jump, or
;from his back-dash.
[State -3, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52 ;Jump land
trigger2 = stateno = 106 ;Run-back land
value = S41, 0

[State -3, 1]
type = PlaySnd
triggerall = random < 750
triggerall = alive
triggerall = stateno != 1041 && stateno != 1042 && stateno != 210
trigger1 = (stateno = 5000) || (stateno = 5010) || (stateno = 5020) || (stateno = 5070)
trigger1 = time = 0
trigger2 = (stateno != 5000) && (stateno != 5010) && (stateno != 5020) && (stateno != 5070)
trigger2 = stateno != [120,160]
trigger2 = gethitvar(damage)
value = S11,2+random%3
channel = 0
ignorehitpause = 1

[State -3, 2]
type = PlaySnd
triggerall = Time = 0
triggerall = Life
trigger1 = stateno = 5100 || stateno = 5100
trigger1 = anim != 5070 && anim != 5070 
trigger2 = stateno = 5070
trigger2 = anim != 5100
value = S1,13
channel = 0
ignorehitpause = 1

[State -3, StopSnd]
type = StopSnd
trigger1 = stateno != 191
channel = 3

[State -3, StopSnd]
type = StopSnd
trigger1 = stateno != 194
channel = 4

[State -3, StopSnd]
type = StopSnd
trigger1 = stateno != 198
channel = 5

[State -3, StopSnd]
type = StopSnd
trigger1 = stateno != 199
channel = 6

[State -3, StopSnd]
type = StopSnd
trigger1 = stateno != 193
channel = 7

[State -3, VarAdd]
type = VarAdd
trigger1 = (HitPauseTime = 1) && (P2MoveType = H) && (MoveHit = 1) && (StateNo < 1020)
trigger2 = ProjHitTime(0) = 1
v = 21
value = 1
ignorehitpause = 1

[State -3, VarReset]
type = VarSet
trigger1 = P2MoveType != H
v = 21
value = 0

[State -3, AttackMulSet]
type = AttackMulSet
trigger1 = StateNo >= 1020
value = 1

[State -3, AttackMulSet]
type = AttackMulSet
triggerall = StateNo < 1020
trigger1 = Var(21) <= 1
value = 1

[State -3, AttackMulSet]
type = AttackMulSet
triggerall = StateNo < 1020
trigger1 = Var(21) = 2
value = 0.8

[State -3, AttackMulSet]
type = AttackMulSet
triggerall = StateNo < 1020
trigger1 = Var(21) = 3
value = 0.6

[State -3, AttackMulSet]
type = AttackMulSet
triggerall = StateNo < 1020
trigger1 = Var(21) = 4
value = 0.5

[State -3, AttackMulSet]
type = AttackMulSet
triggerall = StateNo < 1020
trigger1 = Var(21) >= 7
value = .3