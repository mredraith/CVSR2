;==================================================================;
;                        CNS File for Sagat                        ;
;                                by                                ;
;                            Jesuszilla                            ;
;==================================================================;

;--------------------- Variable List ----------------------

;  Var(0) - Used in Just Defend
;  Var(1) - NoWalk Parry
;  Var(2) - Returns ShakeTime for Just Defense
;  Var(3) - Finest KO, WaruFVar(15)
;  Var(4) - Used in the Long Jump
;  Var(5) - 2: Run/Dash
;           4: Just Defend
;           8: Parry
;          16: Super Combo Cancel
;          32: Counter Attack
;          64: Counter Movement
;         128: Safe Fall
;         256: Air Guard
;         512: Dizzy Enabled (with exceptions)
;  1073741824: Dizzy notification (P2)
; -2147483648: Dizzy notification (P4)
;  Var(6) - Indicates whether or not Small Jump is activated
;  Var(7) - Mashy Throw
;  Var(8) - Animation time offset, Mashy throw
;  Var(9) - Roll/Dodge 
; Var(10) - Gauge Selection
; Var(11) - Mashy throw
; Var(12) -
; Var(13) - GetHitVar(hitTime)
; Var(14) - Just Defend
; Var(15) - Safe Fall Detection
; Var(16) - 
; Var(17) - S-Groove MAX Power
; Var(18) - N-Groove MAX Power
; Var(19) - K-Groove Rage
; Var(20) - Groove Select
;           0 =  None
;           1 =  C-Groove
;           2 =  A-Groove
;           3 =  P-Groove
;           4 =  S-Groove
;           5 =  N-Groove
;           6 =  K-Groove
;           7 = EX-Groove
; Var(21) - Detects the enemy's MoveType. WaruVar(41)
; Var(22) - Differentiation of commands.
; Var(23) -
; Var(24) -
; Var(25) -
; Var(26) -
; Var(27) - Set upon victory/loss.
; Var(28) - State detection, WaruVar(48)
; Var(29) - Power Reset
; Var(30) - Custom Combo
; Var(31) - x2
; Var(32) -
; Var(33) - Hit Counter, Waruvar(47)
; Var(34) - Announcer Time Counter
; Var(35) - Descale Groove Bar, WaruVar(52)
; Var(36) - x5, WaruVar(54)
; Var(37) - First Attack
; Var(38) - Set upon victory/loss, WaruVar(55)
; Var(39) - x2, WaruVar(56)
; Var(40) - Power Increase
; Var(41) - x2
; Var(42) - Returns Damage
; Var(43) - Custom Combo Timer
; Var(44) - Power
; Var(45) - Returns Life/WaruVar(53)
; Var(46) - Negative edge conflict check
; Var(47) - Groove Point/WaruVar(50)
; Var(48) - Superpause unguardable time
; Var(49) -
; Var(50) - Combo
; Var(51) - Hit Counter, WaruVar(17)
; Var(52) - Used in the combo dampener, WaruVar(7)
; Var(53) - x2, WaruVar(8)
; Var(54) - x3, WaruVar(9)
; Var(55) - Message Count
; Var(56) - Cornerpush
; Var(57) - PalFX Add, Combo dampener
; Var(58) - Used in the combo dampener, WaruVar(21)
; Var(59) - State Decision, WaruVar(49)

;--------------------- Float Variable List ----------------------

;  FVar(0) - Descale Groove Bar, WaruFVar(20)
;  FVar(1) - Cheap K.O. Anim; Scaling in Super Effect.
;  FVar(2) - KO Voice; Scaling in the Super Effect.
;  FVar(3) - Fire/Shock Spark, WaruFVar(25)
;  FVar(4) - Current HitDef X Air HitVel
;  FVar(5) - Current HitDef Y Air HitVel
;  FVar(6) -
;  FVar(7) - Announcer Voice
;  FVar(8) - WaruVar(12), Returns Life
;  FVar(9) - Used in the combo dampener.
; FVar(10) - Combo dampener.
; FVar(11) - Throw
; FVar(12) - WaruFVar(24)
; FVar(13) - Lvl.2 Cancel Juggle Timer
; FVar(14) - Throw
; FVar(15) - Power Reset, WaruFVar(14)
; FVar(16) -
; FVar(17) - CvS2 Character
; FVar(18) - Juggle Timer (set)
; FVar(19) - Juggle Timer
; FVar(20) - GROOVE POINT ON/OFF
; FVar(21) - KSSSSSSSSSHHHHHHHHHH, WaruVar(32)
; FVar(22) - KSSSSSSSSSHHHHHHHHHH, WaruFVar(11)
; FVar(23) -
; FVar(24) - Win Message Axis, WaruFVar(37)
; FVar(25) -
; FVar(26) - x2, WaruVar(38)
; FVar(27) - x3, WaruVar(39)
; FVar(28) - x4, WaruVar(44)
; FVar(29) - x5, WaruVar(45)
; FVar(30) - Reversal Message, WaruFVar(22)
; FVar(31) - x2, WaruFVar(23)
; FVar(32) - Parry Message, WaruFVar(8)
; FVar(33) - Finish Message, WaruFVar(9)
; FVar(34) -
; FVar(35) - KO Voice, WaruVar(37)
; FVar(36) - KO Voice, WaruVar(27)
; FVar(37) - Power Up! Sound, WaruFVar(21)
; FVar(38) -
; FVar(39) - Cornerpush

;--------------------- System Variable List ----------------------
; SysVar(0) - See data/common1.cns
; SysVar(1) - See data/common1.cns
; SysVar(2) - Used for proper velocity direction in state 5100.


[Data]
life = 1028
attack = 100
defence = 100
fall.defence_up = 0
liedown.time = 15
airjuggle = 15
sparkno = 2
guard.sparkno = 40
KO.echo = 0
volume = 150
IntPersistIndex = 0
FloatPersistIndex = 0

[Size]
xscale = 1                              	;Horizontal scaling factor.
yscale = 1                                  	;Vertical scaling factor.
ground.back = 20				;Player width (back, ground)
ground.front = 20                       	;Player width (front, ground)
air.back = 20				;Player width (back, air)
air.front = 20				;Player width (front, air)
height = 60				;Height of player (for opponent to jump over) Should be 88 but fuck MUGEN
attack.dist = 320				;Default attack distance
proj.attack.dist = 90			;Default attack distance for projectiles
proj.doscale = 0				;Set to 1 to scale projectiles too
head.pos = 2, -106				;Approximate position of head
mid.pos = -2, -75				;Approximate position of midsection
shadowoffset = 0				;Number of pixels to vertically offset the shadow
draw.offset = 0,0				;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd  = 2.5		;Walk forward
walk.back = -2		;Walk backward
run.fwd  = 4.5, 0		;Run forward (x, y)
run.back = -5.5,-2		;Hop backward (x, y)
jump.neu = 0,-7.375		;Neutral jumping velocity (x, y)
jump.back = -2.75,-7.625	;Jump back Speed (x, y)
jump.fwd = 2.265,-7.125	;Jump forward Speed (x, y)
runjump.back = -4.125	;Running jump speeds (opt)
runjump.fwd = 3.9375

[Movement]
yaccel = .537109375		; 0.34375 * (25.0/16.0)
stand.friction = .828125	;Friction coefficient when standing
crouch.friction = .828125	;Friction coefficient when crouching

[Quotes]
victory0 = "You are too weak! You can't even scratch my body!"
victory1 = "I despise your useless pride!"
victory2 = "My power is without question!"
victory3 = "A warrior does not take a step back! A warrior takes on all challenges!"
victory4 = "Challenge me anytime! I'll always be here!"
victory5 = "Practice all you want! You will never be good enough to defeat me!"
victory6 = "You should not have challenged me!"
victory7 = "A true warrior can win under any circumstances!"
victory8 = "I will make your pride and confidence wither the same way I broke your bones."

;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
anim = ifElse(Var(6)>0,50,40)
ctrl = 0
sprpriority = 1
facep2 = 1
velset = 0,0

[State 40, Helper]
type = Helper
trigger1 = AnimTime = 0
id = 8020
name = "Jump Effect"
pos =0,0
postype = p1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

; AI movement, thanks, Warusaki!
[State 40, AI]
type = ChangeState
triggerall = AILevel
trigger1 = Time = 0
trigger1 = P2MoveType = A || Random%(AILevel+4) != 3
value = ifElse(inguarddist,130,21)

[State 40, 1]
type = VarSet
triggerall = PrevStateNo != 100 && PrevStateNo != 101
triggerall = AILevel
triggerall = Time = 0
trigger1 = Random = [0,80]
sysvar(1) = 0
[State 40, 2]
type = VarSet
triggerall = PrevStateNo != 100 && PrevStateNo != 101
triggerall = AILevel
triggerall = Time = 0
trigger1 = Random = [81,750]
sysvar(1) = 1
[State 40, 3]
type = VarSet
triggerall = PrevStateNo != 100 && PrevStateNo != 101
triggerall = AILevel
triggerall = Time = 0
trigger1 = Random = [751,999]
sysvar(1) = -1
[State 40, 1]
type = null;VarSet
triggerall = AILevel
triggerall = Time = 0
trigger1 = Var(30)
sysvar(1) = frontedgedist >= 60

[State 40, 5]
type = VarAdd
triggerall = Var(6) = 1
triggerall = AILevel
triggerall = Time = 0
trigger1 = Random = [0,130]
var(6) = 2

[State 40, 4]
type = VarAdd
triggerall = AILevel
triggerall = Time = 0
trigger1 = Random = [0,420]
var(4) = 1

[State 40, 1]
type = VarSet
triggerall = !AILevel
trigger1 = Time = 0
sysvar(1) = command = "holdfwd"-command = "holdback"

[State 40, 4]
type = VarSet
trigger1 = Time = 0
var(4) = 0

[State 40, 4]
type = VarSet
triggerall = !AILevel
triggerall = NumHelper(10371)
triggerall = Time = 0
trigger1 = (PrevStateNo = 100 || PrevStateNo = 101) && sysvar(1) = 1
trigger2 = helper(10371), var(15) = [1,8];Command = "longjump"
var(4) = 1

[State 40, 5]
type = VarSet
triggerall = Var(6) = 1
triggerall = !AILevel
trigger1 = command != "holdup"
var(6) = 2

[State 40, 6]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = !Var(4)
x = ifElse(!sysvar(1), 0, ifElse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))*(5.0/4.0)
[State 40, 7]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(4)
x = ifElse(!sysvar(1), 0, ifElse(sysvar(1)=1, const(velocity.runjump.fwd.x), const(velocity.runjump.back.x)))*(5.0/4.0)

[State 40, 9]
type = VelSet
trigger1 = AnimTime = 0
y = ifElse(sysvar(1)=0, const(velocity.jump.y)*ifElse(Var(4),1.15,1), ifElse(sysvar(1)=1, -7.125, -7.625))*ifElse(Var(6)=2,.75,1)*(5.0/4.0)

[State 40, Jump Sound]
type = PlaySnd
trigger1 = Time = 1
value = S40,Var(4)
channel = 13

[State 40, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Up
[Statedef 50]
type    = A
physics = N
movetype = I

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 41

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State 50, AfterImage]
type = AfterImage
triggerall = !Var(30)
trigger1 = Time = 0
trigger1 = Var(4)
time = -1
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
length = 9
trans = add1
TimeGap  = 1
FrameGap = 4

[State 50, VelAdd]
type = VelAdd
trigger1 = SysVar(1) = 1
x = -ifElse(Vel X <= 0,0,ifElse(Var(4),0.029296875,0.01953125))*(25.0/16.0)
[State 50, VelAdd]
type = VelAdd
trigger1 = SysVar(1) = -1
x = ifElse(Vel X >= 0,0,ifElse(Var(4),0.029296875,0.01953125))*(25.0/16.0)

[State 920, 0]
type = Gravity
trigger1 = Time

[State 50, ChangeState]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; RUN_FWD
[Statedef 100]
type    = S
physics = S
anim = 100
sprpriority = 1
ctrl = 0
velset = 0,0

[State 100, Explod]
type = Explod
trigger1 = Time = 1
anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 3
scale = .5,.5

[State 100, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S40,3
channel = 13

[State 100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S100,1
channel = 13
[State 100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = S100,2
channel = 13

[State 100, 1]
type = VelSet
trigger1 = AnimElemTime(2) >= 0
x = const(velocity.run.fwd.x)*(5.0/4.0)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
trigger1 = command = "holdup"
value = 40

[State 100, 4]
type = ChangeState
triggerall = !AILevel
triggerall = AnimElemTime(2) >= 1
trigger1 = command != "holdfwd"
value = 101

[State 100, 5]
type = ChangeState
triggerall = AILevel
triggerall = AnimElemTime(2) >= 1
trigger1 = P2BodyDist X <= 45 && Random <= 700
trigger2 = P2MoveType = A && Random <= 500 && P2BodyDist X <= 70
trigger3 = roundstate != 2
value = 101
ctrl = 1

;---------------------------------------------------------------------------
; RUN_END
[Statedef 101]
type = S
physics = N
ctrl = 0
anim = 101

[State 101, 0]
type = ChangeState
trigger1 = command = "holdup"
value = 40

[State 101, 1]
type = VelAdd
trigger1 = 1
x = ifElse(Vel X <= 0, 0, -0.4270782470703125)*(25.0/16.0)
[State 101, 2]
type = VelSet
trigger1 = AnimTime = 0
x = 0

[State 101, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S100,0
channel = 13

[State 101, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Dash Forward
[Statedef 102]
type    = A
physics = N
ctrl = 0
anim = 102
velset = 0,0

[State 102, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S40,3
channel = 13

[State 102, Explod]
type = Explod
trigger1 = Time = 0
anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 3
scale = .5,.5

[State 102, 1]
type = VelSet
trigger1 = AnimElemTime(2) = 0
x = 4.5*(5.0/4.0)
[State 105, 1]
type = VelAdd
trigger1 = AnimElemTime(2) > 0
x = ifElse(Vel X <= 0, 0, -0.0625)*(25.0/16.0)

[State 102, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 103

;---------------------------------------------------------------------------
; Dash Forward Land
[Statedef 103]
type    = S
physics = N
ctrl = 1
anim = 103

[State 103, Spark]
type = Explod
trigger1 = Time = 0
anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
scale = .5,.5

[State 103, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S100,1
channel = 13

[State 103, 1]
type = VelSet
trigger1 = Time = 0
y = 0
[State 103, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 105, 1]
type = VelAdd
trigger1 = AnimElemTime(2) < 0
x = ifElse(Vel X <= 0, 0, -0.0625)*(25.0/16.0)
[State 103, 1]
type = VelSet
trigger1 = AnimElem = 2
x = 0

[State 103, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Dash Back
[Statedef 105]
type = A
physics = N
ctrl = 0
anim = 105

[State 105, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S105,0
channel = 13

[State 105, Explod]
type = Explod
trigger1 = Time = 0
anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 3
scale = .5,.5

[State 105, 1]
type = VelSet
trigger1 = Time = 3
x = const(velocity.run.back.x)*(5.0/4.0)
y = const(velocity.run.back.y)*(5.0/4.0)
[State 105, 1]
type = VelAdd
trigger1 = Time > 3
x = ifElse(Vel X >= 0, 0, 0.0625)*(25.0/16.0)
y = .25*(25.0/16.0)

[State 105, 3]
type = ChangeState
triggerall = Time > 3
trigger1 = Pos Y + Vel Y >= 0
value = 106

;---------------------------------------------------------------------------
; Dash Back Land
[Statedef 106]
type = S
physics = S
ctrl = 0
anim = 106
velset = 0,0

[State 106, Explod]
type = Explod
trigger1 = Time = 1
anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
scale = .5,.5

[State 106, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S40,2
channel = 13

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 106, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Cheap KO
[Statedef 5950]
physics = S
movetype = H
ctrl = 0
velset = 0,0

[State 5950, 1]
type = HitVelSet
trigger1 = Time = 0
x = 2

[State 5950, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5950, 4]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5950, 4]
type = ChangeAnim
trigger1 = !HitOver
value = ifElse(FVar(1)=0,5010,5020)

[State 190, 4]
type = ChangeAnim
trigger1 = HitOver
value = 5950
persistent = 0

[State 1100, ChangeState]
type = ChangeState
trigger1 = AnimElem = 8
value = 5150

;---------------------------------------------------------------------------
; Win state decider
[Statedef 180]
type = S

[State 180, 2]
type = ChangeState
trigger1 = Time = 0
value = 181+(random%3)

;---------------------------------------------------------------------------
; AAAAAAAAHA HA HA HA HA HA (1)
[Statedef 181]
type = S
ctrl = 0
anim = 180
velset = 0,0

[State 181, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 15
value = S8,7
channel = 0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = Time < 250
flag = RoundNotOver

;---------------------------------------------------------------------------
; AAAAAAAAHA HA HA HA HA HA (2)
[Statedef 182]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 181, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 11
value = S8,7
channel = 0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = Time < 250
flag = RoundNotOver

;---------------------------------------------------------------------------
; Try again, kid.
[Statedef 183]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 181, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = S8,6
channel = 0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = Time < 250
flag = RoundNotOver

;---------------------------------------------------------------------------
; Introduction
[Statedef 190]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 190, vs. Ryu]
type = ChangeState
triggerall = NumEnemy
trigger1 = Enemy, Name = "cvsryu" || Enemy, Name = "Ryu"
value = 191

[State 190, vs. Muay Thai]
type = ChangeState
triggerall = NumEnemy
trigger1 = Enemy, Name = "cvsking" || (Enemy, Name = "King" && AuthorName != "chuchoryu") ; KOF King, not Tekken
trigger2 = Enemy, Name = "cvsjoe" || Enemy, Name = "Joe Higashi"
value = 192

[State 190, vs. Eagle]
type = ChangeState
triggerall = NumEnemy
trigger1 = Enemy, Name = "cvseagle" ;|| (Enemy, Name = "Eagle" && EnemyNear, AuthorName = "CrazyKoopa")
value = 193

[State 190, vs Adon]
type = ChangeState
triggerAll = NumEnemy 
trigger1 = Enemy, Name = "cvsadon" && enemy,authorname = "Hh"
trigger2 = Enemy, Name = "Adon" && (enemy,authorname = "Trololo" || enemy,authorname = "Trololo edited by varo_hades")
value = 194

[State 190, ChangeAnim]
type = ChangeAnim
trigger1 = RoundState = 0
value = Anim

[State 190, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S8,16
channel = 0

[State 190, 1] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Intro (vs. Ryu)
[Statedef 191]
type = S
ctrl = 0
anim = 191
velset = 0,0

[State 191, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, ChangeAnim]
type = ChangeAnim
trigger1 = RoundState = 0
value = Anim

[State 105, Explod]
type = Explod
trigger1 = AnimElemTime(1) = 0
anim = 1910
pos = 0, 0
postype = p1
ownpal = 1
pausemovetime = -1
supermove = 1
sprpriority = 3
removetime = 1
scale = 1,1
ID = 1910
[State 105, Explod]
type = Explod
trigger1 = AnimElemTime(1) = 1
anim = 1911
pos = 0, 0
postype = p1
ownpal = 1
pausemovetime = -1
supermove = 1
sprpriority = 3
removetime = -2
scale = 1,1
ID = 1910

[State 191, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Intro (vs. Muay Thai)
[Statedef 192]
type = S
physics = N
anim = 192

[State 192, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 192, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S8,4
channel = 0

[State 193, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Intro (vs. Sagat) (Thanks, DivineWolf!)
[Statedef 193]
type = S
ctrl = 0
anim = 193
velset = 0,0
sprpriority = -1

[State 193, Intro Assert];Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 240, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S1,1
channel = 1
[State 230, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 10
value = S1,0
channel = 1

[State 250, Voice]
type = PlaySnd
trigger1 = AnimElem = 19 && Random < 500
value = S8,2
channel = 0

[State 750, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 27
value = S5000,3
channel = 0
[State 193, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 27
value = S4000,0
channel = 1

[State -3,Super]
type = Helper
trigger1 = AnimElem = 27
id = 8070
name = "GUARD CANCEL"
pos = 20,-66
postype = P1
stateno = 8070
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 0
supermovetime = 99999999999999
size.xscale = 2.0
size.yscale = 2.0

[State 251, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 18
trigger2 = AnimElem = 28
value = S8,1
channel = 0
[State 251, PlaySnd]
type = PlaySnd
trigger1 = animelem=29
value = S1,2
channel = 1
[State 195, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 38
value = S8,4
channel = 0

[State 193, End];Change to stand state
type = ChangeState
trigger1 = !AnimTime
value = 0

; Intro (vs. Adon)
[Statedef 194]
type = S
physics = N
ctrl = 0
anim = 194
velset = 0, 0
sprpriority = 1

[State 194, 1]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 194,VarSet]
type = VarSet
trigger1 = time = 0
var(10) = abs(floor(pos x))

[State 194,PosAdd]
type = PosAdd
trigger1 = time = 0
x = var(10)-60

[State 194,PosAdd]
type = PosSet
trigger1 = AnimElem = 74
x = -(var(10)) * facing

[State 194, 3]
type = ChangeState
trigger1 = AnimTime  = 0
value = 192

;---------------------------------------------------------------------------
; Taunt
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 195, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S8,4
channel = 0

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Light Punch
[Statedef 200]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 200
poweradd = 0
sprpriority = 2
facep2 = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 250
value = S8,(random%2)
channel = 0
[State 200, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,0
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 200, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H)
triggerall = e||(var(49) := 5*!Var(30))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 2
attr = S, NA
damage = floor(ifElse((35*FVar(10))<7,7,(35*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = ceil(9*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-70)
hitsound = S3,0
guardsound = S5,0
ground.type = High
ground.slidetime = 10+(Var(21)*2)
ground.hittime  = 10+(Var(21)*2)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 11
air.type = High
air.velocity = (fvar(4):=-4),(fvar(5):=-4.921875*(5.0/4.0))
airguard.velocity = -4,-.75
air.hittime = 10+(Var(21)*2)
ground.cornerpush.veloff = 0;-8.4*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 0
fall.recover = !Var(30)
persistent = 0

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Medium Punch
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 210
sprpriority = 2
facep2 = 1

[State 210, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 2
value = S8,1+(random%2)
channel = 0
[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S0,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 210, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H)
triggerall = e||(var(49) := 11*!Var(30))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 3
attr = S, NA
damage = floor(ifElse((28*FVar(10))<7,7,(28*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = ceil(11*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-77)
hitsound = S3,1
guardsound = S5,0
ground.type = High
ground.slidetime = 14+(Var(21)*3)
ground.hittime  = 14+(Var(21)*3)
ground.velocity = -7.66*(2-(Var(30)>0))/2
guard.velocity = -7.66*(2-(Var(30)>0))/2
guard.ctrltime = 15
air.type = High
air.velocity = (fvar(4):=-5),(fvar(5):=-4.296875*(5.0/4.0))
airguard.velocity = -5,-.75
air.hittime = 14+(Var(21)*3)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 0
fall.recover = !Var(30)

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Strong Punch
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 220
sprpriority = 2
facep2 = 1

[State 210, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 2
value = S8,1+(random%2)
channel = 0
[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S0,2
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 220, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H)
triggerall = e||(var(49) := 16*!Var(30))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 3
attr = S, NA
damage = floor(ifElse((112*FVar(10))<7,7,(112*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = ceil(13*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-84)
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -8.125*(2-(Var(30)>0))/2
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = High
air.velocity = (fvar(4):=-5),(fvar(5):=-4.296875*(5.0/4.0))
airguard.velocity = -6,-.75
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 0
fall.recover = !Var(30)
[State 220, 3]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H)
triggerall = e||(var(49) := 16*!Var(30))
triggerall = e||(fvar(18) := 0)
triggerall = PrevStateNo = 310
trigger1 = AnimElem = 3
attr = S, NA
damage = floor(ifElse((112*FVar(10))<7,7,(112*FVar(10)))),0
animtype = Heavy
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = ceil(13*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-84)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = (fvar(4):=-5),(fvar(5):=-4.296875*(5.0/4.0))
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.velocity = (fvar(4):=-5),(fvar(5):=-4.296875*(5.0/4.0))
airguard.velocity = -6,-.75
air.type = Low
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
fall = 1
air.fall = 1
fall.recover = 0

[State 220, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Strong Punch (close)
[Statedef 225]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 225
sprpriority = 2
facep2 = 1

[State 210, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 2
value = S8,1+(random%2)
channel = 0
[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S0,2
channel = 1
[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S200,2
channel = 2

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 220, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H)
triggerall = e||(var(49) := 13*!Var(30))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 3
attr = S, NA
damage = floor(ifElse((91*FVar(10))<7,7,(91*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = ceil(13*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-84)
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -8.125*(2-(Var(30)>0))/2
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = High
air.velocity = (fvar(4):=-2),(fvar(5):=-6.046875*(5.0/4.0))
airguard.velocity = -6,-.75
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 0
fall.recover = !Var(30)
[State 220, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H)
triggerall = e||(var(49) := 11*!Var(30))
triggerall = e||(fvar(18) := 0)
triggerall = Var(50) != [1,2]
trigger1 = AnimElem = 4
attr = S, NA
damage = floor(ifElse((77*FVar(10))<7,7,(77*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = ceil(13*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-119)
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -8.125*(2-(Var(30)>0))/2
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = High
air.velocity = (fvar(4):=-1),(fvar(5):=-6.671875*(5.0/4.0))
airguard.velocity = -6,-.75
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 0
fall.recover = !Var(30)

[State 225, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Light Kick
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2
facep2 = 1

[State 210, PlaySnd]
type = PlaySnd
triggerall = Random < 250
trigger1 = AnimElem = 2
value = S8,(random%2)
channel = 0
[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S1,0
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 230, 2]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H)
triggerall = e||(var(49) := 2*!Var(30))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 3
attr = S, NA
damage = floor(ifElse((14*FVar(10))<7,7,(14*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = M
priority = 3, Hit
pausetime = ceil(9*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-42)
hitsound = S4,0
guardsound = S5,0
ground.type = Low
ground.slidetime = 10+(Var(21)*2)
ground.hittime  = 10+(Var(21)*2)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 11
air.type = Low
air.velocity = (fvar(4):=-5),(fvar(5):=-4.296875*(5.0/4.0))
airguard.velocity = -4,-.75
air.hittime = 10+(Var(21)*2)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 0
fall.recover = !Var(30)
[State 230, 2]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H)
triggerall = e||(var(49) := 4*!Var(30))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 4
attr = S, NA
damage = floor(ifElse((28*FVar(10))<7,7,(28*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = ceil(9*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-35)
hitsound = S4,0
guardsound = S5,0
ground.type = Low
ground.slidetime = 10+(Var(21)*2)
ground.hittime  = 10+(Var(21)*2)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 11
air.type = Low
air.velocity = (fvar(4):=-5),(fvar(5):=-4.296875*(5.0/4.0))
airguard.velocity = -4,-.75
air.hittime = 10+(Var(21)*2)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 0
fall.recover = !Var(30)

[State 230, Time Offset]
type = VarSet
trigger1 = numHelper(247)
trigger1 = helper(247), var(0) = 1
var(8) = Time
ignorehitpause = 1
persistent = 0
[State 230, Play Anim]
type = ChangeAnim
triggerall = AnimElemTime(2) >= 0 && AnimElemTime(3) <= 0
trigger1 = hitPauseTime = [1,ceil(9*(2-(Var(30)>0))/2)-(5-Var(8))]
value = anim
elem = 3
ignorehitpause = 1

[State 230, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Medium Kick
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 240
sprpriority = 2
facep2 = 1

[State 210, PlaySnd]
type = PlaySnd
triggerall = Random < 250
trigger1 = AnimElem = 2
value = S8,(random%2)
channel = 0
[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S1,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 240, 2]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H)
triggerall = e||(var(49) := 4*!Var(30))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 3
attr = S, NA
damage = floor(ifElse((28*FVar(10))<7,7,(28*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = ceil(11*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-70)
hitsound = S4,1
guardsound = S5,0
ground.type = Low
ground.slidetime = 14+(Var(21)*3)
ground.hittime  = 14+(Var(21)*3)
ground.velocity = -7.66*(2-(Var(30)>0))/2
guard.velocity = -7.66*(2-(Var(30)>0))/2
guard.ctrltime = 15
air.type = Low
air.velocity = (fvar(4):=-5),(fvar(5):=-4.296875*(5.0/4.0))
airguard.velocity = -5,-.75
air.hittime = 14+(Var(21)*3)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 0
fall.recover = !Var(30)
persistent = 0
[State 240, 2]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H)
triggerall = e||(var(49) := 9*!Var(30))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 4
attr = S, NA
damage = floor(ifElse((63*FVar(10))<7,7,(63*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = ceil(11*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-70)
hitsound = S4,1
guardsound = S5,0
ground.type = Low
ground.slidetime = 14+(Var(21)*3)
ground.hittime  = 14+(Var(21)*3)
ground.velocity = -7.66*(2-(Var(30)>0))/2
guard.velocity = -7.66*(2-(Var(30)>0))/2
guard.ctrltime = 15
air.type = Low
air.velocity = (fvar(4):=-5),(fvar(5):=-4.296875*(5.0/4.0))
airguard.velocity = -5,-.75
air.hittime = 14+(Var(21)*3)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 0
fall.recover = !Var(30)
persistent = 0

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Strong Kick
[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 250
sprpriority = 2
facep2 = 1

[State 210, PlaySnd]
type = PlaySnd
triggerall = Random < 250
trigger1 = AnimElem = 3
value = S8,(random%2)
channel = 0
[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,2
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 250, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H)
triggerall = e||(var(49) := 5*!Var(30))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 3
attr = S, NA
damage = floor(ifElse((35*FVar(10))<7,7,(35*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = ceil(13*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-70)
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -8.125*(2-(Var(30)>0))/2
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = Low
air.velocity = (fvar(4):=-3),(fvar(5):=-5.546875*(5.0/4.0))
airguard.velocity = -6,-.75
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 0
fall.recover = !Var(30)
[State 250, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H)
triggerall = e||(var(49) := 13*!Var(30))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 4
attr = S, NA
damage = floor(ifElse((91*FVar(10))<7,7,(91*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = ceil(13*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-98)
hitsound = S4,2
guardsound = S5,0
ground.type = High
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -8.125*(2-(Var(30)>0))/2
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = High
air.velocity = (fvar(4):=-5),(fvar(5):=-4.296875*(5.0/4.0))
airguard.velocity = -6,-.75
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 0
fall.recover = !Var(30)

[State 250, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Light Punch
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 0
ctrl = 0
anim = 400
sprpriority = 2
velset = 0,0
facep2 = 1

[State 400, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 1
value = S8,0+(random%2)
channel = 0
[State 400, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,0
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 200, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H)
triggerall = e||(var(49) := 4*!Var(30))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 2
attr = S, NA
damage = floor(ifElse((28*FVar(10))<7,7,(28*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = ceil(9*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-49)
hitsound = S3,0
guardsound = S5,0
ground.type = High
ground.slidetime = 10+(Var(21)*2)
ground.hittime  = 10+(Var(21)*2)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 11
air.type = High
air.velocity = (fvar(4):=-4),(fvar(5):=-4.921875*(5.0/4.0))
airguard.velocity = -4,-.75
air.hittime = 10+(Var(21)*2)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 0
fall.recover = !Var(30)

[State 400, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Medium Punch
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1)
ctrl = 0
anim = 410
sprpriority = 2
velset = 0,0
facep2 = 1

[State 410, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 1
value = S8,1+(random%2)
channel = 0
[State 410, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 410, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H)
triggerall = e||(var(49) := 10*!Var(30))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 2
attr = C, NA
damage = floor(ifElse((70*FVar(10))<7,7,(70*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = ceil(11*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-49)
hitsound = S3,1
guardsound = S5,0
ground.type = Low
ground.slidetime = 14+(Var(21)*3)
ground.hittime  = 14+(Var(21)*3)
ground.velocity = -7.66*(2-(Var(30)>0))/2
guard.velocity = -7.66*(2-(Var(30)>0))/2
guard.ctrltime = 15
air.type = Low
air.velocity = (fvar(4):=-5),(fvar(5):=-4.296875*(5.0/4.0))
airguard.velocity = -5,-.75
air.hittime = 14+(Var(21)*3)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 0
fall.recover = !Var(30)

[State 410, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Strong Punch
[Statedef 420]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1)
ctrl = 0
anim = 420
sprpriority = 2
velset = 0,0
facep2 = 1

[State 420, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 1
value = S8,1+(random%2)
channel = 0
[State 420, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,2
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 420, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H)
triggerall = e||(var(49) := 15*!Var(30))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 2
attr = C, NA
damage = floor(ifElse((105*FVar(10))<7,7,(105*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = ceil(13*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-56)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -8.125*(2-(Var(30)>0))/2
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = Low
air.velocity = (fvar(4):=-6),(fvar(5):=-3.671875*(5.0/4.0))
airguard.velocity = -6,-.75
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 0
fall.recover = !Var(30)

[State 420, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Light Kick
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 0
ctrl = 0
anim = 430
sprpriority = 2
velset = 0,0
facep2 = 1

[State 430, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 1
value = S8,(random%2)
channel = 0
[State 430, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S1,0
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 430, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H)
triggerall = e||(var(49) := 4*!Var(30))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 2
attr = C, NA
damage = floor(ifElse((28*FVar(10))<7,7,(28*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = L
hitflag = MAF
priority = 3, Hit
pausetime = ceil(9*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-7)
hitsound = S4,0
guardsound = S5,0
ground.type = Low
ground.slidetime = 10+(Var(21)*2)
ground.hittime  = 10+(Var(21)*2)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 11
air.type = Low
air.velocity = (fvar(4):=-4),(fvar(5):=-4.921875*(5.0/4.0))
airguard.velocity = -4,-.75
air.hittime = 10+(Var(21)*2)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 0
fall.recover = !Var(30)
persistent = 0

[State 430, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Medium Kick
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1)
ctrl = 0
anim = 440
sprpriority = 2
velset = 0,0
facep2 = 1

[State 440, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 2
value = S8,1+(random%2)
channel = 0
[State 440, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S1,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 440, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H)
triggerall = e||(var(49) := 10*!Var(30))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 3
attr = C, NA
damage = floor(ifElse((70*FVar(10))<7,7,(70*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = L
hitflag = MAF
priority = 4, Hit
pausetime = ceil(11*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-14)
hitsound = S4,1
guardsound = S5,0
ground.type = Low
ground.slidetime = 14+(Var(21)*3)
ground.hittime  = 14+(Var(21)*3)
ground.velocity = -7.66*(2-(Var(30)>0))/2
guard.velocity = -7.66*(2-(Var(30)>0))/2
guard.ctrltime = 15
air.type = Low
air.velocity = (fvar(4):=-5),(fvar(5):=-4.296875*(5.0/4.0))
airguard.velocity = -5,-.75
air.hittime = 14+(Var(21)*3)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 0
fall.recover = !Var(30)
persistent = 0

[State 440, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouch Strong Kick
[Statedef 450]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1)
ctrl = 0
anim = 450
sprpriority = 2
velset = 0,0
facep2 = 1

[State 450, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 3
value = S8,1+(random%2)
channel = 0
[State 450, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,2
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 450, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H)
triggerall = e||(var(49) := 15*!Var(30))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 4
attr = C, NA
damage = floor(ifElse((105*FVar(10))<7,7,(105*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = L
hitflag = MAF
priority = 5, Hit
pausetime = ceil(11*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-50),ceil(fvar(27):=-7)
hitsound = S4,2
guardsound = S5,0
ground.type = Trip
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = (fvar(4):=-1),(fvar(5):=-5.3671875*(5.0/4.0))
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = High
air.velocity = (fvar(4):=-1),(fvar(5):=-5.3671875*(5.0/4.0))
airguard.velocity = -6,-.75
air.hittime = 18
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0;-11.9*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 1
fall = 1
fall.recover = !Var(30)

[State 450, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Jump Light Punch
[Statedef 600]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
ctrl = 0
anim = 600
sprpriority = 2

[State 600, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 1
value = S8,(random%2)
channel = 0
[State 600, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,0
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 600, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H)
triggerall = e||(var(49) := 6*!Var(30))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 2
attr = A, NA
damage = floor(ifElse((42*FVar(10))<7,7,(42*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = ceil(9*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno= S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-91)
hitsound = S3,0
guardsound = S5,0
guard.ctrltime = 12
ground.type = High
ground.slidetime = 10+(Var(21)*2)
ground.hittime  = 11+(Var(21)*2)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
air.type = High
air.velocity = (fvar(4):=-4),(fvar(5):=-4.921875*(5.0/4.0))
airguard.velocity = -4,-.75
air.hittime = 11+(Var(21)*2)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 0
fall.recover = !Var(30)
persistent = 0

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 50, ChangeState]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Jump Medium Punch
[Statedef 610]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1)
ctrl = 0
anim = 610
sprpriority = 2

[State 610, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 1
value = S8,1+(random%2)
channel = 0
[State 610, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 610, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H)
triggerall = e||(var(49) := 11*!Var(30))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 2
attr = A, NA
damage = floor(ifElse((77*FVar(10))<7,7,(77*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = ceil(11*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-119)
hitsound = S3,1
guardsound = S5,0
ground.type = High
ground.slidetime = 10+(Var(21)*2)
ground.hittime  = 11+(Var(21)*2)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 11
air.type = High
air.velocity = (fvar(4):=-2),(fvar(5):=-6.046875*(5.0/4.0))
airguard.velocity = -5,-.75
air.hittime = 11+(Var(21)*3)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 0
fall.recover = !Var(30)
persistent = 0

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 50, ChangeState]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Jump Strong Punch
[Statedef 620]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1)
ctrl = 0
anim = 620
sprpriority = 2

[State 620, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 2
value = S8,1+(random%2)
channel = 0
[State 620, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S0,2
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 620, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H)
triggerall = e||(var(49) := 16*!Var(30))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 3
attr = A, NA
damage = floor(ifElse((112*FVar(10))<7,7,(112*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 5, Hit
pausetime = ceil(13*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-112)
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 10+(Var(21)*4)
ground.hittime  = 11+(Var(21)*4)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 11
air.type = High
air.velocity = (fvar(4):=-6),(fvar(5):=-3.671875*(5.0/4.0))
airguard.velocity = -6,-.75
air.hittime = 11+(Var(21)*4)
ground.cornerpush.veloff = 0;-7*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 0
fall.recover = !Var(30)

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 50, ChangeState]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Jump Light Kick
[Statedef 630]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
ctrl = 0
anim = 630
sprpriority = 2

[State 630, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 1
value = S8,(random%2)
channel = 0
[State 630, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S1,0
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 630, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H)
triggerall = e||(var(49) := 6*!Var(30))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 2
attr = A, NA
damage = floor(ifElse((42*FVar(10))<7,7,(42*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = ceil(9*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-49)
hitsound = S4,0
guardsound = S5,0
guard.ctrltime = 11
ground.type = High
ground.slidetime = 10+(Var(21)*2)
ground.hittime  = 11+(Var(21)*2)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
air.type = High
air.velocity = (fvar(4):=-4),(fvar(5):=-4.921875*(5.0/4.0))
airguard.velocity = -4,-.75
air.hittime = 11+(Var(21)*2)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 0
fall.recover = !Var(30)
persistent = 0

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 50, ChangeState]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Jump Medium Kick
[Statedef 640]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1)
ctrl = 0
anim = ifElse(Vel X, 645, 640)
sprpriority = 2

[State 640, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 1
value = S8,1+(random%2)
channel = 0
[State 640, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S1,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 640, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H)
triggerall = e||(var(49) := 10*!Var(30))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 2
attr = A, NA
damage = floor(ifElse((70*FVar(10))<7,7,(70*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = ceil(11*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-77)
hitsound = S4,1
guardsound = S5,0
ground.type = High
ground.slidetime = 10+(Var(21)*3)
ground.hittime  = 11+(Var(21)*3)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 11
air.type = High
air.velocity = (fvar(4):=-5),(fvar(5):=-4.296875*(5.0/4.0))
airguard.velocity = -5,-.75
air.hittime = 11+(Var(21)*3)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 0
fall.recover = !Var(30)
persistent = 0

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 50, ChangeState]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Jump Strong Kick
[Statedef 650]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1)
ctrl = 0
anim = 650
sprpriority = 2

[State 650, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 1
value = S8,1+(random%2)
channel = 0
[State 650, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S1,2
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 650, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H)
triggerall = e||(var(49) := 14*!Var(30))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 2
attr = A, NA
damage = floor(ifElse((98*FVar(10))<7,7,(98*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 5, Hit
pausetime = ceil(13*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-49)
hitsound = S4,2
guardsound = S5,0
ground.type = High
ground.slidetime = 10+(Var(21)*4)
ground.hittime  = 11+(Var(21)*4)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 11
air.type = High
air.velocity = (fvar(4):=-6),(fvar(5):=-3.671875*(5.0/4.0))
airguard.velocity = -6,-.75
air.hittime = 11+(Var(21)*4)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 0
fall.recover = !Var(30)
persistent = 0

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 50, ChangeState]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Throw 1 Attempt
[Statedef 800]
type = S
movetype= A
physics = S
juggle = 0
velset = 0,0
ctrl = 0
anim = 800
poweradd = 89*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1)
sprpriority = -1

[State 800, 1]
type = HitDef
triggerall = P2MoveType != H
triggerall = P2StateNo != [130,155]
trigger1 = AnimElem = 2
attr = S, NT
hitflag = M-
priority = 3, Miss
sparkno = -1
;sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = ifElse((command = "holdback"),815,810)
p2stateno = ifElse((command = "holdback"),825,820)
guard.dist = 0
numhits = 0
;fall = 1

[State 800, 1]
type = HitDef
triggerall = P2StateNo != [130,155]
triggerall = Var(30)
trigger1 = AnimElem = 2
attr = S, NT
hitflag = MF
priority = 3, Miss
sparkno = -1
;sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = ifElse((command = "holdback"),815,810)
p2stateno = ifElse((command = "holdback"),825,820)
guard.dist = 0
numhits = 0
;fall = 1

[State 255, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S5000,0
channel = 0

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
[Statedef 810]
type = S
movetype= A
physics = N
anim = 810
sprpriority = 1

[State 810, 1]
type = VarSet
trigger1 = Time = 0
fvar(2) = 0
[State 810, 1]
type = VarSet
triggerall = Time < 7 && !FVar(2)
triggerall = Target,Command = "holdfwd" || Target,Command = "holdback"
trigger1 = Target,Command = "y" || Target,Command = "z"
trigger2 = Target,Command = "b" || Target,Command = "c"
fvar(2) = 1
[State 810, TargetBind]
type = TargetBind
trigger1 = NumTarget
trigger1 = Time < 7 && FVar(2)
pos = 40, 0
[State 810, TargetBind]
type = ChangeState
trigger1 = Time < 7 && FVar(2)
value = 950

[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S800,0
channel = 2
[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S8,3
channel = 0

[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
[State 810, Width]
type = Width
trigger1 = AnimElemTime(4) = 0
edge = 96,0

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = Time = 0
value = 820

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = -36, 0
time = -1
[State 810, Bind 2]
type = TargetBind
trigger1 = AnimElem = 2
pos = -4, -116
time = -1
[State 810, Bind 3]
type = TargetBind
trigger1 = AnimElem = 3
pos = 16, -112
time = -1
[State 810, Bind 3]
type = TargetBind
trigger1 = AnimElemTime(4) = 0
pos = 96, -120
time = -1
[State 810, Bind 3]
type = TargetBind
trigger1 = AnimElemTime(4) = 3
pos = 100, -124
time = 1

[State 832, HitAdd]
type = HitAdd
trigger1 = AnimElemTime(4) = 3
value = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElemTime(4) = 3
var(51) = 1
ignorehitpause = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElemTime(4) = 3
var(47)=500
ignorehitpause = 1
persistent = 1
[State 832, VarAdd]
type = VarAdd
triggerall = Var(51) >= 2
trigger1 = AnimElemTime(4) = 3
var(47)=ifElse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 810, Hurt]
type = TargetLifeAdd
trigger1 = AnimElemTime(4) = 3
value = ceil(ifElse((-132*FVar(10))>-7,-7,(-132*FVar(10))))
kill = 1
[State 810, Hurt]
type = TargetPowerAdd
trigger1 = AnimElemTime(4) = 3
value = 35

[State 810, State End]
type = ChangeState
trigger1 =  AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
[Statedef 820]
type = A
movetype = H
physics = N
velset = 0,0
sprpriority = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820;+1000*(Name = "Gill" && AuthorName = "GM" && Facing = -1)

[State 820, Turn]
type = Turn
trigger1 = AnimElemTime(3) = 0

[State 820, VelSet]
type = VelSet
trigger1 = AnimElemTime(6) = 1
x = 5*(5.0/4.0)
y = -4.296875*(5.0/4.0)
[State 820, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(6) > 0
y = 0.328125*(25.0/16.0)

[State 903, 2]
type = SelfState
trigger1 = AnimElemTime(6) > 1
trigger1 = Pos Y + Vel Y >= -20
value = 5100

;----------------------------------------------------------------------
[Statedef 815]
type = S
movetype= A
physics = N
anim = 811
sprpriority = 1

[State 810, 1]
type = VarSet
trigger1 = Time = 0
fvar(2) = 0
[State 810, 1]
type = VarSet
triggerall = Time < 7 && !FVar(2)
triggerall = Target,Command = "holdfwd" || Target,Command = "holdback"
trigger1 = Target,Command = "y" || Target,Command = "z"
trigger2 = Target,Command = "b" || Target,Command = "c"
fvar(2) = 1
[State 810, TargetBind]
type = TargetBind
trigger1 = NumTarget
trigger1 = Time < 7 && FVar(2)
pos = 40, 0
[State 810, TargetBind]
type = ChangeState
trigger1 = Time < 7 && FVar(2)
value = 950

[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S800,0
channel = 2
[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S8,3
channel = 0

[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
[State 810, Width]
type = Width
trigger1 = AnimElemTime(4) = 0
edge = 96,0

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = Time = 0
value = 825

[State 810, Turn]
type = Turn
trigger1 = AnimElemTime(3) = 0

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 36, 0
time = -1
[State 810, Bind 2]
type = TargetBind
trigger1 = AnimElem = 2
pos = 4, -116
time = -1
[State 810, Bind 2]
type = TargetBind
trigger1 = AnimElem = 3
pos = -4, -116
time = -1
[State 810, Bind 3]
type = TargetBind
trigger1 = AnimElem = 4
pos = 16, -112
time = -1
[State 810, Bind 3]
type = TargetBind
trigger1 = AnimElemTime(5) = 0
pos = 96, -120
time = -1
[State 810, Bind 3]
type = TargetBind
trigger1 = AnimElemTime(5) = 3
pos = 100, -124
time = 1

[State 832, HitAdd]
type = HitAdd
trigger1 = AnimElemTime(4) = 3
value = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElemTime(4) = 3
var(51) = 1
ignorehitpause = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElemTime(4) = 3
var(47)=500
ignorehitpause = 1
persistent = 1
[State 832, VarAdd]
type = VarAdd
triggerall = Var(51) >= 2
trigger1 = AnimElemTime(4) = 3
var(47)=ifElse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 810, Hurt]
type = TargetLifeAdd
trigger1 = AnimElemTime(4) = 3
value = ceil(ifElse((-132*FVar(10))>-7,-7,(-132*FVar(10))))
kill = 1
[State 810, Hurt]
type = TargetPowerAdd
trigger1 = AnimElemTime(4) = 3
value = 35

[State 810, State End]
type = ChangeState
trigger1 =  AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
[Statedef 825]
type = A
movetype = H
physics = N
velset = 0,0
sprpriority = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 825;+1000*(Name = "Gill" && AuthorName = "GM" && Facing = -1)

[State 820, Turn]
type = null;Turn
trigger1 = AnimElemTime(4) = 0

[State 820, VelSet]
type = VelSet
trigger1 = AnimElemTime(5) = 1
x = 5*(5.0/4.0)
y = -4.296875*(5.0/4.0)
[State 820, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(5) > 0
y = 0.328125*(25.0/16.0)

[State 903, 2]
type = SelfState
trigger1 = AnimElemTime(5) > 1
trigger1 = Pos Y + Vel Y >= -20
value = 5100

;---------------------------------------------------------------------------
; Throw 2 Attempt
[Statedef 830]
type = S
movetype= A
physics = S
juggle = 0
velset = 0,0
ctrl = 0
anim = 805
poweradd = 89*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1)
sprpriority = -1

[State 810, VarSet]
type = VarSet
trigger1 = Time = 0
var(11) = 0

[State 830, 1]
type = HitDef
triggerall = P2MoveType != H
triggerall = P2StateNo != [130,155]
trigger1 = AnimElem = 3
attr = S, NT
hitflag = M-
priority = 3, Miss
sparkno = -1
sprpriority = -1
p1facing = 1
p2facing = 1
p1stateno = ifElse((command = "holdback"),832,831)
p2stateno = ifElse((command = "holdback"),845,840)
guard.dist = 0
numhits = 0
;fall = 1

[State 830, 1]
type = HitDef
triggerall = P2StateNo != [130,155]
triggerall = Var(30)
trigger1 = AnimElem = 3
attr = S, NT
hitflag = MF
priority = 3, Miss
sparkno = -1
sprpriority = -1
p1facing = 1
p2facing = 1
p1stateno = ifElse((command = "holdback"),832,831)
p2stateno = ifElse((command = "holdback"),845,840)
guard.dist = 0
numhits = 0

[State 255, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S5000,0
channel = 0

[State 830, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
;
[Statedef 831]
type = S
movetype= A
physics = N
anim = 830
sprpriority = 1

[State 810, 1]
type = VarSet
trigger1 = Time = 0
fvar(2) = 0

[State 810, 1]
type = VarSet
triggerall = Time < 7 && !FVar(2)
triggerall = Target,Command = "holdfwd" || Target,Command = "holdback"
trigger1 = Target,Command = "y" || Target,Command = "z"
trigger2 = Target,Command = "b" || Target,Command = "c"
fvar(2) = 1

[State 810, TargetBind]
type = TargetBind
trigger1 = NumTarget
trigger1 = Time < 7 && FVar(2)
pos = 40, 0

[State 810, TargetDrop]
type = TargetDrop
trigger1 = NumTarget
trigger1 = target, Alive = 0

[State 810, TargetBind]
type = ChangeState
trigger1 = Time < 7 && FVar(2)
value = 950

[State 810, VarSet]
type = VarSet
trigger1 = Time = 0
var(11) = 0

[State 810, PlaySnd]
type = PlaySnd
trigger1 = Anim = 830 && AnimElem = 1
value = S800,0

[State 810, PlaySnd]
type = PlaySnd
trigger1 = Anim = 830 && AnimElem = 4
value = S8,4
channel = 0
[State 810, PlaySnd]
type = PlaySnd
trigger1 = Anim = 832 && AnimElem = 2
value = S8,3
channel = 0

[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 820, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 830 && !AnimTime
value = 831

; Thanks, Phantom.of.the.Server!!
[State 840, VarSet]
type = VarSet
trigger1 = Time = 0
var(7) = 93
[State 840, VarSet]
type = VarAdd
trigger1 = HitCount
var(7) = -1

[State 840, PUSH COIN TO LAG]
type = VarAdd
triggerall = Anim = 831
triggerall = NumTarget
trigger1 = target, Command = "a"
trigger2 = target, Command = "b"
trigger3 = target, Command = "c"
trigger4 = target, Command = "x"
trigger5 = target, Command = "y"
trigger6 = target, Command = "z"
trigger7 = target, Command = "start"
trigger8 = target, Command = "parry"
trigger9 = target, Command = "parry2"
trigger10 = target, Command = "rich"
trigger11 = target, Command = "back"
var(7) = -2

[State 840, VarSet]
type = VarSet
trigger1 = Time = 0
var(8) = 0
[State 840, PUSH START TO RICH]
type = VarAdd
triggerall = Anim = 831
trigger1 = Command = "parry"
trigger2 = Command = "parry2"
trigger3 = Command = "rich"
trigger4 = Command = "back"
var(8) = 2
[State 840, VarSet]
type = VarAdd
trigger1 = Var(8) > 0
var(8) = -1
[State 840, VarSet]
type = VarSet
trigger1 = Var(7)<0
var(8) = 0

[State 840, ChangeAnim]
type = ChangeAnim
triggerall = Anim = 831
triggerall = Var(7) > 0
trigger1 = (helper(10371), Var(0) = [1,2]) || (helper(10371), Var(1) = [1,2]) || (helper(10371), Var(2) = [1,2]) || (helper(10371), Var(3) = [1,2]) || (helper(10371), Var(4) = [1,2]) || (helper(10371), Var(5) = [1,2])
trigger2 = (helper(10371), Var(7) = [1,2])
trigger3 = Var(8)
value = 831
elem = cond(AnimElemTime(26)>=0, 1, AnimElemNo(0)+1)

[State 810, Bind 1]
type = TargetBind
triggerall = Anim = 830
trigger1 = AnimElem = 1
pos = 52, 0
time = -1
[State 810, Bind 2]
type = TargetBind
triggerall = Anim = 830
trigger1 = AnimElem = 2
pos = 56, -124
time = -1
[State 810, Bind 3]
type = TargetBind
triggerall = Anim = 830
trigger1 = AnimElem = 3
pos = 50, -138
time = -1

[State 810, Bind 1]
type = TargetBind
trigger1 = Anim = 831
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(6) < 0
trigger2 = Anim = 831
trigger2 = AnimElemTime(19) >= 0
trigger3 = Anim = 832
trigger3 = AnimElemTime(2) < 0
pos = 60, -111
time = 1
[State 810, Bind 2]
type = TargetBind
triggerall = Anim = 831
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(15) < 0
pos = 60, -96
time = 1
[State 810, Bind 3]
type = TargetBind
triggerall = Anim = 831
trigger1 = AnimElemTime(15) >= 0 && AnimElemTime(19) < 0
pos = 61, -105
time = 1

[State 810, TargetState]
type = TargetState
trigger1 = !Time
value = 840
[State 810, TargetState]
type = TargetState
trigger1 = Anim = 831
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(6) < 0
trigger2 = Anim = 831
trigger2 = AnimElemTime(19) >= 0
trigger3 = Anim = 832
trigger3 = AnimElemTime(2) < 0
value = 841
[State 810, TargetState]
type = TargetState
triggerall = Anim = 831
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(15) < 0
value = 842
[State 810, TargetState]
type = TargetState
triggerall = Anim = 831
trigger1 = AnimElemTime(15) >= 0 && AnimElemTime(19) < 0
value = 843

[State 810, Bind 3]
type = TargetBind
triggerall = Anim = 832
trigger1 = AnimElemTime(2) = 0
pos = 60, -32
time = 1

[State 810, Width]
type = Width
trigger1 = Anim = [830,831]
edge = 64,0

[State 810, Hit]
type = VarSet
trigger1 = AnimElemTime(6) < 0
var(11) = 0

[State 810, Hit]
type = VarSet
triggerall = Var(11) = 0
trigger1 = Anim = 831
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(15) < 0
var(11) = 1

[State 810, Explod]
type = Explod
trigger1 = Anim = 831
trigger1 = Var(11) = 1
anim = 8200+(random%8)
postype = P2
pos = 0,4
facing = 1
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
ontop = 1
[State 810, Explod]
type = Explod
trigger1 = Anim = 832 && AnimElemTime(2) = 0
anim = 8200+(random%8)
postype = P1
pos = 68,-80
facing = 1
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
ontop = 1

[State 810, VarAdd]
type = VarAdd
triggerall = RoundState = 2
triggerall = Var(51) < 2
triggerall = Var(21) = 0
triggerall = p2movetype = H
trigger1 = Anim = 831
trigger1 = Var(11) = 1
trigger2 = Anim = 832 && AnimElemTime(2) = 0
var(47)=500
ignorehitpause = 1
persistent = 1
[State 180, 1];Combo bonus
type = VarAdd
triggerall = RoundState = 2
triggerall = Var(51) >= 2
trigger1 = Anim = 831
trigger1 = Var(11) = 1
trigger2 = Anim = 832 && AnimElemTime(2) = 0
var(47) = ifElse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1
[State 3001, VarAdd]
type = VarAdd
trigger1 = Anim = 831
trigger1 = Var(11) = 1
trigger2 = Anim = 832 && AnimElemTime(2) = 0
var(51) = 1
[State 3001, HitAdd]
type = HitAdd
trigger1 = Anim = 831
trigger1 = Var(11) = 1
trigger2 = Anim = 832 && AnimElemTime(2) = 0
value = 1

[State 810, State End]
type = ChangeAnim
triggerall = HitCount
triggerall = Anim = 831 && AnimTime = 0
trigger1 = Var(7) <= 0
trigger2 = target, Life + floor(ifElse((-21*FVar(10))>-7,-7,(-21*FVar(10)))) <= 0
value = 832
[State 810, State End]
type = TargetState
trigger1 = Anim = 832 && AnimElemTime(2) = 0
value = 844

[State 810, Hurt]
type = TargetLifeAdd
triggerall = NumTarget
trigger1 = Anim = 831
trigger1 = Var(11) = 1
trigger2 = Anim = 832 && AnimElemTime(2) = 0
value = floor(ifElse((-21*FVar(10))>-7,-7,(-21*FVar(10))))
kill = (Anim=832)

[State 810, Voice]
type = PlaySnd
trigger1 = Anim = 831
trigger1 = Var(11) = 1
value = S8,2
channel = 0
[State 810, PlaySnd]
type = PlaySnd
trigger1 = Anim = 831
trigger1 = Var(11) = 1
trigger2 = Anim = 832 && AnimElemTime(2) = 0
value = S1,2
[State 810, PlaySnd]
type = PlaySnd
trigger1 = Anim = 831
trigger1 = Var(11) = 1
trigger2 = Anim = 832 && AnimElemTime(2) = 0
value = S4,2

[State 810, VarSet]
type = VarSet
trigger1 = Var(11) = 1
var(11) = -1

[State 810, State End]
type = ChangeState
trigger1 = Anim = 832 && AnimTime = 0
trigger1 = e || (var(11) := 0)
value = 0
ctrl = 1

;----------------------------------------------------------------------
[Statedef 840]
type = S
movetype = H
physics = N
sprpriority = -1

[State 840, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 840

[State 840, 7]
type = ChangeState
trigger1 = !Alive
value = 844
ctrl = 0

;----------------------------------------------------------------------
; 5000,0
[Statedef 841]
type = S
movetype = H
physics = N
sprpriority = -1

[State 820, Turn]
type = null;Turn
trigger1 = !Time && PrevStateNo=825

[State 820, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 841

[State 820, 7]
type = ChangeState
trigger1 = !Alive
value = 844
ctrl = 0

;----------------------------------------------------------------------
; 5000,10
[Statedef 842]
type = S
movetype = H
physics = N
sprpriority = -1

[State 820, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 842

[State 820, 7]
type = ChangeState
trigger1 = !Alive
value = 844
ctrl = 0

;----------------------------------------------------------------------
; 5000,10
[Statedef 843]
type = S
movetype = H
physics = N
sprpriority = -1

[State 820, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 843

[State 820, 7]
type = ChangeState
trigger1 = !Alive
value = 844
ctrl = 0

;----------------------------------------------------------------------
; END
[Statedef 844]
type = A
movetype = H
physics = N
sprpriority = -1
ctrl = 0

[State 820, 2]
type = VelSet
trigger1 = Time = 1
x = -4
y = -4.921875*(5.0/4.0)

[State 820, 3]
type = VelAdd
trigger1 = Time
y = 0.328125*(25.0/16.0)

[State 820, 5]
type = ChangeAnim
triggerall = Alive
trigger1 = Time = 0
value = 5030;+100000*(Name = "Gill" && AuthorName = "GM" && Facing = -1)

[State 820, SelfState]
type = SelfState
triggerall = Alive
trigger1 = Time
trigger1 = Pos Y + Vel Y >= 0
value = 5100

[State 820, 7]
type = SelfState
trigger1 = !Alive
value = 5050
ctrl = 0

;----------------------------------------------------------------------
[Statedef 845]
type = S
movetype = H
physics = N
sprpriority = -1

[State 845, Turn]
type = Turn
trigger1 = AnimElemTime(3) = 0

[State 845, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 845

[State 845, 7]
type = ChangeState
trigger1 = !Alive
value = 844
ctrl = 0

;----------------------------------------------------------------------
[Statedef 832]
type = S
movetype= A
physics = N
anim = 835
sprpriority = 1

[State 810, 1]
type = VarSet
trigger1 = Time = 0
fvar(2) = 0

[State 810, 1]
type = VarSet
triggerall = Time < 7 && !FVar(2)
triggerall = Target,Command = "holdfwd" || Target,Command = "holdback"
trigger1 = Target,Command = "y" || Target,Command = "z"
trigger2 = Target,Command = "b" || Target,Command = "c"
fvar(2) = 1

[State 810, TargetBind]
type = TargetBind
trigger1 = NumTarget
trigger1 = Time < 7 && FVar(2)
pos = 40, 0

[State 810, TargetDrop]
type = TargetDrop
trigger1 = NumTarget
trigger1 = target, Alive = 0

[State 810, TargetBind]
type = ChangeState
trigger1 = Time < 7 && FVar(2)
value = 950

[State 810, VarSet]
type = VarSet
trigger1 = Time = 0
var(11) = 0

[State 810, PlaySnd]
type = PlaySnd
trigger1 = Anim = 835 && AnimElem = 1
value = S800,0

[State 810, PlaySnd]
type = PlaySnd
trigger1 = Anim = 835 && AnimElem = 4
value = S8,4
channel = 0
[State 810, PlaySnd]
type = PlaySnd
trigger1 = Anim = 832 && AnimElem = 2
value = S8,3
channel = 0

[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 832, Turn]
type = Turn
trigger1 = Anim = 835 && AnimElemTime(3) = 0

[State 820, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 835 && !AnimTime
value = 831

; Thanks, Phantom.of.the.Server!!
[State 840, VarSet]
type = VarSet
trigger1 = Time = 0
var(7) = 93
[State 840, VarSet]
type = VarAdd
trigger1 = HitCount
var(7) = -1

[State 840, PUSH COIN TO LAG]
type = VarAdd
triggerall = Anim = 831
triggerall = NumTarget
trigger1 = target, Command = "a"
trigger2 = target, Command = "b"
trigger3 = target, Command = "c"
trigger4 = target, Command = "x"
trigger5 = target, Command = "y"
trigger6 = target, Command = "z"
trigger7 = target, Command = "start"
trigger8 = target, Command = "parry"
trigger9 = target, Command = "parry2"
trigger10 = target, Command = "rich"
trigger11 = target, Command = "back"
var(7) = -2

[State 840, VarSet]
type = VarSet
trigger1 = Time = 0
var(8) = 0
[State 840, PUSH START TO RICH]
type = VarAdd
triggerall = Anim = 831
trigger1 = Command = "parry"
trigger2 = Command = "parry2"
trigger3 = Command = "rich"
trigger4 = Command = "back"
var(8) = 4
[State 840, VarSet]
type = VarAdd
trigger1 = Var(8)
var(8) = -1
[State 840, VarSet]
type = VarSet
trigger1 = Var(7)<0
var(8) = 0

[State 840, ChangeAnim]
type = ChangeAnim
triggerall = Anim = 831
triggerall = Var(7) > 0
trigger1 = (helper(10371), Var(0) = [1,2]) || (helper(10371), Var(1) = [1,2]) || (helper(10371), Var(2) = [1,2]) || (helper(10371), Var(3) = [1,2]) || (helper(10371), Var(4) = [1,2]) || (helper(10371), Var(5) = [1,2])
trigger2 = (helper(10371), Var(7) = [1,2])
trigger3 = Var(8)
value = 831
elem = cond(AnimElemTime(26)>=0, 1, AnimElemNo(0)+1)

[State 810, Bind 1]
type = TargetBind
triggerall = Anim = 835
trigger1 = AnimElem = 1
pos = -52, 0
time = -1
[State 810, Bind 1]
type = TargetBind
triggerall = Anim = 835
trigger1 = AnimElem = 2
pos = -56, -124
time = -1
[State 810, Bind 2]
type = TargetBind
triggerall = Anim = 835
trigger1 = AnimElem = 3
pos = 56, -124
time = -1
[State 810, Bind 3]
type = TargetBind
triggerall = Anim = 835
trigger1 = AnimElem = 4
pos = 50, -138
time = -1

[State 810, Bind 1]
type = TargetBind
trigger1 = Anim = 831
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(6) < 0
trigger2 = Anim = 831
trigger2 = AnimElemTime(19) >= 0
trigger3 = Anim = 832
trigger3 = AnimElemTime(2) < 0
pos = 60, -111
time = -1
[State 810, Bind 2]
type = TargetBind
triggerall = Anim = 831
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(15) < 0
pos = 60, -96
time = -1
[State 810, Bind 3]
type = TargetBind
triggerall = Anim = 831
trigger1 = AnimElemTime(15) >= 0 && AnimElemTime(19) < 0
pos = 61, -105
time = -1

[State 810, TargetState]
type = TargetState
trigger1 = !Time
value = 845
[State 810, TargetState]
type = TargetState
trigger1 = Anim = 831
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(6) < 0
trigger2 = Anim = 831
trigger2 = AnimElemTime(19) >= 0
trigger3 = Anim = 832
trigger3 = AnimElemTime(2) < 0
value = 841
[State 810, TargetState]
type = TargetState
triggerall = Anim = 831
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(15) < 0
value = 842
[State 810, TargetState]
type = TargetState
triggerall = Anim = 831
trigger1 = AnimElemTime(15) >= 0 && AnimElemTime(19) < 0
value = 843

[State 810, Bind 3]
type = TargetBind
triggerall = Anim = 832
trigger1 = AnimElemTime(2) = 0
pos = 60, -32
time = 1

[State 810, Width]
type = Width
trigger1 = Anim = [830,831]
edge = 64,0

[State 810, Hit]
type = VarSet
trigger1 = AnimElemTime(6) < 0
var(11) = 0

[State 810, Hit]
type = VarSet
triggerall = Var(11) = 0
trigger1 = Anim = 831
trigger1 = AnimElemTime(6) >= 0 && AnimElemTime(15) < 0
var(11) = 1

[State 810, Explod]
type = Explod
trigger1 = Anim = 831
trigger1 = Var(11) = 1
anim = 8200+(random%8)
postype = P2
pos = 0,4
facing = 1
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
ontop = 1
[State 810, Explod]
type = Explod
trigger1 = Anim = 832 && AnimElemTime(2) = 0
anim = 8200+(random%8)
postype = P1
pos = 68,-80
facing = 1
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
ontop = 1

[State 810, VarAdd]
type = VarAdd
triggerall = RoundState = 2
triggerall = Var(51) < 2
triggerall = Var(21) = 0
triggerall = p2movetype = H
trigger1 = Anim = 831
trigger1 = Var(11) = 1
trigger2 = Anim = 832 && AnimElemTime(2) = 0
var(47)=500
ignorehitpause = 1
persistent = 1
[State 180, 1];Combo bonus
type = VarAdd
triggerall = RoundState = 2
triggerall = Var(51) >= 2
trigger1 = Anim = 831
trigger1 = Var(11) = 1
trigger2 = Anim = 832 && AnimElemTime(2) = 0
var(47) = ifElse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1
[State 3001, VarAdd]
type = VarAdd
trigger1 = Anim = 831
trigger1 = Var(11) = 1
trigger2 = Anim = 832 && AnimElemTime(2) = 0
var(51) = 1
[State 3001, HitAdd]
type = HitAdd
trigger1 = Anim = 831
trigger1 = Var(11) = 1
trigger2 = Anim = 832 && AnimElemTime(2) = 0
value = 1

[State 810, State End]
type = ChangeAnim
triggerall = HitCount
triggerall = Anim = 831 && AnimTime = 0
trigger1 = Var(7) <= 0
trigger2 = target, Life + floor(ifElse((-21*FVar(10))>-7,-7,(-21*FVar(10)))) <= 0
value = 832
[State 810, State End]
type = TargetState
trigger1 = Anim = 832 && AnimElemTime(2) = 0
value = 844

[State 810, Hurt]
type = TargetLifeAdd
triggerall = NumTarget
trigger1 = Anim = 831
trigger1 = Var(11) = 1
trigger2 = Anim = 832 && AnimElemTime(2) = 0
value = floor(ifElse((-21*FVar(10))>-7,-7,(-21*FVar(10))))
kill = (Anim=832)

[State 810, Voice]
type = PlaySnd
trigger1 = Anim = 831
trigger1 = Var(11) = 1
value = S8,2
channel = 0
[State 810, PlaySnd]
type = PlaySnd
trigger1 = Anim = 831
trigger1 = Var(11) = 1
trigger2 = Anim = 832 && AnimElemTime(2) = 0
value = S1,2
[State 810, PlaySnd]
type = PlaySnd
trigger1 = Anim = 831
trigger1 = Var(11) = 1
trigger2 = Anim = 832 && AnimElemTime(2) = 0
value = S4,2

[State 810, VarSet]
type = VarSet
trigger1 = Var(11) = 1
var(11) = -1

[State 810, State End]
type = ChangeState
trigger1 = Anim = 832 && AnimTime = 0
trigger1 = e || (var(11) := 0)
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 888]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = NULL;ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
trigger3 = AnimTime = 0
trigger3 = Anim = 105035 && Name = "Gill" && AuthorName = "GM" && Facing = -1
trigger4 = Name = "Gill" && AuthorName = "GM" && Facing = -1
trigger4 = Time = 0
trigger4 = Anim != 105035
trigger4 = (Anim != [105051, 105059]) && (Anim != [105061, 105069])
trigger4 = Anim != 105090
value = 5050+100000*(Name = "Gill" && AuthorName = "GM" && Facing = -1)

[State 5050, 2] ;Coming down anim
type = NULL;ChangeAnim
trigger1 = (anim = [5050,5059]) || ((Name = "Gill" && AuthorName = "GM" && Facing = -1) && (Anim = [105050,105059]))
trigger1 = Vel Y >= ifElse(anim = 5050+100000*(Name = "Gill" && AuthorName = "GM" && Facing = -1), 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3]
type = VelAdd
trigger1 = 1
y = .49

[State 5050, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 816, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 20

[State 5050, 6]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;HIT_BOUNCE

;===============================================================================
;                                    SPECIALS
;===============================================================================

;----------------------------------------------------------------------------------
; Tiger Shot
[Statedef 1000]
type    = S
physics = N
movetype= A
ctrl = 0
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1)
juggle = 0
facep2 = 1

[State 1000, VarSet]
type = VarSet
triggerall = !AILevel
trigger1 = Time = 0
var(22) = ifElse((helper(10371), var(2) = [1,2]),2,ifElse((helper(10371), var(1) = [1,2]),1,ifElse((helper(10371), var(0) = [1,2]),0,ifElse((helper(10371), var(9) = [1,2]),2,ifElse((helper(10371), var(8) = [1,2]),1,0)))))
[State 1000, VarSet]
type = VarSet
triggerall = AILevel
trigger1 = Time = 0
var(22) = 2

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 1000

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S8,11
channel = 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(3) = 1
value = S200,0
channel = 2

[State 1000, Helper]
type = Helper
trigger1 = AnimElemTime(3) = 1
ID = 1005
name = "Tiger Shot"
pos = ceil(100*Const(Size.XScale)),ceil(-86*Const(Size.YScale));ceil(ifElse(Var(22) = 1,64,74)*Const(size.xscale)),ceil(-74*Const(size.yscale))
postype = P1
stateno = 1005
helpertype = normal;projectile
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
size.xscale = 1
size.yscale = 1

[State 1000, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Ground Tiger Shot
[Statedef 1100]
type    = S
physics = N
movetype= A
ctrl = 0
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1)
juggle = 0
facep2 = 1

[State 1400, VarSet]
type = VarSet
triggerall = !AILevel
trigger1 = Time = 0
var(22) = ifElse((helper(10371), var(5) = [1,2]),2,ifElse((helper(10371), var(4) = [1,2]),1,ifElse((helper(10371), var(3) = [1,2]),0,ifElse((helper(10371), var(12) = [1,2]),2,ifElse((helper(10371), var(11) = [1,2]),1,0)))))
[State 1000, VarSet]
type = VarSet
triggerall = AILevel
trigger1 = Time = 0
var(22) = 2

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 1100

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S8,11
channel = 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(3) = 1
value = S200,0
channel = 2

[State 1000, Helper]
type = Helper
trigger1 = AnimElemTime(3) = 1
ID = 1105
name = "Tiger Shot"
pos = ceil(88*Const(Size.XScale)),ceil(-51*Const(Size.YScale));ceil(ifElse(Var(22) = 1,64,74)*Const(size.xscale)),ceil(-74*Const(size.yscale))
postype = P1
stateno = 1005
helpertype = normal;projectile
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
size.xscale = 1
size.yscale = 1

[State 1000, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Tiger Shot Proj
[Statedef 1005]
type    = S
movetype= A
physics = N
juggle = 8
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 4

[State 3000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 220, VarSet]
type = VarSet
trigger1 = Time = 0
var(22) = root, Var(22)

[State 220, VarSet]
type = Null
trigger1 = e||(fvar(10) := root,FVar(10))
trigger1 = e||(fvar(13) := root,FVar(13))
trigger1 = e||(fvar(18) := root,FVar(18))
trigger1 = e||(fvar(19) := root,FVar(19))
trigger1 = e|| (var(21) := root,Var(21))
trigger1 = e|| (var(25) := root,Var(25))
trigger1 = e|| (var(28) := root,Var(28))
trigger1 = e|| (var(29) := root,Var(29))
trigger1 = e|| (var(30) := root,Var(30))
trigger1 = e|| (var(30) := root,Var(31))
trigger1 = e|| (var(40) := root,Var(40))
trigger1 = e|| (var(41) := root,Var(41))
trigger1 = e|| (var(51) := root,Var(51))

[State 1005, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 2000+IsHelper(1105)

[State 1005, Velocity]
type = VelSet
trigger1 = Time = 0
x = 3.25+Var(22)

[State 1005, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP,AT
time = -1
stateno = stateNo+1
ignorehitpause = 1
[State 1005, HB]
type= HitBy
trigger1 = 1
value = SCA,NP,SP,HP
time = -1
ignorehitpause = 1

[State 1005, Base Damage]
type = VarSet
trigger1 = Time = 0
var(17) = 49+(7*IsHelper(1005))
[State 1005, Base Stun]
type = VarSet
trigger1 = Time = 0
var(18) = 7+IsHelper(1005)

[State 1005, This is for fossils]
type = Projectile
trigger1 = !Var(50)
ProjID = 1000
projanim = anim
projhitanim = -1
projremanim = -1
projscale = 0,0
projpriority = 0
projremovetime = 1
postype = p1
velocity = Vel X, Vel Y
offset = 0,0
ignorehitpause = 0
[State 1005, Projectile]
type = HitDef
trigger1 = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H || (FVar(13) && (root, PrevStateNo = [3000,3999])))
attr = S,SP
damage = ceil(ifElse(((Var(17)+(Var(22)*7))*FVar(10))<7,7,((Var(17)+(Var(22)*7))*FVar(10)))),ceil(ifElse(((Var(17)+(Var(22)*7))/8*FVar(10))<7,7,((Var(17)+(Var(22)*7))/8*FVar(10))))
animtype = Heavy
air.animtype = Up
fall.animtype = Up
guardflag = MA
hitflag = MAF
priority = 5, Hit
pausetime = 4,ceil(9*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = 0,0
hitsound = S3,3
guardsound = S5,1
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -8.125
guard.velocity = -8.125
guard.ctrltime = 17
air.type = High
air.velocity = (fvar(4):=-5),(fvar(5):=-4.296875*(5.0/4.0))
airguard.velocity = -5,-.75
air.hittime = 17
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 1
fall.recover = 0
envshake.time = 8
envshake.ampl = 2

[State 1005, Kill Juggling]
type = ParentVarSet
trigger1 = MoveHit = 1
fvar(18) = 0

[State 1005, Stun]
type = ParentVarSet
trigger1 = 1
var(49) = (var(18)+var(22))*!Var(30)

[State 1005, VarSet]
type = VarSet
trigger1 = Var(1) = 4
ignorehitpause = 1
var(1) = 0
[State 1005, VarSet]
type = VarSet
trigger1 = root,ProjContactTime(0) = 1
ignorehitpause = 1
var(1) = 1
[State 1005, VarAdd]
type = VarAdd
trigger1 = Var(1)
ignorehitpause = 1
var(1) = 1
[State 1005, PosFreeze]
type = PosFreeze
trigger1 = Var(1)
value = 1
ignorehitpause = 1
persistent = 1

[State 180, Counter]
type = VarSet
trigger1 = P2MoveType = A
var(21) = 1

[State 180, 1]
type = ParentVarSet
triggerall = Var(21)
triggerall = p2movetype = H
trigger1 = movehit
trigger2 = projhit = 1
fvar(32) = 1
ignorehitpause = 1
[State 180, 1]
type = ParentVarSet
triggerall = !root,Var(37)
triggerall = p2movetype = H
trigger1 = movehit
fvar(32) = ifElse(Var(21),-2,2)
ignorehitpause = 1

[State 1005, Helper]
type = Helper
triggerall = root, FVar(32) = 1 || root, FVar(32) = -2
trigger1 = MoveHit = 1
ID = 8130
name = "COUNTER HIT EFFECT"
pos = 0,0
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State -2, Combo]
type = ParentVarSet
trigger1 = movehit = 1
var(50) = 3
ignorehitpause = 1
[State -2, Combo]
type = ParentVarSet
trigger1 = moveGuarded = 1
trigger2 = moveReversed
var(50) = 4
ignorehitpause = 1
[State -2, Combo]
type = VarSet
trigger1 = movehit
trigger2 = projHit = 1
var(50) = 3
ignorehitpause = 1
[State -2, Combo]
type = VarSet
trigger1 = moveGuarded
trigger2 = projGuarded = 1
trigger3 = moveReversed
var(50) = 4
ignorehitpause = 1


[State -2, Combo]
type = ParentVarAdd
trigger1 = movehit
var(51) = 1
ignorehitpause = 1

[State 180, 1]
type = ParentVarAdd
triggerall = !parent,Var(37)
triggerall = p2movetype = H
trigger1 = movehit
var(47) = 5000
ignorehitpause = 1

[State -2, Combo]
type = ParentVarSet
triggerall = !parent,Var(37)
trigger1 = movehit && p2movetype = H
trigger2 = parent,MoveType = H
var(37) = 1
ignorehitpause = 1
persistent = 0

[State 180, 1]
type = ParentVarAdd
triggerall = RoundState = 2
triggerall = parent,Var(51) < 2
trigger1 = moveguarded
trigger2 = moveReversed
var(47)=-20
ignorehitpause = 1
persistent = 1
[State 180, 1]
type = ParentVarAdd
triggerall = RoundState = 2
triggerall = parent,Var(51) < 2
triggerall = Var(21) = 0
triggerall = p2movetype = H
trigger1 = movehit
var(47)=500
ignorehitpause = 1
persistent = 1
[State 180, 1]
type = ParentVarAdd
triggerall = RoundState = 2
triggerall = parent,Var(51) < 2
triggerall = Var(21)
triggerall = p2movetype = H
trigger1 = movehit
var(47)=3001
ignorehitpause = 1
persistent = 1
[State 180, 1]
type = ParentVarAdd
triggerall = RoundState = 2
triggerall = Var(21)
triggerall = p2movetype = H
trigger1 = movehit
var(47)=1000
ignorehitpause = 1
persistent = 1
[State 180, 1]
type = ParentVarAdd
triggerall = RoundState = 2
triggerall = parent,Var(51) >= 2
trigger1 = movehit
var(47)=ifElse(parent,Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State -2, Combo]
type = ParentVarSet
trigger1 = 1
fvar(12) = 0
ignorehitpause = 1
[State -2, Combo]
type = ParentVarSet
trigger1 = MoveHit
fvar(12) = 3
ignorehitpause = 1
[State -2, Combo]
type = ParentVarSet
trigger1 = MoveGuarded
trigger2 = moveReversed
fvar(12) = 4
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
trigger1 = moveContact
ignorehitpause = 1

[State 180, Counter]
type = VarSet
triggerall = Var(21)
trigger1 = P2MoveType != A
var(21) = 0

[State 1005, DestroySelf]
type = DestroySelf
triggerall = Time > 1
trigger1 = FrontEdgeDist <= -40 && !Var(1)
trigger2 = parent, StateNo = 1000 && parent, AnimElem = 1

[State 1005, ChangeState]
type = ChangeState
triggerall = Time
trigger1 = Var(50)
trigger2 = root,ProjCancelTime(0) != -1 && root,ProjCancelTime(0) < 15
value = stateNo+1

;---------------------------------------------------------------------------
; Projectile Hit
[Statedef 1006]
type     = S
movetype = I
physics  = N
ctrl = 0
velset = 0,0
sprpriority = 4
anim = 2005

[State 1010, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1010, PlaySnd]
type = PlaySnd
triggerall = !Var(50)
trigger1 = Time = 1
value = S5,1
persistent = 0

[State 1010, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0

;----------------------------------------------------------------------------------
; Tiger Uppercut
[Statedef 1200]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 2
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1)
juggle = 0
facep2 = 1

[State 1000, VarSet]
type = VarSet
triggerall = !AILevel
trigger1 = Time = 0
var(22) = ifElse((helper(10371), var(2) = [1,2]),2,ifElse((helper(10371), var(1) = [1,2]),1,ifElse((helper(10371), var(0) = [1,2]),0,ifElse((helper(10371), var(9) = [1,2]),2,ifElse((helper(10371), var(8) = [1,2]),1,0)))))
[State 1200, VarSet]
type = VarSet
triggerall = AILevel
trigger1 = Time = 0
var(22) = ifElse((Random%2)=0, 2, Random%3)

[State 1200, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 1200+(Var(22)*10)

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S8,15
channel = 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S0,2
channel = 1
[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S200,0
channel = 2

[State 1200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElemTime(4) = 0
statetype = A

[State 1200, VelSet]
type = VelSet
trigger1 = AnimElemTime(4) = 1
x = (4+Var(22)*2)*(5.0/4.0)
y = (-6-Var(22)*1.5)*(5.0/4.0)
[State 1200, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(4) > 0
x = ifElse(Vel X <= 0, 0, -0.5*(25.0/16.0))
y = 0.375*(25.0/16.0)
[State 1200, VelSet]
type = VelSet
trigger1 = AnimElemTime(4) > 1
trigger1 = Vel X <= 0
x = 0

[State 40, Jump Sound]
type = PlaySnd
trigger1 = AnimElemTime(4) = 1
value = S40,0
channel = 13
[State 40, Helper]
type = Helper
trigger1 = AnimElemTime(4) = 1
id = 8020
name = "Jump Effect"
pos =0,0
postype = p1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 220, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H || (FVar(13) && (PrevStateNo = [3000,3999])))
triggerall = e||(var(49) := ifElse(Var(22)=2,7,18+Var(22))*!Var(30))
triggerall = e||(fvar(18) := (256*(NumTarget>0))+ifElse(Var(22)=2,15,0)*4/5)
trigger1 = AnimElem = 3
attr = S, SA
damage = floor(ifElse((ifElse(Var(22)=0,125,ifElse(Var(22)=1,132,49))*FVar(10))<7,7,(ifElse(Var(22)=0,125,ifElse(Var(22)=1,132,49))*FVar(10)))),floor(ifElse((ifElse(Var(22)=0,125,ifElse(Var(22)=1,132,49))/8*FVar(10))<7,7,(ifElse(Var(22)=0,125,ifElse(Var(22)=1,132,49))/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(12*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-56)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = (fvar(4):=-2),(fvar(5):=-8.625*(5.0/4.0))
guard.velocity = -8.125
guard.ctrltime = 14
air.type = Low
air.velocity = (fvar(4):=-2),(fvar(5):=-8.625*(5.0/4.0))
airguard.velocity = -5,-.75
air.hittime = 14
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 3
[State 220, 2]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H || (FVar(13) && (PrevStateNo = [3000,3999])))
triggerall = e||(var(49) := 9*!Var(30))
triggerall = e||(fvar(18) := (256*(NumTarget>0))+ifElse(Var(22)=2,15,0)*4/5)
triggerall = Var(22) < 2
trigger1 = AnimElem = 4
attr = S, SA
damage = floor(ifElse((63*FVar(10))<7,7,(63*FVar(10)))),floor(ifElse((63/8*FVar(10))<7,7,(63/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(12*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-70)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = (fvar(4):=-2),(fvar(5):=-8.625*(5.0/4.0))
guard.velocity = -8.125
guard.ctrltime = 14
air.type = Low
air.velocity = (fvar(4):=-2),(fvar(5):=-8.625*(5.0/4.0))
airguard.velocity = -5,-.75
air.hittime = 14
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 3
persistent = 0

[State 220, 2-1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H || (FVar(13) && (PrevStateNo = [3000,3999])))
triggerall = e||(var(49) := 5*!Var(30))
triggerall = e||(fvar(18) := (256*(NumTarget>0))+ifElse(Var(22)=2,15,0)*4/5)
triggerall = Var(22) = 2
trigger1 = AnimElemTime(4) = 0
attr = A, SA
damage = floor(ifElse((35*FVar(10))<7,7,(35*FVar(10)))),floor(ifElse((35/8*FVar(10))<7,7,(35/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(12*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-84)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = (fvar(4):=-2),(fvar(5):=-8.625*(5.0/4.0))
guard.velocity = -8.125
guard.ctrltime = 14
air.type = Low
air.velocity = (fvar(4):=-2),(fvar(5):=-8.625*(5.0/4.0))
airguard.velocity = -5,-.75
air.hittime = 14
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 3
persistent = 0
[State 220, 2-2]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H || (FVar(13) && (PrevStateNo = [3000,3999])))
triggerall = e||(var(49) := 4*!Var(30))
triggerall = e||(fvar(18) := (256*(NumTarget>0))+ifElse(Var(22)=2,15,0)*4/5)
triggerall = Var(22) = 2
trigger1 = AnimElemTime(4) = 3
attr = A, SA
damage = floor(ifElse((28*FVar(10))<7,7,(28*FVar(10)))),floor(ifElse((28/8*FVar(10))<7,7,(28/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(9*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-84)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = (fvar(4):=-2),(fvar(5):=-8.625*(5.0/4.0))
guard.velocity = -8.125
guard.ctrltime = 14
air.type = Low
air.velocity = (fvar(4):=-2),(fvar(5):=-8.625*(5.0/4.0))
airguard.velocity = -5,-.75
air.hittime = 14
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 3
[State 220, 2-3]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H || (FVar(13) && (PrevStateNo = [3000,3999])))
triggerall = e||(var(49) := 2*!Var(30))
triggerall = e||(fvar(18) := (256*(NumTarget>0))+ifElse(Var(22)=2,15,0)*4/5)
triggerall = Var(22) = 2
trigger1 = AnimElemTime(4) = 7
attr = A, SA
damage = floor(ifElse((14*FVar(10))<7,7,(14*FVar(10)))),floor(ifElse((14/8*FVar(10))<7,7,(14/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(9*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-84)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = (fvar(4):=-2),(fvar(5):=-8.625*(5.0/4.0))
guard.velocity = -8.125
guard.ctrltime = 14
air.type = Low
air.velocity = (fvar(4):=-2),(fvar(5):=-8.625*(5.0/4.0))
airguard.velocity = -5,-.75
air.hittime = 14
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 3
[State 220, 2-4]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H || (FVar(13) && (PrevStateNo = [3000,3999])))
triggerall = e||(var(49) := 2*!Var(30))
triggerall = Var(22) = 2
trigger1 = AnimElemTime(4) = 11
trigger1 = e||(fvar(18) := (256*(NumTarget>0))+ifElse(Var(22)=2,15,0)*4/5)
trigger2 = AnimElemTime(4) = 15
attr = A, SA
damage = floor(ifElse((14*FVar(10))<7,7,(14*FVar(10)))),floor(ifElse((14/8*FVar(10))<7,7,(14/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(9*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-84)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = (fvar(4):=-2),(fvar(5):=-8.625*(5.0/4.0))
guard.velocity = -8.125
guard.ctrltime = 14
air.type = Low
air.velocity = (fvar(4):=-2),(fvar(5):=-8.625*(5.0/4.0))
airguard.velocity = -5,-.75
air.hittime = 14
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 3
persistent = 0

[State 1100, ChangeState]
type = ChangeState
triggerall = AnimElemTime(4) > 1
trigger1 = Pos Y + Vel Y >= 0
value = 1205

;----------------------------------------------------------------------------------
; Custom Land State
[Statedef 1205]
type    = S
physics = S
ctrl = 0
anim = 1205
velset = 0,0

[State 52, Explod]
type = Explod
trigger1 = Time = 0
anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S40,2
channel = 13

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;----------------------------------------------------------------------------------
; Tiger Crush
[Statedef 1300]
type = S
movetype = A
physics = N
ctrl = 0
sprpriority = 2
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1)
juggle = 0
facep2 = 1

[State 1400, VarSet]
type = VarSet
triggerall = !AILevel
trigger1 = Time = 0
var(22) = ifElse((helper(10371), var(5) = [1,2]),2,ifElse((helper(10371), var(4) = [1,2]),1,ifElse((helper(10371), var(3) = [1,2]),0,ifElse((helper(10371), var(12) = [1,2]),2,ifElse((helper(10371), var(11) = [1,2]),1,0)))))
[State 1100, VarSet]
type = VarSet
triggerall = AILevel
trigger1 = Time = 0
var(22) = ifElse(P2BodyDist X < -48, 0, ifElse((P2BodyDist X = [-48,-54)), 1, 2))

[State 1300, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 1300+Var(22)*10

[State 1100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S8,13
channel = 0
[State 1100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,2
channel = 1
[State 1100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S200,0
channel = 2

[State 40, Jump Sound]
type = PlaySnd
trigger1 = AnimElemTime(4) = 1
value = S40,0
channel = 13
[State 40, Helper]
type = Helper
trigger1 = AnimElemTime(4) = 1
id = 8020
name = "Jump Effect"
pos =0,0
postype = p1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElemTime(4) = 0
statetype = A

[State 1300, VelSet]
type = VelSet
trigger1 = AnimElemTime(4) = 1
x = (9-0.5*Var(22))*(5.0/4.0)
y = (-11-Var(22))*(5.0/4.0)
[State 1300, VelSet]
type = VelAdd
trigger1 = AnimElemTime(4) > 0
y = 1.625*(25.0/16.0)

[State 220, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H || (FVar(13) && (PrevStateNo = [3000,3999])))
triggerall = e||(var(49) := (4+Var(22))*!Var(30))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 3
attr = S, SA
damage = floor(ifElse(((28+7*Var(22))*FVar(10))<7,7,((28+7*Var(22))*FVar(10)))),floor(ifElse(((28+7*Var(22))/8*FVar(10))<7,7,((28+7*Var(22))/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(12*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-35)
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = -8.125
guard.velocity = -8.125
guard.ctrltime = 14
air.type = Low
air.velocity = (fvar(4):=-6),(fvar(5):=-3.671875*(5.0/4.0))
airguard.velocity = -5,-.75
air.hittime = 14
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
fall = 0
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 3
[State 220, 2]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(30) || P2StateType != A || P2MoveType != H || (FVar(13) && (PrevStateNo = [3000,3999])))
triggerall = e||(var(49) := (11+Var(22))*!Var(30))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 4 || AnimElem = 5
attr = S, SA
damage = floor(ifElse(((77+7*Var(22))*FVar(10))<7,7,((77+7*Var(22))*FVar(10)))),floor(ifElse(((77+7*Var(22))/8*FVar(10))<7,7,((77+7*Var(22))/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(12*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-49)
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 14
ground.hittime  = 14
ground.velocity = (fvar(4):=-6),(fvar(5):=-3.671875*(5.0/4.0))
guard.velocity = -8.125
guard.ctrltime = 14
air.type = Low
air.velocity = (fvar(4):=-6),(fvar(5):=-3.671875*(5.0/4.0))
airguard.velocity = -5,-.75
air.hittime = 14
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*ifElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 3
persistent = 0

[State 1300, ChangeState]
type = ChangeState
trigger1 = AnimElemTime(4) > 1
trigger1 = Pos Y + Vel Y >= 0
value = 1205

;===============================================================================
;                                      SUPERS
;===============================================================================
;----------------------------------------------------------------------------------
; Tiger Cannon
[Statedef 3000]
type    = S
physics = N
movetype= A
ctrl = 0
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1)
juggle = 0
facep2 = 1

[State 3000, C]
type = VarSet
triggerall = Var(10) != 3
triggerall = !AILevel
trigger1 = Time = 0
var(22) = ifElse((((helper(10371), var(1) = [1,2])||(helper(10371), var(8) = [1,2])) && Power >= 2000) || (((helper(10371), var(2) = [1,2])||(helper(10371), var(9) = [1,2])) && (Power >= 2000 && Power < 3000)),1,ifElse(((helper(10371), var(2) = [1,2])||(helper(10371), var(9) = [1,2])) && Power >= 3000,2,0))
[State 3000, C]
type = VarSet
triggerall = Var(10) != 3
triggerall = AILevel
trigger1 = Time = 0
var(22) = ifElse(Power >= 2000, 1, 0) ; Always go for Lvl.2 cancel
[State 3000, A,S,N]
type = VarSet
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 2 || (Var(10) = 4 && (100*life/const(data.life))>30) || (Var(10) = 4 && (100*life/const(data.life))<=30 && !Var(17)) || Var(10) = 5
trigger1 = Time = 0
var(22) = 0
[State 1100, P,S-MAX,K]
type = VarSet
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 3 || (Var(10) = 4 && (100*life/const(data.life))<=30 && Var(17)) || Var(10) = 6
trigger1 = Time = 0
var(22) = 2
[State 1100, N-MAX]
type = VarSet
triggerall = Var(29)
trigger1 = Time = 0
var(22) = 2
[State 1100, A]
type = VarSet
triggerall = Var(30)
trigger1 = Time = 0
var(22) = 0

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = ifElse(!Var(22),54,ifElse(Var(22) = 1,60,65))

[State 3000, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 3000

[State 3000, SuperPause]
type = SuperPause
trigger1 = Time = 4
time = 50+(Var(22)*2)
movetime = 50+(Var(22)*2)
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0
[State 3000, Unguardable]
type = VarSet
trigger1 = Time = 4 && enemyNear, stateNo != [120,155]
var(48) = 50+(Var(22)*2)

[State 3000, PowerAdd]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 1 || !Var(10)
trigger1 = Time = 0
value = ifElse (!Var(22),-1000,ifElse(Var(22) = 1, -2000, -3000))

[State 3000, N]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 5
trigger1 = Time = 0
value = -1000
[State 3000, A]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 2
trigger1 = Time = 0
value = -1500
[State 3000, C,P,K]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 3 || Var(10) = 6 || (Var(10) = 4 && (100*life/const(data.life))>30) || (Var(10) = 4 && (100*life/const(data.life))<=30 && Var(17))
trigger1 = Time = 0
value = -3000
[State 3000, A]
type = PowerAdd
triggerall = Var(30)
trigger1 = Time = 0
value = -3000
[State 3000, N-MAX]
type = PowerAdd
triggerall = Var(29)
trigger1 = Time = 0
value = -1000

[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
var(17) = 0
[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
var(29) = 0
[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
var(30) = 0
[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
fvar(14) = 0

[State 3000, AfterImage]
type = AfterImage
triggerall = !Var(31) && PrevStateNo != [3000,3999]
trigger1 = Time = 4
time = 999
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast = ifElse(!Var(22), 128, ifElse(Var(22) = 1, 50, 150)),ifElse(!Var(22), 128, ifElse(Var(22) = 1, 50, 50)),ifElse(!Var(22), 128, ifElse(Var(22) = 1, 150, 50))
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 3000, Helper]
type = Helper
trigger1 = Time = 4
ID = 8000
name = "Super"
pos = ceil(-14*Const(size.xscale)),ceil(-77*Const(size.yscale));ceil(-22*Const(size.xscale)),ceil(-53*Const(size.yscale))
postype = P1
stateno = ifElse((Var(10) = [4,6]),8010,8000)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 1
size.yscale = 1

[State 3000, PlaySnd]
type = PlaySnd
trigger1 = Time = 4
value = S8,14
persistent = 0
channel = 0
[State 3000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S8,8
persistent = 0
channel = 0
[State 210, Tiger]
type = PlaySnd
trigger1 = AnimElem = 3
value = S200,2
channel = 2

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(3) = 1
value = S200,0
channel = 2

[State 1000, Helper]
type = Helper
trigger1 = AnimElemTime(3) = 1
ID = 2005
name = "Tiger Cannon"
pos = ceil(100*Const(Size.XScale)),ceil(-86*Const(Size.YScale));ceil(ifElse(Var(22) = 1,64,74)*Const(size.xscale)),ceil(-74*Const(size.yscale))
postype = P1
stateno = 2005
helpertype = normal;projectile
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
size.xscale = 1
size.yscale = 1

[State 1000, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Ground Tiger Cannon
[Statedef 3100]
type    = S
physics = N
movetype= A
ctrl = 0
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*ifElse((Var(29)||Var(30)),0,1)
juggle = 0
facep2 = 1

[State 3000, C]
type = VarSet
triggerall = Var(10) != 3
triggerall = !AILevel
trigger1 = Time = 0
var(22) = ifElse((((helper(10371), var(1) = [1,2])||(helper(10371), var(8) = [1,2])) && Power >= 2000) || (((helper(10371), var(2) = [1,2])||(helper(10371), var(9) = [1,2])) && (Power >= 2000 && Power < 3000)),1,ifElse(((helper(10371), var(2) = [1,2])||(helper(10371), var(9) = [1,2])) && Power >= 3000,2,0))
[State 3000, C]
type = VarSet
triggerall = Var(10) != 3
triggerall = AILevel
trigger1 = Time = 0
var(22) = ifElse(Power >= 2000, 1, 0) ; Always go for Lvl.2 cancel
[State 3000, A,S,N]
type = VarSet
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 2 || (Var(10) = 4 && (100*life/const(data.life))>30) || (Var(10) = 4 && (100*life/const(data.life))<=30 && !Var(17)) || Var(10) = 5
trigger1 = Time = 0
var(22) = 0
[State 1100, P,S-MAX,K]
type = VarSet
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 3 || (Var(10) = 4 && (100*life/const(data.life))<=30 && Var(17)) || Var(10) = 6
trigger1 = Time = 0
var(22) = 2
[State 1100, N-MAX]
type = VarSet
triggerall = Var(29)
trigger1 = Time = 0
var(22) = 2
[State 1100, A]
type = VarSet
triggerall = Var(30)
trigger1 = Time = 0
var(22) = 0

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = ifElse(!Var(22),54,ifElse(Var(22) = 1,60,65))

[State 3000, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 3100

[State 3000, SuperPause]
type = SuperPause
trigger1 = Time = 4
time = 50+(Var(22)*2)
movetime = 50+(Var(22)*2)
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0
[State 3000, Unguardable]
type = VarSet
trigger1 = Time = 4 && enemyNear, stateNo != [120,155]
var(48) = 50+(Var(22)*2)

[State 3000, PowerAdd]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 1 || !Var(10)
trigger1 = Time = 0
value = ifElse (!Var(22),-1000,ifElse(Var(22) = 1, -2000, -3000))

[State 3000, N]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 5
trigger1 = Time = 0
value = -1000
[State 3000, A]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 2
trigger1 = Time = 0
value = -1500
[State 3000, C,P,K]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 3 || Var(10) = 6 || (Var(10) = 4 && (100*life/const(data.life))>30) || (Var(10) = 4 && (100*life/const(data.life))<=30 && Var(17))
trigger1 = Time = 0
value = -3000
[State 3000, A]
type = PowerAdd
triggerall = Var(30)
trigger1 = Time = 0
value = -3000
[State 3000, N-MAX]
type = PowerAdd
triggerall = Var(29)
trigger1 = Time = 0
value = -1000

[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
var(17) = 0
[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
var(29) = 0
[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
var(30) = 0
[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
fvar(14) = 0

[State 3000, AfterImage]
type = AfterImage
triggerall = !Var(31) && PrevStateNo != [3000,3999]
trigger1 = Time = 4
time = 999
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast = ifElse(!Var(22), 128, ifElse(Var(22) = 1, 50, 150)),ifElse(!Var(22), 128, ifElse(Var(22) = 1, 50, 50)),ifElse(!Var(22), 128, ifElse(Var(22) = 1, 150, 50))
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 3000, Helper]
type = Helper
trigger1 = Time = 4
ID = 8000
name = "Super"
pos = ceil(-28*Const(size.xscale)),ceil(-49*Const(size.yscale));ceil(-22*Const(size.xscale)),ceil(-53*Const(size.yscale))
postype = P1
stateno = ifElse((Var(10) = [4,6]),8010,8000)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 1
size.yscale = 1

[State 3000, PlaySnd]
type = PlaySnd
trigger1 = Time = 4
value = S8,14
persistent = 0
channel = 0
[State 3000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S8,8
persistent = 0
channel = 0
[State 210, Tiger]
type = PlaySnd
trigger1 = AnimElem = 3
value = S200,2
channel = 2

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(3) = 1
value = S200,0
channel = 2

[State 1000, Helper]
type = Helper
trigger1 = AnimElemTime(3) = 1
ID = 2105
name = "Tiger Cannon"
pos = ceil(88*Const(Size.XScale)),ceil(-51*Const(Size.YScale));ceil(ifElse(Var(22) = 1,64,74)*Const(size.xscale)),ceil(-74*Const(size.yscale))
postype = P1
stateno = 2005
helpertype = normal;projectile
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
size.xscale = 1
size.yscale = 1

[State 1000, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Tiger Genocide (start)
[Statedef 3200]
type    = S
physics = N
movetype= A
ctrl = 0
velset = 0,0
facep2 = 1
juggle = 0

[State 3000, C]
type = VarSet
triggerall = !AILevel
triggerall = Var(10) != 3
trigger1 = Time = 0
var(22) = ifElse((((helper(10371), var(4) = [1,2])||(helper(10371), var(11) = [1,2])) && Power >= 2000) || (((helper(10371), var(5) = [1,2])||(helper(10371), var(12) = [1,2])) && (Power >= 2000 && Power < 3000)),1,ifElse(((helper(10371), var(5) = [1,2])||(helper(10371), var(12) = [1,2])) && Power >= 3000,2,0))
[State 3000, C]
type = VarSet
triggerall = AILevel
triggerall = Var(10) != 3
trigger1 = Time = 0
var(22) = ifElse((random < 250 && Power >= 2000) || (random < 333 && (Power >= 2000 && Power < 3000)),1,ifElse(random < 750 && Power >= 3000,2,0))
[State 3000, A,S,N]
type = VarSet
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 2 || (Var(10) = 4 && (100*life/const(data.life))>30) || (Var(10) = 4 && (100*life/const(data.life))<=30 && !Var(17)) || Var(10) = 5
trigger1 = Time = 0
var(22) = 0
[State 1100, P,S-MAX,K]
type = VarSet
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 3 || (Var(10) = 4 && (100*life/const(data.life))<=30 && Var(17)) || Var(10) = 6
trigger1 = Time = 0
var(22) = 2
[State 1100, N-MAX]
type = VarSet
triggerall = Var(29)
trigger1 = Time = 0
var(22) = 2
[State 1100, A]
type = VarSet
triggerall = Var(30)
trigger1 = Time = 0
var(22) = 0

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = ifElse(!Var(22),54,ifElse(Var(22) = 1,60,65))

[State 3000, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 3200+Var(22)*10

[State 3000, SuperPause]
type = SuperPause
trigger1 = Time = 4
time = 50+(var(22)*2)
movetime = 50+(var(22)*2)
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0
[State 3000, Unguardable]
type = VarSet
trigger1 = Time = 4 && enemyNear, stateNo != [120,155]
var(48) = 50+(Var(22)*2)

[State 3000, C]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 1 || !Var(10)
trigger1 = Time = 0
value = ifElse (!Var(22),-1000,ifElse(Var(22) = 1, -2000, -3000))
[State 3000, N]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 5
trigger1 = Time = 0
value = -1000
[State 3000, A]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 2
trigger1 = Time = 0
value = -1500
[State 3000, P,S,K]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 3 || Var(10) = 6 || (Var(10) = 4 && (100*life/const(data.life))>30) || (Var(10) = 4 && (100*life/const(data.life))<=30 && Var(17))
trigger1 = Time = 0
value = -3000
[State 3000, A]
type = PowerAdd
triggerall = Var(30)
trigger1 = Time = 0
value = -3000
[State 3000, N-MAX]
type = PowerAdd
triggerall = Var(29)
trigger1 = Time = 0
value = -1000

[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
var(17) = 0
[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
var(29) = 0
[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
var(30) = 0
[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
fvar(14) = 0

[State 3000, AfterImage]
type = AfterImage
triggerall = !Var(31) && PrevStateNo != [3000,3999]
trigger1 = Time = 4
time = 999
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast = ifElse(!Var(22), 128, ifElse(Var(22) = 1, 50, 150)),ifElse(!Var(22), 128, ifElse(Var(22) = 1, 50, 50)),ifElse(!Var(22), 128, ifElse(Var(22) = 1, 150, 50))
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 3000, Helper]
type = Helper
trigger1 = Time = 4
ID = 8000
name = "Super"
pos = ceil(35*Const(size.xscale)),ceil(-98*Const(size.yscale))
postype = P1
stateno = ifElse((Var(10) = [4,6]),8010,8000)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 1
size.yscale = 1

[State 3100, PlaySnd]
type = PlaySnd
trigger1 = Time = 4
value = S8,14
persistent = 0
channel = 0

[State 3100, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(4) = 1
value = S8,9
persistent = 0
channel = 0
[State 3100, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(4) = 1
value = S1,2
channel = 1
[State 40, Jump Sound]
type = PlaySnd
trigger1 = AnimElemTime(4) = 1
value = S40,0
channel = 13
[State 40, Helper]
type = Helper
trigger1 = AnimElemTime(4) = 1
id = 8020
name = "Jump Effect"
pos =0,0
postype = p1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 3100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = S200,0
persistent = 0
channel = 2

[State 3100, VelSet]
type = VelSet
trigger1 = AnimElemTime(4) = 1
x = 8*(5.0/4.0)
y = -2*(5.0/4.0)
[State 3100, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElemTime(4) = 0
statetype = A

[State 3100, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(4) > 0
y = 0.1875*(25.0/16.0)

[State 3100, VelSet]
type = VelSet
trigger1 = AnimElemTime(7) = 0
x = 0

[State 3000, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(31) || P2StateType != A || P2MoveType != H || (FVar(13) && (PrevStateNo = [3000,3999])))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 3
attr = S, HA
damage = floor(ifElse((49*FVar(10))<7,7,(49*FVar(10)))),floor(ifElse((49/8*FVar(10))<7,7,(49/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 4,4
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-63)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 23
ground.hittime  = 23
ground.velocity = -5.77
guard.velocity = -5.77
guard.ctrltime = 23
air.type = Low
air.velocity = -4,-4.921875*(5.0/4.0)
airguard.velocity = -6,-.75
air.hittime = 23
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = 0.328125*(25.0/16.0)
air.fall = 1
fall.recover = 0
forcestand = 1
[State 3000, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(31) || P2StateType != A || P2MoveType != H || (FVar(13) && (PrevStateNo = [3000,3999])))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 4
attr = S, HA
damage = floor(ifElse((42*FVar(10))<7,7,(42*FVar(10)))),floor(ifElse((42/8*FVar(10))<7,7,(42/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 4,4
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-63)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 23
ground.hittime  = 23
ground.velocity = -5.77
guard.velocity = -5.77
guard.ctrltime = 23
air.type = Low
air.velocity = -4,-4.921875*(5.0/4.0)
airguard.velocity = -6,-.75
air.hittime = 23
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = 0.328125*(25.0/16.0)
air.fall = 1
fall.recover = 0
forcestand = 1
[State 3000, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(31) || P2StateType != A || P2MoveType != H || (FVar(13) && (PrevStateNo = [3000,3999])))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 5
trigger2 = AnimElem = 6
trigger2 = !NumTarget(3200) || Var(22) != 1
attr = S, HA
damage = floor(ifElse((28*FVar(10))<7,7,(28*FVar(10)))),floor(ifElse((28/8*FVar(10))<7,7,(28/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 4,4
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-63)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 23
ground.hittime  = 23
ground.velocity = -5.77
guard.velocity = -5.77
guard.ctrltime = 23
air.type = Low
air.velocity = -4,-4.921875*(5.0/4.0)
airguard.velocity = -6,-.75
air.hittime = 23
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = 0.328125*(25.0/16.0)
air.fall = 1
fall.recover = 0
forcestand = 1
persistent = 1
ID = 3200

[State 1000, ChangeState]
type = ChangeState
triggerall = AnimElemTime(4) > 1
trigger1 = Vel Y + Pos Y >= 0
value = 3201+(Var(22)=2)

;----------------------------------------------------------------------------------
; Tiger Genocide (light, medium part 2)
[Statedef 3201]
type    = S
physics = N
movetype= A
ctrl = 0
juggle = 0
anim = ifElse(PrevStateNo=3202, 3222, 3201+Var(22)*10)
velset = 0,0

[State 3100, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElemTime(4) = 0
statetype = A

[State 3201, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S200,0
persistent = 0
channel = 2

[State 3100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S0,2
channel = 1

[State 40, Jump Sound]
type = PlaySnd
trigger1 = AnimElemTime(4) = 1
value = S40,0
channel = 13
[State 40, Helper]
type = Helper
trigger1 = AnimElemTime(4) = 1
id = 8020
name = "Jump Effect"
pos =0,0
postype = p1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 3100, Heavy VelSet]
type = VelSet
trigger1 = AnimElemTime(4) = 1
x = ifElse(Var(22),12,7)*(5.0/4.0)
y = -ifElse(Var(22),9,7)*(5.0/4.0)

[State 3100, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(4) > 0
x = ifElse(Vel X <= 0, 0, -0.5)*(25.0/16.0)
y = 0.375*(25.0/16.0)
[State 3100, VelSet]
type = VelSet
trigger1 = Vel X <= 0
x = 0

[State 3000, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(31) || P2StateType != A || P2MoveType != H || (FVar(13) && (PrevStateNo = [3000,3999])))
triggerall = e||(fvar(18) := (256*(NumTarget>0))+(15*4/5))
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
attr = S, HA
damage = floor(ifElse((42*FVar(10))<7,7,(42*FVar(10)))),floor(ifElse((42/8*FVar(10))<7,7,(42/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 4,4
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-42)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 23
ground.hittime  = 23
ground.velocity = -2,-8.625*(5.0/4.0)
guard.velocity = -5.77
guard.ctrltime = 23
air.type = High
air.velocity = -2,-8.625*(5.0/4.0)
airguard.velocity = -6,-.75
air.hittime = 23
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = 0.375*(5.0/4.0)
fall = 1
air.fall = 1
fall.recover = 0
persistent = 0
[State 3000, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(31) || P2StateType != A || P2MoveType != H || (FVar(13) && (PrevStateNo = [3000,3999])))
triggerall = e||(fvar(18) := (256*(NumTarget>0))+(15*4/5))
trigger1 = AnimElem = 3
attr = S, HA
damage = floor(ifElse((28*FVar(10))<7,7,(28*FVar(10)))),floor(ifElse((28/8*FVar(10))<7,7,(28/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 4,4
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-49)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 23
ground.hittime  = 23
ground.velocity = -2,-8.625*(5.0/4.0)
guard.velocity = -5.77
guard.ctrltime = 23
air.type = High
air.velocity = -2,-8.625*(5.0/4.0)
airguard.velocity = -6,-.75
air.hittime = 23
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = 0.375*(5.0/4.0)
fall = 1
air.fall = 1
fall.recover = 0
persistent = 0
[State 3000, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(31) || P2StateType != A || P2MoveType != H || (FVar(13) && (PrevStateNo = [3000,3999])))
triggerall = e||(fvar(18) := (256*(NumTarget>0))+(15*4/5))
trigger1 = AnimElem = 4
attr = S, HA
damage = floor(ifElse((ifElse(Var(22),28,21)*FVar(10))<7,7,(ifElse(Var(22),28,21)*FVar(10)))),floor(ifElse((ifElse(Var(22),28,21)/8*FVar(10))<7,7,(ifElse(Var(22),28,21)/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 4,4
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-84)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 23
ground.hittime  = 23
ground.velocity = -2,-8.625*(5.0/4.0)
guard.velocity = -5.77
guard.ctrltime = 23
air.type = High
air.velocity = -2,-8.625*(5.0/4.0)
airguard.velocity = -6,-.75
air.hittime = 23
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = 0.375*(5.0/4.0)
fall = 1
air.fall = 1
fall.recover = 0
persistent = 0
[State 3000, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(31) || P2StateType != A || P2MoveType != H || (FVar(13) && (PrevStateNo = [3000,3999])))
triggerall = e||(fvar(18) := (256*(NumTarget>0))+(15*4/5))
trigger1 = Var(22) = 1 && AnimElem = 5, = 0
trigger2 = Var(22) = 1 && AnimElem = 5, = 4
trigger3 = Var(22) = 1 && AnimElem = 5, = 8
trigger4 = Var(22) = 1 && AnimElem = 5, = 12
trigger5 = Var(22) = 2 && AnimElem = 5, = 0
trigger6 = Var(22) = 2 && AnimElem = 5, = 3
trigger7 = Var(22) = 2 && AnimElem = 5, = 6
trigger8 = Var(22) = 2 && AnimElem = 5, = 9
attr = S, HA
damage = floor(ifElse((21*FVar(10))<7,7,(21*FVar(10)))),floor(ifElse((21/8*FVar(10))<7,7,(21/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 4,4
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-84)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 23
ground.hittime  = 23
ground.velocity = -2,-8.625*(5.0/4.0)
guard.velocity = -5.77
guard.ctrltime = 23
air.type = High
air.velocity = -2,-8.625*(5.0/4.0)
airguard.velocity = -6,-.75
air.hittime = 23
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = 0.375*(5.0/4.0)
fall = 1
air.fall = 1
fall.recover = 0

[State 1000, ChangeState]
type = ChangeState
triggerall = AnimElemTime(4) > 1
trigger1 = Vel Y + Pos Y >= 0
value = 3205

;----------------------------------------------------------------------------------
; Tiger Genocide (heavy part 2)
[Statedef 3202]
type    = S
physics = N
movetype= A
ctrl = 0
juggle = 0
anim = 3221
velset = 0,0

[State 3201, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3100, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElemTime(4) = 0
statetype = A

[State 3100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S200,0
persistent = 0
channel = 2

[State 3100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S0,2
channel = 1

[State 40, Jump Sound]
type = PlaySnd
trigger1 = AnimElemTime(4) = 1
value = S40,0
channel = 13
[State 40, Helper]
type = Helper
trigger1 = AnimElemTime(4) = 1
id = 8020
name = "Jump Effect"
pos =0,0
postype = p1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 3100, Heavy VelSet]
type = VelSet
trigger1 = AnimElemTime(4) = 1
x = 5*(5.0/4.0)
y = -5*(5.0/4.0)

[State 3100, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(4) > 0
x = ifElse(Vel X <= 0, 0, -0.5)*(25.0/16.0)
y = 0.375*(25.0/16.0)
[State 3100, VelSet]
type = VelSet
trigger1 = Vel X <= 0
x = 0

[State 3000, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(31) || P2StateType != A || P2MoveType != H || (FVar(13) && (PrevStateNo = [3000,3999])))
trigger1 = e||(fvar(18) := (256*(NumTarget>0))+(15*4/5))
trigger1 = AnimElem = 2
attr = S, HA
damage = floor(ifElse((42*FVar(10))<7,7,(42*FVar(10)))),floor(ifElse((42/8*FVar(10))<7,7,(42/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 4,4
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-42)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 23
ground.hittime  = 23
ground.velocity = -5.77
guard.velocity = -5.77
guard.ctrltime = 23
air.type = High
air.velocity = -2,-8.625*(5.0/4.0)
airguard.velocity = -6,-.75
air.hittime = 23
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = 0.375*(25.0/16.0)
air.fall = 1
fall.recover = 0
[State 3000, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(31) || P2StateType != A || P2MoveType != H || (FVar(13) && (PrevStateNo = [3000,3999])))
trigger1 = e||(fvar(18) := (256*(NumTarget>0))+(15*4/5))
trigger1 = AnimElem = 3
attr = S, HA
damage = floor(ifElse((28*FVar(10))<7,7,(28*FVar(10)))),floor(ifElse((28/8*FVar(10))<7,7,(28/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 4,4
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-49)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 23
ground.hittime  = 23
ground.velocity = -5.77
guard.velocity = -5.77
guard.ctrltime = 23
air.type = High
air.velocity = -2,-8.625*(5.0/4.0)
airguard.velocity = -6,-.75
air.hittime = 23
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = 0.375*(25.0/16.0)
air.fall = 1
fall.recover = 0
[State 3000, 1]
type = HitDef
triggerall = P2StateNo != 5040 && ((FVar(19) != 0 && FVar(19) != 256) || Var(31) || P2StateType != A || P2MoveType != H || (FVar(13) && (PrevStateNo = [3000,3999])))
trigger1 = e||(fvar(18) := (256*(NumTarget>0))+(15*4/5))
trigger1 = AnimElem = 4
attr = S, HA
damage = floor(ifElse((21*FVar(10))<7,7,(21*FVar(10)))),floor(ifElse((21/8*FVar(10))<7,7,(21/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 4,4
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-84)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 33
ground.hittime  = 33
ground.velocity = -5.77
guard.velocity = -5.77
guard.ctrltime = 33
air.type = High
air.velocity = -2,-8.625*(5.0/4.0)
airguard.velocity = -6,-.75
air.hittime = 33
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = 0.375*(25.0/16.0)
air.fall = 1
fall.recover = 0

[State 1000, ChangeState]
type = ChangeState
triggerall = AnimElemTime(4) > 1
trigger1 = Vel Y + Pos Y >= 0
value = 3201

;----------------------------------------------------------------------------------
; Custom Land State
[Statedef 3205]
type    = S
physics = S
ctrl = 0
anim = 3205
velset = 0,0

[State 52, Explod]
type = Explod
trigger1 = Time = 0
anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S40,2
channel = 13

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;----------------------------------------------------------------------------------
; Tiger Raid
[Statedef 3300]
type    = S
physics = N
movetype= A
ctrl = 0
velset = 0,0
facep2 = 1
juggle = 0

[State 3000, C]
type = VarSet
triggerall = !AILevel
triggerall = Var(10) != 3
trigger1 = Time = 0
var(22) = ifElse((((helper(10371), var(4) = [1,2])||(helper(10371), var(11) = [1,2])) && Power >= 2000) || (((helper(10371), var(5) = [1,2])||(helper(10371), var(12) = [1,2])) && (Power >= 2000 && Power < 3000)),1,ifElse(((helper(10371), var(5) = [1,2])||(helper(10371), var(12) = [1,2])) && Power >= 3000,2,0))
[State 3000, C]
type = VarSet
triggerall = AILevel
triggerall = Var(10) != 3
trigger1 = Time = 0
var(22) = ifElse((random < 250 && Power >= 2000) || (random < 333 && (Power >= 2000 && Power < 3000)),1,ifElse(random < 750 && Power >= 3000,2,0))
[State 3000, A,S,N]
type = VarSet
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 2 || (Var(10) = 4 && (100*life/const(data.life))>30) || (Var(10) = 4 && (100*life/const(data.life))<=30 && !Var(17)) || Var(10) = 5
trigger1 = Time = 0
var(22) = 0
[State 1100, P,S-MAX,K]
type = VarSet
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 3 || (Var(10) = 4 && (100*life/const(data.life))<=30 && Var(17)) || Var(10) = 6
trigger1 = Time = 0
var(22) = 2
[State 1100, N-MAX]
type = VarSet
triggerall = Var(29)
trigger1 = Time = 0
var(22) = 2
[State 1100, A]
type = VarSet
triggerall = Var(30)
trigger1 = Time = 0
var(22) = 0

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = ifElse(!Var(22),54,ifElse(Var(22) = 1,60,65))

[State 3000, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 3300+Var(22)*10

[State 3000, SuperPause]
type = SuperPause
trigger1 = Time = 4
time = 50+(var(22)*2)
movetime = 50+(var(22)*2)
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0
[State 3000, Unguardable]
type = VarSet
trigger1 = Time = 4 && enemyNear, stateNo != [120,155]
var(48) = 50+(Var(22)*2)

[State 3000, C]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 1 || !Var(10)
trigger1 = Time = 0
value = ifElse (!Var(22),-1000,ifElse(Var(22) = 1, -2000, -3000))
[State 3000, N]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 5
trigger1 = Time = 0
value = -1000
[State 3000, A]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 2
trigger1 = Time = 0
value = -1500
[State 3000, P,S,K]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 3 || Var(10) = 6 || (Var(10) = 4 && (100*life/const(data.life))>30) || (Var(10) = 4 && (100*life/const(data.life))<=30 && Var(17))
trigger1 = Time = 0
value = -3000
[State 3000, A]
type = PowerAdd
triggerall = Var(30)
trigger1 = Time = 0
value = -3000
[State 3000, N-MAX]
type = PowerAdd
triggerall = Var(29)
trigger1 = Time = 0
value = -1000

[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
var(17) = 0
[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
var(29) = 0
[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
var(30) = 0
[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
fvar(14) = 0

[State 3000, AfterImage]
type = AfterImage
triggerall = !Var(31) && PrevStateNo != [3000,3999]
trigger1 = Time = 4
time = 999
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast = ifElse(!Var(22), 128, ifElse(Var(22) = 1, 50, 150)),ifElse(!Var(22), 128, ifElse(Var(22) = 1, 50, 50)),ifElse(!Var(22), 128, ifElse(Var(22) = 1, 150, 50))
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 3000, Helper]
type = Helper
trigger1 = Time = 4
ID = 8000
name = "Super"
pos = ceil(35*Const(size.xscale)),ceil(-98*Const(size.yscale))
postype = P1
stateno = ifElse((Var(10) = [4,6]),8010,8000)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 1
size.yscale = 1

[State 3100, PlaySnd]
type = PlaySnd
trigger1 = Time = 4
value = S8,14
persistent = 0
channel = 0

[State 3100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S8,10
persistent = 0
channel = 0
[State 3100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S200,0
persistent = 0
channel = 2
[State 3100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 9 && Var(22) != 1
trigger3 = AnimElem = 10 && Var(22) = 1
trigger4 = AnimElem = 16 && Var(22) = 1
trigger5 = AnimElem = 15 && Var(22) = 2
trigger6 = Var(22) = 0 && AnimElemTime(13) = 2
trigger7 = Var(22) = 1 && AnimElemTime(20) = 2
trigger8 = Var(22) = 2 && AnimElemTime(19) = 2
value = S1,2
[State 40, Jump Sound]
type = PlaySnd
trigger1 = AnimElemTime(4) = 1
value = S40,0
channel = 13
[State 100, Explod]
type = Explod
trigger1 = AnimElemTime(4) = 1
anim = 8040
pos = 0,0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 3
supermovetime = -1
scale = .5,.5
removetime = 23
removeongethit = 1
persistent = 0
[State 40, Jump Sound]
type = PlaySnd
trigger1 = Var(22) = 0 && AnimElem = 13
trigger2 = Var(22) = 1 && AnimElem = 20
trigger3 = Var(22) = 2 && AnimElem = 19
value = S40,4
channel = 13

[State 3100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S200,0
persistent = 0
channel = 2

[State 3100, VelSet]
type = VelSet
trigger1 = AnimElemTime(3) = 0
x = 2*(5.0/4.0)
[State 3100, VelSet]
type = VelSet
trigger1 = Var(22) = 0 && AnimElemTime(11) = 1
trigger2 = Var(22) = 1 && AnimElemTime(18) = 2
trigger3 = Var(22) = 2 && AnimElemTime(17) = 1
x = 10*(5.0/4.0)
[State 3100, StateTypeSet]
type = StateTypeSet
trigger1 = Var(22) = 0 && AnimElemTime(13) = 0
trigger2 = Var(22) = 1 && AnimElemTime(20) = 0
trigger3 = Var(22) = 2 && AnimElemTime(19) = 0
statetype = A

[State 3100, VelSet]
type = VelSet
trigger1 = Var(22) = 0 && AnimElemTime(18) = 0
trigger2 = Var(22) = 1 && AnimElemTime(25) = 0
trigger3 = Var(22) = 2 && AnimElemTime(24) = 0
x = 0

[State 3000, 1]
type = HitDef
triggerall = P2StateNo != 5040 && (Var(31) || P2StateType != A || P2MoveType != H || (FVar(13) && (PrevStateNo = [3000,3999])))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 5
attr = S, HA
damage = floor(ifElse((ifElse(Var(22)=2,77,56)*FVar(10))<7,7,(ifElse(Var(22)=2,77,56)*FVar(10)))),floor(ifElse((ifElse(Var(22)=2,77,56)/8*FVar(10))<7,7,(ifElse(Var(22)=2,77,56)/8*FVar(10))))
animtype = Heavy
air.animtype = Up
fall.animtype = Up
guardflag = L
hitflag = MAF
priority = 7, Hit
pausetime = 4,4
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-14)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 23
ground.hittime  = 23
ground.velocity = -5.77
guard.velocity = -5.77
guard.ctrltime = 23
air.type = Low
air.velocity = -4,-4.921875*(5.0/4.0)
airguard.velocity = -6,-.75
air.hittime = 23
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = 0.328125*(25.0/16.0)
air.fall = 1
fall.recover = 0
forcestand = 1
[State 3000, 1]
type = HitDef
triggerall = P2StateNo != 5040 && (Var(31) || P2StateType != A || P2MoveType != H || (FVar(13) && (PrevStateNo = [3000,3999])))
triggerall = e||(fvar(18) := 0)
trigger1 = AnimElem = 10 && Var(22) != 1
trigger2 = AnimElem = 11 && Var(22) = 1
attr = S, HA
damage = floor(ifElse((ifElse(Var(22)=2,63,49)*FVar(10))<7,7,(ifElse(Var(22)=2,63,49)*FVar(10)))),floor(ifElse((ifElse(Var(22)=2,63,49)/8*FVar(10))<7,7,(ifElse(Var(22)=2,63,49)/8*FVar(10))))
animtype = Heavy
air.animtype = Up
fall.animtype = Up
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 4,4
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-70)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 23
ground.hittime  = 23
ground.velocity = -5.77
guard.velocity = -5.77
guard.ctrltime = 23
air.type = Low
air.velocity = -4,-4.921875*(5.0/4.0)
airguard.velocity = -6,-.75
air.hittime = 23
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = 0.328125*(25.0/16.0)
air.fall = 1
fall.recover = 0
forcestand = 1
[State 3000, 1]
type = HitDef
triggerall = P2StateNo != 5040 && (Var(31) || P2StateType != A || P2MoveType != H || (FVar(13) && (PrevStateNo = [3000,3999])))
triggerall = e||(fvar(18) := 0)
trigger1 = Var(22) = 1 && AnimElem = 17
trigger2 = Var(22) = 2 && AnimElem = 16
attr = S, HA
damage = floor(ifElse((ifElse(Var(22)=2,91,63)*FVar(10))<7,7,(ifElse(Var(22)=2,91,63)*FVar(10)))),floor(ifElse((ifElse(Var(22)=2,91,63)/8*FVar(10))<7,7,(ifElse(Var(22)=2,91,63)/8*FVar(10))))
animtype = Heavy
air.animtype = Up
fall.animtype = Up
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 4,4
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-70)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 23
ground.hittime  = 23
ground.velocity = -5.77
guard.velocity = -5.77
guard.ctrltime = 23
air.type = Low
air.velocity = -4,-4.921875*(5.0/4.0)
airguard.velocity = -6,-.75
air.hittime = 23
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = 0.328125*(25.0/16.0)
air.fall = 1
fall.recover = 0
forcestand = 1
[State 3000, 1]
type = HitDef
triggerall = P2StateNo != 5040 && (Var(31) || P2StateType != A || P2MoveType != H || (FVar(13) && (PrevStateNo = [3000,3999])))
triggerall = e||(fvar(18) := 0)
trigger1 = Var(22) = 0 && AnimElem = 15, = 0
trigger2 = Var(22) = 0 && AnimElem = 15, = 1
trigger3 = Var(22) = 0 && AnimElem = 15, = 3

trigger4 = Var(22) = 1 && AnimElem = 22, = 0
trigger5 = Var(22) = 1 && AnimElem = 22, = 1
trigger6 = Var(22) = 1 && AnimElem = 22, = 3

trigger7 = Var(22) = 2 && AnimElem = 21, = 0
trigger8 = Var(22) = 2 && AnimElem = 21, = 1
trigger9 = Var(22) = 2 && AnimElem = 21, = 3
attr = A, HA
damage = floor(ifElse((ifElse(Var(22)=2,42,21+(7*Var(22)))*FVar(10))<7,7,(ifElse(Var(22)=2,42,21+(7*Var(22)))*FVar(10)))),floor(ifElse((ifElse(Var(22)=2,42,21+(7*Var(22)))/8*FVar(10))<7,7,(ifElse(Var(22)=2,42,21+(7*Var(22)))/8*FVar(10))))
animtype = Heavy
air.animtype = Up
fall.animtype = Up
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 4,4
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-70)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 23
ground.hittime  = 23
ground.velocity = -5.77
guard.velocity = -5.77
guard.ctrltime = 23
air.type = Low
air.velocity = -5,-4.296875*(5.0/4.0)
airguard.velocity = -6,-.75
air.hittime = 23
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = 0.328125*(25.0/16.0)
fall = (Var(22) = 2 && AnimElem = 21, = 5)
air.fall = 1
fall.recover = 0
forcestand = 1
ID = ifElse(Var(22)=2,3301,3300)
[State 3000, Light/Medium Finish]
type = HitDef
triggerall = P2StateNo != 5040 && (Var(31) || P2StateType != A || P2MoveType != H || (FVar(13) && (PrevStateNo = [3000,3999])))
triggerall = e||(fvar(18) := 0)
trigger1 = Var(22) = 0 && AnimElem = 15, = 5
trigger2 = Var(22) = 1 && AnimElem = 22, = 5
attr = A, HA
damage = floor(ifElse(((21+(7*Var(22)))*FVar(10))<7,7,((21+(7*Var(22)))*FVar(10)))),floor(ifElse(((21+(7*Var(22)))/8*FVar(10))<7,7,((21+(7*Var(22)))/8*FVar(10))))
animtype = Heavy
air.animtype = Up
fall.animtype = Up
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 4,4
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-70)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 23
ground.hittime  = 23
ground.velocity = -5,-4.296875*(5.0/4.0)
guard.velocity = -5.77
guard.ctrltime = 23
air.type = Low
air.velocity = -5,-4.296875*(5.0/4.0)
airguard.velocity = -6,-.75
air.hittime = 23
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = 0.328125*(25.0/16.0)
fall = 1
air.fall = 1
fall.recover = 0
forcestand = 1
ID = ifElse(Var(22)=2,3301,3300)
[State 3000, Heavy Finish]
type = HitDef
triggerall = P2StateNo != 5040 && (Var(31) || P2StateType != A || P2MoveType != H || (FVar(13) && (PrevStateNo = [3000,3999])))
triggerall = e||(fvar(18) := 0)
trigger1 = Var(22) = 2 && AnimElem = 21, = 5
attr = A, HA
damage = floor(ifElse((42*FVar(10))<7,7,(42*FVar(10)))),floor(ifElse((42/8*FVar(10))<7,7,(42/8*FVar(10))))
animtype = Heavy
air.animtype = Up
fall.animtype = Up
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 4,4
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-40),ceil(fvar(27):=-70)
palfx.color = 64
palfx.add = 100,40,50
palfx.mul = 90,50,40
palfx.time = 33
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 23
ground.hittime  = 23
ground.velocity = -5,-4.296875*(5.0/4.0)
guard.velocity = -5.77
guard.ctrltime = 23
air.type = Low
air.velocity = -5,-4.296875*(5.0/4.0)
airguard.velocity = -6,-.75
air.hittime = 23
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = 0.328125*(25.0/16.0)
fall = 1
air.fall = 1
fall.recover = 0
forcestand = 1
ID = ifElse(Var(22)=2,3301,3300)

[State 52, Explod]
type = Explod
trigger1 = Var(22) = 0 && AnimElemTime(20) = 0
trigger2 = Var(22) = 1 && AnimElemTime(27) = 0
trigger3 = Var(22) = 2 && AnimElemTime(26) = 0
anim = 8030
pos = 0,0
postype = p1
ownpal = 1
sprpriority = -3
pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 3100, Dust]
type = Helper
triggerall = !NumHelper(2010)
trigger1 = Var(22) = 2 && AnimElemTime(20) = 0
ID = 2200
name = "Fire"
pos = 0,0
postype = P1
stateno = 2200
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale = 1
size.yscale = 1
supermovetime = 65535

[State 52, PlaySnd]
type = PlaySnd
trigger1 = Var(22) = 0 && AnimElemTime(20) = 0
trigger2 = Var(22) = 1 && AnimElemTime(27) = 0
trigger3 = Var(22) = 2 && AnimElemTime(26) = 0
value = S40,2
channel = 13

[State 52, StateTypeSet]
type = StateTypeSet
trigger1 = Var(22) = 0 && AnimElemTime(20) = 0
trigger2 = Var(22) = 1 && AnimElemTime(27) = 0
trigger3 = Var(22) = 2 && AnimElemTime(26) = 0
statetype = S

[State 1000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Tiger Cannon Proj
[Statedef 2005]
type    = S
movetype= A
physics = N
juggle = 8
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 4

[State 3000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 220, VarSet]
type = VarSet
trigger1 = Time = 0
var(22) = root, Var(22)

[State 220, VarSet]
type = Null
trigger1 = e||(fvar(10) := root,FVar(10))
trigger1 = e||(fvar(13) := root,FVar(13))
trigger1 = e||(fvar(18) := root,FVar(18))
trigger1 = e||(fvar(19) := root,FVar(19))
trigger1 = e|| (var(21) := root,Var(21))
trigger1 = e|| (var(25) := root,Var(25))
trigger1 = e|| (var(28) := root,Var(28))
trigger1 = e|| (var(29) := root,Var(29))
trigger1 = e|| (var(30) := root,Var(30))
trigger1 = e|| (var(30) := root,Var(31))
trigger1 = e|| (var(40) := root,Var(40))
trigger1 = e|| (var(41) := root,Var(41))
trigger1 = e|| (var(51) := root,Var(51))

[State 1005, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 2100+IsHelper(2105)

[State 1005, Velocity]
type = VelSet
trigger1 = Time = 0
x = ifElse(IsHelper(2105), 5.5, 7)

[State 1005, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP,AT
time = -1
stateno = stateNo+1
ignorehitpause = 1
[State 1005, HB]
type= HitBy
trigger1 = 1
value = SCA,NP,SP,HP
time = -1
ignorehitpause = 1

[State 1005, Base HitCount]
type = VarSet
trigger1 = Time = 0
var(18) = 4+Var(22)
[State 1005, Base Damage]
type = VarSet
trigger1 = Time = 0
var(19) = 49+(Var(22)*14)+(7*IsHelper(2005))

[State 1005, This is for fossils]
type = Projectile
trigger1 = !Var(50)
ProjID = 2000
projanim = anim
projhitanim = -1
projremanim = -1
projscale = 0,0
projpriority = 0
projremovetime = 1
postype = p1
velocity = Vel X, Vel Y
offset = 0,0
ignorehitpause = 0
[State 1005, Projectile]
type = HitDef
trigger1 = P2StateNo != 5040 && ((FVar(19) = [0,255]) || (FVar(19) = 256 && ((FVar(13) && (root, PrevStateNo = [3000,3999])) || P2StateType != A || P2MoveType != H)))
attr = S,HP
damage = ceil(ifElse((Var(19)*FVar(10))<7,7,(Var(19)*FVar(10)))),ceil(ifElse((Var(19)/8*FVar(10))<7,7,(Var(19)/8*FVar(10))))
animtype = Heavy
air.animtype = Up
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 5, Hit
pausetime = 2,ceil(9*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = 0,0
hitsound = S3,3
guardsound = S5,1
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -8.125
guard.velocity = -8.125
guard.ctrltime = 17
air.type = High
air.velocity = (fvar(4):=-5),(fvar(5):=-4.296875*(5.0/4.0))
airguard.velocity = -5,-.75
air.hittime = 17
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 3
persistent = 0

[State 1005, Kill Juggling]
type = ParentVarSet
trigger1 = MoveHit = 1
fvar(19) = 0

[State 1005, VarSet]
type = VarSet
trigger1 = Var(1) = 4
ignorehitpause = 1
var(1) = 0
[State 1005, VarSet]
type = VarSet
trigger1 = root,ProjContactTime(0) = 1
ignorehitpause = 1
var(1) = 1
[State 1005, VarAdd]
type = VarAdd
trigger1 = Var(1)
ignorehitpause = 1
var(1) = 1
[State 1005, PosFreeze]
type = PosFreeze
trigger1 = Var(1)
value = 1
ignorehitpause = 1
persistent = 1

[State 180, Counter]
type = VarSet
trigger1 = P2MoveType = A
var(21) = 1

[State 180, 1]
type = ParentVarSet
triggerall = Var(21)
triggerall = p2movetype = H
trigger1 = movehit
trigger2 = projhit = 1
fvar(32) = 1
ignorehitpause = 1
[State 180, 1]
type = ParentVarSet
triggerall = !root,Var(37)
triggerall = p2movetype = H
trigger1 = movehit
fvar(32) = ifElse(Var(21),-2,2)
ignorehitpause = 1

[State 1005, Helper]
type = Helper
triggerall = root, FVar(32) = 1 || root, FVar(32) = -2
trigger1 = MoveHit = 1
ID = 8130
name = "COUNTER HIT EFFECT"
pos = 0,0
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State -2, Combo]
type = ParentVarSet
trigger1 = movehit = 1
var(50) = 3
ignorehitpause = 1
[State -2, Combo]
type = ParentVarSet
trigger1 = moveGuarded = 1
trigger2 = moveReversed
var(50) = 4
ignorehitpause = 1
[State -2, Combo]
type = VarSet
trigger1 = movehit
trigger2 = projHit = 1
var(50) = 3
ignorehitpause = 1
[State -2, Combo]
type = VarSet
trigger1 = moveGuarded
trigger2 = projGuarded = 1
trigger3 = moveReversed
var(50) = 4
ignorehitpause = 1

[State -2, Combo]
type = ParentVarAdd
trigger1 = movehit
var(51) = 1
ignorehitpause = 1

[State 180, 1]
type = ParentVarAdd
triggerall = !parent,Var(37)
triggerall = p2movetype = H
trigger1 = movehit
var(47) = 5000
ignorehitpause = 1

[State -2, Combo]
type = ParentVarSet
triggerall = !parent,Var(37)
trigger1 = movehit && p2movetype = H
trigger2 = parent,MoveType = H
var(37) = 1
ignorehitpause = 1
persistent = 0

[State 180, 1]
type = ParentVarAdd
triggerall = RoundState = 2
triggerall = parent,Var(51) < 2
trigger1 = moveguarded
trigger2 = moveReversed
var(47)=-20
ignorehitpause = 1
persistent = 1
[State 180, 1]
type = ParentVarAdd
triggerall = RoundState = 2
triggerall = parent,Var(51) < 2
triggerall = Var(21) = 0
triggerall = p2movetype = H
trigger1 = movehit
var(47)=500
ignorehitpause = 1
persistent = 1
[State 180, 1]
type = ParentVarAdd
triggerall = RoundState = 2
triggerall = parent,Var(51) < 2
triggerall = Var(21)
triggerall = p2movetype = H
trigger1 = movehit
var(47)=3001
ignorehitpause = 1
persistent = 1
[State 180, 1]
type = ParentVarAdd
triggerall = RoundState = 2
triggerall = Var(21)
triggerall = p2movetype = H
trigger1 = movehit
var(47)=1000
ignorehitpause = 1
persistent = 1
[State 180, 1]
type = ParentVarAdd
triggerall = RoundState = 2
triggerall = parent,Var(51) >= 2
trigger1 = movehit
var(47)=ifElse(parent,Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State -2, Combo]
type = ParentVarSet
trigger1 = 1
fvar(12) = 0
ignorehitpause = 1
[State -2, Combo]
type = ParentVarSet
trigger1 = MoveHit
fvar(12) = 3
ignorehitpause = 1
[State -2, Combo]
type = ParentVarSet
trigger1 = MoveGuarded
trigger2 = moveReversed
fvar(12) = 4
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
trigger1 = moveContact
ignorehitpause = 1

[State 180, Counter]
type = VarSet
triggerall = Var(21)
trigger1 = P2MoveType != A
var(21) = 0

[State 1005, DestroySelf]
type = DestroySelf
triggerall = Time > 1
trigger1 = FrontEdgeDist <= -40 && !Var(1)
;trigger2 = parent, StateNo = 3000 && parent, AnimElem = 1

[State 1005, DTC]
type = DisplayToClipboard
trigger1 = 1
text = "var(50) = %d"
params = var(50)

[State 1005, ChangeState]
type = ChangeState
triggerall = Time
trigger1 = Var(50)
trigger2 = root,ProjCancelTime(0) != -1 && root,ProjCancelTime(0) < 15
value = stateNo+1

;---------------------------------------------------------------------------
; Tiger Cannon Proj
[Statedef 2006]
type    = S
movetype= A
physics = N
juggle = 0
poweradd= 0
ctrl = 0
sprpriority = 4

[State 3000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 220, VarSet]
type = Null
trigger1 = e||(fvar(10) := root,FVar(10))
trigger1 = e||(fvar(13) := root,FVar(13))
trigger1 = e||(fvar(18) := root,FVar(18))
trigger1 = e||(fvar(19) := root,FVar(19))
trigger1 = e|| (var(21) := root,Var(21))
trigger1 = e|| (var(25) := root,Var(25))
trigger1 = e|| (var(28) := root,Var(28))
trigger1 = e|| (var(29) := root,Var(29))
trigger1 = e|| (var(30) := root,Var(30))
trigger1 = e|| (var(30) := root,Var(31))
trigger1 = e|| (var(40) := root,Var(40))
trigger1 = e|| (var(41) := root,Var(41))
trigger1 = e|| (var(51) := root,Var(51))

[State 1005, VarAdd]
type = VarAdd
trigger1 = Time = 0
var(18) = -1

[State -2, Combo]
type = VarSet
trigger1 = Time = 0
var(50) = 0
ignorehitpause = 1

[State 2006, Subtract Damage]
type = VarAdd
trigger1 = Time = 0 && Var(19) > 35
var(19) = -cond(PrevStateNo=2005, 14, 7)

[State 1005, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AP,AT
time = -1
stateno = cond(Var(18)=1,2010,StateNo)
ignorehitpause = 1
[State 1005, HB]
type= HitBy
trigger1 = 1
value = SCA,NP,SP,HP
time = -1
ignorehitpause = 1

[State 2006, PosFreeze]
type = PosFreeze
trigger1 = Var(50)
value = 1

[State 1005, This is for fossils]
type = Projectile
trigger1 = !Var(50)
ProjID = 2000
projanim = anim
projhitanim = -1
projremanim = -1
projscale = 0,0
projpriority = 0
projremovetime = 1
postype = p1
velocity = Vel X, Vel Y
offset = 0,0
ignorehitpause = 0
[State 1005, Projectile]
type = HitDef
triggerall = P2StateNo != 5040 ;&& ((FVar(19) = [0,255]) || (FVar(19) = 256 && FVar(13) && (root, PrevStateNo = [3000,3999])))
trigger1 = Var(18) > 1
attr = S,SP
damage = ceil(ifElse((Var(19)*FVar(10))<7,7,(Var(19)*FVar(10)))),ceil(ifElse((Var(19)/8*FVar(10))<7,7,(Var(19)/8*FVar(10))))
animtype = Heavy
air.animtype = Up
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 5, Hit
pausetime = 2,ceil(9*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = 0,0
hitsound = S3,3
guardsound = S5,1
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -8.125
guard.velocity = -8.125
guard.ctrltime = 17
air.type = High
air.velocity = (fvar(4):=-5),(fvar(5):=-4.296875*(5.0/4.0))
airguard.velocity = -5,-.75
air.hittime = 17
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 3
persistent = 0
[State 1005, Projectile]
type = HitDef
triggerall = P2StateNo != 5040 ;&& ((FVar(19) = [0,255]) || (FVar(19) = 256 && FVar(13) && (root, PrevStateNo = [3000,3999])))
trigger1 = Var(18) = 1
attr = S,SP
damage = ceil(ifElse((Var(19)*FVar(10))<7,7,(Var(19)*FVar(10)))),ceil(ifElse((Var(19)/8*FVar(10))<7,7,(Var(19)/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 5, Hit
pausetime = 4,ceil(9*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = 0,0
hitsound = S3,3
guardsound = S5,1
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -4,-4.921875
guard.velocity = -8.125
guard.ctrltime = 17
air.type = High
air.velocity = (fvar(4):=-4),(fvar(5):=-4.921875*(5.0/4.0))
airguard.velocity = -5,-.75
air.hittime = 17
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
palfx.color = 64
palfx.add = 100,40,50
palfx.mul = 90,50,40
palfx.time = 33
yaccel = 0.328125*(25.0/16.0)
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 3
persistent = 0

[State 1005, Juggle Set]
type = ParentVarSet
trigger1 = Var(50) = 3
fvar(19) = 256*(NumTarget>0)

[State 1005, VarSet]
type = VarSet
trigger1 = Var(1) = 4
ignorehitpause = 1
var(1) = 0
[State 1005, VarSet]
type = VarSet
trigger1 = root,ProjContactTime(0) = 1
ignorehitpause = 1
var(1) = 1
[State 1005, VarAdd]
type = VarAdd
trigger1 = Var(1)
ignorehitpause = 1
var(1) = 1
[State 1005, PosFreeze]
type = PosFreeze
trigger1 = Var(1)
value = 1
ignorehitpause = 1
persistent = 1

[State 180, Counter]
type = VarSet
trigger1 = P2MoveType = A
var(21) = 1

[State 180, 1]
type = ParentVarSet
triggerall = Var(21)
triggerall = p2movetype = H
trigger1 = movehit
trigger2 = projhit = 1
fvar(32) = 1
ignorehitpause = 1
[State 180, 1]
type = ParentVarSet
triggerall = !root,Var(37)
triggerall = p2movetype = H
trigger1 = movehit
fvar(32) = ifElse(Var(21),-2,2)
ignorehitpause = 1

[State 1005, Helper]
type = Helper
triggerall = root, FVar(32) = 1 || root, FVar(32) = -2
trigger1 = MoveHit = 1
ID = 8130
name = "COUNTER HIT EFFECT"
pos = 0,0
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State -2, Combo]
type = ParentVarSet
trigger1 = movehit = 1
var(50) = 3
ignorehitpause = 1
[State -2, Combo]
type = ParentVarSet
trigger1 = moveGuarded = 1
trigger2 = moveReversed
var(50) = 4
ignorehitpause = 1
[State -2, Combo]
type = VarSet
trigger1 = movehit
trigger2 = projHit = 1
var(50) = 3
ignorehitpause = 1
[State -2, Combo]
type = VarSet
trigger1 = moveGuarded
trigger2 = projGuarded = 1
trigger3 = moveReversed
var(50) = 4
ignorehitpause = 1

[State -2, Combo]
type = ParentVarAdd
trigger1 = movehit
var(51) = 1
ignorehitpause = 1

[State 180, 1]
type = ParentVarAdd
triggerall = !parent,Var(37)
triggerall = p2movetype = H
trigger1 = movehit
var(47) = 5000
ignorehitpause = 1

[State -2, Combo]
type = ParentVarSet
triggerall = !parent,Var(37)
trigger1 = movehit && p2movetype = H
trigger2 = parent,MoveType = H
var(37) = 1
ignorehitpause = 1
persistent = 0

[State 180, 1]
type = ParentVarAdd
triggerall = RoundState = 2
triggerall = parent,Var(51) < 2
trigger1 = moveguarded
trigger2 = moveReversed
var(47)=-20
ignorehitpause = 1
persistent = 1
[State 180, 1]
type = ParentVarAdd
triggerall = RoundState = 2
triggerall = parent,Var(51) < 2
triggerall = Var(21) = 0
triggerall = p2movetype = H
trigger1 = movehit
var(47)=500
ignorehitpause = 1
persistent = 1
[State 180, 1]
type = ParentVarAdd
triggerall = RoundState = 2
triggerall = parent,Var(51) < 2
triggerall = Var(21)
triggerall = p2movetype = H
trigger1 = movehit
var(47)=3001
ignorehitpause = 1
persistent = 1
[State 180, 1]
type = ParentVarAdd
triggerall = RoundState = 2
triggerall = Var(21)
triggerall = p2movetype = H
trigger1 = movehit
var(47)=1000
ignorehitpause = 1
persistent = 1
[State 180, 1]
type = ParentVarAdd
triggerall = RoundState = 2
triggerall = parent,Var(51) >= 2
trigger1 = movehit
var(47)=ifElse(parent,Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State -2, Combo]
type = ParentVarSet
trigger1 = 1
fvar(12) = 0
ignorehitpause = 1
[State -2, Combo]
type = ParentVarSet
trigger1 = MoveHit
fvar(12) = 3
ignorehitpause = 1
[State -2, Combo]
type = ParentVarSet
trigger1 = MoveGuarded
trigger2 = moveReversed
fvar(12) = 4
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
trigger1 = moveContact
ignorehitpause = 1

[State 180, Counter]
type = VarSet
triggerall = Var(21)
trigger1 = P2MoveType != A
var(21) = 0

[State 3001, Super]
type = Helper
triggerall = !NumHelper(8300)
triggerall = P2MoveType = H
trigger1 = Var(18) = 1 && Var(50) =3
id = 8300
name = "FireEffect_KnockBack"
pos =0,0
postype = P2
stateno = 8301
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1005, DTC]
type = DisplayToClipboard
trigger1 = 1
text = "var(50) = %d"
params = var(50)

[State 1005, ChangeState]
type = ChangeState
triggerall = Time
trigger1 = Var(50)
trigger2 = root,ProjCancelTime(0) != -1 && root,ProjCancelTime(0) < 15
value = cond(Var(18)<=1, 2010, StateNo)

[State 1005, DestroySelf]
type = DestroySelf
triggerall = Time > 1
trigger1 = FrontEdgeDist <= -40 && !Var(1)
;trigger2 = parent, StateNo = 3000 && parent, AnimElem = 1

;---------------------------------------------------------------------------
; Projectile Hit
[Statedef 2010]
type     = S
movetype = I
physics  = N
ctrl = 0
velset = 0,0
sprpriority = 4
anim = 2105

[State 1010, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1010, PlaySnd]
type = PlaySnd
triggerall = !Var(50)
trigger1 = Time = 1
value = S5,1
persistent = 0

[State 1010, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0

;----------------------------------------------------------------------------------
; FIRE
[Statedef 2200]
ctrl=0
anim=2200
sprpriority=5

[State 2010, Safe]
type=NotHitBy
trigger1=1
value=SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
[State 2010, AssertSpecial]
type=AssertSpecial
trigger1=1
flag=NoShadow
[State 2010, BindToRoot]
type=BindToRoot
trigger1=1
pos=0,0

[State 2010, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S200,1

[State 2200, ChangeAnim]
type = ChangeAnim
trigger1 = root, AnimElemTime(22) = 0
value = 2201

[State 2010, DestroySelf]
type = DestroySelf
trigger1 = root,StateNo != 3300
trigger2 = root,MoveType = H
trigger3 = Anim = 2201 && AnimTime = 0

;===============================================================================
;                                    ABILITIES
;===============================================================================
;----------------------------------------------------------------------------------
; Roll
[Statedef 300]
type    = S
physics = N
movetype= I
anim = 300
ctrl = 0
velset = 0,0

[State 300, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S8,ifElse(random%2, 1, 4)
channel = 0

[State 300, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S40,2
channel = 13

[State 300, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 4.5

[State 300, VelSet]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 300, HitBy]
type = HitBy
trigger1 = AnimElemTime(7) < 0
value = SCA,NT,ST,HT

[State 300, PlayerPush]
type = PlayerPush
trigger1 = AnimElemTime(2) > 0
value = 0

[State 300, AfterImage]
type = AfterImage
triggerall = !Var(30)
trigger1 = AnimElem = 2
time = 15
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 300, StateChange]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Dodge
[Statedef 310]
type = S
physics = S
movetype =  I
anim = 310
ctrl = 0
velset = 0,0

[State 310, SprPriority]
type = SprPriority
trigger1 = 1
value = -1

[State 310, PosSet]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 310, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,0
channel = 1

[State 310, PlaySnd2]
type = PlaySnd
trigger1 = AnimElem = 1
value = S8,ifElse(random%2, 1, 4)
channel = 0

[State 310, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 310, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NT,ST,HT

[State 310, AfterImage]
type = AfterImage
triggerall = !Var(30)
trigger1 = AnimElem = 1
time = 26
length = 10
FrameGap = 6
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 310, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Counter Movement (forward)
[Statedef 320]
type = S
physics = N
movetype =  I
ctrl = 0
velset = 0,0

[State 320, 1]
type = VarAdd
trigger1 = time = 0
var(47)=500
ignorehitpause = 1

[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 0 || Var(10) = 1 || Var(10) = 5
trigger1 = Time = 0
value = -1000
[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 2
trigger1 = Time = 0
value = -1500
[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 3 || Var(10) = 4 || Var(10) = 6
trigger1 = Time = 0
value = -3000

[State 2800, VarSet]
type = VarSet
trigger1 = !Time
fvar(14) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(19) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(17) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(30) = 0

[State 320, PalFX]
type = PalFX
trigger1 = Time = 0
time = 2
invertall = 1
mul = 0,0,0

[State 320, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S4000,1
channel = 1
[State 300, PlaySnd]
type = PlaySnd
trigger1 = Anim = 300 && AnimElemTime(1) = 1
value = S40,2
channel = 13

[State 320, Helper]
type = Helper
trigger1 = Time = 0
id = 8070
name = "GUARD CANCEL"
pos = 10,-ifElse(PrevStateNo = 152,40,80)
postype = P1
stateno = 8070
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
persistent = 0

[State 320, Pause]
type = Pause
trigger1 = Time = 1
time = 6
movetime = 6

[State 320, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 320, 4]
type = ChangeAnim
trigger1 = Time <= 12
value = Anim

[State 320, 4]
type = ChangeAnim
trigger1 = Time = 13
value = 300

[State 320, PlaySnd]
type = Playsnd
triggerall = Anim = 300
trigger1 = AnimElem = 1
value = S8,6+(random%2)
channel = 0

[State 320, VelSet]
type = VelSet
triggerall = Anim = 300
trigger1 = AnimElem = 2
x = 4.5

[State 320, VelSet]
type = VelSet
triggerall = Anim = 300
trigger1 = AnimElem = 8
x = 0

[State 320, HitBy]
type = HitBy
trigger1 = Time <= 32
value = SCA, NT,ST,HT

[State 320, PlayerPush]
type = PlayerPush
triggerall = Anim = 300
trigger1 = AnimElemTime(2) > 0
value = 0

[State 320, AfterImage]
type = AfterImage
triggerall = Anim = 300
trigger1 = AnimElem = 3
time = 15
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 320, ChangeState]
type = ChangeState
triggerall = Anim = 300
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Counter Movement (back)
[Statedef 330]
type = A
physics = N
ctrl = 0
velset = 0,0

[State 330, 1]
type = VarAdd
trigger1 = Time = 0
var(47)=-1000
ignorehitpause = 1

[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 0 || Var(10) = 1 || Var(10) = 5
trigger1 = Time = 0
value = -1000
[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 2
trigger1 = Time = 0
value = -1500
[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 3 || Var(10) = 4 || Var(10) = 6
trigger1 = Time = 0
value = -3000

[State 2800, VarSet]
type = VarSet
trigger1 = !Time
fvar(14) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(19) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(17) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(30) = 0

[State 330, Shock]
type = PalFX
trigger1 = Time = 0
time = 2
invertall = 1
mul = 0,0,0

[State 330, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 22

[State 330, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S4000,1
channel = 1

[State 330, Helper]
type = Helper
trigger1 = Time = 0
ID = 8070
name = "GUARD CANCEL"
pos = 10,-ifElse(PrevStateNo = 152,40,80)
postype = P1
stateno = 8070
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
persistent = 0

[State 330, Pause]
type = Pause
trigger1 = Time = 1
time = 6
movetime = 6

[State 330, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 330, Width]
type = Width
trigger1 = 1
edge = 1,0

[State 330, 4]
type = ChangeAnim
trigger1 = Time <= 12
value = Anim

[State 330, 4]
type = ChangeAnim
trigger1 = Time = 13
value = 105

[State 330, AfterImage]
type = Afterimage
triggerall = Anim = 105
trigger1 = AnimElem = 2
time = 22
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 330, PlaySnd]
type = PlaySnd
triggerall = Anim = 105
trigger1 = AnimElem = 1
value = S40,0
channel = 13

[State 330, Explod]
type = Explod
triggerall = Anim = 105
trigger1 = AnimElem = 1
anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
;bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 3
scale = .5,.5

[State 330, 1]
type = VelSet
triggerall = Anim = 105
trigger1 = AnimElemTime(1) = 3
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)
[State 105, 1]
type = VelAdd
triggerall = Anim = 105
trigger1 = AnimElemTime(1) > 3
x = ifElse(Vel X >= 0, 0, 0.0625)*(25.0/16.0)
[State 105, 1]
type = VelAdd
triggerall = Anim = 105
trigger1 = AnimElemTime(1) > 3
y = .5*(25.0/16.0)

[State 330, 3]
type = ChangeState
triggerall = Anim = 105
triggerall = AnimElemTime(1) > 3
trigger1 = Pos Y + Vel Y >= 0
value = 106

;----------------------------------------------------------------------------------
; Power Charge
[Statedef 900]
type = S
physics = S
movetype= I
anim = 900
ctrl = 0
velset = 0,0

[State 900, PlaySnd]
type = PlaySnd
triggerall = Anim = 900
trigger1 = Time = 1
value = S8,5
channel = 0

[State 900, PowerAdd]
type = PowerAdd
triggerall = Anim = 900
trigger1 = 1
value = ((Time+10)/10)*(1+(Var(10)=4))

[State 900, ChangeAnim]
type = ChangeAnim
trigger1 = !AILevel
trigger1 = (Command != "hold_c" || Command != "hold_z")
trigger2 = (power >= 1000 && Var(10) = 4) || (power >= 3000 && Var(10) = 0)
value = 901
persistent = 0
[State 900, AI Stop] ; Thanks, Warusaki!
type = ChangeAnim
triggerall = Time >= 2
triggerall = AILevel
trigger1 = P2BodyDist X = [0,190]
trigger1 = P2MoveType = A
trigger2 = P2BodyDist X = [0,60]
trigger2 = EnemyNear, StateType != L
trigger3 = Win
trigger4 = EnemyNear, NumProj
trigger5 = InGuardDist
trigger6 = Time > 28-AILevel
	trigger6 = Random%80 = 2
value = 901
persistent = 0

[State 900, StopSnd]
type = StopSnd
trigger1 = Anim = 901
channel = 0
persistent = 0

[State 900, Helper]
type = Helper
trigger1 = !NumHelper(8500)
trigger1 = Time = 1
id = 8500
name = "Charge"
pos =0,0
postype = P1
stateno = 8500
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 900, CtrlSet]
type = CtrlSet
triggerall = Ctrl = 0
trigger1 = Anim = 901
value = 1

[State 900, ChangeState]
type = ChangeState
trigger1 = Anim = 901 && AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; MAX Activation
[Statedef 960]
type = S
physics = S
movetype= I
anim = 950
ctrl = 0
velset = 0,0

[State 960, 1]
type = Explod
trigger1 = Time = 6
anim = 8415
pos = 0,-60
postype = p1
bindtime = -1
sprpriority = 4
ontop = 0
ownpal = 1
scale = .5,.5
pausemovetime = -1

[State 960, 2]
type = PlaySnd
trigger1 = Time = 6
value = S6000,2
channel = 7

[State 960, 2]
type = PlaySnd
trigger1 = Time = 6
value = S8,3
channel = 0

[State 960, 4]
type = PowerAdd
trigger1 = Time = 6
value = -1000

[State 960, 5]
type = VarSet
trigger1 = Time = 6
var(29) = 675

[State 960, 5]
type = VarSet
trigger1 = Time = 6
var(18) = 1

[State 960, Super]
type = Helper
trigger1 = Time = 6
ID = 6170
name = "Time"
pos =0,0
postype = P1
stateno = 6170
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
facing = facing*ifElse(teamside=1,1,-1)

[State 960, CtrlSet]
type = CtrlSet
trigger1 = Time = 16
value = 1

[State 960, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Standing Custom Combo
[Statedef 970]
type = S
physics = S
movetype = I
anim = 970
ctrl = 0
velset = 0,0

[State 970, SuperPause]
type = SuperPause
trigger1 = Time = 4
time = 37
movetime = 37
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 3000, Helper]
type = Helper
trigger1 = Time = 4
persistent = 0
ID = 8080
name = "custcom"
pos = 0,-60
postype = P1
stateno = 8080
helpertype = normal
supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 99999999
pausemovetime = 99999999

[State 970, 2]
type = PlaySnd
trigger1 = Time = 4
value = S8,5
channel = 0

[State 970, AfterImage]
type = AfterImage
trigger1 = Time = 4
time = 9999
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast = 0, 100, 150
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 970, 5]
type = VarSet
trigger1 = Time >= 4
var(30) = 334

[State 970, 5]
type = VarSet
trigger1 = Time = 0
var(31) = 1

[State 970, 5]
type = VarSet
trigger1 = AnimTime = 0
var(43) = 3000

[State 970, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 50

[State 970, 1]
type = PowerAdd
trigger1 = AnimTime = 0
value = -3000
ignorehitpause = 1

[State 970, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Aerial Custom Combo
[Statedef 975]
type = A
movetype = I
physics = N
anim = 975
ctrl = 0

[State 975, PosFreeze]
type = PosFreeze
trigger1 = 1

[State 975, SuperPause]
type = SuperPause
trigger1 = Time = 4
time = 37
movetime = 37
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 975, Helper]
type = Helper
trigger1 = Time = 4
persistent = 0
ID = 8080
name = "custcom"
pos = 0,-60
postype = P1
stateno = 8080
helpertype = Normal
supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 99999999
pausemovetime = 99999999

[State 975, 2]
type = PlaySnd
trigger1 = Time = 4
value = S8,5
channel = 0

[State 975, AfterImage]
type = AfterImage
trigger1 = Time = 4
time = 9999
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast = 0, 100, 150
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 970, 5]
type = VarSet
trigger1 = Time >= 4
var(30) = 334

[State 970, 5]
type = VarSet
trigger1 = Time = 0
var(31) = 1

[State 970, 5]
type = VarSet
trigger1 = AnimTime = 0
var(43) = 3000

[State 975, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 50

[State 975, PowerAdd]
type = PowerAdd
trigger1 = AnimTime = 0
value = -3000
ignorehitpause = 1

[State 975, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;----------------------------------------------------------------------------------
; Counter Attack
[Statedef 2800]
type    = S
movetype = A
physics = N
juggle = 8
velset = 0,0
ctrl = 0

[State 180, 1]
type = VarAdd
trigger1 = Time = 0
var(47)=1000
ignorehitpause = 1

[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 0 || Var(10) = 1 || Var(10) = 5
trigger1 = Time = 0
value = -1000
[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 2
trigger1 = Time = 0
value = -1500
[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 3 || Var(10) = 4 || Var(10) = 6
trigger1 = Time = 0
value = -3000

[State 2800, VarSet]
type = VarSet
trigger1 = !Time
fvar(14) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(19) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(17) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(30) = 0

[State 902, Shock]
type = PalFX
trigger1 = Time = 0
time = 2
invertall = 1
mul = 0,0,0

[State 170, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 17

[State 1100, Effect]
type = PlaySnd
trigger1 = Time = 1
value = S4000,1
channel = 1

[State -3,Super]
type = Helper
trigger1 = Time = 0
ID = 8070
name = "GUARD CANCEL"
pos = 10,-ifElse(PrevStateNo = 152,40,80)
postype = P1
stateno = 8070
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
persistent = 0
size.xscale = 1
size.yscale = 1

[State 2800, Pause]
type = Pause
trigger1 = Time = 1
time = 6
movetime = 6

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 1,0
player = 5,5

[State 190, 4]
type = ChangeAnim
trigger1 = Time <= 12
value = anim
[State 190, 4]
type = ChangeAnim
trigger1 = Time = 13
value = 1200

[State 1000, PlaySnd]
type = PlaySnd
triggerall = Anim = 1200
trigger1 = AnimElem = 3
value = S8,15
channel = 0

[State 1000, PlaySnd]
type = PlaySnd
triggerall = Anim = 1200
trigger1 = AnimElem = 2
value = S0,2
channel = 1
[State 1000, PlaySnd]
type = PlaySnd
triggerall = Anim = 1200
trigger1 = AnimElem = 3
value = S200,0
channel = 2

[State 1200, VelSet]
type = VelSet
triggerall = Anim = 1200
trigger1 = AnimElemTime(4) = 1
x = 4*(5.0/4.0)
y = -6*(5.0/4.0)
[State 1200, VelAdd]
type = VelAdd
triggerall = Anim = 1200
trigger1 = AnimElemTime(4) > 0
x = ifElse(Vel X <= 0, 0, -0.5*(25.0/16.0))
y = 0.375*(25.0/16.0)
[State 1200, VelSet]
type = VelSet
triggerall = Anim = 1200
trigger1 = AnimElemTime(4) > 1
trigger1 = Vel X <= 0
x = 0

[State 40, Jump Sound]
type = PlaySnd
triggerall = Anim = 1200
trigger1 = AnimElemTime(4) = 1
value = S40,0
channel = 13
[State 40, Helper]
type = Helper
triggerall = Anim = 1200
trigger1 = AnimElemTime(4) = 1
id = 8020
name = "Jump Effect"
pos =0,0
postype = p1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 220, 1]
type = HitDef
triggerall = P2StateNo != 5040 && FVar(19) = 0
triggerall = Anim = 1200
trigger1 = AnimElem = 3 || AnimElem = 4
attr = A, SA
damage = floor(ifElse((42*FVar(10))<7,7,(42*FVar(10)))),0
animtype = diagup
air.animtype = diagup
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = ceil(13*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-63)
hitsound = S4,2
guardsound = S5,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = (fvar(4):=-2),(fvar(5):=-8.625*(5.0/4.0))
guard.velocity = -8.125
air.velocity = (fvar(4):=-2),(fvar(5):=-8.625*(5.0/4.0))
air.hittime = 20
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
envshake.time = 10
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
yaccel = 0.375*(25.0/16.0)
persistent = 0
getpower = 0
givepower = 35, 35
kill = 0

[State 2800, ChangeState]
type = ChangeState
triggerall = Anim = 1200
trigger1 = AnimElemTime(4) > 1
trigger1 = Pos Y + Vel Y >= 0
value = 1205

;----------------------------------------------------------------------------------
; WE SUNK
[Statedef 247]
anim = 1

[State 247, VarSet]
type = Null
trigger1 = RoundState != 2
trigger1 = e||(var(6) := 0)
trigger1 = e||(var(7) := 0)
trigger1 = e||(var(8) := 0)
trigger1 = e||(var(9) := 0)

[State -2, VarSet]
type = VarSet
trigger1 = !Parent, Var(50)
trigger2 = !Parent, MoveContact
trigger3 = Enemy,MoveReversed = 1
var(1) = 0
[State -2, VarSet]
type = VarSet
trigger1 = Parent, Var(50) = [1,2]
trigger2 = Parent, MoveContact
var(1) = 1

[State -2, Combo]
type = VarSet
trigger1 = !parent, NumTarget
trigger2 = Var(0) && parent, HitPauseTime > 0
trigger3 = !root, Var(50)
trigger4 = Enemy,MoveReversed = 1
var(0) = 0
ignorehitpause = 1
[State -2, Combo]
type = VarAdd
trigger1 = Var(1)
var(0) = 1
ignorehitpause = 1
[State -2, Combo]
type = VarSet
trigger1 = !parent, numTarget
trigger2 = !root, Var(50)
trigger3 = Enemy,MoveReversed = 1
var(2) = 0
ignorehitpause = 1
[State -2, Combo]
type = VarAdd
trigger1 = Var(1)
var(2) = 1
ignorehitpause = 1

; P2 Stun Meter
[State -2, P2 Stun Meter Max (low)]
type = VarSet
trigger1 = Time = 0
var(4) = 60

[State -2, P2 Stun Meter Max (medium)]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy
trigger1 = Enemy(0), Name = "cvsandy" || Enemy(0), Name = "cvsbison" || Enemy(0), Name = "cvsblanka" || Enemy(0), Name = "cvschunli" || Enemy(0), Name = "cvsdan" || Enemy(0), Name = "cvseagle"
trigger2 = (Enemy(0), Name = "cvsgeese" && Enemy, PalNo = [1,6]) || Enemy(0), Name = "cvsgeese_normal" || Enemy(0), Name = "cvsguile" || Enemy(0), Name = "cvshaohmaru"
trigger3 = (Enemy(0), Name = "cvsiori" && Enemy, PalNo = [1,6]) || Enemy(0), Name = "cvsiori_normal" || Enemy(0), Name = "cvsjoe" || (Enemy(0), Name = "cvsken" && Enemy, PalNo = [1,6])
trigger4 =  Enemy(0), Name = "cvsken_normal" || Enemy(0), Name = "cvskim" || Enemy(0), Name = "cvsking" || Enemy(0), Name = "cvskyo" || Enemy(0), Name = "cvsmaki" || Enemy(0), Name = "cvsrock"
trigger5 = (Enemy(0), Name = "cvsrugal" && (Enemy, PalNo = [1,6])) || Enemy(0), Name = "cvsrugal_normal" || Enemy(0), Name = "cvsryo" || (Enemy(0), Name = "cvsryu" && Enemy, PalNo = [1,6])
trigger6 = Enemy(0), Name = "cvsryu_normal" || Enemy(0), Name = "cvssagat" || Enemy(0), Name = "cvsterry" || Enemy(0), Name = "cvstodo" || Enemy(0), Name = "cvsvice" || Enemy(0), Name = "cvsyamazaki"
var(4) = 70

[State -2, P2 Stun Meter Max (high)]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy
trigger1 = Enemy(0), Name = "cvsalex" || Enemy(0), Name = "cvschang" || Enemy(0), Name = "cvshonda" || Enemy(0), Name = "cvshugo" || Enemy(0), Name = "cvsraiden" || Enemy(0), Name = "cvssieger"
trigger2 = Enemy(0), Name = "cvszangief"
var(4) = 80

[State -2, P2 Stun Meter]
type = VarSet
trigger1 = Time = 0
trigger2 = Var(7) >= 160
trigger2 = e||(var(7) := 0)
var(6) = 0
ignorehitpause = 1

[State -2, P2 Stun Increment]
type = VarAdd
triggerall = root, NumTarget
triggerall = root, Var(28) < 3 || (root, StateNo = 3210 && root, name = "cvsalex") ; No supers
triggerall = Var(2) = 1
triggerall = NumEnemy
triggerall = e||(var(7) := 0)
triggerall = Enemy(0), StateNo != [120,155]
triggerall = Enemy(0), MoveType = H
triggerall = Enemy(0), PrevStateNo != [5300,5350]
trigger1 = Enemy(0), ID = PlayerID(root, Var(32)), ID
trigger2 = root, NumTarget > 1 ; For cases where both opponents are hit at once
var(6) = root, Var(49)         ; Stun will be the same in either case.
ignorehitpause = 1

[State -2, Stun Timer]
type = VarAdd
triggerall = Var(6)
trigger1 = !NumTarget
trigger1 = HitPauseTime = 0
var(7) = 1

[State -2, Notify Parent]
type = ParentVarAdd
trigger1 = Var(0) = 1
trigger1 = Var(6) >= Var(4)
trigger1 = (var(4) := cond(var(4)+3 >= 120, 120, var(4)+3))
trigger1 = e||(var(6) := 0)
var(5) = 1073741824
ignorehitpause = 1

; P4 Stun Meter
[State -2, P4 Stun Meter Max (low)]
type = VarSet
trigger1 = Time = 0
var(5) = 60

[State -2, P4 Stun Meter Max (medium)]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy > 1
trigger1 = Enemy(1), Name = "cvsandy" || Enemy(1), Name = "cvsbison" || Enemy(1), Name = "cvsblanka" || Enemy(1), Name = "cvschunli" || Enemy(1), Name = "cvsdan" || Enemy(1), Name = "cvseagle"
trigger2 = (Enemy(1), Name = "cvsgeese" && Enemy, PalNo = [1,6]) || Enemy(1), Name = "cvsgeese_normal" || Enemy(1), Name = "cvsguile" || Enemy(1), Name = "cvshaohmaru"
trigger3 = (Enemy(1), Name = "cvsiori" && Enemy, PalNo = [1,6]) || Enemy(1), Name = "cvsiori_normal" || Enemy(1), Name = "cvsjoe" || (Enemy(1), Name = "cvsken" && Enemy, PalNo = [1,6])
trigger4 =  Enemy(1), Name = "cvsken_normal" || Enemy(1), Name = "cvskim" || Enemy(1), Name = "cvsking" || Enemy(1), Name = "cvskyo" || Enemy(1), Name = "cvsmaki" || Enemy(1), Name = "cvsrock"
trigger5 = (Enemy(1), Name = "cvsrugal" && (Enemy, PalNo = [1,6])) || Enemy(1), Name = "cvsrugal_normal" || Enemy(1), Name = "cvsryo" || (Enemy(1), Name = "cvsryu" && Enemy, PalNo = [1,6])
trigger6 = Enemy(1), Name = "cvsryu_normal" || Enemy(1), Name = "cvssagat" || Enemy(1), Name = "cvsterry" || Enemy(1), Name = "cvstodo" || Enemy(1), Name = "cvsvice" || Enemy(1), Name = "cvsyamazaki"
var(5) = 70

[State -2, P4 Stun Meter Max (high)]
type = VarSet
triggerall = Time = 0
triggerall = NumEnemy > 1
trigger1 = Enemy(1), Name = "cvsalex" || Enemy(1), Name = "cvschang" || Enemy(1), Name = "cvshonda" || Enemy(1), Name = "cvshugo" || Enemy(1), Name = "cvsraiden" || Enemy(1), Name = "cvssieger"
trigger2 = Enemy(1), Name = "cvszangief"
var(5) = 80

[State -2, P4 Stun Meter]
type = VarSet
trigger1 = Time = 0
trigger2 = Var(9) >= 160
trigger2 = e||(var(9) := 0)
var(8) = 0
ignorehitpause = 1

[State -2, P4 Stun Increment]
type = VarAdd
triggerall = root, NumTarget
triggerall = root, Var(28) < 3 ; No supers
triggerall = Var(2) = 1
triggerall = NumEnemy > 1
triggerall = e||(var(9) := 0)
triggerall = Enemy(1), StateNo != [120,155]
triggerall = Enemy(1), MoveType = H
triggerall = Enemy(1), PrevStateNo != [5300,5350]
trigger1 = Enemy(1), ID = PlayerID(root, Var(32)), ID
trigger2 = root, NumTarget > 1 ; For cases where both opponents are hit at once
var(8) = root, Var(49)         ; Stun will be the same in either case.
ignorehitpause = 1

[State -2, Stun Timer]
type = VarAdd
triggerall = Var(8)
trigger1 = !NumTarget
trigger1 = HitPauseTime = 0
var(9) = 1

[State -2, Notify Parent]
type = ParentVarAdd
trigger1 = Var(0) = 1
trigger1 = Var(8) >= Var(5)
trigger1 = (var(5) := cond(var(5)+3 >= 120, 120, var(5)+3))
trigger1 = e||(var(8) := 0)
var(5) = -2147483648
ignorehitpause = 1

[State -2, DTC]
type = DisplayToClipboard
trigger1 = NumHelper(247)
text = "P2 Stun = %d/%d, P2 Stun timer = %d, MoveContact = %d"
params = Var(6), Var(4), Var(7), Var(0)
ignorehitpause = 1
[State -2, DTC]
type = AppendToClipboard
trigger1 = NumHelper(247)
text = "\nP4 Stun = %d/%d, P4 Stun timer = %d, Damage = %d"
params = Var(8), Var(5), Var(9), (root, var(49))
ignorehitpause = 1

;---------------------------------------------------------------------------------------------------
; AI Helper
[Statedef 9999]
type    = A
movetype= I
physics = N
juggle  = 8
velset=0,0
poweradd= 0
ctrl = 0
anim =1
sprpriority = 9

[State 9999, BindToRoot]
type = BindToRoot
trigger1 = 1
pos = root, Const(Size.Head.Pos.X), root, Const(Size.Head.Pos.Y)

;hey they arent blocking anymore stop doing shit.
[State 0, VarSet]
type = parentVarSet
trigger1 = root,movetype=I 
v = 1    ;fv = 10
value = 0
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible
[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = NumHelper(247)
text = "var(0) = %d var(20) = %d var(21) = %d movehit= %d"
params = var(0),var(20),var(21),(Helper(247),var(0)=1)
ignorehitpause = 1
;persistent = 

;--these vars can be used to check several of the others using one value instead of referencing them in the cmd
[State 0, VarSet]
type = VarSet
trigger1 =var(10)>=0
trigger2 =var(11)>=0
v = 3   ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = Var(10)>=0
trigger2 = Var(11)>=0
trigger3 = Var(12)>=0
trigger4 = Var(13)>=0
trigger5 = Var(20)>=0
trigger6 = Var(21)>=0
v = 2   ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = Var(10)=0
trigger1 = Var(11)=0
trigger1 = Var(12)=0
trigger1 = Var(13)=0
trigger1 = Var(20)=0
trigger1 = Var(21)=0
v = 2   ;fv = 10
value = 0
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 =var(10)=0
trigger1 =var(11)=0
v = 3   ;fv = 10
value = 0
ignorehitpause = 1

;-------------------------------------
; Jump-ins
[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(0) = root, P2Dist Y + root, Vel Y

; Jump in with enough hitstun to link lights (only air basics really worth using are kicks)
[State 0, Explod]
type = VarSet
triggerall = NumHelper(247)
trigger1 = helper(247), Var(0) = 1 && StateNo = 630 && (fvar(0) >= (EnemyNear(0), Const(Size.Height) - 10))
trigger2 = helper(247), Var(0) = 1 && StateNo = 640 && (fvar(0) >= (EnemyNear(0), Const(Size.Height) - 16))
trigger3 = helper(247), Var(0) = 1 && StateNo = 650 && (fvar(0) >= (EnemyNear(0), Const(Size.Height) - 24))
v=10
value=1

; Jump in with enough hitstun to link mediums
[State 0, Explod]
type = VarSet
triggerall = NumHelper(247)
trigger1 = helper(247), Var(0) = 1 && StateNo = 630 && (fvar(0) >= (EnemyNear(0), Const(Size.Height) - 6))
trigger2 = helper(247), Var(0) = 1 && StateNo = 640 && (fvar(0) >= (EnemyNear(0), Const(Size.Height) - 10))
trigger3 = helper(247), Var(0) = 1 && StateNo = 650 && (fvar(0) >= (EnemyNear(0), Const(Size.Height) - 19))
v=10
value=2

; Jump in with enough hitstun to link heavies
[State 0, Explod]
type = VarSet
triggerall = NumHelper(247)
trigger1 = helper(247), Var(0) = 1 && StateNo = 630 && (fvar(0) >= (EnemyNear(0), Const(Size.Height) - 4))
trigger2 = helper(247), Var(0) = 1 && StateNo = 640 && (fvar(0) >= (EnemyNear(0), Const(Size.Height) - 7))
trigger3 = helper(247), Var(0) = 1 && StateNo = 650 && (fvar(0) >= (EnemyNear(0), Const(Size.Height) - 16))
v=10
value=3

[State 0, Reset]
type = VarSet
trigger1 = Var(10) && (P2Dist Y - Vel Y <= (EnemyNear(0), Const(Size.Height) - 24))
trigger2 = root, StateType != A
trigger3 = FVar(0) <= 0
v=10
value=0

; The opponent isn't a bitch nigga that's too short so we can use moves that would whiff on short people
[State 0, Explod]
type = VarSet
trigger1= Enemy,Const(Size.Head.Pos.Y) <= -78 ; Lower bound of Tiger Shot with a bit more safety
v=14
value=1
ignorehitpause =1
[State 0, Explod]
type = VarSet
trigger1 = Enemy,Const(Size.Head.Pos.Y) > -78 ; Lower bound of Tiger Shot with a bit more safety
trigger2 = Enemy, StateType = C || Enemy, StateType = L
v=14
value=0
ignorehitpause =1

; Blocked so inch slowly
[State 0, Explod]
type = VarSet
triggerall = var(10)=0
triggerall = var(11)=0
triggerall = var(12)=0
trigger1 = root,Var(50) = 2 && root, StateNo=200
trigger2 = root,Var(50) = 2 && root, StateNo=230 
trigger3 = root,Var(50) = 2 && root, StateNo=400
trigger4 = root,Var(50) = 2 && root, StateNo=430
v=12
value=1

; Used for pressure iirc like jab walk jab
[State 0, VarSet]
type = Varadd
triggerall = EnemyNear(0), HitShakeOver
trigger1 = root, Var(50) = 2
v = 1
value = 1
ignorehitpause = 0
[State 0, VarSet]
type = VarSet
trigger1 = root, Var(50) = 1
v = 1
value = 0

;Kame doesn't know what this does anymore but I'm gonna try to wing it.
[State 0, VarSet]
type = VarSet
trigger1 = root, StateType = A && root, MoveType != H
v = 4
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = root, StateType = A && root, MoveType = H
v = 4
value = 2
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 =var(6)=1
v = 4
value = 0
ignorehitpause = 1
[State 0, VarSet]
type = Varadd
trigger1 =var(4)=2
v = 5
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = root, Var(50) = 1
v = 5   ;fv = 10
value =0
ignorehitpause = 1


; Used for overhead detection. Only saves the last 2 of P2's attacks.
[State 0, VarSet]
type = Null
triggerall = P2StateType != A
triggerall = P2StateNo < 65536
triggerall = P2StateNo != (Var(6)&65535) && P2StateNo != ((Var(6)/65536)&65535)
trigger1 = (root, StateNo = [5000,5200]) && (root, PrevStateNo = 120 || root, PrevStateNo = 130 || root, PrevStateNo = 140 || (root, PrevStateNo = [150,151]))
trigger1 = e||(var(6) := cond((var(6)&65535) > 0, var(6) | (P2StateNo * (2**16)), (var(6)&-2147450880) | P2StateNo))
ignorehitpause = 1

; Used for standing low detection. Only saves the last 2 of P2's attacks.
[State 0, VarSet]
type = Null
triggerall = P2StateType != A
triggerall = P2StateNo < 65536
triggerall = P2StateNo != (Var(7)&65535) && P2StateNo != ((Var(7)/65536)&65535)
trigger1 = (root, StateNo = [5000,5200]) && (root, PrevStateNo = 120 || root, PrevStateNo = 131 || root, PrevStateNo = 140 || (root, PrevStateNo = [152,153]))
trigger1 = e||(var(7) := cond((var(7)&65535) > 0, var(7) | (P2StateNo * (2**16)), (var(7)&-2147450880) | P2StateNo))
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = P2StateNo = (Var(6)&65535)
trigger2 = P2StateNo = ((Var(6)/65536)&65535)
v = 8
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = P2StateNo = (Var(7)&65535)
trigger2 = P2StateNo = ((Var(7)/65536)&65535)
v = 8
value = 2
ignorehitpause = 1
;persistent = 
[State 0, VarSet]
type = VarSet
trigger1 = P2StateNo != (Var(6)&65535) && P2StateNo != ((Var(6)/65536)&65535)
v = 8
value = 0
ignorehitpause = 1

; HEY DON'T DO STUPID SHIT ON WAKEUP UNLESS YOU'RE A SCRUB
; or at least wait 8 frames before you set yourself on fire
[State 0, VarSet]
type = VarSet
trigger1 = root, StateNo = 5120 && root, AILevel > 2
v = 9
value = 8
[State 0, VarSet]
type = VarAdd
trigger1 = root, AILevel > 2
trigger1 = root, StateNo != 5120 && Var(9) > 0
v = 9
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = Var(9) < 0
v = 9
value = 0

;HEY LET'S THROW SOME PROJECTILES
; Tiger Shot
[State 0, VarSet]
type = VarSet
triggerall = P2StateNo != [5300,5350]
triggerall = root, MoveType != H
triggerall = !Var(14) || Enemy, Pos Y < 0
triggerall = Var(9) = 0
trigger1 = root, P2BodyDist X >= 100-Const(Size.Ground.Front) && root, P2BodyDist Y <= 0
trigger2 = P2StateType != L && (Random = [21,30]) && root, P2BodyDist Y > -34 && root, P2BodyDist X = [40,120]
v=20
value=1000
ignorehitpause =1
; Ground Tiger Shot
[State 0, VarSet]
type = VarSet
triggerall = P2StateNo != [5300,5350]
triggerall = root, MoveType != H
triggerall = P2StateType != A ; BAD FUCKING IDEA TO TRY TO HIT ANY AIR OPPONENTS WITH THIS
triggerall = Var(9) = 0
trigger1 = root, P2BodyDist X >= 92-Const(Size.Ground.Front) && root, P2BodyDist Y = 0
trigger2 = P2StateType != L && (Random = [45,90]) && root, P2BodyDist Y = 0 && root, P2BodyDist X = [40,120]
v=20
value=1100
ignorehitpause =1
; Reset
[State 0, Reset]
type = VarSet
trigger1 = root, MoveType = H
trigger2 = !(root, P2BodyDist X >= 100-Const(Size.Ground.Front) && root, P2BodyDist Y <= 0)
trigger2 = !(P2StateType != L && Random < 45 && root, P2BodyDist Y > -34 && root, P2BodyDist X = [40,120])
trigger2 = !(root, P2BodyDist X >= 92-Const(Size.Ground.Front) && root, P2BodyDist Y = 0)
trigger2 = !(P2StateType != L && (Random = [45,90]) && root, P2BodyDist Y = 0 && root, P2BodyDist X = [40,120])
v=20
value=0

;HEY LET'S FUCK SOME SHIT UP
; Tiger Uppercut
[State 0, VarSet]
type = VarSet
triggerall = root,movetype!=H
triggerall = P2StateType != L
triggerall = Var(8) = 0
trigger1 = root, P2BodyDist X <= 78-Const(Size.Ground.Front) && root, P2BodyDist Y <= 0
trigger2 = P2StateType != L && Random > 320 && root, P2BodyDist Y = 0 && root, P2BodyDist X = [0,42]
trigger3 = root, P2BodyDist X < 32 && root, Var(30) && root, P2BodyDist Y = 0 && root, FrontEdgeBodyDist < 54
v=21
value=1200
ignorehitpause =1
; Tiger Crush
[State 0, VarSet]
type = VarSet
triggerall = root, MoveType != H
triggerall = !Var(14) || Enemy, Pos Y
triggerall = Var(8) = 0
trigger1 = root, P2BodyDist X <= 84-Const(Size.Ground.Front) && root, P2BodyDist Y >= -32
trigger2 = P2StateType != L && Random < 320 && root, P2BodyDist Y > -34 && (root, P2BodyDist X = [40,120])
v=21
value=1300
ignorehitpause =1
; Reset
[State 0, Reset]
type = VarSet
trigger1 = root, MoveType = H
trigger2 = !(root, P2BodyDist X <= 78-Const(Size.Ground.Front) && root, P2BodyDist Y <= 0)
trigger2 = !(P2StateType != L && Random > 320 && root, P2BodyDist Y = 0 && root, P2BodyDist X = [0,42])
trigger2 = !(root, P2BodyDist X < 32 && root, Var(30) && root, P2BodyDist Y = 0 && root, FrontEdgeBodyDist < 54)
trigger2 = !(root, P2BodyDist X <= 84-Const(Size.Ground.Front) && root, P2BodyDist Y >= -32)
trigger2 = !(P2StateType != L && Random < 320 && root, P2BodyDist Y > -34 && (root, P2BodyDist X = [40,120]))
v=21
value=0

 [State 0, DestroySelf]
type = DestroySelf
trigger1 = RoundState != 2

;---------------------------------------------------------------------------
; Statedef -3
;---------------------------------------------------------------------------
[Statedef -3]
;---------------------
; Sound
[State -3, Bounding Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = StateNo = 5100 || StateNo = 5110
value = S5100,0
freqmul = ifElse(StateNo = 5110,0.97,1)
channel = 13
persistent = 0

[State -3, Hurt Sound]
type = PlaySnd
triggerall = Random < 500
triggerall = Time = 1
triggerall = Alive
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080 || StateNo = 5100
value = S5000,ifElse(StateNo = 5100||GetHitVar(animtype) = 2,2,ifElse(GetHitVar(animtype) = 1,1,0))
channel = 4

[State 5201, PlaySnd]
type = PlaySnd
triggerall = Time = 1
trigger1 = StateNo = 5201 || StateNo = 5210
value = S8,4
channel = 0

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------
[Statedef -2]
;---------------------------------------------------------------------------
; DTC
[State -2, Display to Clipboard]
type = DisplaytoClipboard
trigger1 = (GameTime%200) = 0
ignorehitpause = 1
text = "Sagat (CvS2) by Jesuszilla"

[State -2, Display to Clipboard]
type = DisplaytoClipboard
trigger1 = (GameTime%200) = 100
ignorehitpause = 1
text = "http://www.trinitymugen.net/"

[State -2, DisplaytoClipboard]
type = null;DisplaytoClipboard
trigger1 = (GameTime%100) = 0
ignorehitpause = 1
text = "GROOVE = %d, GAUGE = %d, SMALL JUMP = %d\nPARRY = %d, JD = %d"
params = Var(20), Var(10), Var(6), var(5)&8, var(5)&4

[State - 2, DTC]
type = Null;DisplaytoClipboard
trigger1 = (GameTime%200) = 0
ignorehitpause = 1
text = "Var(9) = %d, Var(10) = %d, Var(11) = %d, Var(12) = %d, Var(13) = %d"
params = Var(9), Var(10), Var(11), Var(12), Var(13)

[State -2, DTC]
type = Null;DisplaytoClipboard
trigger1 = (GameTime%300) = 0
ignorehitpause = 1
text = "Var(14) = %d, Var(15) = %d, Var(16) = %d, Var(30) = %d"
params = Var(14), Var(15), Var(16), Var(47)

[State -2, DTC]
type = null;DisplayToClipboard
trigger1 = 1
text = "Combo = %d, Var(11) = %d, Cornerpush = %f, Var(56) = %d, Unguardable = %d"
params = Var(50), Var(11), FVar(39), Var(56), Var(48)

[State -2, DTC]
type = null;DisplayToClipboard
trigger1 = 1
text = "Lvl.2Cancel = %d, P2Recovery = %d, Juggle Time = %d, JD = %d, Shake = %d"
params = ceil(FVar(13)), (P2StateNo!=5040), ceil(FVar(19)), Var(0), Var(2)

[State -2, DTC]
type = null;DisplayToClipboard
trigger1 = 1
text = "OC = %d, P2Body X = %f, P2Body Y = %f, FEBD = %f"
params = Var(31), P2BodyDist X, P2BodyDist Y, FrontEdgeBodyDist

[State -2, DTC]
type = DisplayToClipboard
trigger1 = 1
text = "OC = %d, P2Dist X = %f, P2Dist Y-Vel Y = %f, , Shit = %f"
params = Var(31), P2Dist X, P2Dist Y, (P2Dist Y - Vel Y)

[State -2, DTC]
type = AppendToClipboard
trigger1 = 1
text = "\nVel X = %.10f, Vel Y = %.10f, SysVar(2) = %d"
params = Vel X, Vel Y, SysVar(2)

;----------------------------------------------------------------------------------
; Variable Height
[State -2, Variable Height]
type = PlayerPush
triggerall = StateType = A && NumEnemy
triggerall = P2Dist Y - Vel Y >= (EnemyNear(0), Const(Size.Height) - 52)
triggerall = (StateNo = [40,50]) || (StateNo = [600,650]) || (StateNo = [1200,1300]) || (StateNo = [3200,3300])
trigger1 = P2StateType = S
trigger1 = P2Dist Y - Vel Y >= (EnemyNear(0), Const(Size.Height) - 52)
trigger2 = P2StateType = C
trigger2 = P2Dist Y - Vel Y >= (floor(EnemyNear(0), Const(Size.Height)*0.825) - 52)
trigger3 = P2StateType = C
trigger3 = P2Dist Y - Vel Y >= (12 - 52)
value = 0

;----------------------------------------------------------------------------------
; Remove intro explod
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = StateNo != 191
ID = 1910

;----------------------------------------------------------------------------------
; AI (thanks Kamekaze!)
[State 0, Helper]
type = Helper
triggerall = AILevel
triggerall = RoundState = 2
trigger1 =numhelper(10003)=0
helpertype = normal ;player
name = "neutrality"
ID =  10003
stateno = 9999
pos = Const(Size.Head.Pos.X), Const(Size.Head.Pos.Y)
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale =1*const(size.xscale)
size.yscale =1*const(size.yscale)
ignorehitpause=1

;----------------------------------------------------------------------------------
; Dizzy
[State -2]
type = VarSet
trigger1 = MoveType != A
trigger2 = MoveGuarded
trigger3 = HitDefAttr = SCA,NT,ST,HT
trigger4 = (StateNo = [800,899]) || (StateNo = [1300,1399]) || (StateNo = [3100,3199])
var(49) = 0
[State -2]
type = Helper
triggerall = NumTarget
triggerall = NumEnemy
trigger1 = !NumHelper(776)
trigger1 = RoundState = 2
trigger1 = Enemy(0), StateNo = [5300,5350]
helperType = normal
name = "dizzy (P2)"
ID = 776
pos = (Enemy(0),Const(Size.Head.Pos.X)),(Enemy(0),Const(Size.Head.Pos.Y))
size.xscale = 1
size.yscale = 1
size.ground.front = 16+Enemy(0), Const(Size.Ground.Front)
size.ground.back = 16+Enemy(0), Const(Size.Ground.Front) ;This is intentional
postype = p2
facing = 1
stateno = 777
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
[State -2]
type = Helper
;triggerall = (SysVar(3)&65536) > 0
triggerall = NumEnemy
trigger1 = !NumHelper(782)
trigger1 = RoundState = 2
trigger1 = Enemy(0), Anim = 5300
helperType = normal
name = "dizzy sound (P2)"
ID = 782
pos = 0,0
postype = p2
facing = 1
stateno = 782
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
[State -2]
type = Helper
triggerall = NumTarget
triggerall = NumEnemy > 1
trigger1 = !NumHelper(777)
trigger1 = RoundState = 2
trigger1 = Enemy(1), StateNo = [5300,5350]
helperType = normal
name = "dizzy (P4)"
ID = 777
pos = (Enemy(1),Const(Size.Head.Pos.X)),(Enemy(1),Const(Size.Head.Pos.Y))
size.xscale = 1
size.yscale = 1
size.ground.front = 16+Enemy(1), Const(Size.Ground.Front)
size.ground.back = 16+Enemy(1), Const(Size.Ground.Front) ;This is intentional
postype = p2
facing = 1
stateno = 777
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
[State -2]
type = Helper
;triggerall = (SysVar(3)&-65536) > 0
triggerall = NumEnemy > 1
trigger1 = !NumHelper(783)
trigger1 = RoundState = 2
trigger1 = Enemy(1), Anim = 5300
helperType = normal
name = "dizzy sound (P4)"
ID = 783
pos = 0,0
postype = p2
facing = 1
stateno = 782
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 777, Dizzy Time (low) (P2)]
type = VarSet
triggerall = NumEnemy
triggerall = (SysVar(3)&65535) = 0
trigger1 = (var(5)&1073741824) = 1073741824
trigger1 = Enemy(0), Name = "cvsdhalsim" || Enemy(0), Name = "cvsdan"  || Enemy(0), Name = "cvsgeese" || Enemy(0), Name = "cvsgeese_ex"
sysvar(3) = sysvar(3) | (60*(2**(random%3)))
[State 777, Dizzy Time (small) (P2)]
type = VarSet
triggerall = NumEnemy
triggerall = (SysVar(3)&65535) = 0
trigger1 = (var(5)&1073741824) = 1073741824
trigger1 = Enemy(0), Name = "cvszangief" || Enemy(0), Name = "cvsjoe"  || Enemy(0), Name = "cvschang" || Enemy(0), Name = "cvssieger"
trigger2 = Enemy(0), Name = "cvsalex" || Enemy(0), Name = "cvshugo"
sysvar(3) = sysvar(3) | (30+(60*(2**(random%3))))
[State 777, Dizzy Time (high-mid) (P2)]
type = VarSet
triggerall = NumEnemy
triggerall = (SysVar(3)&65535) = 0
trigger1 = (var(5)&1073741824) = 1073741824
trigger1 = Enemy(0), Name = "cvsbison" || Enemy(0), Name = "cvskyosuke"  || Enemy(0), Name = "cvsyun" || Enemy(0), Name = "cvsking"
trigger2 = Enemy(0), Name = "cvsfelicia" || Enemy(0), Name = "cvschamcham"
sysvar(3) = sysvar(3) | (90+(60*(2**(random%3))))
[State 777, Dizzy Time (high) (P2)]
type = VarSet
triggerall = NumEnemy
triggerall = (SysVar(3)&65535) = 0
trigger1 = (var(5)&1073741824) = 1073741824
trigger1 = Enemy(0), Name = "cvsbalrog" || Enemy(0), Name = "cvsvega"  || Enemy(0), Name = "cvsmorrigan" || (Enemy(0), Name = "cvsryu" && Enemy(0), PalNo = [6,12])
trigger2 = Enemy(0), Name = "cvsryu_ex" || (Enemy(0), Name = "cvsgouki" && Enemy(0), PalNo = [6,12]) || Enemy(0), Name = "cvsgouki_ex" || Enemy(0), Name = "cvsiori"
trigger3 = Enemy(0), Name = "cvsbenimaru" || Enemy(0), Name = "cvsnakoruru" || (Enemy(0), Name = "cvsrugal" && Enemy(0), PalNo = [6,12]) || Enemy(0), Name = "cvsg_rugal"
trigger4 = Enemy(0), Name = "cvsrugal_ex" || Enemy(0), Name = "cvsgallon" || Enemy(0), Name = "cvsdemitri"
sysvar(3) = sysvar(3) | (120+(60*(2**(random%3))))
[State 777, Dizzy Time (mid) (P2)]
type = VarSet
triggerall = (SysVar(3)&65535) = 0
trigger1 = (var(5)&1073741824) = 1073741824
sysvar(3) = sysvar(3) | (60+(60*(2**(random%3))))
[State -2, Dizzy Time Reset (P2)]
type = VarSet
trigger1 = NumEnemy
trigger1 = Enemy(0), StateNo = 5300 && Enemy(0), Time = 1
sysvar(3) = sysvar(3)^(sysvar(3)&65535)

[State 777, Dizzy Time (low) (P4)]
type = VarSet
triggerall = (SysVar(3)&-65536) = 0
triggerall = NumEnemy > 1
trigger1 = (var(5)&-2147483648) = -2147483648
trigger1 = Enemy(1), Name = "cvsdhalsim" || Enemy(1), Name = "cvsdan"  || Enemy(1), Name = "cvsgeese" || Enemy(1), Name = "cvsgeese_ex"
sysvar(3) = sysvar(3) | (65536*(60*(2**(random%3))))
[State 777, Dizzy Time (small) (P4)]
type = VarSet
triggerall = (SysVar(3)&-65536) = 0
triggerall = NumEnemy > 1
trigger1 = (var(5)&-2147483648) = -2147483648
trigger1 = Enemy(1), Name = "cvszangief" || Enemy(1), Name = "cvsjoe"  || Enemy(1), Name = "cvschang" || Enemy(1), Name = "cvssieger"
trigger2 = Enemy(1), Name = "cvsalex" || Enemy(1), Name = "cvshugo"
sysvar(3) = sysvar(3) | (65536*(30+(60*(2**(random%3)))))
[State 777, Dizzy Time (high-mid) (P4)]
type = VarSet
triggerall = (SysVar(3)&-65536) = 0
triggerall = NumEnemy > 1
trigger1 = (var(5)&-2147483648) = -2147483648
trigger1 = Enemy(1), Name = "cvsbison" || Enemy(1), Name = "cvskyosuke"  || Enemy(1), Name = "cvsyun" || Enemy(1), Name = "cvsking"
trigger2 = Enemy(1), Name = "cvsfelicia" || Enemy(1), Name = "cvschamcham"
sysvar(3) = sysvar(3) | (65536*(90+(60*(2**(random%3)))))
[State 777, Dizzy Time (high) (P4)]
type = VarSet
triggerall = (SysVar(3)&-65536) = 0
triggerall = NumEnemy > 1
trigger1 = (var(5)&-2147483648) = -2147483648
trigger1 = Enemy(1), Name = "cvsbalrog" || Enemy(1), Name = "cvsvega"  || Enemy(1), Name = "cvsmorrigan" || (Enemy(1), Name = "cvsryu" && Enemy(1), PalNo = [6,12])
trigger2 = Enemy(1), Name = "cvsryu_ex" || (Enemy(1), Name = "cvsgouki" && Enemy(1), PalNo = [6,12]) || Enemy(1), Name = "cvsgouki_ex" || Enemy(1), Name = "cvsiori"
trigger3 = Enemy(1), Name = "cvsbenimaru" || Enemy(1), Name = "cvsnakoruru" || (Enemy(1), Name = "cvsrugal" && Enemy(1), PalNo = [6,12]) || Enemy(1), Name = "cvsg_rugal"
trigger4 = Enemy(1), Name = "cvsrugal_ex" || Enemy(1), Name = "cvsgallon" || Enemy(1), Name = "cvsdemitri"
sysvar(3) = sysvar(3) | (65536*(120+(60*(2**(random%3)))))
[State 777, Dizzy Time (mid) (P4)]
type = VarSet
triggerall = (SysVar(3)&-65536) = 0
trigger1 = NumEnemy > 1
trigger1 = Enemy(1), StateNo = 5300 && Enemy(1), Time = 0
sysvar(3) = sysvar(3) | (65536*(60+(60*(2**(random%3)))))
[State -2, Dizzy Time Reset (P4)]
type = VarSet
trigger1 = NumEnemy > 1
trigger1 = Enemy(1), StateNo = 5300 && Enemy(1), Time = 1
sysvar(3) = sysvar(3)^(sysvar(3)&-65536)

[State -2, TargetState (P2)]
type = TargetState
triggerall = Var(28) < 3 || (StateNo = 3210 && Var(49) && name = "cvsalex") ; No supers
triggerall = NumTarget
triggerall = NumEnemy
triggerall = !NumHelper(776)
triggerall = (Var(5)&512) > 0 || NumTarget(3200) ; Stun Gun Headbutt.
trigger1 = Enemy(0), Alive
trigger1 = Enemy(0), StateNo != [120,155]
trigger1 = Enemy(0), StateNo != [5050,5110]
trigger1 = Enemy(0), StateNo != [5300,5350]
trigger1 = (var(5)&1073741824) = 1073741824
trigger1 = Target, ID = Enemy(0), ID
trigger1 = Enemy(0), Life - Var(49) > 0
value = 5310
ignorehitpause = 1
[State -2, PlaySnd]
type = PlaySnd
triggerall = NumEnemy
trigger1 = Enemy(0), Alive
trigger1 = (Enemy(0), StateNo = 5340 || Enemy(0), StateNo = 5342) && Enemy(0), Time = 1
trigger1 = Target, ID = Enemy(0), ID
trigger1 = Enemy(0), Life - Var(49) > 0
value = S5100,0
abspan = cond(Enemy(0), Pos X < 0, floor(Enemy(0), Pos X), ceil(Enemy(0), Pos X))
[State 52, Explod]
type = Explod
triggerall = NumEnemy
trigger1 = (Enemy(0), StateNo = 5340 || Enemy(0), StateNo = 5342) && Enemy(0), Time = 1
anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
scale = 1,1
[State -2, Reset (P2)]
type = Null
triggerall = Var(28) < 3 || (StateNo = 3210 && Var(49) && name = "cvsalex") ; No supers
triggerall = NumTarget
triggerall = NumEnemy
triggerall = (Var(5)&512) > 0 || NumTarget(3200) ; Stun Gun Headbutt.
trigger1 = Enemy(0), Alive
trigger1 = Enemy(0), StateNo = 5342
trigger1 = Target, ID = Enemy(0), ID
trigger1 = Enemy(0), Life - Var(49) > 0
trigger1 = (var(5)&1073741824) = 1073741824
trigger1 = e||(var(5) := var(5)-1073741824)
ignorehitpause = 1

[State -2, TargetState (P4)]
type = TargetState
triggerall = Var(28) < 3 || (StateNo = 3210 && Var(49) && name = "cvsalex") ; No supers
triggerall = NumTarget
triggerall = NumEnemy > 1
triggerall = !NumHelper(777)
triggerall = (Var(5)&512) > 0 || NumTarget(3200) ; Stun Gun Headbutt.
trigger1 = Enemy(1), Alive
trigger1 = Enemy(1), StateNo != [120,155]
trigger1 = Enemy(1), StateNo != [5300,5350]
trigger1 = (var(5)&-2147483648) = -2147483648
trigger1 = Target, ID = Enemy(1), ID
trigger1 = Enemy(1), Life - Var(49) > 0
value = 5310
ignorehitpause = 1
[State -2, PlaySnd]
type = PlaySnd
triggerall = NumEnemy > 1
trigger1 = Enemy(1), Alive
trigger1 = (Enemy(1), StateNo = 5340 || Enemy(1), StateNo = 5342) && Enemy(1), Time = 1
trigger1 = Target, ID = Enemy(1), ID
trigger1 = Enemy(1), Life - Var(49) > 0
value = S5100,0
abspan = cond(Enemy(1), Pos X < 0, floor(Enemy(1), Pos X), ceil(Enemy(1), Pos X))
[State 52, Explod]
type = Explod
triggerall = NumEnemy > 1
trigger1 = (Enemy(1), StateNo = 5340 || Enemy(1), StateNo = 5342) && Enemy(1), Time = 1
anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
scale = 1,1
[State -2, Reset (P4)]
type = Null
triggerall = Var(28) < 3 || (StateNo = 3210 && Var(49) && name = "cvsalex") ; No supers
triggerall = NumTarget
triggerall = NumEnemy > 1
triggerall = (Var(5)&512) > 0 || NumTarget(3200) ; Stun Gun Headbutt.
trigger1 = Enemy(1), Alive
trigger1 = Enemy(1), StateNo = 5342
trigger1 = Target, ID = Enemy(1), ID
trigger1 = Enemy(1), Life - Var(49) > 0
trigger1 = (var(5)&-2147483648) = -2147483648
trigger1 = e||(var(5) := var(5)+2147483648)
ignorehitpause = 1

; Multiple redirection hack for dizzy helper
[State -2, Target ID]
type = VarSet
trigger1 = NumTarget
var(32) = Target, ID
ignorehitpause = 1

;----------------------------------------------------------------------------------
; Command Buffering
[State -2]
type = Helper
trigger1 = !NumHelper(10371)
helperType = normal
name = "Buffering - (Mid.pos)"
ID = 10371
pos = 0,0
postype = p1
facing = 1
StateNo = 10371
keyctrl = 1
ownpal = 1
supermovetime = 65535
pausemovetime = 65535

;----------------------------------------------------------------------------------
; Edge fix
[State 0, Width]
type = Width
triggerall = numenemy
trigger1 = facing != enemynear, facing
trigger1 = movetype != H
edge = 7,0
ignorehitpause = 1

;----------------------------------------------------------------------------------
; Cat Ride
[State -2, Cat Ride Pos]
type = VarSet
trigger1 = Enemy, Name = "Felicia_LG"
trigger1 = StateNo != 132 && StateNo != 155 ; Air guard
trigger1 = StateNo != [5000,5999]           ; Gethits
sysvar(0) = (-4 & 65535) | (-117 * 65536)

;----------------------------------------------------------------------------------
; Var Helper
[State -2, 0]
type = Helper
trigger1 = !NumHelper(247)
helpertype = normal
name = "Var"
ID = 247
pos = 0,0
postype = p1
stateno = 247
keyctrl = 0

; Reset Small Jump
[State 52, VarSet]
type = VarSet
triggerall = Var(6) = 2
trigger1 = StateType != A
trigger2 = MoveType = H
var(6) = 1

;===============================================================================
; ------- CvS2 Cornerpush System by Vans & Jesuszilla --------
;===============================================================================
[State -2, Kill Cornerpush]
type = VarSet
trigger1 = StateNo = 3110 && AnimElem = 5
fvar(39) = 0

[State -2, Reset Time counter]
type = VarSet
triggerall = NumHelper(247)
trigger1 = Helper(247), Var(0) = 1
var(56) = 0

[State -2, Accel]
type = VarSet
triggerall = RoundState = 2
triggerall = numtarget ;>= 1
triggerall = target, HitShakeOver
trigger1 = StateNo != 970 && StateNo != 975 && StateNo != 3000 && StateNo != 3100 && StateNo != 3200 && StateNo != 3300
trigger2 = (StateNo = [3000,3300]) && !Var(48)
fvar(39) = (target,GetHitVar(Xvel)*exp((-0.1886)*((Var(56)))))

[State -2, Push]
type = PosAdd
triggerall = RoundState = 2
triggerall = numtarget >= 1
triggerall = (target, BackEdgeBodyDist <= 0) || (target, FrontEdgeBodyDist <= 0)
triggerall = Var(50) < 3;ProjContact = 0, < 50
triggerall = P2StateType != A
triggerall = StateNo != [800,839]
triggerall = StateNo != [102,106]
triggerall = P2StateType != A
triggerall = StateType != A; OR IS IT
trigger1 = StateNo != 970 && StateNo != 975 && StateNo != 3000 && StateNo != 3100 && StateNo != 3200 && StateNo != 3300
trigger2 = (StateNo = [3000,3300]) && !Var(48)
x = ifElse(facing = -1,FVar(39),-FVar(39));SysFVar(0)

[State -2, Increase]
type = VarSet
triggerall = numtarget ;>= 1
triggerall = target, HitShakeOver
triggerall = Var(56)
trigger1 = !Var(48)
var(56) = Var(56)+1

[State -2, Time counter]
type = VarSet
trigger1 = !Var(56)
trigger1 = FVar(39)
var(56) = 1

[State -2, Freeze Pos During Superpause]
type = PosFreeze
trigger1 = Var(48)
value = 1

[State -2, Drop]
type = VarSet
triggerall = FVar(39)
trigger1 = !NumTarget
trigger2 = Var(50) = [3,4]
trigger3 = NumHelper(247)
trigger3 = Helper(247), Var(0) = 1
fvar(39) = 0

;----------------------------------------------------------------------------------
; Config
[State -2, Helper]
type = Helper
triggerall = !NumHelper(10001)
trigger1 = Time = 0
trigger1 = roundsexisted <= 0
trigger1 = RoundState = 0
ID = 10001
name = "config"
pos = -300,0
postype = Left
stateno = 10001
helpertype = normal
keyctrl = 0
pausemovetime = 65535
supermovetime = 65535

;----------------------------------------------------------------------------------
; Message Icon
[State -2, Message Icon Y-Axis]
type = VarSet
trigger1 = Var(20) > 9000
fvar(24) = 9001

;----------------------------------------------------------------------------------
; Groove Select
[State -2, Groove]
type = Helper
;triggerall = MatchNo = 1; Select only once and be stuck with it for rest of Arcade
triggerall = NumEnemy
triggerall = Time = 1
triggerall = RoundState = 0
triggerall = roundsexisted <= 0
triggerall = Var(20) > -1
trigger1 = numpartner
trigger1 = ID>partner,ID
trigger1 = !partner,authorname="warusaki3"
trigger1 = !(partner,authorname = "mouser" && partner,name = "Hibiki Takane")
trigger1 = !partner,authorname = "Hh"
trigger1 = !(partner,authorname="Jesuszilla" && partner,FVar(17) < 3)
trigger1 = !partner,authorname=".\/."
trigger1 = !(partner,authorname="N64Mario" && partner,name = "Zero")
trigger2 = numpartner
trigger2 = ID<partner,ID
trigger3 = !numpartner
ID = 6000
stateno = 6000
postype = p1
size.xscale = .5
size.yscale = .5
pos = 0,-15
name = "groove"
ontop = 1
bindtime = -1

[State -2, Arrow]
type = Helper
triggerall = NumEnemy
triggerall = Time = 1
triggerall = RoundState = 0
triggerall = roundsexisted <= 0
triggerall = Var(20) > -1
trigger1 = numpartner
trigger1 = ID>partner,ID
trigger1 = !partner,authorname="warusaki3"
trigger1 = !(partner,authorname = "mouser" && partner,name = "Hibiki Takane")
trigger1 = !partner,authorname = "Hh"
trigger1 = !(partner,authorname="Jesuszilla" && partner,FVar(17) < 3)
trigger1 = !partner,authorname=".\/."
trigger1 = !(partner,authorname="N64Mario" && partner,name = "Zero")
trigger2 = numpartner
trigger2 = ID<partner,ID
trigger3 = !numpartner
ID = 6050
stateno = 6050
postype = p1
size.xscale = .5
size.yscale = .5
pos = 0,0
name = "Up-Arrow"
ontop = 1
bindtime = -1
keyctrl = 1
ownpal = 1

[State -2, Arrow]
type = Helper
triggerall = NumEnemy
triggerall = Time = 1
triggerall = RoundState = 0
triggerall = roundsexisted <= 0
triggerall = Var(20) > -1
trigger1 = numpartner
trigger1 = ID>partner,ID
trigger1 = !partner,authorname="warusaki3"
trigger1 = !(partner,authorname = "mouser" && partner,name = "Hibiki Takane")
trigger1 = !partner,authorname = "Hh"
trigger1 = !(partner,authorname="Jesuszilla" && partner,FVar(17) < 3)
trigger1 = !partner,authorname=".\/."
trigger1 = !(partner,authorname="N64Mario" && partner,name = "Zero")
trigger2 = numpartner
trigger2 = ID<partner,ID
trigger3 = !numpartner
ID = 6050
stateno = 6055
postype = p1
size.xscale = .5
size.yscale = .5
pos = 0,0
name = "Down-Arrow"
ontop = 1
bindtime = -1
keyctrl = 1
ownpal = 1

;----------------------------------------------------------------------------------
; Groove Point
[State -2, Helper]
type = Helper
triggerall = NumEnemy
triggerall = Var(20) > -1
triggerall = FVar(20)
triggerall = !NumHelper(6500) && !NumHelper(6000)
trigger1 = numpartner
trigger1 = ID>partner,ID
trigger1 = !partner,authorname="warusaki3"
trigger1 = !(partner,authorname = "mouser" && partner,name = "Hibiki Takane")
trigger1 = !partner,authorname = "Hh"
trigger1 = !(partner,authorname="Jesuszilla" && partner,FVar(17) < 3)
trigger1 = !partner,authorname=".\/."
trigger1 = !(partner,authorname="N64Mario" && partner,name = "Zero")
trigger2 = numpartner
trigger2 = ID<partner,ID
trigger3 = !numpartner
ID = 6500
name = "groove point"
pos = 0,300
postype = Left
stateno = 6500
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999
supermovetime = 99999999999999
size.xscale = 1
size.yscale = 1

;----------------------------------------------------------------------------------
; No Music
[State -2, AssertSpecial]
type = AssertSpecial
triggerall = roundno = 1
trigger1 = RoundState < 2
flag = NoMusic

; PERFECT
[State -2, Combo]
type = VarSet
triggerall = RoundState = 2
trigger1 = FVar(8) - Life > 0
fvar(15) = 1
ignorehitpause = 1

;----------------------------------------------------------------------------------
; Vars set upon victory/loss.
[State -2, 1]
type = VarSet
trigger1 = Win
var(27) = 1

[State -2, 1]
type = VarSet
trigger1 = Lose
var(27) = 2

[State -2, 1]
type = VarSet
trigger1 = Lose || DrawGame
var(36) = 1

[State -2,KO]
type = VarAdd
trigger1 = MatchOver
ignorehitpause = 1
var(39) = 1

[State -2,KO]
type = VarSet
trigger1 = !MatchOver
ignorehitpause = 1
var(39) = 0

[State 180, 1]
type = VarAdd
triggerall = Var(39) = 1
trigger1 = !Var(36)
var(38)= 1
ignorehitpause = 1
persistent = 0

[State 180, 1]
type = VarSet
trigger1 = RoundState = 0 && roundno = 1
var(38)= 0
ignorehitpause = 1

;----------------------------------------------------------------------------------
; STATE DECISION
[State -2, 1]
type = VarSet
triggerall = movetype != H && RoundState = 2
trigger1 = (StateNo = [0,199]) && !Var(31)
var(28) = 0

[State -2, 1]
type = VarSet
triggerall = movetype != H && RoundState = 2
trigger1 = (StateNo = [200,999]) && !Var(31)
var(28) = 1

[State -2, 1]
type = VarSet
triggerall = movetype != H && RoundState = 2
trigger1 = (StateNo = [1000,2999]) && !Var(31)
var(28) = 2

[State -2, 1]
type = VarSet
trigger1 = NumHelper(1005)
trigger1 = Helper(1005), Var(50) = 3
trigger2 = NumHelper(1105)
trigger2 = Helper(1105), Var(50) = 3
var(28) = 2

[State -2, 1]
type = VarSet
triggerall = movetype != H && RoundState = 2
trigger1 = ((StateNo = [3000,3999]) && Var(22)!=2) || Var(31)
var(28) = 3

[State -2, 1]
type = VarSet
triggerall = movetype != H && RoundState = 2
trigger1 = (StateNo = [3000,3999]) && Var(22) = 2
var(28) = 4

[State -2, 1]
type = VarSet
trigger1 = NumHelper(2005)
trigger1 = Helper(2005), Var(50) = 3
var(28) = cond((Helper(2005), Var(22) = 2), 4, 3)

[State -2, 1]
type = VarSet
trigger1 = NumHelper(2105)
trigger1 = Helper(2005), Var(50) = 3
var(28) = cond((Helper(2105), Var(22) = 2), 4, 3)

[State -2, 1]
type = VarSet
triggerall = P2movetype != H && RoundState = 2
trigger1 = P2StateNo = [0,199]
var(59) = 0

[State -2, 1]
type = VarSet
triggerall = P2movetype != H && RoundState = 2
trigger1 = P2StateNo = [200,999]
var(59) = 1

[State -2, 1]
type = VarSet
triggerall = P2movetype != H && RoundState = 2
trigger1 = P2StateNo = [1000,2999]
var(59) = 2

[State -2, 1]
type = VarSet
triggerall = P2movetype != H && RoundState = 2
trigger1 = P2StateNo = [3000,3999]
var(59) = 3

;----------------------------------------------------------------------------------
; Turns Mode Intro
[State -3, Turns Mode Intro]
type = ChangeState
triggerall = NumEnemy
trigger1 = roundsexisted <= 0
trigger1 = RoundState = 0
trigger1 = Time = 0
value = 190

; Special Intro
[State -3, Turns Mode Intro]
type = ChangeState
triggerall = RoundState = 0
triggerall = NumEnemy
triggerall = EnemyNear, roundsexisted <= 0
triggerall = Time = 0
trigger1 = Enemy, Name = "cvsryu" || Enemy, Name = "Ryu"
trigger2 = Enemy, Name = "cvsking" || (Enemy, Name = "King" && AuthorName != "chuchoryu") ; KOF King, not Tekken
trigger3 = Enemy, Name = "cvsjoe" || Enemy, Name = "Joe Higashi"
trigger4 = Enemy, Name = "cvseagle" 
value = 190

;---------------------
; Gauge
[State -2, Helper]
type = Helper
triggerall = Var(10)
triggerall = !NumHelper(6100) && !NumHelper(6000)
triggerall = numenemy
triggerall = Var(20) < 9001
trigger1 = numpartner
trigger1 = ID>partner,ID
trigger1 = !partner,authorname="warusaki3"
trigger1 = !(partner,authorname = "mouser" && partner,name = "Hibiki Takane")
trigger1 = !partner,authorname = "Hh"
trigger1 = !(partner,authorname="Jesuszilla" && partner,FVar(17) < 3)
trigger1 = !partner,authorname=".\/."
trigger1 = !(partner,authorname = "N64Mario" && partner,name = "Zero")
trigger2 = numpartner
trigger2 = ID<partner,ID
trigger3 = !numpartner
ID = 6100
name = "gauge"
pos = 0,300
postype = P1
stateno = 6090+(Var(10)*10)
helpertype = normal
keyctrl = 0
ownpal = 1
;ignorehitpause = 1
persistent = 0
supermovetime = 99999999999999
pausemovetime = 99999999999999
facing = facing*ifElse(teamside=1,1,-1)

;---------------------
; S-Gauge MAX
[State -2, 1]
type = VarSet
triggerall = Var(10) = 4
trigger1 = !Var(17)
trigger1 = RoundState >= 2
trigger1 = Power >= 1000
var(17) = 750

[State -2, 1]
type = PowerSet
trigger1 = Var(17) = 750
value = 0
ignorehitpause = 1

[State -2, 1]
type = PowerSet
trigger1 = Var(17) = 1
value = 0
ignorehitpause = 1

[State 200, 3]
type = PlaySnd
trigger1 = Var(17) = 750
value = S6000,2

[State -2, 1]
type = VarAdd
trigger1 = Var(17)
var(17) = -1
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = Var(17)
var(44) = 1

[State -2, 1]
type = VarSet
trigger1 = !Var(17) && ctrl
var(44) = 0

;---------------------
; N-Gauge MAX
[State -2, 1]
type = VarAdd
trigger1 = Var(29)
var(29) = -1
ignorehitpause = 1

[State -2, 1]
type = PalFX
triggerall = RoundState = 2
triggerall = Var(10) = 5
trigger1 = (GameTime%2)=0
trigger1 = Var(29)
time = 1
add = 128,128,0
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = !Var(29) && ctrl
var(18) = 0

;---------------------
; K-Gauge RAGE
[State -2, Combo]
type = VarAdd
triggerall = Var(10) = 6
triggerall = !Var(19)
triggerall = RoundState = 2
triggerall = FVar(14) < 7200
trigger1 = FVar(8) - Life > 0
fvar(14) = ceil((FVar(8)-Life)*14*(10+Var(41))/10)
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = FVar(14) > 7200
fvar(14) = 7200

[State -2, 1]
type = VarSet
trigger1 = FVar(14) = 7200
var(19) = 1

[State -2, 1]
type = VarSet
trigger1 = FVar(14) <= 1 && ((StateNo != [3000,3999]) || RoundState != 2)
var(19) = 0

[State 860, 1]
type = Explod
trigger1 = FVar(14) = 7200 && !NumExplod(8420)
anim = 8420
pos = 0,-70
postype = p1
ontop = 0
ownpal = 1
ID = 8420
persistent = 0
pausemovetime = -1
scale = .5,.5

[State 200, 3]
type = PlaySnd
trigger1 = FVar(14) = 7200
value = S6000,5

[State -2, 1]
type = PowerAdd
trigger1 = FVar(14) = 7200
value = -3000
ignorehitpause = 1

[State -2, 1]
type = VarAdd
triggerall = Var(10) = 6
triggerall = Var(19)
trigger1 = FVar(14) > 0
fvar(14) = -7.2
ignorehitpause = 1

[State -2, 1]
type = PalFX
triggerall = RoundState = 2
triggerall = Var(10) = 6
trigger1 = FVar(14) && Var(19)
time = 1
mul = 230,ceil(152-abs(76*sin(gametime*.05))),ceil(128-abs(64*sin(gametime*.05)))
ignorehitpause = 1
persistent = 0

[State -2, 1]
type = LifeAdd
triggerall = Alive && MoveType = H
triggerall = Var(10) = 6
triggerall = FVar(14) && Var(19)
trigger1 = (FVar(8)-life)>0
value = ifElse((FVar(8)-life)<life,floor((FVar(8)-life)*0.125),0)

;----------------------------------------------------------------------------------
; Power Up! Sound
[State -2, PlaySnd]
type = PlaySnd
triggerall = RoundState = 2
trigger1 = (floor(power*.001) - floor(FVar(37)*.001) > 0) && (Var(10) = 1 || Var(10) = 5)
trigger2 = (floor(power/1500) - floor(FVar(37)/1500) > 0) && Var(10) = 2
trigger3 = (floor(power/3000) - floor(FVar(37)/3000) > 0) && (Var(10) = 3 || Var(10) = 4)
value = 6000,ifElse(Var(10)=5,3,4)
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = 1
fvar(37) = power
ignorehitpause = 1

;----------------------------------------------------------------------------------
; Power Reset
[State -2, 1]
type = VarAdd
triggerall = RoundState = 2
trigger1 = Var(30)
var(30) = -1
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = MoveType = H
var(30) = 0

[State -2, 1]
type = VarSet
trigger1 = !Var(30) && ctrl
trigger2 = LoseKO
var(31) = 0

[State -2, 1]
type = VarAdd
trigger1 = Var(30)
var(43) = -9
ignorehitpause = 1

[State -2, 1]
type = PowerSet
triggerall = Var(31)
trigger1 = MoveType = H
value = Var(43)/2

[State -2, Kill Juggle Checking]; I GOTTA BELIEVE!
type = AssertSpecial
trigger1 = 1;Var(31)
;trigger1 = P2MoveType = H && P2stateType = A
flag = NoJuggleCheck

[State -2, No Blocking]
type = AssertSpecial
trigger1 = Var(30)
flag = NoStandGuard
flag2 = NoCrouchGuard
flag3 = NoAirGuard

;---------------------
; NoAirGuard
[State -2, AssertSpecial]
type = AssertSpecial
trigger1 = !(var(5)&256)
flag = NoAirGuard

;---------------------
; Combo Damage
[State -2, PowerReset]
type = VarSet
trigger1 = P2movetype != H
var(45) = P2life

[State 3001, Super]
type = Helper
triggerall = FVar(7)
triggerall = numenemy
triggerall = RoundState = 2
triggerall = (Var(45)-P2life)>250
trigger1 = !NumHelper(6800)&&!Var(35)
trigger2 = !NumHelper(6800)&&Var(35)=1&&!enemynear,NumHelper(6800)
ID = 6800
name = "narration_1"
pos = 0,300
postype = Left
stateno = 6803
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999

; No guard during superpause
[State -2, Unguardable]
type = VarAdd
trigger1 = Var(48) > 0
var(48) = -1
[State -2, Unguardable]
type = AssertSpecial
trigger1 = Var(48) > 0
flag = unguardable

;Starting Groove Points & Decrease Groove Points by Time
[State -2, PowerReset]
type = VarSet
triggerall = MatchNo = 1
triggerall = RoundNo = 1
trigger1 = RoundState = 0
var(47) = 100000

[State -2, PowerReset]
type = VarSet
trigger1 = Var(47) > 9999999
var(47) = 9999999
persistent = 1

[State -2, PowerReset]
type = VarSet
trigger1 = Var(47) < -9999999
var(47) = -9999999
persistent = 1

[State -2, PowerReset]
type = VarAdd
trigger1 = RoundState = 2
var(34) = 1
persistent = 1

[State -2, PowerReset]
type = VarAdd
triggerall = RoundState = 2
triggerall = Var(47) = [-9999999,9999999]
trigger1 = Var(34) >= 600
trigger1 = gametime%60 = 0
var(47) = -500
persistent = 1

[State 3001, Super]
type = Helper
triggerall = FVar(7)
triggerall = !Var(37)
triggerall = numenemy
triggerall = RoundState = 2
triggerall = Var(34) = 400
trigger1 = !NumHelper(6800)&&!Var(35)
trigger2 = !NumHelper(6800)&&Var(35)=1&&!enemynear,NumHelper(6800)
ID = 6800
name = "narration_1"
pos = 0,300
postype = Left
stateno = 6800
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999

;-------------------------------------
; Basic, Command, and Special Juggling
;-------------------------------------
[State -2, Juggle Timer]
type = VarSet
triggerall = NumHelper(247)
trigger1 = Helper(247), Var(0) = 1
fvar(19) = FVar(18)
ignorehitpause = 1

[State -2, Juggle Timer]
type = VarAdd
trigger1 = FVar(19) != 0 && FVar(19) != 256
fvar(19) = -1
ignorehitpause = 1

[State -2, Kill Juggling]
type = VarSet
trigger1 = FVar(19) <= 0 || FVar(19) = 256
fvar(19) = ifElse(FVar(19)=256, 256, 0)

;-------------------------------------
; Free Juggling After a Lv. 2 Cancel
;-------------------------------------
; Anything that should juggle after a
; Level 2 cancel is performed should
; go here.
[State -2, Cancel]
type = VarAdd
trigger1 = FVar(13)
fvar(13) = -1

[State -2, Lvl2 Cancel Juggling]
type = VarSet
trigger1 = MoveHit = 1
trigger2 = ProjHit = 1
trigger3 = numHelper(1005)
trigger3 = helper(1005), moveHit
trigger4 = numHelper(1105)
trigger4 = helper(1105), moveHit
trigger5 = numHelper(2005)
trigger5 = helper(2005), moveHit
trigger6 = numHelper(2105)
trigger6 = helper(2105), moveHit
fvar(13) = (180*4)/5
ignorehitpause = 1

[State -2, Kill]
type = VarSet
trigger1 = FVar(13) < 0
fvar(13) = 0
ignorehitpause = 1

;----------------------------------------------------------------------------------
;Groove points increase/decrease when damage is taken
[State -2, 1]
type = VarAdd
triggerall = RoundState = 2
triggerall = StateNo = 5000 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080
trigger1 = Time = 1
var(47)=ifElse((enemynear,hitdefattr=SCA,NA,NP,NT),-500,ifElse((enemynear,hitdefattr=SCA,SA,SP,ST),-300,-200))
ignorehitpause = 1

[State -2, 1]
type = VarAdd
triggerall = RoundState = 2
triggerall = movetype = H
triggerall = (StateNo != 5000 && StateNo != 5020 && StateNo != 5070 && StateNo != 5080)
trigger1 = FVar(8) - Life > 0
var(47)=ifElse((enemynear,StateNo=[195,999]),-500,ifElse((enemynear,StateNo=[1000,2999]),-300,-200))
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = 1
fvar(8) = life
ignorehitpause = 1

;----------------------------------------------------------------------------------
; Messages
;Reversal Condition 1
[State 180, 1]
type = VarSet
trigger1 = movetype = H
fvar(30) = 2
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = ctrl
trigger1 = FVar(30) = 2
fvar(30) = 1
ignorehitpause = 1

[State 180, 1]
type = VarAdd
trigger1 = FVar(30) = 1
fvar(31) = 1
ignorehitpause = 1

;Bonus Message
[State 180, 1]
type = VarSet
trigger1 = 1
fvar(32) = -1
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
triggerall = MoveType != H
trigger1 = stateno = 700
trigger2 = stateno = 710
trigger3 = stateno = 720
fvar(32) = 0
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Var(21)
triggerall = p2movetype = H
trigger1 = (stateno != [800,899])
trigger1 = movehit
trigger2 = projhit = 1
trigger3 = (stateno = 810 || stateno = 815) && animelem = 4 && movetype != H
trigger4 = (stateno = 831 || stateno = 832) && var(11) && movetype != H
trigger5 = numHelper(1005)
trigger5 = helper(1005), moveHit
trigger6 = numHelper(1105)
trigger6 = helper(1105), moveHit
trigger7 = numHelper(2005)
trigger7 = helper(2005), moveHit
trigger8 = numHelper(2105)
trigger8 = helper(2105), moveHit
fvar(32) = 1
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = !Var(37)
triggerall = p2movetype = H
trigger1 = (stateno != [800,899])
trigger1 = movehit
trigger2 = projhit = 1
trigger3 = (stateno = 810 || stateno = 815) && animelem = 4 && movetype != H
trigger4 = (stateno = 831 || stateno = 832) && var(11) && movetype != H
trigger5 = numHelper(1005)
trigger5 = helper(1005), moveHit
trigger6 = numHelper(1105)
trigger6 = helper(1105), moveHit
trigger7 = numHelper(2005)
trigger7 = helper(2005), moveHit
trigger8 = numHelper(2105)
trigger8 = helper(2105), moveHit
fvar(32) = ifElse(Var(21),-2,2)
ignorehitpause = 1

[State 180, Guard Cancel]
type = VarSet
triggerall = Time = 1
triggerall = MoveType != H
trigger1 = stateno = 320
fvar(32) = 3
ignorehitpause = 1

[State 180, Counter Attack]
type = VarSet
triggerall = Time = 1
triggerall = MoveType != H
trigger1 = stateno = 2800
fvar(32) = 4
ignorehitpause = 1

[State 180, Guard Cancel]
type = VarSet
triggerall = Time = 1
triggerall = MoveType != H
trigger1 = stateno = 330
fvar(32) = 5
ignorehitpause = 1

[State 180, Just Defend]
type = VarSet
triggerall = Time = 1
triggerall = MoveType != H
trigger1 = Var(14) = 1
fvar(32) = 6
ignorehitpause = 1

[State 180, Tech Bonus]
type = VarSet
trigger1 = Var(12)
fvar(32) = 7
ignorehitpause = 1

[State 180, Tech Bonus]
type = VarSet
triggerall = Time = 1
trigger1 = stateno = 5201
trigger2 = stateno = 5210
trigger3 = stateno = 955 && movetype != H
fvar(32) = 9
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
triggerall = FVar(31)
triggerall = movetype != H
triggerall = stateno != [2800,2999]
trigger1 = stateno = [1000,3999]
fvar(32) = 10
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = (var(55)&2)
triggerall = (var(55)&4)
triggerall = (var(55)&8)
triggerall = FVar(20)
triggerall = !NumHelper(6600)
trigger1 = !FVar(32)
trigger2 = FVar(32) = [3,6]
id = 6600
name = "Guard"
pos =0,0
postype = P1
stateno = 6640
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = (var(55)&2)
triggerall = (var(55)&4)
triggerall = !(var(55)&8)
triggerall = FVar(20)
triggerall = !NumHelper(6600)
trigger1 = !FVar(32)
trigger2 = FVar(32) = [3,6]
id = 6600
name = "Guard"
pos =0,0
postype = P1
stateno = 6630
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = (var(55)&2)
triggerall = !(var(55)&4)
triggerall = FVar(20)
triggerall = !NumHelper(6600)
trigger1 = !FVar(32)
trigger2 = FVar(32) = [3,6]
id = 6600
name = "Guard"
pos =0,0
postype = P1
stateno = 6620
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = !(var(55)&2)
triggerall = FVar(20)
triggerall = !NumHelper(6600)
trigger1 = !FVar(32)
trigger2 = FVar(32) = [3,6]
id = 6600
name = "Guard"
pos =0,0
postype = P1
stateno = 6610
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !(var(55)&1)
triggerall = FVar(20)
triggerall = !NumHelper(6600)
trigger1 = !FVar(32)
trigger2 = FVar(32) = [3,6]
id = 6600
name = "Guard"
pos =0,0
postype = P1
stateno = 6600
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = (var(55)&2)
triggerall = (var(55)&4)
triggerall = (var(55)&8)
triggerall = FVar(20)
triggerall = !NumHelper(6601)
trigger1 = FVar(32) = 1 || FVar(32) = -2
id = 6601
name = "Counter Hit"
pos =0,0
postype = P1
stateno = 6641
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = (var(55)&2)
triggerall = (var(55)&4)
triggerall = !(var(55)&8)
triggerall = FVar(20)
triggerall = !NumHelper(6601)
trigger1 = FVar(32) = 1 || FVar(32) = -2
id = 6601
name = "Counter Hit"
pos =0,0
postype = P1
stateno = ifElse(Var(37)=0,6641,6631)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = (var(55)&2)
triggerall = !(var(55)&4)
triggerall = FVar(20)
triggerall = !NumHelper(6601)
trigger1 = FVar(32) = 1 || FVar(32) = -2
id = 6601
name = "Counter Hit"
pos =0,0
postype = P1
stateno = ifElse(Var(37)=0,6631,6621)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = !(var(55)&2)
triggerall = FVar(20)
triggerall = !NumHelper(6601)
trigger1 = FVar(32) = 1 || FVar(32) = -2
id = 6601
name = "Counter Hit"
pos =0,0
postype = P1
stateno = ifElse(Var(37)=0,6621,6611)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !(var(55)&1)
triggerall = FVar(20)
triggerall = !NumHelper(6601)
trigger1 = FVar(32) = 1 || FVar(32) = -2
id = 6601
name = "Counter Hit"
pos =0,0
postype = P1
stateno = ifElse(Var(37)=0,6611,6601)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = (var(55)&2)
triggerall = (var(55)&4)
triggerall = (var(55)&8)
triggerall = FVar(20)
triggerall = !NumHelper(6602)
triggerall = RoundState = 2
trigger1 = FVar(32) = 2 || FVar(32) = -2
id = 6602
name = "First Attack"
pos =0,0
postype = P1
stateno = 6642
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = (var(55)&2)
triggerall = (var(55)&4)
triggerall = !(var(55)&8)
triggerall = FVar(20)
triggerall = !NumHelper(6602)
triggerall = RoundState = 2
trigger1 = FVar(32) = 2 || FVar(32) = -2
id = 6602
name = "First Attack"
pos =0,0
postype = P1
stateno = 6632
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = (var(55)&2)
triggerall = !(var(55)&4)
triggerall = FVar(20)
triggerall = !NumHelper(6602)
triggerall = RoundState = 2
trigger1 = FVar(32) = 2 || FVar(32) = -2
id = 6602
name = "First Attack"
pos =0,0
postype = P1
stateno = 6622
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = !(var(55)&2)
triggerall = FVar(20)
triggerall = !NumHelper(6602)
triggerall = RoundState = 2
trigger1 = FVar(32) = 2 || FVar(32) = -2
id = 6602
name = "First Attack"
pos =0,0
postype = P1
stateno = 6612
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !(var(55)&1)
triggerall = FVar(20)
triggerall = !NumHelper(6602)
triggerall = RoundState = 2
trigger1 = FVar(32) = 2 || FVar(32) = -2
id = 6602
name = "First Attack"
pos =0,0
postype = P1
stateno = 6602
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = (var(55)&2)
triggerall = (var(55)&4)
triggerall = (var(55)&8)
triggerall = FVar(20)
triggerall = !NumHelper(6603)
trigger1 = FVar(32) = [7,9]
id = 6603
name = "Tech Hit"
pos =0,0
postype = P1
stateno = 6643
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = (var(55)&2)
triggerall = (var(55)&4)
triggerall = !(var(55)&8)
triggerall = FVar(20)
triggerall = !NumHelper(6603)
trigger1 = FVar(32) = [7,9]
id = 6603
name = "Tech Hit"
pos =0,0
postype = P1
stateno = 6633
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = (var(55)&2)
triggerall = !(var(55)&4)
triggerall = FVar(20)
triggerall = !NumHelper(6603)
trigger1 = FVar(32) = [7,9]
id = 6603
name = "Tech Hit"
pos =0,0
postype = P1
stateno = 6623
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = !(var(55)&2)
triggerall = FVar(20)
triggerall = !NumHelper(6603)
trigger1 = FVar(32) = [7,9]
id = 6603
name = "Tech Hit"
pos =0,0
postype = P1
stateno = 6613
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !(var(55)&1)
triggerall = FVar(20)
triggerall = !NumHelper(6603)
trigger1 = FVar(32) = [7,9]
id = 6603
name = "Tech Hit"
pos =0,0
postype = P1
stateno = 6603
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = (var(55)&2)
triggerall = (var(55)&4)
triggerall = (var(55)&8)
triggerall = FVar(20)
triggerall = !NumHelper(6604)
trigger1 = FVar(32) = 10
id = 6604
name = "Reversal"
pos =0,0
postype = P1
stateno = 6644
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = (var(55)&2)
triggerall = (var(55)&4)
triggerall = !(var(55)&8)
triggerall = FVar(20)
triggerall = !NumHelper(6604)
trigger1 = FVar(32) = 10
id = 6604
name = "Reversal"
pos =0,0
postype = P1
stateno = 6634
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = (var(55)&2)
triggerall = !(var(55)&4)
triggerall = FVar(20)
triggerall = !NumHelper(6604)
trigger1 = FVar(32) = 10
id = 6604
name = "Reversal"
pos =0,0
postype = P1
stateno = 6624
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = !(var(55)&2)
triggerall = FVar(20)
triggerall = !NumHelper(6604)
trigger1 = FVar(32) = 10
id = 6604
name = "Reversal"
pos =0,0
postype = P1
stateno = 6614
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !(var(55)&1)
triggerall = FVar(20)
triggerall = !NumHelper(6604)
trigger1 = FVar(32) = 10
id = 6604
name = "Reversal"
pos =0,0
postype = P1
stateno = 6604
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

;Tech Hit Points
[State 180, 1]
type = VarAdd
trigger1 = FVar(32) = 9
var(47)=500
ignorehitpause = 1

;Reversal Points
[State 180, 1]
type = VarAdd
trigger1 = FVar(32) = 10
var(47) = 2000
ignorehitpause = 1

[State 180, 1]
type = VarSet
trigger1 = FVar(31) = 3
trigger2 = (stateno = [1000,3999]) && time = 1
fvar(30) = 0
ignorehitpause = 1

[State 180, 1]
type = VarSet
trigger1 = FVar(31) = 3
trigger2 = (stateno = [1000,3999]) && time = 1
fvar(31) = 0
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = Var(28) = [0,1]
fvar(33) = 1
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = Var(28) = 2
fvar(33) = 5
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = Var(28) = 3 || Var(28) = 4
fvar(33) = 6+((Var(10)=[4,6])*5)
ignorehitpause = 1

[State 180, 1]
type = VarSet
trigger1 = !numtarget
var(3) = 0
ignorehitpause = 1

[State 180, 1]
type = VarSet
trigger1 = Var(28) = 2 && Var(59) = 3 && (FVar(32) = 1 || FVar(32) = -2)
trigger2 = Var(28) = 3 && Var(59) = 3
trigger3 = Var(28) = 4 && Var(59) = [2,3]
trigger4 = Var(31) && Var(59) = 3
var(3) = 1
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = Var(31) ;&& !Var(3)
fvar(33) = 3
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = Var(3) = 1
fvar(33) = 12
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = (var(55)&2)
triggerall = (var(55)&4)
triggerall = (var(55)&8)
triggerall = (var(55)&16)
triggerall = !(var(55)&32)
triggerall = FVar(20)
triggerall = !NumHelper(6700)
triggerall = winKO
triggerall = alive
trigger1 = !FVar(21)
id = 6700
name = "Finish Hit"
pos =0,0
postype = P1
stateno = 6750
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = (var(55)&2)
triggerall = (var(55)&4)
triggerall = (var(55)&8)
triggerall = !(var(55)&16)
triggerall = FVar(20)
triggerall = !NumHelper(6700)
triggerall = winKO
triggerall = alive
trigger1 = !FVar(21)
id = 6700
name = "Finish Hit"
pos =0,0
postype = P1
stateno = 6740
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = (var(55)&2)
triggerall = (var(55)&4)
triggerall = !(var(55)&8)
triggerall = FVar(20)
triggerall = !NumHelper(6700)
triggerall = winKO
triggerall = alive
trigger1 = !FVar(21)
id = 6700
name = "Finish Hit"
pos =0,0
postype = P1
stateno = 6730
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = (var(55)&2)
triggerall = !(var(55)&4)
triggerall = FVar(20)
triggerall = !NumHelper(6700)
triggerall = winKO
triggerall = alive
trigger1 = !FVar(21)
id = 6700
name = "Finish Hit"
pos =0,0
postype = P1
stateno = 6720
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = !(var(55)&2)
triggerall = FVar(20)
triggerall = !NumHelper(6700)
triggerall = winKO
triggerall = alive
trigger1 = !FVar(21)
id = 6700
name = "Finish Hit"
pos =0,0
postype = P1
stateno = 6710
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !(var(55)&1)
triggerall = FVar(20)
triggerall = !NumHelper(6700)
triggerall = winKO
triggerall = alive
trigger1 = !FVar(21)
id = 6700
name = "Finish Hit"
pos =0,0
postype = P1
stateno = 6700
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = (var(55)&2)
triggerall = (var(55)&4)
triggerall = (var(55)&8)
triggerall = (var(55)&16)
triggerall = (var(55)&32)
triggerall = FVar(20)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = Var(39) = 5
trigger1 = !Var(36)
id = 6704
name = "Complete"
pos =0,0
postype = P1
stateno = 6764
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = (var(55)&2)
triggerall = (var(55)&4)
triggerall = (var(55)&8)
triggerall = (var(55)&16)
triggerall = !(var(55)&32)
triggerall = FVar(20)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = Var(39) = 5
trigger1 = !Var(36)
id = 6704
name = "Complete"
pos =0,0
postype = P1
stateno = 6754
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = (var(55)&2)
triggerall = (var(55)&4)
triggerall = (var(55)&8)
triggerall = !(var(55)&16)
triggerall = FVar(20)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = Var(39) = 5
trigger1 = !Var(36)
id = 6704
name = "Complete"
pos =0,0
postype = P1
stateno = 6744
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = (var(55)&2)
triggerall = (var(55)&4)
triggerall = !(var(55)&8)
triggerall = FVar(20)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = Var(39) = 5
trigger1 = !Var(36)
id = 6704
name = "Complete"
pos =0,0
postype = P1
stateno = 6734
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = (var(55)&2)
triggerall = !(var(55)&4)
triggerall = FVar(20)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = Var(39) = 5
trigger1 = !Var(36)
id = 6704
name = "Complete"
pos =0,0
postype = P1
stateno = 6724
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = (var(55)&1)
triggerall = !(var(55)&2)
triggerall = FVar(20)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = Var(39) = 5
trigger1 = !Var(36)
id = 6704
name = "Complete"
pos =0,0
postype = P1
stateno = 6714
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !(var(55)&1)
triggerall = FVar(20)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = Var(39) = 5
trigger1 = !Var(36)
id = 6704
name = "Complete"
pos =0,0
postype = P1
stateno = 6704
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !(var(55)&1)
triggerall = FVar(20)
triggerall = win
triggerall = alive
trigger1 = FVar(22) = 1
id = 6701
name = "Vital"
pos =0,0
postype = P1
stateno = 6701
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !(var(55)&2)
triggerall = FVar(20)
triggerall = win
triggerall = alive
trigger1 = FVar(22) = 1
trigger1 = !FVar(15)
id = 6702
name = "Perfect"
pos =0,0
postype = P1
stateno = 6712
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !(var(55)&2)
triggerall = FVar(20)
triggerall = win
triggerall = alive
trigger1 = FVar(22) = 1
trigger1 = FVar(15)
id = 6703
name = "Max Combo"
pos =0,0
postype = P1
stateno = 6713
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !(var(55)&4)
triggerall = FVar(20)
triggerall = win
triggerall = alive
trigger1 = FVar(22) = 1
trigger1 = !FVar(15)
id = 6703
name = "Max Combo"
pos =0,0
postype = P1
stateno = 6723
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifElse(teamside=1,1,-1)

;----------------------------------------------------------------------------------
; Burn/Shock Sparks
[State -2, Combo]
type = Null;VarSet
triggerall = p2movetype = H
trigger1 = projhittime(80085) = 1
fvar(3) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = p2movetype = H
trigger1 = StateNo = 3300 && NumTarget(3301)
fvar(3) = 2
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = !NumHelper(8300)
trigger1 = FVar(3) = 1
id = 8300
name = "FireEffect_Down"
pos = 0,0
postype = P2
stateno = 8300
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = !NumHelper(8300)
trigger1 = FVar(3) = 2
id = 8300
name = "FireEffect_KnockBack"
pos =0,0
postype = P2
stateno = 8301
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = FVar(3)
fvar(3) = 0
ignorehitpause = 1

;----------------------------------------------------------------------------------
; Counter Hit Effect
[State -3, Blocking5]
type = Helper
triggerall = FVar(32) = 1 || FVar(32) = -2
triggerall = ProjHit = 0
trigger1 = !NumHelper(1005) && !NumHelper(1105) && !NumHelper(2005) && !NumHelper(2105)
trigger2 = NumHelper(1005)
trigger2 = !Helper(1005), MoveHit
trigger3 = NumHelper(1105)
trigger3 = !Helper(1105), MoveHit
trigger4 = NumHelper(2005)
trigger4 = !Helper(2005), MoveHit
trigger5 = NumHelper(2105)
trigger5 = !Helper(2105), MoveHit
ID = 8130
name = "COUNTER HIT EFFECT"
pos = Ceil(enemy,Const(size.ground.front)+FVar(26)),Ceil(Pos Y-enemy,Pos Y+FVar(27))
postype = P2
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
size.xscale = 1
size.yscale = 1

;----------------------------------------------------------------------------------
; Announcer Voice
[State -2, Combo]
type = VarSet
trigger1 = NumEnemy
trigger1 = Enemy,MoveType != H
var(51) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarAdd
trigger1 = (StateNo != [800,899])
trigger1 = MoveHit
trigger2 = ProjHit = 1
var(51) = 1
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = FVar(7)
triggerall = NumEnemy
triggerall = RoundState = 2
triggerall = (Var(51) = 5 && !Var(31)) || (Var(51) = 10 && Var(31))
triggerall = StateNo != 810
triggerall = StateNo != 3100
trigger1 = !NumHelper(6800)&&!Var(35)
trigger2 = !NumHelper(6800)&&Var(35)=1&&!enemynear,NumHelper(6800)
ID = 6800
name = "narration_3"
pos =0,0
postype = P1
stateno = 6802
helpertype = Normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999

[State 180, 1];First Attack
type = VarAdd
trigger1 = FVar(32) = 2 || FVar(32) = -2
var(47) = 5000
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = FVar(7)
triggerall = Var(34) < 400
triggerall = NumEnemy
triggerall = (!NumHelper(6800)&&!Var(35)) || (!NumHelper(6800)&&Var(35)=1&&!enemynear,NumHelper(6800)) || (NumHelper(78))
trigger1 = FVar(32) = 2 || FVar(32) = -2
ID = 6800
name = "narration_2"
pos = 0,300
postype = Left
stateno = 6801
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999

[State -2, Combo]
type = VarSet
trigger1 = FVar(32) = 2 || FVar(32) = -2
trigger2 = MoveType = H && (StateNo != [150,159]) && (StateNo != [700,720])
var(37) = 1
ignorehitpause = 1
persistent = 0

[State 180, 1];Hit bonus
type = VarAdd
triggerall = RoundState = 2
trigger1 = moveguarded
trigger2 = projGuarded = 1
var(47)=ifElse((hitdefattr=SCA,NA,NP,NT),-50,ifElse((hitdefattr=SCA,SA,SP,ST),-30,-20))
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = VarAdd
triggerall = RoundState = 2
triggerall = !Var(21)
triggerall = p2movetype = H
trigger1 = (stateno != [800,899])
trigger1 = movehit
trigger2 = projhit = 1
var(47)=500
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = VarAdd
triggerall = RoundState = 2
triggerall = Var(21)
triggerall = p2movetype = H
trigger1 = (stateno != [800,899])
trigger1 = movehit
trigger2 = projhit = 1
var(47)=ifElse((hitdefattr=SCA,NA,NP,NT),1001,ifElse((hitdefattr=SCA,SA,SP,ST),3001,5001))
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = VarAdd
triggerall = RoundState = 2
triggerall = Var(21)
triggerall = p2movetype = H
trigger1 = movehit
trigger2 = projhit = 1
var(47)=1000
ignorehitpause = 1
persistent = 1

[State -2, Combo];MAX Power Combo Bonus
type = VarSet
trigger1 = P2MoveType = H
trigger1 = Var(33) < Var(51)
var(33) = Var(51)
ignorehitpause = 1
persistent = 1

[State 180, 1];Combo bonus
type = VarAdd
triggerall = RoundState = 2
triggerall = Var(51) >= 2
trigger1 = (stateno != [800,899])
trigger1 = movehit
trigger2 = projhit = 1
var(47) = ifElse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State -2, Combo]
type = VarSet
trigger1 = movehit
trigger2 = projHit = 1
var(50) = ifElse(MoveHit,1,3)
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = MoveGuarded
trigger2 = ProjGuarded = 1
trigger3 = MoveReversed
var(50) = ifElse((MoveGuarded||MoveReversed),2,4)
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = Time = 1
var(50) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = 1
fvar(12) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = movehit
trigger2 = projHit = 1
fvar(12) = ifElse(MoveHit,1,3)
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = moveguarded
trigger2 = projGuarded = 1
trigger3 = MoveReversed
fvar(12) = ifElse((MoveGuarded||MoveReversed),2,4)
ignorehitpause = 1

[State -2, MoveHitReset]
type = MoveHitReset
trigger1 = MoveContact
ignorehitpause = 1

;----------------------------------------------------------------------------------
; Power Increase
[State -2, Power]
type = VarSet
trigger1 = Var(10) = 1
var(40) = 0

[State -2, Power]
type = VarSet
trigger1 = Var(10) = 2
var(40) = 167

[State -2, Power]
type = VarSet
trigger1 = Var(10) = 3
var(40) = -125

[State -2, Power]
type = VarSet
trigger1 = Var(10) = 5
var(40) = -222

[State -2, Power]
type = VarSet
trigger1 = Var(10) = 4 || Var(10) = 6
var(40) = -1000

[State -2, Power2]
type = VarSet
triggerall = RoundState = 2
trigger1 = (100*life/const(data.life))<=100
trigger1 = (100*life/const(data.life))>30
var(41) = 0

[State -2, Power3]
type = VarSet
triggerall = RoundState = 2
trigger1 = (100*life/const(data.life))<=30
trigger1 = (100*life/const(data.life))>15
var(41) = 2

[State -2, Power4]
type = VarSet
triggerall = RoundState = 2
trigger1 = (100*life/const(data.life))<=15
trigger1 = (100*life/const(data.life))>0
var(41) = 4

[State -2, Power]
type = VarSet
triggerall = RoundState = 2
trigger1 = 1
var(42) = GetHitVar(damage)

;----------------------------------------------------------------------------------
; Combo Dampener
[State -2, PowerReset]
type = VarSet
triggerall = Var(10) = 1 || !Var(10)
triggerall = !Var(31)
triggerall = RoundState = 2
trigger1 = power = [0,999]
var(52) = 0

[State -2, PowerReset]
type = VarSet
triggerall = Var(10) != 1 && Var(10) != 0
trigger1 = RoundState = 2
var(52) = 0

[State -2, PowerReset]
type = VarSet
triggerall = Var(10) = 1 || !Var(10)
triggerall = !Var(31)
triggerall = RoundState = 2
trigger1 = power = [1000,1999]
var(52) = 1

[State -2, PowerReset]
type = VarSet
triggerall = Var(10) = 1 || !Var(10)
triggerall = !Var(31)
triggerall = RoundState = 2
trigger1 = power = [2000,2999]
var(52) = 2

[State -2, PowerReset]
type = VarSet
triggerall = Var(10) = 1 || !Var(10)
triggerall = !Var(31)
triggerall = RoundState = 2
trigger1 = power >= 3000
var(52) = 5

[State -2, PowerReset]
type = VarSet
triggerall = RoundState = 2
trigger1 = (100*life/const(data.life))<=100
trigger1 = (100*life/const(data.life))>30
var(53) = 0

[State -2, PowerReset2]
type = VarSet
triggerall = RoundState = 2
trigger1 = (100*life/const(data.life))<=30
trigger1 = (100*life/const(data.life))>15
var(53) = 5

[State -2, PowerReset3]
type = VarSet
triggerall = RoundState = 2
trigger1 = (100*life/const(data.life))<=15
trigger1 = (100*life/const(data.life))>0
var(53) = 10

[State -2, PowerReset4]
type = VarSet
triggerall = RoundState = 2
trigger1 = (100*enemy,life/enemy,const(data.life))<=100
trigger1 = (100*enemy,life/enemy,const(data.life))>30
var(54) = 0

[State -2, PowerReset5]
type = VarSet
triggerall = RoundState = 2
trigger1 = (100*enemy,life/enemy,const(data.life))<=30
trigger1 = (100*enemy,life/enemy,const(data.life))>15
var(54) = -10

[State -2, PowerReset6]
type = VarSet
triggerall = RoundState = 2
trigger1 = (100*enemy,life/enemy,const(data.life))<=15
trigger1 = (100*enemy,life/enemy,const(data.life))>0
var(54) = -25

[State -2, PowerReset]
type = VarSet
triggerall = Var(10) = 6
triggerall = RoundState = 2
trigger1 = Var(19)
var(58) = ifElse((Stateno = [195,999]),35,ifElse((Stateno = [1000,2999]),30,10))

[State -2, PowerReset]
type = VarSet
triggerall = Var(10) = 6
triggerall = RoundState = 2
trigger1 = !Var(19)
var(58) = 0

[State -2, PowerReset]
type = VarSet
triggerall = Var(10) != 6
triggerall = RoundState = 2
trigger1 = 1
var(58) = 0

[State -2, 1]
type = VarSet
trigger1 = P2movetype != H
var(51) = 0

[State -2]
type = VarSet
trigger1 = Var(51) < 10
trigger1 = Var(31)
trigger1 = StateNo = [0, 2999]
fvar(9) = (10-Var(51))*.1*.72
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = Var(51) >= 10
trigger1 = Var(31)
trigger1 = StateNo = [0, 2999]
fvar(9) = .072
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = Var(31)
trigger1 = StateNo = [3000, 3999]
fvar(9) = .8
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = !Var(31)
trigger1 = Var(51) = [6,29]
trigger1 = StateNo = [0, 2999]
fvar(9) = (24-(Var(51)-5))*.0375;.0417
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = !Var(31)
trigger1 = Var(51) > 30
trigger1 = StateNo = [0, 2999]
fvar(9) = .0375;.0417
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = !Var(31)
trigger1 = Var(51) <= 5
trigger2 = StateNo = [3000, 3999]
fvar(9) = 1
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = 1
fvar(10) = (100+Var(52))*.01*(100+Var(53))*.01*(100+Var(54))*.01*(100+Var(58))*.01*(100+((Var(17)>0)*15))*.01*(100+((Var(29)>0)*20))*.01*(10+(Var(21)*2))*.1*FVar(9)
ignorehitpause = 1

;---------------------
; Counter Hit
[State -2, VarSet]
type = VarSet
trigger1 = P2MoveType = A
var(21) = 1

[State -2, VarSet]
type = VarSet
trigger1 = P2MoveType != A
var(21) = 0

;---------------------
; Safe Fall
[State -2, VarSet]
type = VarSet
trigger1 = StateNo = 5000 || StateNo = 5020 || StateNo= 5070 || StateNo= 5080
trigger1 = Time = 1
trigger1 = P2StateNo = [3000,3999]
var(15) = 1

[State -2, VarSet]
type = VarSet
trigger1 = StateNo = 5000 || StateNo = 5020 || StateNo= 5070 || StateNo= 5080
trigger1 = Time = 1
trigger1 = P2StateNo != [3000,3999]
trigger2 = MoveType != H
var(15) = 0

;---------------------
; Cheap KO Anim
[State -2, 3]
type = ChangeState
trigger1 = !Alive
trigger1 = PrevStateNo = 130 || PrevStateNo = 131 || PrevStateNo = [150,153]
trigger1 = Stateno = [5000,5050]
value = 5950

[State -2,KO]
type = VarSet
triggerall = StateNo = [120,159]
trigger1 = StateType = S
ignorehitpause = 1
fvar(1) = 0

[State -2,KO]
type = VarSet
triggerall = StateNo = [120,159]
trigger1 = StateType = C
ignorehitpause = 1
fvar(1) = 1

[State -2,KO]
type = VarSet
triggerall = StateNo = [120,159]
trigger1 = StateType = A
ignorehitpause = 1
fvar(1) = 2

;---------------------
; Sound
[State -3, Bounding Sound]
type = PlaySnd
triggerall = Anim = 5950 && RoundState = 2
triggerall = random%2 = 0
trigger1 = AnimElemTime(1) = 2
value = S5000,2
channel = 0

[State -3, Bounding Sound]; Ground Hit
type = PlaySnd
triggerall = Anim = 5950
trigger1 = AnimElem = 8
value = S5100,0

[State 3010,PlaySnd]
type = PlaySnd
triggerall = AnimElem = 1,=3
trigger1 = stateno = 950 && movetype != H
trigger2 = stateno = 955 && movetype != H
value = S5000,3
channel = 0

;----------------Parry-------------------------------------------------------
; Thanks, Phantom.of.the.Server!
[State -2, Parry]
type = Helper
triggerall = (var(5)&8)>0
triggerall = RoundState = 2 && !NumHelper(725) && !Var(31)
triggerall = (MoveType=I && Ctrl) || (StateNo=[760,762]) || StateNo=5120
triggerall = (command != "release_up" && command != "release_down" && command != "release_back" && command != "release_fwd")
trigger1 = (StateType = S || StateType = C || StateNo=5120) && (command="parry" || command="parry2")
trigger2 = StateType = A && command="parry" && Var(6) < 2
helpertype = Normal
stateno = 725
ID = 725
name = "Parry Detection"
postype = p1
pausemovetime = 65535
supermovetime = 65535

[State -2, Attack]
type = ChangeState
trigger1 = (StateNo != [700,720]) && NumHelper(725)
trigger1 = Helper(725), StateNo = 726
value = ifElse((Helper(725), Anim=727), 720, ifElse((Helper(725), Anim=726), 710, 700))
ignorehitpause = 1

[State -2, Proj-S]
type = HitOverRide
trigger1 = (StateNo!=[700,720]) && NumHelper(725)
trigger1 = !(Helper(725),Var(0)) && (Helper(725),Anim=725)
attr = SA,AP
stateno = 700
slot=0
time=1
ignorehitpause = 1
[State -2, Proj-C]
type = HitOverRide
trigger1 = (StateNo!=[700,721]) && NumHelper(725)
trigger1 = !(Helper(725),Var(0)) && (Helper(725),Anim=726)
attr = C,AP
stateno = 710
slot=0
time=1
ignorehitpause = 1
[State -2, Proj-A]
type = HitOverRide
trigger1 = (StateNo!=[700,721]) && NumHelper(725)
trigger1 = !(Helper(725),Var(0)) && (Helper(725),Anim=727)
attr = SCA,AP
stateno = 720
slot=0
time=1
ignorehitpause = 1

[State -2, AssertSpecial]
type = AssertSpecial
trigger1 = Var(1) > 0
trigger1 = Var(1) := (Var(1)-1)
flag=NoWalk

;------------Just Defense----------------------------------------------------
;----------------------------------------------------------------------------
; Again, thank you Warusaki.

;Just Defense Input
[State -2, VarSet]
type = VarSet
trigger1 = RoundState = 0
var(0) = -1

[State -2, VarAdd]
type = VarAdd
trigger1 = Var(0) >= 0
var(0) = 1
ignorehitpause = 1

[State -2, 46]
type = VarSet
triggerall = Var(0) > 12
trigger1 = Command != "holdback"
var(0) = -1

[State -2, 46]
type = VarSet
triggerall = Var(0) = -1
triggerall = StateNo != [140,149]
trigger1 = Command = "back"
trigger2 = Command = "downback"
var(0) = 0

[State -2, 46]
type = VarSet
triggerall = Var(0) = [0,6]
trigger1 = Command != "holdback"
var(0) = 7

[State -2, 46]
type = VarSet
trigger1 = StateNo != [120,155]
var(14) = 0
ignorehitpause = 1

;----------------------------------------------------------------------------------
; Decrease shakeTime and hitTime for Just Defense
[State -2, WTF]
type = VarAdd
trigger1 = Var(2) > 0
var(2) = -1
ignorehitpause = 1

[State -2, WTF]
type = VarAdd
trigger1 = !Var(2)
trigger1 = Var(13) > 0
var(13) = -1
ignorehitpause = 1

;Standing Just Defense
[State -2, 3]
type = VarSet
triggerall = (var(5)&4)>0
triggerall = Var(14) != -1
triggerall = StateNo = 150 && !Time
trigger1 = Var(0) = [0,6]
var(14) = 1

;Crouching Just Defense
[State -2, 3]
type = VarSet
triggerall = (var(5)&4)>0
triggerall = Var(14) != -1
triggerall = StateNo = 152 && !Time
trigger1 = Var(0) = [0,6]
var(14) = 1

;Aerial Just Defense
[State -2, new]
type = HitOverride
triggerall = (var(5)&4)>0
triggerall = Var(14) != -1
triggerall = StateType = A && Ctrl && (-Pos Y >= Vel Y)
triggerall = Var(6) != 2
trigger1 = Var(0) = [0,6]
slot = 0
stateno = 154
attr = SCA, AA, AP
time = 1

[State -2, 46]
type = VarSet
triggerall = StateNo = 154
triggerall = Time = 0
trigger1 = PrevStateNo = 5020
var(14) = 1
ignorehitpause = 1

;----------------------------------------------------------------------------------
; KO Voice
[State -2,AI]
type = VarSet
trigger1 = 1
ignorehitpause = 1
fvar(2) = 0

[State -2,AI]
type = VarSet
trigger1 = Anim = 5950 || StateNo = 5950
ignorehitpause = 1
fvar(2) = 1

[State -2,AI]
type = VarSet
trigger1 = movetype != H
trigger1 = RoundState = 2
ignorehitpause = 1
fvar(35) = 0

[State -2,AI]
type = VarSet
trigger1 = StateNo = 5000 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080
trigger1 = RoundState = 2
trigger1 = Time = 0
ignorehitpause = 1
fvar(35) = GetHitVar(hitshaketime)

[State -2, KO]
type = PlaySnd
triggerall = RoundState = 3
trigger1 = !FVar(2) && !FVar(0)
trigger1 = FVar(36) = ifElse(!FVar(35),1,ifElse(FVar(35)>20,20,FVar(35)))
trigger2 = !FVar(19) && FVar(0)
trigger2 = FVar(36) = 12
ignorehitpause = 1
value = S111,0

[State -2, KO]
type = PlaySnd
triggerall = RoundState = 3
triggerall = FVar(2)
trigger1 = Anim = 5950 && AnimElemTime(2) = 1
ignorehitpause = 1
value = S5950,0

[State -2, KO]
type = PlaySnd
triggerall = NumEnemy
trigger1 = (Enemy, Name = "cvsgouki_ex" || Enemy, Name = "cvsgouki" && Enemy, Var(12))
trigger1 = StateNo = 3305 && MoveType = H
trigger1 = Time = 35
ignorehitpause = 1
value = S5950,0

[State -2,KO]
type = Varadd
trigger1 = !Alive
ignorehitpause = 1
fvar(36) = 1

[State -2,KO]
type = VarSet
trigger1 = Alive
ignorehitpause = 1
fvar(36) = 0

;----------------------------------------------------------------------------------
; Do this crap when KO'd
[State -2, HyperComboFinish]
type = Helper
triggerall = WinKo && !FVar(21)
trigger1 = StateNo = [3000, 3999]
trigger2 = Var(31)
trigger3 = FVar(33) = 12
;trigger4 = projhittime(3005) = 1 || projhittime(3405) = 1
ID = 9000
stateno = ifElse(FVar(33) = 12,9002,ifElse((Var(10)=[4,6]),9010,9000))
postype = left
pos = -50,0
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
persistent = 0

[State -2, HyperComboFinish]
type = Pause
trigger1 = WinKo && !FVar(21)
time = 10
ignorehitpause = 1

[State -2, HyperComboFinish]
type = PlaySnd
trigger1 = WinKo && !FVar(21)
value = S9000,0
ignorehitpause = 1

[State -2,KO]
type = VarAdd
trigger1 = RoundState = 3
ignorehitpause = 1
fvar(21) = 1

[State -2,KO]
type = VarSet
trigger1 = RoundState = 0
ignorehitpause = 1
fvar(21) = 0

[State -2,KO]
type = VarAdd
trigger1 = RoundState = 4
ignorehitpause = 1
fvar(22) = 1

[State -2,KO]
type = VarSet
trigger1 = RoundState = 0
ignorehitpause = 1
fvar(22) = 0

[State -2,VarSet]
type = VarSet
trigger1 = Var(12)
var(12) = 0

;-------
; AfterImage Remover
[State -2, AfterImageTime]
type = AfterImageTime
triggerall = !Var(30)
trigger1 = MoveType = H
trigger2 = StateNo = [0,49]
trigger3 = StateNo = [52,199]
trigger4 = StateNo = [200,299]
trigger5 = StateNo = [400,499]
trigger6 = StateNo = [600,699]
trigger7 = StateNo = [800,1599]
time = 0

[State -2, VarSet]
type = VarSet
trigger1 = MoveType = H
trigger2 = StateNo != [40,50]
var(4) = 0

;===============================================================================
; ------- NotHitBy fix by Caddie --------
;===============================================================================
[State -2, hitby]
type = hitby
trigger1 = life > 0
trigger1 = stateno = 5100 || stateno = 5110 || stateno = 5120
trigger1 = anim != 5120
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
time = 1

;----------------------------------------------------------------------------------
; Reset Power & MAX
[State -2, 1]
type = PowerSet
triggerall = RoundState = 0
trigger1 = FVar(14)
trigger2 = Var(10) = 4
value = 0

[State -2, 1]
type = PowerSet
triggerall = RoundState = 0
triggerall = Var(10) = 6
trigger1 = Var(27) = 2
value = 0

[State -2, Reset]
type = Null
triggerall = RoundState = 0
trigger1 = e|| (var(5)  := var(5)&1073741823)
trigger1 = e|| (var(17) := 0)
trigger1 = e|| (var(29) := 0)
trigger1 = e|| (var(30) := 0)
trigger1 = e|| (var(31) := 0)
trigger1 = e|| (var(33) := 0)
trigger1 = e|| (var(34) := 0)
trigger1 = e|| (var(35) := 0)
trigger1 = e|| (var(37) := 0)
trigger1 = e|| (var(55) := 0)
trigger1 = e||(fvar(15) := 0)
trigger1 = e||(fvar(16) := 0)

[State -2, Reset]
type = Null
triggerall = RoundState = 0 && RoundNo = 1
trigger1 = e|| (var(19) := 0)
trigger1 = e|| (var(36) := 0)

[State -2, 1]
type = VarSet
trigger1 = RoundState = 0 && (Var(19) || Var(27) = 2) && RoundNo != 1
trigger2 = RoundState = 0 && roundno = 1
fvar(14) = 0

[State -2, 1]
type = PalFX
trigger1 = RoundState = 0
trigger2 = RoundState = 3
time = 1
add  = 0,0,0
ignorehitpause = 1
[State -2, 1]
type = AfterImageTime
trigger1 = RoundState = 3
time = 0

;CvS2 Character
[State -2, 1]
type = VarSet
trigger1 = 1
fvar(17) = 1;CAPCOM VS SNK 2

;----------------------------------------------------------------------------------
; Descale Groove Bar
[State -2, 1]
type = VarSet
triggerall = numenemy
triggerall = RoundState = 2
trigger1 = enemy,authorname = "warusaki3" && enemy,fvar(39) = 1
trigger2 = enemy,authorname = "mouser" && (P2Name = "Hibiki Takane" || P4Name = "Hibiki Takane")
trigger3 = enemy,authorname = "Jesuszilla" && enemy,fvar(17) = 1
trigger4 = enemy,authorname = "N64Mario" && enemy, Name = "Zero" && enemy,fvar(17) = 1
trigger5 = enemy,authorname = ".\/." && enemy,fvar(17) = 1
trigger6 = enemy,authorname = "Hh" && enemy,fvar(39) = 1
var(35) = 1

[State -2, 1]
type = VarSet
trigger1 = fvar(0)
fvar(0) = 0

[State -2, 1]
type = VarSet
triggerall = !fvar(0)
triggerall = numenemy
trigger1 = (enemynear,authorname="warusaki3"&&enemynear,fvar(39)=1&&enemynear,var(13))
trigger2 = (enemynear,authorname="SUMI"&&enemynear,name="Destrudo Ryu"&&enemynear,var(16)=1)
fvar(0) = 1

[Statedef 69]
[State -2, 69]
type = ChangeState
trigger1 = 1
value = 69;@#

[State -2, OH SHI-]
type = ChangeState
triggerall = numenemy
trigger1 = enemy, AuthorName = "RyouWin"
trigger2 = enemy, AuthorName = "Ex-Inferis"
trigger3 = enemy, AuthorName = "Tetchi"
trigger4 = enemy, AuthorName = "bomb"
trigger5 = enemy, AuthorName = "beppu"
trigger6 = enemy, AuthorName = "Overmind"
trigger7 = enemy, AuthorName = "@ndroide"
trigger8 = enemy, AuthorName = "Moldredd"
trigger9 = enemy, AuthorName = "Smoke"
trigger10 = enemy, Name = "Lord Roger"

value = 69;@#

[State -2, OH SHI-]
type = ChangeState
triggerall = numpartner
trigger1 = Partner, AuthorName = "RyouWin"
trigger2 = Partner, AuthorName = "Ex-Inferis"
trigger3 = Partner, AuthorName = "Tetchi"
trigger4 = Partner, AuthorName = "bomb"
trigger5 = Partner, AuthorName = "beppu"
trigger6 = Partner, AuthorName = "Overmind"
trigger7 = Partner, AuthorName = "@ndroide"
trigger8 = Partner, AuthorName = "Moldredd"
trigger9 = Partner, AuthorName = "Smoke"
trigger10 = Partner, Name = "Lord Roger"

value = 69;@#


;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
