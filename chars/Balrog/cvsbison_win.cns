;==================================================================;
;                      CNS File for Mike Bison                     ;
;                                by                                ;
;                            Jesuszilla                            ;
;==================================================================;

;--------------------- Variable List ----------------------

;  Var(0) - Used in Just Defend
;  Var(1) - Parry
;  Var(2) - Returns ShakeTime for Just Defense
;  Var(3) - Finest KO, WaruFVar(15)
;  Var(4) - Used in the Long Jump
;  Var(5) - 2: Run/Dash
;           4: Just Defend
;           8: Parry
;          16: Super Combo Cancel
;          32: Counter Attack
;          64: Counter Movement
;         128: Safe Fall
;         256: Air Guard
;  Var(6) - Indicates whether or not Small Jump is activated
;  Var(7) -
;  Var(8) -
;  Var(9) - Roll/Dodge
; Var(10) - Gauge Selection
; Var(11) -
; Var(12) - Crazy Buffalo Anim
; Var(13) -
; Var(14) - Just Defend
; Var(15) - Safe Fall Detection
; Var(16) -
; Var(17) - S-Groove MAX Power
; Var(18) - N-Groove MAX Power
; Var(19) - K-Groove Rage
; Var(20) - Groove Select
;           0 =  None
;           1 =  C-Groove
;           2 =  A-Groove
;           3 =  P-Groove
;           4 =  S-Groove
;           5 =  N-Groove
;           6 =  K-Groove
;           7 = EX-Groove
; Var(21) - Detects the enemy's MoveType. WaruVar(41)
; Var(22) - Differentiation of commands.
; Var(23) -
; Var(24) - Mode Change
; Var(25) -
; Var(26) - Used in Parry
; Var(27) - Set upon victory/loss.
; Var(28) - WTF, WaruVar(48)
; Var(29) - Power Reset
; Var(30) - Custom Combo
; Var(31) - x2
; Var(32) -
; Var(33) - Hit Counter, Waruvar(47)
; Var(34) - Announcer Time Counter
; Var(35) - Descale Groove Bar, WaruVar(52)
; Var(36) - x5, WaruVar(54)
; Var(37) - x6, WaruVar(58)
; Var(38) - Set upon victory/loss, WaruVar(55)
; Var(39) - x2, WaruVar(56)
; Var(40) - Power Increase
; Var(41) - x2
; Var(42) - Returns Damage
; Var(43) - WTF
; Var(44) - Power
; Var(45) - Returns Life/WaruVar(53)
; Var(46) - Arrow
; Var(47) - Groove Point/WaruVar(50)
; Var(48) - Superpause unguardable time
; Var(49) -
; Var(50) - Combo
; Var(51) - WaruVar(17)
; Var(52) - Used in the combo dampener, WaruVar(7)
; Var(53) - x2, WaruVar(8)
; Var(54) - x3, WaruVar(9)
; Var(55) -
; Var(56) - Cornerpush
; Var(57) - PalFX Add, Combo dampener
; Var(58) - Used in the combo dampener, WaruVar(21)
; Var(59) - State Decision, WaruVar(49)

;--------------------- Float Variable List ----------------------

;  FVar(0) - Descale Groove Bar, WaruFVar(20)
;  FVar(1) - Cheap K.O. Anim; Scaling in Super Effect.
;  FVar(2) - KO Voice; Scaling in the Super Effect.
;  FVar(3) - Fire/Shock Spark, WaruFVar(25)
;  FVar(4) - Power Reset, WaruFVar(5)
;  FVar(5) - Power Reset, WaruFVar(6)
;  FVar(6) - Returns Power, WaruFVar(7)
;  FVar(7) - Announcer Voice
;  FVar(8) - WaruVar(12), Returns Life
;  FVar(9) - Used in the combo dampener.
; FVar(10) - Combo dampener.
; FVar(11) - Throw
; FVar(12) - WaruFVar(24)
; FVar(13) - WaruFVar(4)
; FVar(14) - Throw
; FVar(15) - Power Reset, WaruFVar(14)
; FVar(16) - Juggle System, WaruFVar(27)
; FVar(17) - CvS2 Character
; FVar(18) - Juggle System, WaruFVar(26)
; FVar(19) - x2, WaruFVar(28)
; FVar(20) - GROOVE POINT ON/OFF
; FVar(21) - KSSSSSSSSSHHHHHHHHHH, WaruVar(32)
; FVar(22) - KSSSSSSSSSHHHHHHHHHH, WaruFVar(11)
; FVar(23) -
; FVar(24) - Win Message Axis, WaruFVar(37)
; FVar(25) - Throw
; FVar(26) - x2, WaruVar(38)
; FVar(27) - x3, WaruVar(39)
; FVar(28) - x4, WaruVar(44)
; FVar(29) - x5, WaruVar(45)
; FVar(30) - Reversal Message, WaruFVar(22)
; FVar(31) - x2, WaruFVar(23)
; FVar(32) - Parry Message, WaruFVar(8)
; FVar(33) - Finish Message, WaruFVar(9)
; FVar(34) -
; FVar(35) - KO Voice, WaruVar(37)
; FVar(36) - KO Voice, WaruVar(27)
; FVar(37) - Power Up! Sound, WaruFVar(21)
; FVar(38) -
; FVar(39) - Cornerpush


[Data]
life = 1028
attack = 100
defence = 100
fall.defence_up = 50
liedown.time = 15
airjuggle = 15
sparkno = 2
guard.sparkno = 40
KO.echo = 0
volume = 150
IntPersistIndex = 0
FloatPersistIndex = 0

[Size]
xscale = 1                              	;Horizontal scaling factor.
yscale = 1                                  	;Vertical scaling factor.
ground.back = 20	                 	;Player width (back, ground)
ground.front = 20                       	;Player width (front, ground)
air.back = 20	                	        ;Player width (back, air)
air.front = 20	                	        ;Player width (front, air)
height = 60		                	;Height of player (for opponent to jump over)
attack.dist = 160	                	;Default attack distance
proj.attack.dist = 90                   	;Default attack distance for projectiles
proj.doscale = 0                     		;Set to 1 to scale projectiles too
head.pos = 10, -90                   	        ;Approximate position of head
mid.pos = -4, -63                       	;Approximate position of midsection
shadowoffset = 0                     		;Number of pixels to vertically offset the shadow
draw.offset = 0,0                     		;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd  = 3.5                     		;Walk forward
walk.back = -3                     		;Walk backward
run.fwd  = 5.5, 0                     		;Run forward (x, y)
run.back = -6.5,-4.5                     	;Hop backward (x, y)
jump.neu = 0,-9.125;-7.125                     	;Neutral jumping velocity (x, y)
jump.back = -3.5                     		;Jump back Speed (x, y)
jump.fwd = 3                     		;Jump forward Speed (x, y)
runjump.back = -5.25,-9.4                     	;Running jump speeds (opt)
runjump.fwd = 4.5,-9.4

[Movement]
yaccel = .47
stand.friction = .828125           ;Friction coefficient when standing
crouch.friction = .828125          ;Friction coefficient when crouching

[Quotes]
victory0 = "I ain't got no moneys, I ain't got no toofies, and I sure as hell ain't got no driver's license!"
victory1 = "I'm da best! I'm the greatest there ever was!"
victory2 = "I'LL RIP YOUR HEART OUT AND EAT YOUR CHILDREN!!!"
victory3 = "I GOT BAID!"
victory4 = "My fists still have your blood on them! Bwahahaha!"
victory5 = "Get your ass up! I'm not through with you, yet!"
victory6 = "Damn! That's like the... um... 12, 23, 3164... no wait, that's my PIN number..  uh, yeah, 5th punching bag I've busted this week!"

;---------------------------------------------------------------------------
; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0
velset = 0,0 ;Stop moving PERIOD

[State 0, CtrlSet]
type = CtrlSet
trigger1 = Time = 1 && PrevStateNo = 855
value = 1

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0

[State 0, 4] ;Wipe yo'self off... YOU DEAD!
type = ChangeState
trigger1 = !alive
value = 5050

;---------------------------------------------------------------------------
; Stand to Crouch
[Statedef 10]
type    = C
physics = C
velset = 0,0

[State 10, 0]
type = AssertSpecial
trigger1 = Time = 0
flag = NoAutoTurn

[State 10, 3]
type = ChangeState
trigger1 = Time = 0
value = 11

;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type    = C
physics = C
sprpriority = 0
velset = 0,0

[State 0, BlockEnd?]
type = ChangeState
trigger1 = PrevStateNo = [140,141]
trigger1 = command != "holddown"
trigger1 = Time = 0
value = 0

[State 12, 1]
type = ChangeAnim
trigger1 = Anim = 12
value = 12
elem = 2 - AnimElemNo(0)

[State 10, 0]
type = ChangeAnim
trigger1 = PrevStateNo = 10
trigger1 = Time = 0
value = 10

[State 10, 0]
type = AssertSpecial
trigger1 = Time = 0
flag = NoAutoTurn

[State 10, 0]
type = AssertSpecial
trigger1 = Time = 0
flag = NoWalk

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 6 && AnimTime = 0
trigger2 = Anim != 6 && Anim != 10 && Anim != 11
trigger3 = Anim = 10 && AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouch to Stand
[Statedef 12]
type    = S
physics = S
velset = 0,0

[State 12, 0]
type = AssertSpecial
trigger1 = Time = 0
flag = NoWalk

[State 12, 1]
type = ChangeAnim
trigger1 = Anim = 10
value = 10
elem = 2 - AnimElemNo(0)

[State 12, 1]
type = ChangeAnim
trigger1 = Anim !=12
value = 12

[State 12, 1]
type = ChangeState
trigger1 = Anim = 12
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type    = S
physics = S
sprpriority = 0

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)*1.0625

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)*1.0625

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
anim = ifElse(Var(6)>0,50,40)
ctrl = 0
sprpriority = 1
facep2 = 1
velset = 0,0

[State 40, Helper]
type = Helper
trigger1 = AnimTime = 0
id = 8020
name = "Jump Effect"
pos =0,0
postype = p1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = command = "holdfwd"-command = "holdback"

[State 40, 4]
type = VarSet
trigger1 = Time = 0
var(4) = 0

[State 40, 4]
type = VarSet
triggerall = Time = 0
trigger1 = (PrevStateNo = 100 || PrevStateNo = 101) && sysvar(1) != -1
trigger2 = Command = "longjump"
trigger3 = Command = "longjump" && Command = "holdfwd"
trigger4 = Command = "longjump" && Command = "holdback"
var(4) = 1

[State 40, 5]
type = VarSet
triggerall = Var(6) = 1
trigger1 = command != "holdup"
var(6) = 2

[State 40, 6]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = !Var(4)
x = ifElse(!sysvar(1), 0, ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
[State 40, 7]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(4)
x = ifElse(!sysvar(1), 0, ifelse(sysvar(1)=1, const(velocity.runjump.fwd.x), const(velocity.runjump.back.x)))

[State 40, 9]
type = VelSet
trigger1 = AnimTime = 0
y = ifElse(Var(4) && !SysVar(1), const(velocity.jump.y)*1.15, const(velocity.jump.y))*ifElse(Var(6)=2,.75,1)

[State 40, Jump Sound]
type = PlaySnd
trigger1 = Time = 0
value = S40,Var(4)
channel = 13

[State 40, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Up
[Statedef 50]
type    = A
physics = N
movetype = I

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 41

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State 50, AfterImage]
type = AfterImage
triggerall = !Var(30)
trigger1 = Time = 0
trigger1 = Var(4)
time = -1
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
length = 9
trans = add1
TimeGap  = 1
FrameGap = 4

[State 920, 0]
type = Gravity
trigger1 = 1

[State 50, ChangeState]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0

[State 52, Explod]
type = Explod
trigger1 = Time = 0
anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
scale = .5,.5

[State 52, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

;[State 52, 3]
;type = CtrlSet
;trigger1 = Time = 1
;value = 1

[State 52, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S40,2
channel = 13

[State 52, AfterImageTime]
type = AfterImageTime
triggerall = !Var(30)
trigger1 = Time = 0
time = 0

[State 52, Turn]
type = ChangeState;Turn
trigger1 = Time = 0
trigger1 = P2Dist X < 0
value = 0 + 11*(command = "holddown")
ctrl = 1

[State 52, X]
type = ChangeAnim
trigger1 = Time = 0
value = 47

[State 52, 6]
type = AssertSpecial
trigger1 = Time < 3
flag = NoWalk

[State 52, 3]
type = CtrlSet
trigger1 = !Time && PrevStateNo < 110
value = 1

[State 52, 4]
type = ChangeState
;trigger1 = AnimTime = 0
trigger1 = Time > 2
value = 0 + 11*(command = "holddown")
ctrl = 1

;[State 52, Turn]
;type = Turn
;trigger1 = Time = 0
;trigger1 = P2Dist X < 0

;[State 52, 4]
;type = ChangeState
;trigger1 = AnimTime = 0
;value = 0
;ctrl = 1

;---------------------------------------------------------------------------
; RUN_FWD
[Statedef 100]
type    = S
physics = S
anim = 100
sprpriority = 1
ctrl = 0
velset = 0,0

[State 100, Explod]
type = Explod
trigger1 = Time = 1
anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 3
scale = .5,.5

[State 100, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S40,3
channel = 13

[State 100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S100,1
channel = 13

[State 100, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = S100,2
persistent = 1
channel = 13

[State 100, 1]
type = VelSet
trigger1 = AnimElemTime(2) >= 0
x = const(velocity.run.fwd.x)*1.0625

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
trigger1 = command = "holdup"
value = 40

[State 100, 4]
type = ChangeState
triggerall = AnimElemTime(2) >= 1
trigger1 = command != "holdfwd"
value = 101

;---------------------------------------------------------------------------
; RUN_END
[Statedef 101]
type = S
physics = N
ctrl = 0
anim = 101

[State 101, 4]
type = ChangeState
trigger1 = command = "holdup"
value = 40

[State 101, 1]
type = VelMul
trigger1 = 1
x = .9

[State 101, 1]
type = VelSet
trigger1 = AnimTime = 0
x = 0

[State 101, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S100,0
channel = 13

[State 101, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Dash Forward
[Statedef 102]
type    = A
physics = N
ctrl = 0
anim = 102

[State 102, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S40,3
channel = 13

[State 102, Explod]
type = Explod
trigger1 = Time = 0
anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 3
scale = .5,.5

[State 102, 1]
type = VelSet
trigger1 = AnimElem = 3
x = 6.5
y = -4.5

[State 102, 1]
type = VelMul
trigger1 = AnimElemTime(3) > 0
x = .98

[State 102, 1]
type = VelAdd
trigger1 = AnimElemTime(3) > 0
y = .65

[State 102, 3]
type = ChangeState
triggerall = AnimElemTime(3) > 0
trigger1 = Pos Y + Vel Y >= 0
value = 103

;---------------------------------------------------------------------------
; Dash Forward Land
[Statedef 103]
type    = S
physics = N
ctrl = 1
anim = 103

[State 103, Spark]
type = Explod
trigger1 = Time = 0
anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
scale = .5,.5

[State 103, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S100,1
channel = 13

[State 103, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 103, 1]
type = VelMul
trigger1 = AnimElemTime(2) < 0
x = .92

[State 103, 1]
type = VelSet
trigger1 = AnimElem = 2
x = 0

[State 103, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 103, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Dash Back
[Statedef 105]
type = A
physics = N
ctrl = 0
anim = 105

[State 105, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S105,0
channel = 13

[State 105, Explod]
type = Explod
trigger1 = Time = 0
anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 3
scale = .5,.5

[State 105, 1]
type = VelSet
trigger1 = AnimElem = 2
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 105, 1]
type = VelMul
trigger1 = AnimElemTime(2) > 0
x = .98

[State 105, 1]
type = VelAdd
trigger1 = AnimElemTime(2) > 0
y = .65

;[State 105, 2]
;type = VelAdd
;trigger1 = Time >= 4
;x = .25
;y = .5

[State 105, 3]
type = ChangeState
triggerall = AnimElemTime(2) > 0
trigger1 = Pos Y + Vel Y >= 0
value = 106

;---------------------------------------------------------------------------
; Dash Back Land
[Statedef 106]
type = S
physics = S
ctrl = 0
anim = 106
velset = 0,0

[State 106, Explod]
type = Explod
trigger1 = Time = 1
anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
scale = .5,.5

[State 106, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S40,2
channel = 13

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 106, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 5071]
type    = A
movetype= H
physics = N

[State 5071, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5071, 3] ;Hit ground
trigger1 = Vel Y + Pos Y >= 0
type = ChangeState
value = 5100

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 52, Explod]
type = Explod
trigger1 = Time = 0
anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
scale = 1,1;.8,.8;5

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 5101]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = Null;PosSet
trigger1 = Time = 0
y = 20

[State 5101, 4]
type = VelSet
triggerall = !getHitVar(Xvel)
trigger1 = Time = 0
x = -ifElse(GetHitVar(groundType)=3,1,2.5)
y = -ifElse(GetHitVar(groundType)=3,2.3333,4.5)
[State 5101, 4]
type = VelSet
triggerall = getHitVar(Xvel)
trigger1 = Time = 0
x = facing*ifElse(GetHitVar(groundType)=3,1,2.5)*(getHitVar(Xvel)/abs(getHitVar(Xvel)))
y = -ifElse(GetHitVar(groundType)=3,2.3333,4.5)
[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = ifElse(GetHitVar(groundType)=3,.5625,.5)

[State 5101, 6] ;Hit ground
;trigger1 = Vel Y > 0
;trigger1 = Pos Y >= 12
trigger1 = Pos Y + Vel Y >= 0
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 5110]
type    = L
movetype= H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = null;PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 52, Explod]
type = NULL;Explod
trigger1 = Time = 0
anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
scale = 1,1;.8,.8;5

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
trigger1 = Time = 0
trigger1 = MatchOver = 1
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
trigger1 = PrevStateNo != 5950
trigger1 = Time = 0
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;----------------------------------------------------------------------------------
; Cheap KO
[Statedef 5950]
physics = S
movetype = H
ctrl = 0
velset = 0,0

[State 5950, 1]
type = HitVelSet
trigger1 = Time = 0
x = 2

[State 5950, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5950, 4]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5950, 4]
type = ChangeAnim
trigger1 = !HitOver
value = ifElse(FVar(1)=0,5010,5020)

[State 190, 4]
type = ChangeAnim
trigger1 = HitOver
value = 5950
persistent = 0

[State 1100, ChangeState]
type = ChangeState
trigger1 = AnimElem = 8
value = 5150

;---------------------------------------------------------------------------
; Win state decider
[Statedef 180]
type = S

[State 180, 2]
type = ChangeState
triggerall = FVar(33) < 5
trigger1 = Time = 0
value = 181

[State 180, 3]
type = ChangeState
triggerall = FVar(33) >= 5
trigger1 = Time = 0
value = 182

;---------------------------------------------------------------------------
; I GOT BAID
[Statedef 181]
type = S
ctrl = 0
anim = 180
velset = 0,0

[State 181, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S8+Var(24),17
channel = 0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; I AM CHOOOWWW(MP) (Special/Super KO)
[Statedef 182]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 182, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(1) = 1
value = S8+Var(24),16
channel = 0

[State 182, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(3) = 1
value = S200,1
channel = 13

[State 182, Explod]
type = Helper
triggerall = !NumHelper(185)
trigger1 = AnimElemTime(5) = 1
ID = 185
stateno = 185
name = "R_cloth"
postype = P1
pos = (Ceil(55*(Const(size.xscale)))),-87
size.xscale = (Const(size.xscale))
size.yscale = (Const(size.yscale))
shadow = -1
bindtime = 1
persistent = 0

[State 182, Explod]
type = Helper
triggerall = !NumHelper(186)
trigger1 = AnimElemTime(5) = 1
ID = 186
stateno = 186
name = "L_cloth"
postype = P1
pos = (Ceil(-58*(Const(size.xscale)))),-87
size.xscale = (Const(size.xscale))
size.yscale = (Const(size.yscale))
shadow = -1
bindtime = 1
persistent = 0

[State 182, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Right Cloth
[Statedef 185]
type = S
ctrl = 0
anim = 185
velset = 0,0
sprpriority = 1

[State 186, VelSet]
type = VelSet
trigger1 = Parent, AnimElemTime(5) = 2
x = .5
y = -1

[State 186, VelMul]
type = VelMul
trigger1 = Parent, AnimElemTime(5) > 2
x = .92

[State 186, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(3) < 13
y = .2

[State 186, VelSet]
type = VelSet
trigger1 = AnimElemTime(3) > 13
x = 0
y = 0

[State 186, PosSet]
type = PosSet
trigger1 = AnimElemTime(3) > 13
y = 0

[State 186, DestroySelf]
type = DestroySelf
trigger1 = Parent, StateNo != 182

;---------------------------------------------------------------------------
; Left Cloth
[Statedef 186]
type = S
ctrl = 0
anim = 186
velset = 0,0
sprpriority = 1

[State 186, VelSet]
type = VelSet
trigger1 = Parent, AnimElemTime(5) = 2
x = -.5
y = -1

[State 186, VelMul]
type = VelMul
trigger1 = Parent, AnimElemTime(5) > 2
x = .92

[State 186, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(3) < 13
y = .2

[State 186, VelSet]
type = VelSet
trigger1 = AnimElemTime(3) > 13
x = 0
y = 0

[State 186, PosSet]
type = PosSet
trigger1 = AnimElemTime(3) > 13
y = 0

[State 186, DestroySelf]
type = DestroySelf
trigger1 = Parent, StateNo != 182

;---------------------------------------------------------------------------
; Introduction
[Statedef 190]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 190, ChangeAnim]
type = ChangeAnim
trigger1 = RoundState = 0
value = Anim

[State 200, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(1) = 2
trigger2 = AnimElemTime(13) = 1
trigger3 = AnimElemTime(15) = 1
trigger4 = AnimElemTime(18) = 1
trigger5 = AnimElemTime(23) = 1
value = S0,2
channel = 1

[State 195, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 10
value = S200,0
channel = 1

[State 190, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = S8+Var(24),ifElse(Var(24) && Random < 500,19,13)
channel = 0

[State 190, 1] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Taunt
[Statedef 195]
type = S
ctrl = 0
anim = 195+ifElse(Var(24) && command != "holddown",(random%2),0)
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 195, PlaySnd]
type = PlaySnd
triggerall = Anim = 195
trigger1 = Time = 1
value = S8+Var(24),ifElse(Var(24) && command = "holddown",19,18+(random%2))
channel = 0

[State 195, PlaySnd]
type = PlaySnd
triggerall = Anim = 196
trigger1 = Time = 1
value = S8+Var(24),7
channel = 0

[State 195, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
trigger3 = AnimElem = 9
trigger4 = AnimElem = 12
trigger5 = AnimElem = 15
trigger6 = AnimElem = 18
trigger7 = AnimElem = 21
value = S200,0
channel = 1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Light Punch
[Statedef 200]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 200
poweradd = 0
sprpriority = 2
facep2 = 1

[State 200, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S8+Var(24),0
channel = 0

[State 200, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S0,0
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 200, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = AnimElem = 2
attr = S, NA
damage = ceil(ifElse((21*FVar(10))<7,7,(21*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = ceil(10*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-77)
hitsound = S3,0
guardsound = S5,0
ground.type = High
ground.slidetime = 10+(Var(21)*2)
ground.hittime  = 10+(Var(21)*2)
ground.velocity = -5.77*(2-(Var(30)>0))/2;-6*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2;-5*(2-(Var(30)>0))/2
guard.ctrltime = 11
air.type = High
air.velocity = -6,-5.015625
airguard.velocity = -5.33,-1
air.hittime = 10+(Var(21)*2)
ground.cornerpush.veloff = 0;-8.4*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Medium Punch
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 210
sprpriority = 2
facep2 = 1

[State 210, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 3
value = S8+Var(24),1+(random%2)
channel = 0

[State 210, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S0,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 210, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = AnimElem = 3
attr = S, NA
damage = ceil(ifElse((70*FVar(10))<7,7,(70*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-70)
hitsound = S3,1
guardsound = S5,0
ground.type = High
ground.slidetime = 14+(Var(21)*3)
ground.hittime  = 14+(Var(21)*3)
ground.velocity = -7.66*(2-(Var(30)>0))/2
guard.velocity = -7.66*(2-(Var(30)>0))/2
guard.ctrltime = 15
air.type = High
air.velocity = -6,-5.015625
airguard.velocity = -5.33,-1
air.hittime = 14+(Var(21)*3)
ground.cornerpush.veloff = 0;-11.2*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)
ID = 34

[State 210, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
triggerall = !Var(50)
trigger1 = AnimElem = 4
attr = S, NA
damage = ceil(ifElse((56*FVar(10))<7,7,(56*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-98)
hitsound = S3,1
guardsound = S5,0
ground.type = High
ground.slidetime = 14+(Var(21)*3)
ground.hittime  = 14+(Var(21)*3)
ground.velocity = -7.66*(2-(Var(30)>0))/2
guard.velocity = -7.66*(2-(Var(30)>0))/2
guard.ctrltime = 15
air.type = High
air.velocity = -5,-5.96875
airguard.velocity = -5.33,-1
air.hittime = 14+(Var(21)*3)
ground.cornerpush.veloff = 0;-11.2*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)
ID = 35
nochainID = 34

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Medium Punch (close)
[Statedef 215]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 215
sprpriority = 2
facep2 = 1

[State 215, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 3
value = S8+Var(24),1+(random%2)
channel = 0

[State 215, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S0,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 215, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = AnimElem = 3
attr = S, NA
damage = ceil(ifElse((70*FVar(10))<7,7,(70*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-70)
hitsound = S3,1
guardsound = S5,0
ground.type = High
ground.slidetime = 14+(Var(21)*3)
ground.hittime  = 14+(Var(21)*3)
ground.velocity = -7.66*(2-(Var(30)>0))/2
guard.velocity = -7.66*(2-(Var(30)>0))/2
guard.ctrltime = 15
air.type = High
air.velocity = -6, -5.34375
airguard.velocity = -5.33,-1
air.hittime = 14+(Var(21)*3)
ground.cornerpush.veloff = 0;-11.2*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)
ID = 36

[State 215, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
triggerall = !Var(50)
trigger1 = AnimElem = 4
attr = S, NA
damage = ceil(ifElse((56*FVar(10))<7,7,(56*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-98)
hitsound = S3,1
guardsound = S5,0
ground.type = High
ground.slidetime = 14+(Var(21)*3)
ground.hittime  = 14+(Var(21)*3)
ground.velocity = -7.66*(2-(Var(30)>0))/2
guard.velocity = -7.66*(2-(Var(30)>0))/2
guard.ctrltime = 15
air.type = High
air.velocity = -5,-6.296875
airguard.velocity = -5.33,-1
air.hittime = 14+(Var(21)*3)
ground.cornerpush.veloff = 0;-11.2*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)
ID = 37
nochainID = 36

[State 215, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Strong Punch
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 220
sprpriority = 2
facep2 = 1

[State 220, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 3
value = S8+Var(24),1+(random%2)
channel = 0

[State 220, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S0,2
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 220, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = AnimElem = 3
attr = S, NA
damage = ceil(ifElse((98*FVar(10))<7,7,(98*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-70)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -8.125*(2-(Var(30)>0))/2
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = Low
air.velocity = -6,-5.671875
airguard.velocity = -6.67,-1
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0;-14*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 220, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Strong Punch (close)
[Statedef 225]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 225
sprpriority = 2
facep2 = 1

[State 225, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 3
value = S8+Var(24),1+(random%2)
channel = 0

[State 225, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S0,2
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 220, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
triggerall = PrevStateNo != 310
trigger1 = AnimElem = 3
attr = S, NA
damage = ceil(ifElse((84*FVar(10))<7,7,(84*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-70)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -8.125*(2-(Var(30)>0))/2
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = Low
air.velocity = -6,-5.671875
airguard.velocity = -6.67,-1
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0;-14*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 220, 3]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
triggerall = PrevStateNo = 310
trigger1 = AnimElem = 3
attr = S, NA
damage = ceil(ifElse((112*FVar(10))<7,7,(112*FVar(10)))),0
animtype = Heavy
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-70)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -8,-5
guard.velocity = -8.125*(2-(Var(30)>0))/2
air.velocity = -8,-5
airguard.velocity = -6.67,-1
air.type = Low
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0

[State 225, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Light Kick
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2
facep2 = 1

[State 230, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 2
value = S8+Var(24),0+(random%2)
channel = 0

[State 230, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S1,0
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 230, 2]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = AnimElem = 2
attr = S, NA
damage = ceil(ifElse((35*FVar(10))<7,7,(35*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = ceil(10*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-84)
hitsound = S4,0
guardsound = S5,0
ground.type = High
ground.slidetime = 10+(Var(21)*2)
ground.hittime  = 10+(Var(21)*2)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 11
air.type = High
air.velocity = -6,-5.34375
airguard.velocity = -5.33,-1
air.hittime = 10+(Var(21)*2)
ground.cornerpush.veloff = 0;-8.4*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 230, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Medium Kick
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 240
sprpriority = 2
facep2 = 1

[State 240, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 3
value = S8+Var(24),1+(random%2)
channel = 0

[State 240, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 240, 2]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
triggerall = PrevStateNo != 310
trigger1 = AnimElem = 3
attr = S, NA
damage = ceil(ifElse((70*FVar(10))<7,7,(70*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-49)
hitsound = S4,1
guardsound = S5,0
ground.type = Low
ground.slidetime = 14+(Var(21)*3)
ground.hittime  = 14+(Var(21)*3)
ground.velocity = -7.66*(2-(Var(30)>0))/2
guard.velocity = -7.66*(2-(Var(30)>0))/2
guard.ctrltime = 15
air.type = Low
air.velocity = -6,-5.015625
airguard.velocity = -5.33,-1
air.hittime = 14+(Var(21)*3)
ground.cornerpush.veloff = 0;-11.2*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 240, 2]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
triggerall = PrevStateNo = 310
trigger1 = AnimElem = 3
attr = S, NA
damage = ceil(ifElse((84*FVar(10))<7,7,(84*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-49)
hitsound = S4,1
guardsound = S5,0
ground.type = Low
ground.slidetime = 14+(Var(21)*3)
ground.hittime  = 14+(Var(21)*3)
ground.velocity = -7.66*(2-(Var(30)>0))/2
guard.velocity = -7.66*(2-(Var(30)>0))/2
guard.ctrltime = 15
air.type = Low
air.velocity = -6,-5.015625
airguard.velocity = -5.33,-1
air.hittime = 14+(Var(21)*3)
ground.cornerpush.veloff = 0;-11.2*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Strong Kick
[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 250
sprpriority = 2
facep2 = 1

[State 250, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 3
value = S8+Var(24),1+(random%2)
channel = 0

[State 250, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,2
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 250, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = AnimElem = 3
attr = S, NA
damage = ceil(ifElse((91*FVar(10))<7,7,(91*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-70)
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -8.125*(2-(Var(30)>0))/2
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = Low
air.velocity = -6,-5.34375
airguard.velocity = -6.67,-1
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0;-14*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 250, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Strong Kick (close)
[Statedef 255]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
velset = 0,0
anim = 255
sprpriority = 2
facep2 = 1

[State 255, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 3
value = S8+Var(24),1+(random%2)
channel = 0

[State 255, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,2
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 255, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = AnimElem = 3
attr = S, NA
damage = ceil(ifElse((105*FVar(10))<7,7,(105*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-49)
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -8.125*(2-(Var(30)>0))/2
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = Low
air.velocity = -6,-5.34375
airguard.velocity = -6.67,-1
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0;-14*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 255, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Light Punch
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 0
ctrl = 0
anim = 400
sprpriority = 2
velset = 0,0
facep2 = 1

[State 400, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 2
value = S8+Var(24),0+(random%2)
channel = 0

[State 400, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S0,0
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 400, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = AnimElem = 2
attr = C, NA
damage = ceil(ifElse((15*FVar(10))<7,7,(15*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = ceil(10*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-49)
hitsound = S3,0
guardsound = S5,0
ground.type = Low
ground.slidetime = 10+(Var(21)*2)
ground.hittime  = 10+(Var(21)*2)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 11
air.type = Low
air.velocity = -6,-4.6875
airguard.velocity = -4,-1
air.hittime = 10+(Var(21)*2)
ground.cornerpush.veloff = 0;-8.4*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 400, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Medium Punch
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
anim = 410
sprpriority = 2
velset = 0,0
facep2 = 1

[State 410, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 3
value = S8+Var(24),1+(random%2)
channel = 0

[State 410, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S0,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 410, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = AnimElem = 3
attr = C, NA
damage = ceil(ifElse((70*FVar(10))<7,7,(70*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-49)
hitsound = S3,1
guardsound = S5,0
ground.type = Low
ground.slidetime = 14+(Var(21)*3)
ground.hittime  = 14+(Var(21)*3)
ground.velocity = -7.66*(2-(Var(30)>0))/2
guard.velocity = -7.66*(2-(Var(30)>0))/2
guard.ctrltime = 15
air.type = Low
air.velocity = -6,-5.671875
airguard.velocity = -5.33,-1
air.hittime = 14+(Var(21)*3)
ground.cornerpush.veloff = 0;-11.2*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 410, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Strong Punch
[Statedef 420]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
anim = 420
sprpriority = 2
velset = 0,0
facep2 = 1

[State 420, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 3
value = S8+Var(24),1+(random%2)
channel = 0

[State 420, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S0,2
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 420, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = AnimElem = 3
attr = C, NA
damage = ceil(ifElse((91*FVar(10))<7,7,(91*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = ceil(14*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-56)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -8.125*(2-(Var(30)>0))/2
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = Low
air.velocity = -6,-5.671875
airguard.velocity = -6.67,-1
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0;-14*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)
ID = 38

[State 420, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
triggerall = !Var(50)
trigger1 = AnimElem = 4
attr = C, NA
damage = ceil(ifElse((56*FVar(10))<7,7,(56*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = ceil(14*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-98)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -8.125*(2-(Var(30)>0))/2
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = Low
air.velocity = -5,-5.640625
airguard.velocity = -6.67,-1
air.hittime = 17+(Var(21)*4)
ground.cornerpush.veloff = 0;-14*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)
ID = 39
nochainID = 38

[State 420, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Light Kick
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 0
ctrl = 0
anim = 430
sprpriority = 2
velset = 0,0
facep2 = 1

[State 430, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 2
value = S8+Var(24),0+(random%2)
channel = 0

[State 430, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S1,0
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 430, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = AnimElem = 2
attr = C, NA
damage = ceil(ifElse((21*FVar(10))<7,7,(21*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = L
hitflag = MAF
priority = 3, Hit
pausetime = ceil(10*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-35)
hitsound = S4,0
guardsound = S5,0
ground.type = Low
ground.slidetime = 10+(Var(21)*2)
ground.hittime  = 10+(Var(21)*2)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 11
air.type = Low
air.velocity = -6,-5.34375
airguard.velocity = -4,-1
air.hittime = 10+(Var(21)*2)
ground.cornerpush.veloff = 0;-8.4*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 430, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Medium Kick
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
anim = 440
sprpriority = 2
velset = 0,0
facep2 = 1

[State 440, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 3
value = S8+Var(24),1+(random%2)
channel = 0

[State 440, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 440, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = AnimElem = 3
attr = C, NA
damage = ceil(ifElse((63*FVar(10))<7,7,(63*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = L
hitflag = MAF
priority = 4, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-28)
hitsound = S4,1
guardsound = S5,0
ground.type = Low
ground.slidetime = 14+(Var(21)*3)
ground.hittime  = 14+(Var(21)*3)
ground.velocity = -7.66*(2-(Var(30)>0))/2
guard.velocity = -7.66*(2-(Var(30)>0))/2
guard.ctrltime = 15
air.type = Low
air.velocity = -6,-5.34375
airguard.velocity = -5.33,-1
air.hittime = 14+(Var(21)*3)
ground.cornerpush.veloff = 0;-11.2*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 440, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouch Strong Kick
[Statedef 450]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
anim = 450
sprpriority = 2
velset = 0,0
facep2 = 1

[State 420, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 3
value = S8+Var(24),1+(random%2)
channel = 0

[State 450, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,2
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 450, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = AnimElem = 3
attr = C, NA
damage = ceil(ifElse((70*FVar(10))<7,7,(70*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = L
hitflag = MAF
priority = 5, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-21)
hitsound = S4,2
guardsound = S5,0
ground.type = Trip
ground.slidetime = 17+(Var(21)*4)
ground.hittime  = 17+(Var(21)*4)
ground.velocity = -1,-7.3671875
guard.velocity = -8.125*(2-(Var(30)>0))/2
guard.ctrltime = 17
air.type = High
air.velocity = -1,-7.3671875
airguard.velocity = -6.67,-1
air.hittime = 18
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0;-11.9*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 1
fall = 1
fall.recover = !Var(30)
air.recover = !Var(30)
ID = 450

[State 450, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Jump Light Punch
[Statedef 600]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
ctrl = 0
anim = ifElse(Vel X = 0,600,605)
sprpriority = 2

[State 600, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 2
value = S8+Var(24),0+(random%2)
channel = 0

[State 600, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S0,0
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 600, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = Anim = 600 && AnimElem = 2
attr = A, NA
damage = ceil(ifElse((42*FVar(10))<7,7,(42*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = ceil(10*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno= S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-56)
hitsound = S3,0
guardsound = S5,0
guard.ctrltime = 12
ground.type = High
ground.slidetime = 9+(Var(21)*2)
ground.hittime  = 9+(Var(21)*2)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
air.type = High
air.velocity = -6,-5.015625
airguard.velocity = -4,-1
air.hittime = 9+(Var(21)*2)
ground.cornerpush.veloff = 0;-4.2*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)
persistent = 0

[State 600, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = Anim = 605 && AnimElem = 2
attr = A, NA
damage = ceil(ifElse((42*FVar(10))<7,7,(42*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = ceil(10*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno= S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-70)
hitsound = S3,0
guardsound = S5,0
guard.ctrltime = 12
ground.type = High
ground.slidetime = 9+(Var(21)*2)
ground.hittime  = 9+(Var(21)*2)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
air.type = High
air.velocity = -6,-5.015625
airguard.velocity = -4,-1
air.hittime = 9+(Var(21)*2)
ground.cornerpush.veloff = 0;-4.2*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)
persistent = 0

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 50, ChangeState]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Jump Medium Punch
[Statedef 610]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
anim = ifElse(Vel X = 0,610,615)
sprpriority = 2

[State 610, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = Anim = 610 && AnimElem = 3
trigger2 = Anim = 615 && AnimElem = 2
value = S8+Var(24),1+(random%2)
channel = 0

[State 610, PlaySnd]
type = PlaySnd
trigger1 = Anim = 610 && AnimElem = 3
trigger2 = Anim = 615 && AnimElem = 2
value = S0,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = Anim = 610 && AnimElem = 4
trigger2 = Anim = 615 && AnimElem = 3
movetype = I

[State 610, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = Anim = 610 && AnimElem = 3
attr = A, NA
damage = ceil(ifElse((70*FVar(10))<7,7,(70*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-63)
hitsound = S3,1
guardsound = S5,0
ground.type = High
ground.slidetime = 12+(Var(21)*3)
ground.hittime  = 12+(Var(21)*3)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 15
air.type = High
air.velocity = -6,-5.671875
airguard.velocity = -5.33,-1
air.hittime = 12+(Var(21)*3)
ground.cornerpush.veloff = 0;-5.6*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 610, 2]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = Anim = 615 && AnimElem = 2
attr = A, NA
damage = ceil(ifElse((63*FVar(10))<7,7,(63*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-70)
hitsound = S3,1
guardsound = S5,0
ground.type = High
ground.slidetime = 12+(Var(21)*3)
ground.hittime  = 12+(Var(21)*3)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 15
air.type = High
air.velocity = -6,-5.015625
airguard.velocity = -5.33,-1
air.hittime = 12+(Var(21)*3)
ground.cornerpush.veloff = 0;-5.6*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 50, ChangeState]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Jump Strong Punch
[Statedef 620]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
anim = ifElse(Vel X = 0,620,625)
sprpriority = 2

[State 620, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 3
value = S8+Var(24),1+(random%2)
channel = 0

[State 620, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S0,2
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 620, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = Anim = 620 && AnimElem = 3
attr = A, NA
damage = ceil(ifElse((84*FVar(10))<7,7,(84*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 5, Hit
pausetime = ceil(14*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-63)
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 12+(Var(21)*4)
ground.hittime  = 12+(Var(21)*4)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 20
air.type = High
air.velocity = -6,-4.359375
airguard.velocity = -6.67,-1
air.hittime = 12+(Var(21)*4)
ground.cornerpush.veloff = 0;-7*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 620, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = Anim = 625 && AnimElem = 3
attr = A, NA
damage = ceil(ifElse((91*FVar(10))<7,7,(91*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 5, Hit
pausetime = ceil(14*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-42)
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 12+(Var(21)*4)
ground.hittime  = 12+(Var(21)*4)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 20
air.type = High
air.velocity = -6,-5.671875
airguard.velocity = -6.67,-1
air.hittime = 12+(Var(21)*4)
ground.cornerpush.veloff = 0;-7*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 0, VelSet]
type = VelSet
trigger1 = Anim = 620
trigger1 = command = "holdfwd" || command = "holdback"
x = 1.5*(command="holdfwd"-command="holdback")
[State 0, VelSet]
type = VelSet
trigger1 = Anim = 620
trigger1 = command != "holdfwd" && command != "holdback"
x = 0

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 50, ChangeState]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Jump Light Kick
[Statedef 630]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
ctrl = 0
anim = 630
sprpriority = 2

[State 630, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 2
value = S8+Var(24),0+(random%2)
channel = 0

[State 630, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S1,0
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 630, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = AnimElem = 2
attr = A, NA
damage = ceil(ifElse((42*FVar(10))<7,7,(42*FVar(10)))),0
animtype = Light
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = ceil(10*(2-(Var(30)>0))/2),ceil(9*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-56)
hitsound = S4,0
guardsound = S5,0
guard.ctrltime = 12
ground.type = High
ground.slidetime = 9+(Var(21)*2)
ground.hittime  = 9+(Var(21)*2)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
air.type = High
air.velocity = -6,-5.671875
airguard.velocity = -4,-1
air.hittime = 9+(Var(21)*2)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)
persistent = 0

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 50, ChangeState]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Jump Medium Kick
[Statedef 640]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
anim = 640
sprpriority = 2

[State 640, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 3
value = S8+Var(24),1+(random%2)
channel = 0

[State 640, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,1
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 640, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = AnimElem = 3
attr = A, NA
damage = ceil(ifElse((63*FVar(10))<7,7,(63*FVar(10)))),0
animtype = Medium
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-56)
hitsound = S4,1
guardsound = S5,0
ground.type = High
ground.slidetime = 12+(Var(21)*3)
ground.hittime  = 12+(Var(21)*3)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 15
air.type = High
air.velocity = -6,-5.34375
airguard.velocity = -5.33,-1
air.hittime = 12+(Var(21)*3)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 50, ChangeState]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Jump Strong Kick
[Statedef 650]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 17*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
ctrl = 0
anim = 650
sprpriority = 2

[State 650, PlaySnd]
type = PlaySnd
triggerall = Random < 333
trigger1 = AnimElem = 3
value = S8+Var(24),1+(random%2)
channel = 0

[State 650, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,2
channel = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 650, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = AnimElem = 3
attr = A, NA
damage = ceil(ifElse((91*FVar(10))<7,7,(91*FVar(10)))),0
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = HA
hitflag = MAF
priority = 5, Hit
pausetime = ceil(14*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-42)
hitsound = S4,2
guardsound = S5,0
ground.type = High
ground.slidetime = 12+(Var(21)*4)
ground.hittime  = 12+(Var(21)*4)
ground.velocity = -5.77*(2-(Var(30)>0))/2
guard.velocity = -5.77*(2-(Var(30)>0))/2
guard.ctrltime = 20
air.type = High
air.velocity = -6,-5.34375
airguard.velocity = -6.67,-1
air.hittime = 12+(Var(21)*4)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,214)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 0
fall.recover = !Var(30)
air.recover = !Var(30)

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 50, ChangeState]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Throw 1 Attempt
[Statedef 800]
type = S
movetype= A
physics = S
juggle = 0
velset = 0,0
ctrl = 0
anim = ifElse(Var(24) = 10,806,800)
poweradd = 89*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
facep2 = 1
sprpriority = -1

[State 800, 1]
type = HitDef
triggerall = P2MoveType != H
triggerall = P2StateNo != [130,155]
triggerall = Anim = 800
trigger1 = AnimElem = 2
attr = S, NT
hitflag = M-
priority = 3, Miss
sparkno = -1
;sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = IfElse((command = "holdfwd"),810,811)
p2stateno = IfElse((command = "holdfwd"),815,816)
guard.dist = 0
numhits = 0
;fall = 1

[State 800, 1]
type = HitDef
triggerall = P2StateNo != [130,155]
triggerall = Var(30)
triggerall = Anim = 800
trigger1 = AnimElem = 2
attr = S, NT
hitflag = MF
priority = 3, Miss
sparkno = -1
;sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = IfElse((command = "holdfwd"),810,811)
p2stateno = IfElse((command = "holdfwd"),815,816)
guard.dist = 0
numhits = 0
;fall = 1

[State 800, 1]
type = HitDef
triggerall = P2MoveType != H
triggerall = P2StateNo != [130,155]
triggerall = Anim = 806
trigger1 = AnimElem = 2
attr = S, NT
hitflag = M-
priority = 3, Miss
sparkno = -1
;sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = IfElse((command = "holdfwd"),870,875)
p2stateno = IfElse((command = "holdfwd"),850,860)
guard.dist = 0
numhits = 0
;fall = 1

[State 800, 1]
type = HitDef
triggerall = P2StateNo != [130,155]
triggerall = Var(30)
triggerall = Anim = 806
trigger1 = AnimElem = 2
attr = S, NT
hitflag = MF
priority = 3, Miss
sparkno = -1
;sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = IfElse((command = "holdfwd"),870,875)
p2stateno = IfElse((command = "holdfwd"),850,860)
guard.dist = 0
numhits = 0
;fall = 1

[State 255, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(2) = 1
value = S8+Var(24),3
channel = 0

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
[Statedef 810]
type = S
movetype= A
physics = N
anim = 810
sprpriority = 1

[State 810, 1]
type = VarSet
trigger1 = Time = 0
fvar(2) = 0
[State 810, 1]
type = VarSet
triggerall = Time < 7 && !FVar(2)
triggerall = Target,Command = "holdfwd" || Target,Command = "holdback"
trigger1 = Target,Command = "y" || Target,Command = "z"
trigger2 = Target,Command = "b" || Target,Command = "c"
fvar(2) = 1
[State 810, TargetBind]
type = TargetBind
trigger1 = NumTarget
trigger1 = Time < 7 && FVar(2)
pos = 40, 0
[State 810, TargetBind]
type = ChangeState
trigger1 = Time < 7 && FVar(2)
value = 950

[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S800,0
channel = 2
[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S8+Var(24),9
channel = 0
[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S3,2
channel = 2

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 39, 0
time = 1
[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
[State 810, Width]
type = Width
trigger1 = 1
edge = 60,0 ; look closer

[State 810, Explod]
type = Explod
trigger1  = AnimElem = 4
anim = 8200+(random%8)
pos = 49,-49
postype = p1
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
ontop = 1

[State 832, HitAdd]
type = HitAdd
trigger1 = AnimElem = 4
value = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 4
var(51) = 1
ignorehitpause = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 4
var(47)=500
ignorehitpause = 1
persistent = 1
[State 832, VarAdd]
type = VarAdd
triggerall = Var(51) >= 2
trigger1 = AnimElem = 4
var(47)=ifelse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 810, Hurt]
type = TargetLifeAdd
trigger1 = AnimElem = 4
value = ceil(ifelse((-132*FVar(10))>-7,-7,(-132*FVar(10))))
kill = 1
[State 901, Hurt]
type = TargetPowerAdd
trigger1 = AnimElem = 4
value = 35

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
[Statedef 811]
type = S
movetype= A
physics = N
anim = 811
sprpriority = 1

[State 810, 1]
type = VarSet
trigger1 = Time = 0
fvar(2) = 0
[State 810, 1]
type = VarSet
triggerall = Time < 7 && !FVar(2)
trigger1 = ((Target,Command = "holdfwd") || (Target,Command = "holdback")) && ((Target,Command = "y") || (Target,Command = "z"))
fvar(2) = 1
[State 810, TargetBind]
type = TargetBind
trigger1 = NumTarget
trigger1 = Time < 7 && FVar(2)
pos = 40, 0
[State 810, TargetBind]
type = ChangeState
trigger1 = Time < 7 && FVar(2)
value = 950

[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S800,0
channel = 2

[State 810, Turn]
type = Turn
trigger1 = AnimElemTime(2) = 0

[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S8+Var(24),9
channel = 0
[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S3,2
channel = 2

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = -39, 0
time = 1

[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 810, Width]
type = Width
trigger1 = 1
edge = 60,0 ; look closer

[State 810, Explod]
type = Explod
trigger1  = AnimElem = 4
anim = 8200+(random%8)
pos = 49,-49
postype = p1
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
ontop = 1

[State 832, HitAdd]
type = HitAdd
trigger1 = AnimElem = 4
value = 1

[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 4
var(51) = 1
ignorehitpause = 1

[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 4
var(47)=500
ignorehitpause = 1
persistent = 1

[State 832, VarAdd]
type = VarAdd
triggerall = Var(51) >= 2
trigger1 = AnimElem = 4
var(47)=ifelse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 810, Hurt]
type = TargetLifeAdd
trigger1 = AnimElem = 4
value = ceil(ifelse((-132*FVar(10))>-7,-7,(-132*FVar(10))))
kill = 1

[State 901, Hurt]
type = TargetPowerAdd
trigger1 = AnimElem = 4
value = 35

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
[Statedef 815]
type = A
movetype = H
physics = N
velset = 0,0
sprpriority = 2

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820+1000*(Name = "Gill" && AuthorName = "GM" && Facing = -1)
[State 820, SprPriority]
type = SprPriority
trigger1 = AnimElemTime(4) = 0
sprpriority = -1

[State 820, VelSet]
type = VelSet
trigger1 = AnimElemTime(4) = 1
x = -6
y = -4.34375
[State 820, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(4) > 1
y = .4375

[State 903, EnvShake]
type = EnvShake
trigger1 = AnimElemTime(4) > 1
trigger1 = Vel Y + Pos Y >= 0
time = 10

[State 903, 2]
type = SelfState
trigger1 = AnimElemTime(4) > 1
trigger1 = Vel Y + Pos Y >= 0
value = 5100

;----------------------------------------------------------------------
[Statedef 816]
type = A
movetype = H
physics = N
velset = 0,0
sprpriority = 2

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 825

[State 810, Turn]
type = Turn
trigger1 = AnimElemTime(2) = 0

[State 820, SprPriority]
type = SprPriority
trigger1 = AnimElemTime(4) = 0
sprpriority = -1

[State 820, VelSet]
type = VelSet
trigger1 = AnimElemTime(4) = 1
x = -6
y = -4.34375
[State 820, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(4) > 1
y = .4375

[State 903, EnvShake]
type = EnvShake
trigger1 = AnimElemTime(4) > 1
trigger1 = Vel Y + Pos Y >= 0
time = 10

[State 903, 2]
type = SelfState
trigger1 = AnimElemTime(4) > 1
trigger1 = Vel Y + Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
; Throw 2 Attempt
[Statedef 830]
type = S
movetype= A
physics = S
juggle = 0
velset = 0,0
ctrl = 0
anim = 805
poweradd = 89*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
sprpriority = -1

[State 830, 1]
type = HitDef
triggerall = P2MoveType != H
triggerall = P2StateNo != [130,155]
trigger1 = AnimElem = 2
attr = S, NT
hitflag = M-
priority = 3, Miss
sparkno = -1
;sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = IfElse((command = "holdfwd"),831,832)
p2stateno = IfElse((command = "holdfwd"),834,835)
guard.dist = 0
numhits = 0
;fall = 1

[State 830, 1]
type = HitDef
triggerall = P2StateNo != [130,155]
triggerall = Var(30)
trigger1 = AnimElem = 2
attr = S, NT
hitflag = MF
priority = 3, Miss
sparkno = -1
;sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = IfElse((command = "holdfwd"),831,832)
p2stateno = IfElse((command = "holdfwd"),834,835)
guard.dist = 0
numhits = 0

[State 255, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(2) = 1
value = S8+Var(24),3
channel = 0

[State 830, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
[Statedef 831]
type = S
movetype= A
physics = N
anim = 830
sprpriority = 1

[State 810, 1]
type = VarSet
trigger1 = Time = 0
fvar(2) = 0
[State 810, 1]
type = VarSet
triggerall = Time < 4 && !FVar(2)
triggerall = Target,Command = "holdfwd" || Target,Command = "holdback"
trigger1 = Target,Command = "y" || Target,Command = "z"
trigger2 = Target,Command = "b" || Target,Command = "c"
fvar(2) = 1
[State 810, TargetBind]
type = TargetBind
trigger1 = NumTarget
trigger1 = Time < 4 && FVar(2)
pos = 40, 0
[State 810, TargetBind]
type = ChangeState
trigger1 = Time < 4 && FVar(2)
value = 950

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 39, 0
time = 1
[State 831, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S800,0
channel = 2

[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
[State 810, Width]
type = Width
trigger1 = 1
edge = 60,0 ; look closer
[State 831, TargetBind2]
type = TargetBind
trigger1 = AnimElemTime(2) = 0
time = 6
pos = -81,-85
[State 831, TargetBind]
type = TargetBind
trigger1 = AnimElemTime(3) = 0
time = 3
pos = -64,-98
[State 831, TargetBind]
type = TargetBind
trigger1 = AnimElemTime(4) = 0
time = 3
pos = -2,-91
[State 831, TargetBind]
type = TargetBind
trigger1 = AnimElemTime(5) = 0
time = 3
pos = 66,-42
[State 831, TargetBind]
type = TargetBind
trigger1 = AnimElemTime(6) = 0
time = 3
pos = 66,0

[State 1000, Spark]
type = Explod
triggerall = !NumExplod(8310)
trigger1 = AnimElemTime(6) = 1
anim = 8310
ID = 8310
pos = 66,5
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 832, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(6) = 1
value = S4,1
[State 832, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(6) = 1
value = S5100,1

[State 832, HitAdd]
type = HitAdd
trigger1 = AnimElem = 6
value = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 6
var(51) = 1
ignorehitpause = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 6
var(47)=500
ignorehitpause = 1
persistent = 1
[State 832, VarAdd]
type = VarAdd
triggerall = Var(51) >= 2
trigger1 = AnimElem = 6
var(47)=ifelse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 832, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(5) = 1
value = S8+Var(24),9
channel = 0

[State 832, PowerAdd]
type = NULL;PowerAdd
trigger1 = AnimElemTime(14) = 1
value = 62*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)

[State 832, EnvShake]
type = EnvShake
trigger1 = AnimElem = 6
time = 20

[State 832, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElemTime(6) = 2
value = ceil(ifelse((-153*FVar(10))>-7,-7,(-153*FVar(10))))
[State 831, TargetPowerAdd]
type = TargetPowerAdd
trigger1 = AnimElem = 6
value = 35

[State 831, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;52
ctrl = 1

;----------------------------------------------------------------------
[Statedef 832]
type = S
movetype= A
physics = N
anim = 831
sprpriority = 1

[State 810, 1]
type = VarSet
trigger1 = Time = 0
fvar(2) = 0
[State 810, 1]
type = VarSet
triggerall = Time < 4 && !FVar(2)
triggerall = Target,Command = "holdfwd" || Target,Command = "holdback"
trigger1 = Target,Command = "y" || Target,Command = "z"
trigger2 = Target,Command = "b" || Target,Command = "c"
fvar(2) = 1
[State 810, TargetBind]
type = TargetBind
trigger1 = NumTarget
trigger1 = Time < 4 && FVar(2)
pos = 40, 0
[State 810, TargetBind]
type = ChangeState
trigger1 = Time < 4 && FVar(2)
value = 950

[State 810, Turn]
type = Turn
trigger1 = AnimTime = 0

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 39, 0
time = 1
[State 831, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S800,0
channel = 2
[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
[State 810, Width]
type = Width
trigger1 = 1
edge = 60,0 ; look closer
[State 831, TargetBind2]
type = TargetBind
trigger1 = AnimElemTime(2) = 0
time = 6
pos = 81,-85
[State 831, TargetBind]
type = TargetBind
trigger1 = AnimElemTime(3) = 0
time = 3
pos = 64,-98
[State 831, TargetBind]
type = TargetBind
trigger1 = AnimElemTime(4) = 0
time = 3
pos = 2,-91
[State 831, TargetBind]
type = TargetBind
trigger1 = AnimElemTime(5) = 0
time = 3
pos = -66,-42
[State 831, TargetBind]
type = TargetBind
trigger1 = AnimElemTime(6) = 0
time = 3
pos = -66,0

[State 1000, Spark]
type = Explod
triggerall = !NumExplod(8310)
trigger1 = AnimElemTime(6) = 1
anim = 8310
ID = 8310
pos = -66,5
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 832, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(6) = 1
value = S4,1
[State 832, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(6) = 1
value = S5100,1

[State 832, HitAdd]
type = HitAdd
trigger1 = AnimElem = 6
value = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 6
var(51) = 1
ignorehitpause = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 6
var(47)=500
ignorehitpause = 1
persistent = 1
[State 832, VarAdd]
type = VarAdd
triggerall = Var(51) >= 2
trigger1 = AnimElem = 6
var(47)=ifelse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 832, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(5) = 1
value = S8+Var(24),9
channel = 0

[State 832, EnvShake]
type = EnvShake
trigger1 = AnimElem = 6
time = 20

[State 832, PowerAdd]
type = NULL;PowerAdd
trigger1 = AnimElemTime(14) = 1
value = 62*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)

[State 832, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElemTime(6) = 2
value = ceil(ifelse((-153*FVar(10))>-7,-7,(-153*FVar(10))))
[State 831, TargetPowerAdd]
type = TargetPowerAdd
trigger1 = AnimElem = 6
value = 35

[State 831, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;52
ctrl = 1

;----------------------------------------------------------------------
[Statedef 834]
type = S
movetype = H
physics = N
sprpriority = 2

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 834, SprPriority]
type = SprPriority
trigger1 = AnimElemTime(2) < 0
trigger2 = AnimElem = 4
value = 2
[State 834, SprPriority]
type = SprPriority
trigger1 = AnimElem = 2
trigger2 = AnimElem = 6
value = -1

[State 834, ChangeAnim2]
type = ChangeAnim2
triggerall = !(Name = "Gill" && AuthorName = "GM")
trigger1 = Time = 0
value = 835
[State 834, ChangeAnim2]
type = ChangeAnim2
triggerall = (Name = "Gill" && AuthorName = "GM")
trigger1 = Time = 0
value = ifElse(facing=-1,1835,1836)

[State 834, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 834, SelfState]
type = SelfState
trigger1 = AnimTime = 0
value = 5080

;----------------------------------------------------------------------
[Statedef 835]
type = S
movetype = H
physics = N
sprpriority = 2

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 834, SprPriority]
type = SprPriority
trigger1 = AnimElemTime(2) < 0
trigger2 = AnimElem = 4
value = 2
[State 834, SprPriority]
type = SprPriority
trigger1 = AnimElem = 2
trigger2 = AnimElem = 6
value = -1

[State 834, ChangeAnim2]
type = ChangeAnim2
triggerall = !(Name = "Gill" && AuthorName = "GM")
trigger1 = Time = 0
value = 836
[State 834, ChangeAnim2]
type = ChangeAnim2
triggerall = (Name = "Gill" && AuthorName = "GM")
trigger1 = Time = 0
value = ifElse(facing=-1,1837,1838)

[State 834, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 834, Turn]
type = Turn
trigger1 = Anim = 836 && AnimTime = 0

[State 834, SelfState]
type = SelfState
trigger1 = AnimTime = 0
value = 5080

;----------------------------------------------------------------------
; Sandbag Throw 1
[Statedef 870]
type = S
movetype= A
physics = N
anim = 840
sprpriority = 1
;total throw time = 55~56

[State 810, 1]
type = VarSet
trigger1 = Time = 0
fvar(2) = 0
[State 810, 1]
type = VarSet
triggerall = Time < 7 && !FVar(2)
triggerall = Target,Command = "holdfwd" || Target,Command = "holdback"
trigger1 = Target,Command = "y" || Target,Command = "z"
trigger2 = Target,Command = "b" || Target,Command = "c"
fvar(2) = 1
[State 810, TargetBind]
type = TargetBind
trigger1 = NumTarget
trigger1 = Time < 7 && FVar(2)
pos = 40, 0
[State 810, TargetBind]
type = ChangeState
trigger1 = Time < 7 && FVar(2)
value = 950

[State 810, PlaySnd]
type = PlaySnd
trigger1 = Anim = 840 && AnimElem = 1
value = S800,0
channel = 2

[State 840, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
[State 840, Width]
type = Width
trigger1 = 1
edge = 60,0 ; look closer

[State 840, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 840 && AnimTime = 0
value = 841

; A!
[State 820, ChangeAnim]
type = ChangeAnim
triggerall = Anim = 841
trigger1 = AnimElemTime(4) < 0
trigger1 = FVar(11) > FVar(14)
trigger1 = AnimElemTime(1) != 0
trigger1 = AnimElemTime(2) != 0
trigger1 = AnimElemTime(3) != 0
value = 841
elem = AnimElemNo(0) + 1

[State 840, VarSet]
type = VarSet
trigger1 = time = 0
fvar(11) = 0
[State 840, VarSet]
type = VarSet
trigger1 = time = 0
fvar(14) = 0
[State 840, VarSet]
type = VarSet
trigger1 = time = 0
fvar(25) = 0
[State 840, VarSet]
type = VarSet
trigger1 = AnimElemTime(1) = 0
trigger2 = AnimElemTime(2) = 0
trigger3 = AnimElemTime(3) = 0
trigger4 = AnimElemTime(4) = 0
fvar(14) = FVar(11)

[State 840, PUSH START TO RICH]
type = VarAdd
trigger1 = Command = "a"
trigger2 = Command = "b"
trigger3 = Command = "c"
trigger4 = Command = "x"
trigger5 = Command = "y"
trigger6 = Command = "z"
trigger7 = Command = "start"
trigger8 = Command = "parry"
trigger9 = Command = "parry2"
trigger10 = Command = "rich"
fvar(11) = 1
[State 840, PUSH COIN TO LAG]
type = VarAdd
trigger1 = target, Command = "a"
trigger2 = target, Command = "b"
trigger3 = target, Command = "c"
trigger4 = target, Command = "x"
trigger5 = target, Command = "y"
trigger6 = target, Command = "z"
trigger7 = target, Command = "start"
trigger8 = target, Command = "parry"
trigger9 = target, Command = "parry2"
trigger10 = target, Command = "rich"
fvar(25) = 1

[State 840, TargetState]
type = TargetState
trigger1 = !Time
value = 850
[State 840, TargetState]
type = TargetState
trigger1 = Anim = 841 && AnimElem = 3
value = 851
[State 840, TargetState]
type = TargetState
trigger1 = Anim = 841 && AnimElem = 4
value = 852
[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 25, 0
time = 1

[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S8+Var(24),2
channel = 0
[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S3,2
channel = 2

[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 810, Explod]
type = Explod
trigger1  = AnimElem = 3
anim = 8200+(random%8)
pos = 36,-70
postype = p1
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
ontop = 1

[State 832, HitAdd]
type = HitAdd
trigger1 = AnimElem = 3
value = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 3
var(51) = 1
ignorehitpause = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 3
var(47)=500
ignorehitpause = 1
persistent = 1
[State 832, VarAdd]
type = VarAdd
triggerall = Var(51) >= 2
trigger1 = AnimElem = 3
var(47)=ifelse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 810, Hurt]
type = TargetLifeAdd
trigger1 = AnimElem = 3
value = ceil(ifelse((-35*FVar(10))>-7,-7,(-35*FVar(10))))
kill = 0
[State 901, Hurt]
type = TargetPowerAdd
trigger1 = AnimElem = 3
value = 35

[State 901, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 841

;----------------------------------------------------------------------
; Sandbag Throw 2
[Statedef 841]
type = S
movetype= A
physics = N
anim = 841
sprpriority = 1

[State 840, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
[State 840, Width]
type = Width
trigger1 = 1
edge = 60,0 ; look closer

; A!
[State 820, ChangeAnim]
type = ChangeAnim
triggerall = Anim = 841
trigger1 = AnimElemTime(4) < 0
trigger1 = FVar(11) > FVar(14)
trigger1 = AnimElemTime(1) != 0
trigger1 = AnimElemTime(2) != 0
trigger1 = AnimElemTime(3) != 0
value = 841
elem = AnimElemNo(0) + 1

[State 840, VarSet]
type = VarSet
trigger1 = AnimElemTime(1) = 0
trigger2 = AnimElemTime(2) = 0
trigger3 = AnimElemTime(3) = 0
trigger4 = AnimElemTime(4) = 0
fvar(14) = FVar(11)

[State 840, PUSH START TO RICH]
type = VarAdd
trigger1 = Command = "a"
trigger2 = Command = "b"
trigger3 = Command = "c"
trigger4 = Command = "x"
trigger5 = Command = "y"
trigger6 = Command = "z"
trigger7 = Command = "start"
trigger8 = Command = "parry"
trigger9 = Command = "parry2"
trigger10 = Command = "rich"
fvar(11) = 1
[State 840, PUSH COIN TO LAG]
type = VarAdd
trigger1 = target, Command = "a"
trigger2 = target, Command = "b"
trigger3 = target, Command = "c"
trigger4 = target, Command = "x"
trigger5 = target, Command = "y"
trigger6 = target, Command = "z"
trigger7 = target, Command = "start"
trigger8 = target, Command = "parry"
trigger9 = target, Command = "parry2"
trigger10 = target, Command = "rich"
fvar(25) = 1

[State 840, TargetState]
type = TargetState
trigger1 = !Time
value = 850
[State 840, TargetState]
type = TargetState
trigger1 = Anim = 841 && AnimElemTime(3) = 0
value = 851
[State 840, TargetState]
type = TargetState
trigger1 = Anim = 841 && AnimElemTime(4) = 0
value = 852
[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 25, 0
time = 1

[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S8+Var(24),2
channel = 0
[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S3,2
channel = 2

[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 810, Explod]
type = Explod
trigger1  = AnimElem = 3
anim = 8200+(random%8)
pos = 36,-70
postype = p1
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
ontop = 1

[State 832, HitAdd]
type = HitAdd
trigger1 = AnimElem = 3
value = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 3
var(51) = 1
ignorehitpause = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 3
var(47)=500
ignorehitpause = 1
persistent = 1
[State 832, VarAdd]
type = VarAdd
triggerall = Var(51) >= 2
trigger1 = AnimElem = 3
var(47)=ifelse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 841, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 3
value = ceil(ifelse((-35*FVar(10))>-7,-7,(-35*FVar(10))))
kill = 0
[State 841, TargetPowerAdd]
type = TargetPowerAdd
trigger1 = AnimElem = 3
value = 35

[State 841, Change]
type = ChangeState
triggerall = AnimTime = 0
trigger1 = FVar(11)-FVar(25) >= 3
value = 843
[State 841, ChangeState]
type = ChangeState
triggerall = AnimTime = 0
trigger1 = FVar(11)-FVar(25) < 3
value = 842

;----------------------------------------------------------------------
; Sandbag Throw Premature End
[Statedef 842]
type = S
movetype= A
physics = N
anim = 842
sprpriority = 1

[State 840, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
[State 840, Width]
type = Width
trigger1 = 1
edge = 60,0 ; look closer

; Thanks, Warusaki!
[State 820, ChangeAnim]
type = ChangeAnim
triggerall = Anim = 842
trigger1 = AnimElemTime(6) < 0
trigger1 = FVar(11) > FVar(14)
trigger1 = AnimElemTime(1) != 0
trigger1 = AnimElemTime(2) != 0
trigger1 = AnimElemTime(3) != 0
trigger1 = AnimElemTime(4) != 0
trigger1 = AnimElemTime(5) != 0
value = 842
elem = AnimElemNo(0) + 1

[State 840, VarSet]
type = VarSet
trigger1 = time = 0
trigger2 = AnimTime = 0
fvar(11) = 0
[State 840, VarSet]
type = VarSet
trigger1 = time = 0
trigger2 = AnimTime = 0
fvar(14) = 0
[State 840, VarSet]
type = VarSet
trigger1 = time = 0
trigger2 = AnimTime = 0
fvar(25) = 0
[State 840, VarSet]
type = VarSet
trigger1 = AnimElemTime(1) = 0
trigger2 = AnimElemTime(2) = 0
trigger3 = AnimElemTime(3) = 0
trigger4 = AnimElemTime(4) = 0
trigger5 = AnimElemTime(5) = 0
fvar(14) = FVar(11)

[State 840, VarSet]
type = VarAdd
trigger1 = Command = "a"
trigger2 = Command = "b"
trigger3 = Command = "c"
trigger4 = Command = "x"
trigger5 = Command = "y"
trigger6 = Command = "z"
trigger7 = Command = "start"
trigger8 = Command = "parry"
trigger9 = Command = "parry2"
trigger10 = Command = "rich"
fvar(11) = 1

[State 840, TargetState]
type = TargetState
trigger1 = !Time
value = 850
[State 840, TargetState]
type = TargetState
trigger1 = Anim = 842 && AnimElemTime(4) = 0
value = 851
[State 840, TargetState]
type = TargetState
trigger1 = Anim = 842 && AnimElemTime(5) = 0
value = 852
[State 842, TargetState]
type = TargetState
trigger1 = AnimElem = 5
value = 853
[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 25, 0
time = 1

[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S8+Var(24),2
channel = 0
[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S3,2
channel = 2

[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 810, Explod]
type = Explod
trigger1  = AnimElem = 4
anim = 8200+(random%8)
pos = 36,-70
postype = p1
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
ontop = 1

[State 832, HitAdd]
type = HitAdd
trigger1 = AnimElem = 4
value = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 4
var(51) = 1
ignorehitpause = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 4
var(47)=500
ignorehitpause = 1
persistent = 1
[State 832, VarAdd]
type = VarAdd
triggerall = Var(51) >= 2
trigger1 = AnimElem = 4
var(47)=ifelse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 842, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 4
value = ceil(ifelse((-42*FVar(10))>-7,-7,(-42*FVar(10))))
kill = 1
[State 842, TargetPowerAdd]
type = TargetPowerAdd
trigger1 = AnimElem = 4
value = 35

[State 842, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
; Sandbag Throw-- But wait, there's more!
[Statedef 843]
type = S
movetype= A
physics = N
anim = 841
sprpriority = 1

[State 840, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
[State 840, Width]
type = Width
trigger1 = 1
edge = 60,0 ; look closer

; Thanks, Warusaki!
[State 820, ChangeAnim]
type = ChangeAnim
triggerall = Anim = 841
trigger1 = AnimElemTime(2) < 0
trigger1 = FVar(11) > FVar(14)
trigger1 = AnimElemTime(1) != 0
value = 841
elem = AnimElemNo(0) + 1

[State 840, VarSet]
type = VarSet
trigger1 = AnimElemTime(1) = 0
trigger2 = AnimElemTime(2) = 0
fvar(14) = FVar(11)

[State 840, PUSH START TO RICH]
type = VarAdd
trigger1 = Command = "a"
trigger2 = Command = "b"
trigger3 = Command = "c"
trigger4 = Command = "x"
trigger5 = Command = "y"
trigger6 = Command = "z"
trigger7 = Command = "start"
trigger8 = Command = "parry"
trigger9 = Command = "parry2"
trigger10 = Command = "rich"
fvar(11) = 1

[State 840, TargetState]
type = TargetState
trigger1 = !Time
value = 850
[State 840, TargetState]
type = TargetState
trigger1 = Anim = 841 && AnimElemTime(3) = 0
value = 851
[State 840, TargetState]
type = TargetState
trigger1 = Anim = 841 && AnimElemTime(4) = 0
value = 852
[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 25, 0
time = 1

[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S8+Var(24),2
channel = 0
[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S3,2
channel = 2

[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 810, Explod]
type = Explod
trigger1  = AnimElem = 3
anim = 8200+(random%8)
pos = 36,-70
postype = p1
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
ontop = 1

[State 832, HitAdd]
type = HitAdd
trigger1 = AnimElem = 3
value = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 3
var(51) = 1
ignorehitpause = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 3
var(47)=500
ignorehitpause = 1
persistent = 1
[State 832, VarAdd]
type = VarAdd
triggerall = Var(51) >= 2
trigger1 = AnimElem = 3
var(47)=ifelse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 843, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 3
value = ceil(ifelse((-35*FVar(10))>-7,-7,(-35*FVar(10))))
kill = 0
[State 843, TargetPowerAdd]
type = TargetPowerAdd
trigger1 = AnimElem = 3
value = 35

[State 843, ChangeState]
type = ChangeState
trigger1 = AnimElemTime(3) > 1
value = 844

;----------------------------------------------------------------------
; Sandbag Throw 4
[Statedef 844]
type = S
movetype= A
physics = N
anim = 843
sprpriority = 1

[State 840, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
[State 840, Width]
type = Width
trigger1 = 1
edge = 60,0 ; look closer

; Thanks, Warusaki!
[State 820, ChangeAnim]
type = ChangeAnim
triggerall = Anim = 843
trigger1 = AnimElemTime(4) < 0
trigger1 = FVar(11) > FVar(14)
trigger1 = AnimElemTime(1) != 0
trigger1 = AnimElemTime(2) != 0
trigger1 = AnimElemTime(3) != 0
value = 843
elem = AnimElemNo(0) + 1

[State 840, VarSet]
type = VarSet
trigger1 = time = 0
trigger2 = AnimTime = 0
fvar(11) = 0
[State 840, VarSet]
type = VarSet
trigger1 = time = 0
trigger2 = AnimTime = 0
fvar(14) = 0
[State 840, VarSet]
type = VarSet
trigger1 = time = 0
trigger2 = AnimTime = 0
fvar(25) = 0
[State 840, VarSet]
type = VarSet
trigger1 = AnimElemTime(1) = 0
trigger2 = AnimElemTime(2) = 0
trigger3 = AnimElemTime(3) = 0
trigger4 = AnimElemTime(4) = 0
fvar(14) = FVar(11)

[State 840, VarSet]
type = VarAdd
trigger1 = Command = "a"
trigger2 = Command = "b"
trigger3 = Command = "c"
trigger4 = Command = "x"
trigger5 = Command = "y"
trigger6 = Command = "z"
trigger7 = Command = "start"
trigger8 = Command = "parry"
trigger9 = Command = "parry2"
trigger10 = Command = "rich"
fvar(11) = 1

[State 840, TargetState]
type = TargetState
trigger1 = !Time
value = 850
[State 840, TargetState]
type = TargetState
trigger1 = Anim = 843 && AnimElemTime(3) = 0
value = 851
[State 840, TargetState]
type = TargetState
trigger1 = Anim = 843 && AnimElemTime(4) = 0
value = 852
[State 842, TargetState]
type = TargetState
trigger1 = AnimElem = 4
value = 853
[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 25, 0
time = 1

[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S8+Var(24),2
channel = 0
[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S3,2
channel = 2

[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 810, Explod]
type = Explod
trigger1  = AnimElem = 3
anim = 8200+(random%8)
pos = 36,-70
postype = p1
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
ontop = 1

[State 832, HitAdd]
type = HitAdd
trigger1 = AnimElem = 3
value = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 3
var(51) = 1
ignorehitpause = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 3
var(47)=500
ignorehitpause = 1
persistent = 1
[State 832, VarAdd]
type = VarAdd
triggerall = Var(51) >= 2
trigger1 = AnimElem = 3
var(47)=ifelse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 842, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 3
value = ceil(ifelse((-42*FVar(10))>-7,-7,(-42*FVar(10))))
kill = 1
[State 842, TargetPowerAdd]
type = TargetPowerAdd
trigger1 = AnimElem = 3
value = 35

[State 842, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
[Statedef 850]
type = A
movetype = H
physics = N
velset = 0,0
sprpriority = 2

[State 850, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 850, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 850+1000*(Name = "Gill" && AuthorName = "GM"&& Facing = -1)

;----------------------------------------------------------------------
[Statedef 851]
type = A
movetype = H
physics = N
velset = 0,0
sprpriority = 2

[State 850, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 851, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 851+1000*(Name = "Gill" && AuthorName = "GM"&& Facing = -1)

;----------------------------------------------------------------------
[Statedef 852]
type = A
movetype = H
physics = N
velset = 0,0
sprpriority = 2

[State 850, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 852, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 852+1000*(Name = "Gill" && AuthorName = "GM"&& Facing = -1)

;----------------------------------------------------------------------
[Statedef 853]
type = A
movetype = H
physics = N
velset = 0,0
sprpriority = 2

[State 853, VelSet]
type = VelSet
trigger1 = Time = 0
x = -4.5
y = -4.9
[State 853, VelAdd]
type = VelAdd
trigger1 = Time > 1
y = .49

[State 853, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 853+1000*(Name = "Gill" && AuthorName = "GM"&& Facing = -1)

[State 903, EnvShake]
type = EnvShake
trigger1 = Time > 1
trigger1 = Vel Y + Pos Y >= 0
time = 10

[State 903, 2]
type = SelfState
trigger1 = Time > 1
trigger1 = Vel Y + Pos Y >= 0
value = 5100

;----------------------------------------------------------------------
; Sandbag Throw 1
[Statedef 875]
type = S
movetype= A
physics = N
anim = 840
sprpriority = 1
;total throw time = 55~56

[State 810, 1]
type = VarSet
trigger1 = Time = 0
fvar(2) = 0
[State 810, 1]
type = VarSet
triggerall = Time < 7 && !FVar(2)
triggerall = Target,Command = "holdfwd" || Target,Command = "holdback"
trigger1 = Target,Command = "y" || Target,Command = "z"
trigger2 = Target,Command = "b" || Target,Command = "c"
fvar(2) = 1
[State 810, TargetBind]
type = TargetBind
trigger1 = NumTarget
trigger1 = Time < 7 && FVar(2)
pos = 40, 0
[State 810, TargetBind]
type = ChangeState
trigger1 = Time < 7 && FVar(2)
value = 950

[State 810, PlaySnd]
type = PlaySnd
trigger1 = Anim = 840 && AnimElem = 1
value = S800,0
channel = 2

[State 875, Turn]
type = Turn
trigger1 = Anim = 840 && AnimTime = 0

[State 840, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
[State 840, Width]
type = Width
trigger1 = 1
edge = 60,0 ; look closer

[State 840, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 840 && AnimTime = 0
value = 841

; Thanks, Warusaki!
[State 820, ChangeAnim]
type = ChangeAnim
triggerall = Anim = 841
trigger1 = AnimElemTime(4) < 0
trigger1 = FVar(11) > FVar(14)
trigger1 = AnimElemTime(1) != 0
trigger1 = AnimElemTime(2) != 0
trigger1 = AnimElemTime(3) != 0
value = 841
elem = AnimElemNo(0) + 1

[State 840, VarSet]
type = VarSet
trigger1 = time = 0
fvar(11) = 0
[State 840, VarSet]
type = VarSet
trigger1 = time = 0
fvar(14) = 0
[State 840, VarSet]
type = VarSet
trigger1 = time = 0
fvar(25) = 0
[State 840, VarSet]
type = VarSet
trigger1 = AnimElemTime(1) = 0
trigger2 = AnimElemTime(2) = 0
trigger3 = AnimElemTime(3) = 0
trigger4 = AnimElemTime(4) = 0
fvar(14) = FVar(11)

[State 840, PUSH START TO RICH]
type = VarAdd
trigger1 = Command = "a"
trigger2 = Command = "b"
trigger3 = Command = "c"
trigger4 = Command = "x"
trigger5 = Command = "y"
trigger6 = Command = "z"
trigger7 = Command = "start"
trigger8 = Command = "parry"
trigger9 = Command = "parry2"
trigger10 = Command = "rich"
fvar(11) = 1
[State 840, PUSH COIN TO LAG]
type = VarAdd
trigger1 = target, Command = "a"
trigger2 = target, Command = "b"
trigger3 = target, Command = "c"
trigger4 = target, Command = "x"
trigger5 = target, Command = "y"
trigger6 = target, Command = "z"
trigger7 = target, Command = "start"
trigger8 = target, Command = "parry"
trigger9 = target, Command = "parry2"
trigger10 = target, Command = "rich"
fvar(25) = 1

[State 840, TargetState]
type = TargetState
trigger1 = !Time
trigger2 = Anim = 841 && AnimElemTime(1) = 2
value = 850
[State 840, TargetState]
type = TargetState
trigger1 = Anim = 841 && AnimElemTime(1) = 0
value = 860
[State 840, TargetState]
type = TargetState
trigger1 = Anim = 841 && AnimElem = 3
value = 851
[State 840, TargetState]
type = TargetState
trigger1 = Anim = 841 && AnimElem = 4
value = 852
[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
pos = 25, 0
time = 1

[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S8+Var(24),2
channel = 0
[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S3,2
channel = 2

[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 810, Explod]
type = Explod
trigger1  = AnimElem = 3
anim = 8200+(random%8)
pos = 36,-70
postype = p1
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
ontop = 1

[State 832, HitAdd]
type = HitAdd
trigger1 = AnimElem = 3
value = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 3
var(51) = 1
ignorehitpause = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 3
var(47)=500
ignorehitpause = 1
persistent = 1
[State 832, VarAdd]
type = VarAdd
triggerall = Var(51) >= 2
trigger1 = AnimElem = 3
var(47)=ifelse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 810, Hurt]
type = TargetLifeAdd
trigger1 = AnimElem = 3
value = ceil(ifelse((-28*FVar(10))>-7,-7,(-28*FVar(10))))
kill = -1
[State 901, Hurt]
type = TargetPowerAdd
trigger1 = AnimElem = 3
value = 35

[State 901, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 876

;----------------------------------------------------------------------
; Sandbag Throw 2
[Statedef 876]
type = S
movetype= A
physics = N
anim = 841
sprpriority = 1

[State 840, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
[State 840, Width]
type = Width
trigger1 = 1
edge = 60,0 ; look closer

; Thanks, Warusaki!
[State 820, ChangeAnim]
type = ChangeAnim
triggerall = Anim = 841
trigger1 = AnimElemTime(4) < 0
trigger1 = FVar(11) > FVar(14)
trigger1 = AnimElemTime(1) != 0
trigger1 = AnimElemTime(2) != 0
trigger1 = AnimElemTime(3) != 0
value = 841
elem = AnimElemNo(0) + 1

[State 840, VarSet]
type = VarSet
trigger1 = AnimElemTime(1) = 0
trigger2 = AnimElemTime(2) = 0
trigger3 = AnimElemTime(3) = 0
trigger4 = AnimElemTime(4) = 0
fvar(14) = FVar(11)

[State 840, PUSH START TO RICH]
type = VarAdd
trigger1 = Command = "a"
trigger2 = Command = "b"
trigger3 = Command = "c"
trigger4 = Command = "x"
trigger5 = Command = "y"
trigger6 = Command = "z"
trigger7 = Command = "start"
trigger8 = Command = "parry"
trigger9 = Command = "parry2"
trigger10 = Command = "rich"
fvar(11) = 1
[State 840, PUSH COIN TO LAG]
type = VarAdd
trigger1 = target, Command = "a"
trigger2 = target, Command = "b"
trigger3 = target, Command = "c"
trigger4 = target, Command = "x"
trigger5 = target, Command = "y"
trigger6 = target, Command = "z"
trigger7 = target, Command = "start"
trigger8 = target, Command = "parry"
trigger9 = target, Command = "parry2"
trigger10 = target, Command = "rich"
fvar(25) = 1

[State 840, TargetState]
type = TargetState
trigger1 = !Time
value = 850
[State 840, TargetState]
type = TargetState
trigger1 = Anim = 841 && AnimElemTime(3) = 0
value = 851
[State 840, TargetState]
type = TargetState
trigger1 = Anim = 841 && AnimElemTime(4) = 0
value = 852
[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 25, 0
time = 1

[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S8+Var(24),2
channel = 0
[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S3,2
channel = 2

[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 810, Explod]
type = Explod
trigger1  = AnimElem = 3
anim = 8200+(random%8)
pos = 36,-70
postype = p1
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
ontop = 1

[State 832, HitAdd]
type = HitAdd
trigger1 = AnimElem = 3
value = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 3
var(51) = 1
ignorehitpause = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 3
var(47)=500
ignorehitpause = 1
persistent = 1
[State 832, VarAdd]
type = VarAdd
triggerall = Var(51) >= 2
trigger1 = AnimElem = 3
var(47)=ifelse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 841, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 3
value = ceil(ifelse((-28*FVar(10))>-7,-7,(-28*FVar(10))))
kill = -1
[State 841, TargetPowerAdd]
type = TargetPowerAdd
trigger1 = AnimElem = 3
value = 35

[State 841, Change]
type = ChangeState
triggerall = AnimTime = 0
trigger1 = FVar(11)-FVar(25) >= 3
value = 878
[State 841, ChangeState]
type = ChangeState
triggerall = AnimTime = 0
trigger1 = FVar(11)-FVar(25) < 3
value = 877

;----------------------------------------------------------------------
; Sandbag Throw Premature End
[Statedef 877]
type = S
movetype= A
physics = N
anim = 842
sprpriority = 1

[State 840, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
[State 840, Width]
type = Width
trigger1 = 1
edge = 60,0 ; look closer

; Thanks, Warusaki!
[State 820, ChangeAnim]
type = ChangeAnim
triggerall = Anim = 842
trigger1 = AnimElemTime(6) < 0
trigger1 = FVar(11) > FVar(14)
trigger1 = AnimElemTime(1) != 0
trigger1 = AnimElemTime(2) != 0
trigger1 = AnimElemTime(3) != 0
trigger1 = AnimElemTime(4) != 0
trigger1 = AnimElemTime(5) != 0
value = 842
elem = AnimElemNo(0) + 1

[State 840, VarSet]
type = VarSet
trigger1 = time = 0
trigger2 = AnimTime = 0
fvar(11) = 0
[State 840, VarSet]
type = VarSet
trigger1 = time = 0
trigger2 = AnimTime = 0
fvar(14) = 0
[State 840, VarSet]
type = VarSet
trigger1 = time = 0
trigger2 = AnimTime = 0
fvar(25) = 0
[State 840, VarSet]
type = VarSet
trigger1 = AnimElemTime(1) = 0
trigger2 = AnimElemTime(2) = 0
trigger3 = AnimElemTime(3) = 0
trigger4 = AnimElemTime(4) = 0
trigger5 = AnimElemTime(5) = 0
fvar(14) = FVar(11)

[State 840, VarSet]
type = VarAdd
trigger1 = Command = "a"
trigger2 = Command = "b"
trigger3 = Command = "c"
trigger4 = Command = "x"
trigger5 = Command = "y"
trigger6 = Command = "z"
trigger7 = Command = "start"
trigger8 = Command = "parry"
trigger9 = Command = "parry2"
trigger10 = Command = "rich"
fvar(11) = 1

[State 840, TargetState]
type = TargetState
trigger1 = !Time
value = 850
[State 840, TargetState]
type = TargetState
trigger1 = Anim = 842 && AnimElemTime(4) = 0
value = 851
[State 840, TargetState]
type = TargetState
trigger1 = Anim = 842 && AnimElemTime(5) = 0
value = 852
[State 842, TargetState]
type = TargetState
trigger1 = AnimElem = 5
value = 853
[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 25, 0
time = 1

[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S8+Var(24),2
channel = 0
[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S3,2
channel = 2

[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 810, Explod]
type = Explod
trigger1  = AnimElem = 4
anim = 8200+(random%8)
pos = 36,-70
postype = p1
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
ontop = 1

[State 832, HitAdd]
type = HitAdd
trigger1 = AnimElem = 4
value = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 4
var(51) = 1
ignorehitpause = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 4
var(47)=500
ignorehitpause = 1
persistent = 1
[State 832, VarAdd]
type = VarAdd
triggerall = Var(51) >= 2
trigger1 = AnimElem = 4
var(47)=ifelse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 842, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 4
value = ceil(ifelse((-28*FVar(10))>-7,-7,(-28*FVar(10))))
kill = 1
[State 842, TargetPowerAdd]
type = TargetPowerAdd
trigger1 = AnimElem = 4
value = 35

[State 842, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
; Sandbag Throw-- But wait, there's more!
[Statedef 878]
type = S
movetype= A
physics = N
anim = 841
sprpriority = 1

[State 840, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
[State 840, Width]
type = Width
trigger1 = 1
edge = 60,0 ; look closer

; Thanks, Warusaki!
[State 820, ChangeAnim]
type = ChangeAnim
triggerall = Anim = 841
trigger1 = AnimElemTime(2) < 0
trigger1 = FVar(11) > FVar(14)
trigger1 = AnimElemTime(1) != 0
value = 841
elem = AnimElemNo(0) + 1

[State 840, VarSet]
type = VarSet
trigger1 = AnimElemTime(1) = 0
trigger2 = AnimElemTime(2) = 0
fvar(14) = FVar(11)

[State 840, PUSH START TO RICH]
type = VarAdd
trigger1 = Command = "a"
trigger2 = Command = "b"
trigger3 = Command = "c"
trigger4 = Command = "x"
trigger5 = Command = "y"
trigger6 = Command = "z"
trigger7 = Command = "start"
trigger8 = Command = "parry"
trigger9 = Command = "parry2"
trigger10 = Command = "rich"
fvar(11) = 1

[State 840, TargetState]
type = TargetState
trigger1 = !Time
value = 850
[State 840, TargetState]
type = TargetState
trigger1 = Anim = 841 && AnimElemTime(3) = 0
value = 851
[State 840, TargetState]
type = TargetState
trigger1 = Anim = 841 && AnimElemTime(4) = 0
value = 852
[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 25, 0
time = 1

[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S8+Var(24),2
channel = 0
[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S3,2
channel = 2

[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 810, Explod]
type = Explod
trigger1  = AnimElem = 3
anim = 8200+(random%8)
pos = 36,-70
postype = p1
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
ontop = 1

[State 832, HitAdd]
type = HitAdd
trigger1 = AnimElem = 3
value = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 3
var(51) = 1
ignorehitpause = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 3
var(47)=500
ignorehitpause = 1
persistent = 1
[State 832, VarAdd]
type = VarAdd
triggerall = Var(51) >= 2
trigger1 = AnimElem = 3
var(47)=ifelse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 843, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 3
value = ceil(ifelse((-28*FVar(10))>-7,-7,(-28*FVar(10))))
kill = -1
[State 843, TargetPowerAdd]
type = TargetPowerAdd
trigger1 = AnimElem = 3
value = 35

[State 843, ChangeState]
type = ChangeState
trigger1 = AnimElemTime(3) > 1
value = 879

;----------------------------------------------------------------------
; Sandbag Throw 4
[Statedef 879]
type = S
movetype= A
physics = N
anim = 843
sprpriority = 1

[State 840, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
[State 840, Width]
type = Width
trigger1 = 1
edge = 60,0 ; look closer

; Thanks, Warusaki!
[State 820, ChangeAnim]
type = ChangeAnim
triggerall = Anim = 843
trigger1 = AnimElemTime(4) < 0
trigger1 = FVar(11) > FVar(14)
trigger1 = AnimElemTime(1) != 0
trigger1 = AnimElemTime(2) != 0
trigger1 = AnimElemTime(3) != 0
value = 843
elem = AnimElemNo(0) + 1

[State 840, VarSet]
type = VarSet
trigger1 = time = 0
trigger2 = AnimTime = 0
fvar(11) = 0
[State 840, VarSet]
type = VarSet
trigger1 = time = 0
trigger2 = AnimTime = 0
fvar(14) = 0
[State 840, VarSet]
type = VarSet
trigger1 = time = 0
trigger2 = AnimTime = 0
fvar(25) = 0
[State 840, VarSet]
type = VarSet
trigger1 = AnimElemTime(1) = 0
trigger2 = AnimElemTime(2) = 0
trigger3 = AnimElemTime(3) = 0
trigger4 = AnimElemTime(4) = 0
fvar(14) = FVar(11)

[State 840, VarSet]
type = VarAdd
trigger1 = Command = "a"
trigger2 = Command = "b"
trigger3 = Command = "c"
trigger4 = Command = "x"
trigger5 = Command = "y"
trigger6 = Command = "z"
trigger7 = Command = "start"
trigger8 = Command = "parry"
trigger9 = Command = "parry2"
trigger10 = Command = "rich"
fvar(11) = 1

[State 840, TargetState]
type = TargetState
trigger1 = !Time
value = 850
[State 840, TargetState]
type = TargetState
trigger1 = Anim = 843 && AnimElemTime(3) = 0
value = 851
[State 840, TargetState]
type = TargetState
trigger1 = Anim = 843 && AnimElemTime(4) = 0
value = 852
[State 842, TargetState]
type = TargetState
trigger1 = AnimElem = 4
value = 853
[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 25, 0
time = 1

[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S8+Var(24),2
channel = 0
[State 810, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S3,2
channel = 2

[State 810, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 810, Explod]
type = Explod
trigger1  = AnimElem = 3
anim = 8200+(random%8)
pos = 36,-70
postype = p1
ownpal = 1
ignorehitpause = 1
bindtime = 1
removeongethit = 1
ontop = 1

[State 832, HitAdd]
type = HitAdd
trigger1 = AnimElem = 3
value = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 3
var(51) = 1
ignorehitpause = 1
[State 832, VarAdd]
type = VarAdd
trigger1 = AnimElem = 3
var(47)=500
ignorehitpause = 1
persistent = 1
[State 832, VarAdd]
type = VarAdd
triggerall = Var(51) >= 2
trigger1 = AnimElem = 3
var(47)=ifelse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 842, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 3
value = ceil(ifelse((-28*FVar(10))>-7,-7,(-28*FVar(10))))
kill = 1
[State 842, TargetPowerAdd]
type = TargetPowerAdd
trigger1 = AnimElem = 3
value = 35

[State 842, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
[Statedef 860]
type = A
movetype = H
physics = N
velset = 0,0
sprpriority = 2

[State 860, Turn]
type = Turn
trigger1 = Time = 1
persistent = 0

[State 850, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 850, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 850

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 888]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = NULL;ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
trigger3 = AnimTime = 0
trigger3 = Anim = 105035 && Name = "Gill" && AuthorName = "GM" && Facing = -1
trigger4 = Name = "Gill" && AuthorName = "GM" && Facing = -1
trigger4 = Time = 0
trigger4 = Anim != 105035
trigger4 = (Anim != [105051, 105059]) && (Anim != [105061, 105069])
trigger4 = Anim != 105090
value = 5050+100000*(Name = "Gill" && AuthorName = "GM" && Facing = -1)

[State 5050, 2] ;Coming down anim
type = NULL;ChangeAnim
trigger1 = (anim = [5050,5059]) || ((Name = "Gill" && AuthorName = "GM" && Facing = -1) && (Anim = [105050,105059]))
trigger1 = Vel Y >= ifelse(anim = 5050+100000*(Name = "Gill" && AuthorName = "GM" && Facing = -1), 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3]
type = VelAdd
trigger1 = 1
y = .49

[State 5050, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 816, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 20

[State 5050, 6]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;HIT_BOUNCE

;===============================================================================
;                                    SPECIALS
;===============================================================================

;----------------------------------------------------------------------------------
; Dashing Straight
[Statedef 1000]
type = S
movetype = A
physics = N
ctrl = 0
anim = 1000
sprpriority = 2
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
juggle = 0
facep2 = 1

[State 1020, Width]
type = Width
trigger1 = Anim = 1010
value = 30,30

[State 1000, VarSet]
type = VarSet
trigger1 = Time = 0
var(22) = ifElse((Command = "CB_hp" || Command = "ccCB_hp"),2,ifElse((Command = "CB_mp" || Command = "ccCB_mp"),1,0))

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S40,4
channel = 13

[State 1020, 1]
type = ChangeAnim
triggerall = Anim = 1000 && Time > ifElse(Var(30),5,0)
trigger1 = !Var(22) && Time = 8
trigger2 = Var(22) = 1 && Time = 15
trigger3 = Var(22) = 2 && Time = 20
trigger4 = P2BodyDist X <= 25
value = 1010

[State 1000, StateTypeSet]
type = StateTypeSet
trigger1 = Anim = 1010 && AnimElem = 4
movetype = I

[State 1020, VelSet]
type = VelSet
trigger1 = Time = 1
x = 8
[State 1020, VelAdd]
type = VelAdd;Mul
trigger1 = Anim = 1010
x = ifElse(Vel X <= 0,0,-0.625);.92
[State 1020, VelSet]
type = VelSet
trigger1 = Anim = 1010 && Vel X <= 0;AnimElemTime(4) = 4
x = 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1010 && AnimElemTime(1) = 0
value = S8+Var(24),10
channel = 0
[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1010 && AnimElemTime(1) = 0
value = S0,2
channel = 1
[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1010 && AnimElemTime(4) = 4
value = S100,1
channel = 13

[State 220, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13))
trigger1 = Anim = 1010 && AnimElem = 2
attr = S, SA
damage = ceil(ifElse(((77+Var(22)*7)*FVar(10))<7,7,((77+Var(22)*7)*FVar(10)))),ceil(ifElse(((77+Var(22)*7)/8*FVar(10))<7,7,((77+Var(22)*7)/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-70)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -8.125
guard.velocity = -8.125
guard.ctrltime = 15
air.type = Low
air.velocity = -4,-6.921875
airguard.velocity = -5.33,-1
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 3

[State 100, Explod]
type = Explod
trigger1 = Time = 1
anim = 8045
pos = -30,0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 3
supermovetime = -1
scale = .5,.5
removetime = 18
removeongethit = 1
persistent = 0

[State 1000, ChangeState]
type = ChangeState
trigger1 = Anim = 1010 && AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Dashing Upper
[Statedef 1100]
type = S
movetype = A
physics = N
ctrl = 0
anim = 1100
sprpriority = 2
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
juggle = 0
facep2 = 1

[State 1000, VarSet]
type = VarSet
trigger1 = Time = 0
var(22) = ifElse((Command = "CB_hk" || Command = "ccCB_hk"),2,ifElse((Command = "CB_mk" || Command = "ccCB_mk"),1,0))

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S40,4
channel = 13

[State 1020, 1]
type = ChangeAnim
triggerall = Anim = 1100 && Time > ifElse(Var(30),5,0)
trigger1 = !Var(22) && Time = 8
trigger2 = Var(22) = 1 && Time = 15
trigger3 = Var(22) = 2 && Time = 20
trigger4 = P2BodyDist X <= 25
value = 1110

[State 1000, StateTypeSet]
type = StateTypeSet
trigger1 = Anim = 1110 && AnimElem = 4
movetype = I

[State 1020, VelSet]
type = VelSet
trigger1 = Time = 1
x = 8
[State 1020, VelAdd]
type = VelAdd
trigger1 = Anim = 1110
x = ifElse(Vel X <= 0,0,-0.625)
[State 1020, VelSet]
type = VelSet
trigger1 = Anim = 1110 && Vel X <= 0;AnimElemTime(4) = 6
x = 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1110 && AnimElemTime(1) = 0
value = S8+Var(24),9
channel = 0
[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1110 && AnimElemTime(1) = 0
value = S0,2
channel = 1
[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1110 && AnimElemTime(4) = 5
value = S100,1
channel = 13

[State 220, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13))
trigger1 = Anim = 1110 && AnimElem = 3
attr = S, SA
damage = ceil(ifElse(((84+Var(22)*7)*FVar(10))<7,7,((84+Var(22)*7)*FVar(10)))),ceil(ifElse(((84+Var(22)*7)/8*FVar(10))<7,7,((84+Var(22)*7)/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-84)
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -8.125
guard.velocity = -8.125
guard.ctrltime = 15
air.type = Low
air.velocity = -4,-6.921875
airguard.velocity = -5.33,-1
air.hittime = 15
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 3

[State 100, Explod]
type = Explod
trigger1 = Time = 1
anim = 8045
pos = -30,0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 3
supermovetime = -1
scale = .5,.5
removetime = 18
removeongethit = 1
persistent = 0

[State 1000, ChangeState]
type = ChangeState
trigger1 = Anim = 1110 && AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Dashing Ground Straight
[Statedef 1200]
type = S
movetype = A
physics = N
ctrl = 0
anim = 1000
sprpriority = 2
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
juggle = 0
facep2 = 1

[State 1000, VarSet]
type = VarSet
trigger1 = Time = 0
var(22) = ifElse((Command = "CB_DF_hp" || Command = "ccCB_DF_hp"),2,ifElse((Command = "CB_DF_mp" || Command = "ccCB_DF_mp"),1,0))

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S40,4
channel = 13

[State 1020, 1]
type = ChangeAnim
triggerall = Anim = 1000 && Time > ifElse(Var(30),5,0)
trigger1 = !Var(22) && Time = 8
trigger2 = Var(22) = 1 && Time = 15
trigger3 = Var(22) = 2 && Time = 20
trigger4 = P2BodyDist X <= 25
value = 1200

[State 1000, StateTypeSet]
type = StateTypeSet
trigger1 = Anim = 1200 && AnimElem = 4
movetype = I

[State 1020, VelSet]
type = VelSet
trigger1 = Time = 1
x = 8
[State 1020, VelAdd]
type = VelAdd
trigger1 = Anim = 1200
x = ifElse(Vel X <= 0,0,-0.625)
[State 1020, VelSet]
type = VelSet
trigger1 = Anim = 1200 && Vel X <= 0;AnimElemTime(3) = 4
x = 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1200 && AnimElemTime(1) = 0
value = S8+Var(24),9
channel = 0
[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1200 && AnimElemTime(1) = 0
value = S0,2
channel = 1
[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1200 && AnimElemTime(4) = 4
value = S100,1
channel = 13

[State 220, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13))
trigger1 = Anim = 1200 && AnimElem = 3
attr = C, SA
damage = ceil(ifElse(((70+Var(22)*7)*FVar(10))<7,7,((70+Var(22)*7)*FVar(10)))),ceil(ifElse(((70+Var(22)*7)/8*FVar(10))<7,7,((70+Var(22)*7)/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = L
hitflag = MAF
priority = 5, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-10),ceil(fvar(27):=-21)
hitsound = S3,2
guardsound = S5,0
ground.type = Trip
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -1,-7.3671875
guard.velocity = -8.125
guard.ctrltime = 15
air.type = High
air.velocity = -1,-7.3671875
airguard.velocity = -6.67,-1
air.hittime = 15
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 1
fall = 1
fall.recover = !Var(30)
air.recover = !Var(30)

[State 100, Explod]
type = Explod
trigger1 = Time = 1
anim = 8045
pos = -30,0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 3
supermovetime = -1
scale = .5,.5
removetime = 18
removeongethit = 1
persistent = 0

[State 1000, ChangeState]
type = ChangeState
trigger1 = Anim = 1200 && AnimTime = 0
value = 11
ctrl = 1

;----------------------------------------------------------------------------------
; Dashing Ground Upper
[Statedef 1300]
type = S
movetype = A
physics = N
ctrl = 0
anim = 1100
sprpriority = 2
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
juggle = 0
facep2 = 1

[State 1000, VarSet]
type = VarSet
trigger1 = Time = 0
var(22) = ifElse((Command = "CB_DF_hk" || Command = "ccCB_DF_hk"),2,ifElse((Command = "CB_DF_mk" || Command = "ccCB_DF_mk"),1,0))

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S40,4
channel = 13

[State 1020, 1]
type = ChangeAnim
triggerall = Anim = 1100 && Time > ifElse(Var(30),5,0)
trigger1 = !Var(22) && Time = 8
trigger2 = Var(22) = 1 && Time = 15
trigger3 = Var(22) = 2 && Time = 20
trigger4 = P2BodyDist X <= 25
value = 1300

[State 1000, StateTypeSet]
type = StateTypeSet
trigger1 = Anim = 1300 && AnimElem = 4
movetype = I

[State 1020, VelSet]
type = VelSet
trigger1 = Time = 1
x = 8
[State 1020, VelAdd]
type = VelAdd
trigger1 = Anim = 1300
x = ifElse(Vel X <= 0,0,-0.625)
[State 1020, VelSet]
type = VelSet
trigger1 = Anim = 1300 && Vel X <= 0;AnimElemTime(4) = 0
x = 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1300 && AnimElemTime(1) = 0
value = S8+Var(24),10
channel = 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1300 && AnimElemTime(1) = 0
value = S0,2
channel = 1

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1300 && AnimElemTime(4) = 4
value = S100,1
channel = 13

[State 220, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13))
trigger1 = Anim = 1300 && AnimElem = 3
attr = S, SA
damage = ceil(ifElse(((77+Var(22)*7)*FVar(10))<7,7,((77+Var(22)*7)*FVar(10)))),ceil(ifElse(((77+Var(22)*7)/8*FVar(10))<7,7,((77+Var(22)*7)/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-84)
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -6.5,-4.5
guard.velocity = -8.125
guard.ctrltime = 15
air.type = Low
air.velocity = -6,-5.671875
airguard.velocity = -5.33,-1
air.hittime = 15
ground.cornerpush.veloff = 0;-14*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
envshake.time = 10
envshake.ampl = 3
forcestand = 1

[State 100, Explod]
type = Explod
trigger1 = Time = 1
anim = 8045
pos = -30,0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 3
supermovetime = -1
scale = .5,.5
removetime = 18
removeongethit = 1
persistent = 0

[State 1000, ChangeState]
type = ChangeState
trigger1 = Anim = 1300 && AnimTime = 0
value = 11
ctrl = 1

;----------------------------------------------------------------------------------
; Rising Headbutt
[Statedef 1400]
type = S
movetype = A
physics = N
ctrl = 0
anim = 1400
sprpriority = 2
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
juggle = 0
facep2 = 1

[State 1400, PosSet]
type = PosSet
trigger1 = !Time
y = 0

[State 1000, VarSet]
type = VarSet
trigger1 = Time = 0
var(22) = ifElse((Command = "CD_hp" || Command = "ccCD_hp"),2,ifElse((Command = "CD_mp" || Command = "ccCD_mp"),1,0))

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S40,4
channel = 13

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(1) = 0
value = S8+Var(24),7
channel = 0

[State 1000, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElemTime(3) = 0
statetype = A

[State 1000, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 1400, NotHitBy]
type = NotHitBy
trigger1 = Var(24) && AnimElemTime(4) < 0
value = SCA,AP

[State 220, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13))
trigger1 = AnimElem = 3
attr = A, SA
damage = ceil(ifElse(((98+Var(22)*7)*FVar(10))<7,7,((98+Var(22)*7)*FVar(10)))),ceil(ifElse(((98+Var(22)*7)/8*FVar(10))<7,7,((98+Var(22)*7)/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-84)
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -6,-5.671875
guard.velocity = -8.125
guard.ctrltime = 15
air.type = Low
air.velocity = -6,-5.671875
airguard.velocity = -6.67,-1
air.hittime = 15
ground.cornerpush.veloff = 0;-14*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
envshake.time = 10
envshake.ampl = 3
forcestand = 1

[State 1300, Helper]
type = Helper
triggerall = !NumHelper(8020)
trigger1 = AnimElemTime(3) = 0
id = 8020
name = "jump Effect"
pos =0,0
postype = P1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1500, VelSet]
type = VelSet
trigger1 = AnimElemTime(3) = 0
x = 6.5+(Var(22)*2)
y = -12

[State 1500, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(3) > 1
y = 1.125

[State 1500, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = 0
y = 0

[State 1000, ChangeState]
type = ChangeState
triggerall = AnimElemTime(3) > 2
trigger1 = Pos Y + Vel Y >= 0
value = 1405
ctrl = 1

;----------------------------------------------------------------------------------
; Custom Land State
[Statedef 1405]
type    = S
physics = S
ctrl = 0
anim = 47
velset = 0,0

[State 52, Explod]
type = Explod
trigger1 = Time = 0
anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S40,2
channel = 13

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Turn Punch
[Statedef 1500]
type = S
movetype = A
physics = N
ctrl = 0
anim = 1500
sprpriority = 2
velset = 0,0
poweradd = 70*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1)
juggle = 0
facep2 = 1

[State 1020, Width]
type = Width
trigger1 = Anim = 1505
value = 30,30

[State 1000, VarSet]
type = VarSet
triggerall = NumHelper(10380)
trigger1 = Time = 0
var(22) = helper(10380), Var(22)

[State 300, HitBy]
type = HitBy
triggerall = Var(24) = 10
trigger1 = Time <= 10
value = SCA,NT,ST,HT

[State 1020, VelSet]
type = VelSet
trigger1 = Anim = 1500 && AnimElemTime(5) = 3
x = 7+Var(22)
[State 1020, VelMul]
type = VelAdd
trigger1 = Time > 24;Anim = 1505
x = ifElse(Vel X <= 0,0,-.625);.92
[State 1020, VelSet]
type = VelSet
trigger1 = Anim = 1505 && Vel X <= 0;Anim = 1505 && AnimElemTime(1) >= (7+(Var(22)*3))
x = 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1500 && AnimElemTime(3) = 0
value = S9+Var(24),0
channel = 0
[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1500 && AnimElemTime(5) = 0
value = S40,4
channel = 13

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1500 && AnimTime = 0
value = S0,2
channel = 1
[State 1500, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1500 && AnimTime = 0;Anim = 1505 && AnimElemTime(1) = 1
value = S9+Var(24),Var(22)
persistent = 0

[State 1500, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 1500 && AnimTime = 0
value = 1505
[State 1500, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 1505 && AnimElemTime(1) > (6+(Var(22)*3));Time > 37
value = 1510

[State 1000, StateTypeSet]
type = StateTypeSet
trigger1 = Anim = 1510
movetype = I

[State 100, Explod]
type = Explod
trigger1 = Anim = 1500 && AnimElemTime(5) = 0
anim = 8045
pos = -30,0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 3
supermovetime = -1
scale = .5,.5
removetime = 18;7;+;4 ticks before it stops...
removeongethit = 1
persistent = 0

[State 220, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13))
trigger1 = Anim = 1505
attr = S, SA
damage = ceil(ifElse(((helper(247), Var(7))*FVar(10))<7,7,((helper(247), Var(7))*FVar(10)))),ceil(ifElse(((helper(247), Var(7))/8*FVar(10))<7,7,((helper(247), Var(7))/8*FVar(10))))
animtype = Heavy
air.animtype = Back
fall.animtype = Back
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(12*(2-(Var(30)>0))/2),ceil(11*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(26):=-70)
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -8.125
guard.velocity = -8.125
guard.ctrltime = 15
air.type = Low
air.velocity = -4, -6;5.25
airguard.velocity = -5.33,-1
air.hittime = 15
ground.cornerpush.veloff = 0;-14*(2-(Var(30)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifElse(Var(51),70,143)*(1000+Var(40))/1000*IfElse((Var(29)||Var(30)),0,1),35*(1000+Var(41))/1000*IfElse((Var(29)||Var(30)),0,1)
givepower = 35,35
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
air.fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 3
persistent = 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1510 && AnimElemTime(3) = 9
value = S100,1
channel = 13

[State 1000, ChangeState]
type = ChangeState
trigger1 = Anim = 1510 && AnimTime = 0
value = 0
ctrl = 1

;===============================================================================
;                                      SUPERS
;===============================================================================

;----------------------------------------------------------------------------------
; Crazy Buffalo
[Statedef 3000]
type    = S
physics = N
movetype= A
ctrl = 0
velset = 0,0
facep2 = 1
juggle = 0

[State 3000, VarSet]
type = VarSet
trigger1 = Time = 0
var(22) = IfElse(((Command = "CBFBF_mp" || Command = "ccCBFBF_mp") && Power >= 2000) || ((Command = "CBFBF_hp" || Command = "ccCBFBF_hp") && (Power >= 2000 && Power < 3000)),1,IfElse((Command = "CBFBF_hp" || Command = "ccCBFBF_hp") && Power >= 3000,2,0))

[State 1100, VarSet]
type = VarSet
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 2 || (Var(10) = 4 && (100*life/const(data.life))>30) || (Var(10) = 4 && (100*life/const(data.life))<=30 && !Var(17)) || Var(10) = 5
trigger1 = Time = 0
var(22) = 0

[State 1100, VarSet]
type = VarSet
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 3 || (Var(10) = 4 && (100*life/const(data.life))<=30 && Var(17)) || Var(10) = 6
trigger1 = Time = 0
var(22) = 2

[State 1100, VarSet]
type = VarSet
triggerall = Var(29)
trigger1 = Time = 0
var(22) = 2

[State 1100, VarSet]
type = VarSet
triggerall = Var(30)
trigger1 = Time = 0
var(22) = 0

[State 3000, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = IfElse(!Var(22),54,IfElse(Var(22) = 1,60,65))

[State 3000, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 3000

[State 3000, SuperPause]
type = SuperPause
trigger1 = Time = 4
time = 50+(Var(22)*2)
movetime = 50+(Var(22)*2)
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0
[State 3000, Unguardable]
type = VarSet
trigger1 = Time = 4 && enemyNear, stateNo != [120,155]
var(48) = 50+(Var(22)*2)

[State 3000, PowerAdd]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 1 || !Var(10)
trigger1 = Time = 0
value = IfElse (!Var(22),-1000,IfElse(Var(22) = 1, -2000, -3000))

[State 3000, PowerAdd]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 5
trigger1 = Time = 0
value = -1000

[State 3000, PowerAdd]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 2
trigger1 = Time = 0
value = -1500

[State 3000, PowerAdd]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 3 || Var(10) = 6 || (Var(10) = 4 && (100*life/const(data.life))>30) || (Var(10) = 4 && (100*life/const(data.life))<=30 && Var(17)) || Var(10) = 6
trigger1 = Time = 0
value = -3000

[State 3000, PowerAdd]
type = PowerAdd
triggerall = Var(30)
trigger1 = Time = 0
value = -3000

[State 3000, PowerAdd]
type = PowerAdd
triggerall = Var(29)
trigger1 = Time = 0
value = -1000

[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
var(17) = 0

[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
var(29) = 0

[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
var(30) = 0

[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
var(12) = 0

[State 3000, VarSet2]
type = VarSet
trigger1 = Time = 0
fvar(14) = 0

[State 3000, AfterImage]
type = AfterImage
triggerall = !Var(31) && PrevStateNo != [3000,3999]
trigger1 = Time = 3
time = 999
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast = ifElse(!Var(22), 128, ifElse(Var(22) = 1, 50, 150)),ifElse(!Var(22), 128, ifelse(Var(22) = 1, 50, 50)),ifElse(!Var(22), 128, ifElse(Var(22) = 1, 150, 50))
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 3000, Helper]
type = Helper
trigger1 = Time = 5
ID = 8000
name = "Super"
pos = ceil(14*Const(size.xscale)),ceil(-77*Const(size.yscale));ceil(-22*Const(size.xscale)),ceil(-53*Const(size.yscale))
postype = P1
stateno = ifElse((Var(10) = [4,6]),8010,8000)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 1
size.yscale = 1

[State 1020, Width]
type = Width
trigger1 = Anim = 3005 && AnimElem = 3
trigger2 = Anim = 3015 && AnimElem = 9
value = 30,30

[State 3000, PlaySnd]
type = PlaySnd
trigger1 = Time = 5
value = S8+Var(24),7
persistent = 0
channel = 0

[State 3000, PlaySnd]
type = PlaySnd
trigger1 = Time = 57
value = S8+Var(24),8
persistent = 0
channel = 0

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Anim = 3005 && AnimElemTime(2) = 1
trigger2 = Anim = 3010 && AnimElemTime(3) = 1
trigger3 = Anim = 3015 && AnimElemTime(7) = 1
value = S0,2
channel = 1

[State 1020, StateTypeSet]
type = StateTypeSet
trigger1 = Time < 5 || Time > 54
movetype = A

[State 1020, StateTypeSet]
type = StateTypeSet
trigger1 = Time = [5,54]
trigger2 = Anim = 3015 && AnimElem = 10
movetype = I

[State 100, Explod]
type = Explod
trigger1 = Time = 55
anim = 8045
pos = -30,0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 3
supermovetime = -1
scale = .5,.5
removetime = 18;7;+;4 ticks before it stops...
removeongethit = 1
persistent = 0

[State 3000, ChangeAnim]
type = ChangeAnim
triggerall = NumHelper(10380)
triggerall = (helper(10380), Var(26) = [1,5]) || (command = "hold_a" || command = "hold_b" || command = "hold_c")
trigger1 = Anim = 3000 && AnimTime = 0
trigger2 = (Anim = 3005 || Anim = 3010) && AnimTime = 0 && !Var(22) && Var(12) < 2
trigger3 = (Anim = 3005 || Anim = 3010) && AnimTime = 0 && Var(22) = 1 && Var(12) < 3
trigger4 = (Anim = 3005 || Anim = 3010) && AnimTime = 0 && Var(22) = 2 && Var(12) < 4
value = 3010

[State 3000, ChangeAnim]
type = ChangeAnim
triggerall = NumHelper(10380)
triggerall = (helper(10380), Var(26) != [1,5]) || (command != "hold_a" && command != "hold_b" && command != "hold_c")
trigger1 = Anim = 3000 && AnimTime = 0
trigger2 = (Anim = 3005 || Anim = 3010) && AnimTime = 0 && !Var(22) && Var(12) < 2
trigger3 = (Anim = 3005 || Anim = 3010) && AnimTime = 0 && Var(22) = 1 && Var(12) < 3
trigger4 = (Anim = 3005 || Anim = 3010) && AnimTime = 0 && Var(22) = 2 && Var(12) < 4
value = 3005

[State 3000, ChangeAnim]
type = ChangeAnim
trigger1 = (Anim = 3005 || Anim = 3010) && AnimTime = 0 && !Var(22) && Var(12) = 2
trigger2 = (Anim = 3005 || Anim = 3010) && AnimTime = 0 && Var(22) = 1 && Var(12) = 3
trigger3 = (Anim = 3005 || Anim = 3010) && AnimTime = 0 && Var(22) = 2 && Var(12) = 4
value = 3015

[State 3000, VelSet]
type = VelSet
trigger1 = (Anim = 3005 || Anim = 3010) && AnimElemTime(2) < 0
trigger2 = Anim = 3015 && AnimElemTime(5) < 0
trigger3 = Anim = 3015 && AnimElemTime(8) >= 8
x = 0

[State 3000, VelSet]
type = VelSet
trigger1 = (Anim = 3005 || Anim = 3010) && AnimElemTime(2) = 1
trigger2 = Anim = 3015 && AnimElemTime(5) = 1
x = 8

[State 3000, VelSet]
type = VelMul
trigger1 = (Anim = 3005 || Anim = 3010) && AnimElemTime(2) > 1
trigger2 = Anim = 3015 && AnimElemTime(5) > 1
x = .92

[State 3000, VarAdd]
type = VarAdd
trigger1 = (Anim = 3005 || Anim = 3010) && AnimElemTime(1) = 1
var(12) = 1

[State 3000, Heavy 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13))
triggerall = Var(22) = 2 && Var(12) < 2
trigger1 = Anim = 3005 && AnimElem = 3
attr = S, HA
damage = ceil(ifElse((77*FVar(10))<7,7,(77*FVar(10)))),ceil(ifElse((77/8*FVar(10))<7,7,(77/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 8,7
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-70)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8.125
guard.velocity = -8.125
guard.ctrltime = 20
air.type = Low
air.velocity = -6,-5.671875
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1

[State 3000, Heavy 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13))
triggerall = Var(22) = 2 && Var(12) < 2
trigger1 = Anim = 3010 && AnimElem = 4
attr = S, HA
damage = ceil(ifElse((77*FVar(10))<7,7,(77*FVar(10)))),ceil(ifElse((77/8*FVar(10))<7,7,(77/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 8,7
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-84)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8.125
guard.velocity = -8.125
guard.ctrltime = 20
air.type = Low
air.velocity = -4,-6.921875
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1

[State 3000, Medium 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13))
triggerall = Var(22) = 1 && Var(12) < 2
trigger1 = Anim = 3005 && AnimElem = 3
attr = S, HA
damage = ceil(ifElse((63*FVar(10))<7,7,(63*FVar(10)))),ceil(ifElse((63/8*FVar(10))<7,7,(63/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 8,7
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-70)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8.125
guard.velocity = -8.125
guard.ctrltime = 20
air.type = Low
air.velocity = -6,-5.671875
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1

[State 3000, Medium 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30) || FVar(13))
triggerall = Var(22) = 1 && Var(12) < 2
trigger1 = Anim = 3010 && AnimElem = 4
attr = S, HA
damage = ceil(ifElse((63*FVar(10))<7,7,(63*FVar(10)))),ceil(ifElse((63/8*FVar(10))<7,7,(63/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 8,7
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-84)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8.125
guard.velocity = -8.125
guard.ctrltime = 20
air.type = Low
air.velocity = -4,-6.921875
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1

[State 3000, 4]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = Anim = 3005 && AnimElem = 3 && (!Var(22) || (Var(22) && Var(12) > 1))
attr = S, HA
damage = ceil(ifElse((56*FVar(10))<7,7,(56*FVar(10)))),ceil(ifElse((56/8*FVar(10))<7,7,(56/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 8,7
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-70)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8.125
guard.velocity = -8.125
guard.ctrltime = 20
air.type = Low
air.velocity = -6,-5.671875
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1

[State 3000, 4]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = Anim = 3010 && AnimElem = 3 && (!Var(22) || (Var(22) && Var(12) > 1))
attr = S, HA
damage = ceil(ifElse((56*FVar(10))<7,7,(56*FVar(10)))),ceil(ifElse((56/8*FVar(10))<7,7,(56/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 8,7
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-84)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8.125
guard.velocity = -8.125
guard.ctrltime = 20
air.type = Low
air.velocity = -4,-6.921875
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1

[State 3000, Light Finish]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
triggerall = !Var(22)
trigger1 = Anim = 3015 && AnimElem = 9
attr = S, HA
damage = ceil(ifElse((84*FVar(10))<7,7,(84*FVar(10)))),ceil(ifElse((84/8*FVar(10))<7,7,(84/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 8,7
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-70)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -6,-5.671875
guard.velocity = -8.125
guard.ctrltime = 20
air.type = Low
air.velocity = -6,-5.34375
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
envshake.time = 12
envshake.ampl = 3
forcestand = 1

[State 3000, Medium Finish]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
triggerall = Var(22) = 1
trigger1 = Anim = 3015 && AnimElem = 9
attr = S, HA
damage = ceil(ifElse((105*FVar(10))<7,7,(105*FVar(10)))),ceil(ifElse((105/8*FVar(10))<7,7,(105/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 8,7
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-70)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -6,-5.671875
guard.velocity = -8.125
guard.ctrltime = 20
air.type = Low
air.velocity = -6,-5.34375
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
envshake.time = 12
envshake.ampl = 3
forcestand = 1

[State 3000, Heavy Finish]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
triggerall = Var(22) = 2
trigger1 = Anim = 3015 && AnimElem = 9
attr = S, HA
damage = ceil(ifElse((112*FVar(10))<7,7,(112*FVar(10)))),ceil(ifElse((112/8*FVar(10))<7,7,(112/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 8,7
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-20),ceil(fvar(27):=-70)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -6,-5.671875
guard.velocity = -8.125
guard.ctrltime = 20
air.type = Low
air.velocity = -6,-5.34375
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
envshake.time = 12
envshake.ampl = 3
forcestand = 1

[State 1000, ChangeState]
type = ChangeState
trigger1 = Anim = 3015 && AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Gigaton Blow
[Statedef 3100]
type    = S
physics = N
movetype= A
anim = 3100
ctrl = 0
velset = 0,0
sprpriority = 2
facep2 = 1
juggle = 0

[State 3100, VarSet]
type = VarSet
trigger1 = !Time
fvar(11) = 0

[State 3100, VarSet]
type = VarSet
trigger1 = !Time
var(22) = 2

[State 3100, NotHitBy]
type = NotHitBy
trigger1 = !Time
value = SCA
time = 65

[State 3100, SuperPause]
type = SuperPause
trigger1 = Time = 4
time = 54
movetime = 54
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0
[State 3000, Unguardable]
type = VarSet
trigger1 = Time = 4 && enemyNear, stateNo != [120,155]
var(48) = 54

[State 3100, PlaySnd]
type = PlaySnd
trigger1 = Time = 5
value = S8+Var(24),5
channel = 0

[State 3100, PowerAdd]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 0 || Var(10) = 1
trigger1 = Time = 0
value = -3000

[State 3100, PowerAdd]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 5
trigger1 = Time = 0
value = -1000

[State 3100, PowerAdd]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 2
trigger1 = Time = 0
value = -1500

[State 3100, PowerAdd]
type = PowerAdd
triggerall = !Var(29) && !Var(30)
triggerall = Var(10) = 3 || Var(10) = 6 || (Var(10) = 4 && (100*life/const(data.life))>30) || (Var(10) = 4 && (100*life/const(data.life))<=30 && Var(17)) || Var(10) = 6
trigger1 = Time = 0
value = -3000

[State 3100, PowerAdd]
type = PowerAdd
triggerall = Var(30)
trigger1 = Time = 0
value = -3000

[State 3100, PowerAdd]
type = PowerAdd
triggerall = Var(29)
trigger1 = Time = 0
value = -1000

[State 3100, VarSet2]
type = VarSet
trigger1 = Time = 0
var(17) = 0

[State 3100, VarSet2]
type = VarSet
trigger1 = Time = 0
var(29) = 0

[State 3100, VarSet2]
type = VarSet
trigger1 = Time = 0
var(30) = 0

[State 3100, VarSet2]
type = VarSet
trigger1 = Time = 0
fvar(14) = 0

[State 3100, AfterImage]
type = AfterImage
trigger1 = !Time
time = 999
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast =  150,50,50
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 3000, Helper]
type = Helper
trigger1 = Time = 5
ID = 8000
name = "Super"
pos = ceil(-35*Const(size.xscale)),ceil(-64*Const(size.yscale))
postype = P1
stateno = ifElse((Var(10) = [4,6]),8010,8000)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 1
size.yscale = 1

[State 3100, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(12) = 1
value = S8+Var(24),6
channel = 0

[State 3100, PlaySnd]
type = PlaySnd
trigger1 = AnimElemTime(12) = 1
value = S200,2
channel = 1

[State 100, Explod]
type = Explod
trigger1 = AnimElemTime(12) = 1
anim = 8045
pos = -30,0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 3
supermovetime = -1
scale = .5,.5
removetime = 18;7;+;4 ticks before it stops...
removeongethit = 1
persistent = 0

[State 3100, Explod]
type = Explod
trigger1 = AnimElemTime(12) = 1
anim = 4100
ID = 4100
pos = 0,0
postype = p1
ownpal = 1
bindtime = -1
sprpriority = 1
supermovetime = -1
scale = Const(Size.xscale),Const(Size.yscale)
removetime = -2
removeongethit = 1
ignorehitpause = 0
persistent = 0

[State 3100, ModifyExplod]
type = ModifyExplod
trigger1 = AnimElemTime(12) = 1
trigger2 = AnimElemTime(12) = 5
trigger3 = AnimElemTime(12) = 7
trigger4 = AnimElemTime(12) = 8
trigger5 = AnimElemTime(12) = 10
trigger6 = AnimElemTime(12) = 13
trigger7 = AnimElemTime(12) = 15
trigger8 = AnimElemTime(12) = 16
sprpriority = 3
ignorehitpause = 0

[State 3100, ModifyExplod]
type = ModifyExplod
trigger1 = AnimElemTime(12) = 2
trigger2 = AnimElemTime(12) = 6
trigger3 = AnimElemTime(12) = 9
trigger4 = AnimElemTime(12) = 11
trigger5 = AnimElemTime(12) = 14
trigger6 = AnimElemTime(12) = 17
sprpriority = 1
ignorehitpause = 0

[State 3000, VelSet]
type = VelSet
trigger1 = AnimTime = 0
x = 0

[State 3000, VelSet]
type = VelSet
trigger1 = AnimElemTime(12) = 1
x = 15

[State 3000, VelMul]
type = VelMul
trigger1 = AnimElemTime(12) > 1
x = .975

[State 3000, Width]
type = Width
trigger1 = AnimElem = 12
value = 15,15

[State 3000, 1]
type = HitDef
triggerall = !FVar(18) ;&& (FVar(19) = 0 || Var(30))
trigger1 = AnimElem = 12, = 1
attr = S, HA
damage = ceil(ifElse((63*FVar(10))<7,7,(63*FVar(10)))),ceil(ifElse((63/8*FVar(10))<7,7,(63/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 6,5
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-70)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8.125
guard.velocity = -8.125
guard.ctrltime = 20
air.type = Low
air.velocity = -4,-6.921875;-5.77,-8.125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1

[State 3000, 2]
type = HitDef
triggerall = !FVar(18) ;&& (FVar(19) = 0 || Var(30))
trigger1 = AnimElem = 12, = 3
attr = S, HA
damage = ceil(ifElse((63*FVar(10))<7,7,(63*FVar(10)))),ceil(ifElse((63/8*FVar(10))<7,7,(63/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 6,5
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-70)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8.125
guard.velocity = -8.125
guard.ctrltime = 20
air.type = Low
air.velocity = -4,-6.921875;-5.77,-8.125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1

[State 3000, 3]
type = HitDef
triggerall = !FVar(18) ;&& (FVar(19) = 0 || Var(30))
trigger1 = AnimElem = 12, = 5
attr = S, HA
damage = ceil(ifElse((56*FVar(10))<7,7,(56*FVar(10)))),ceil(ifElse((56/8*FVar(10))<7,7,(56/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 6,5
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-70)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8.125
guard.velocity = -8.125
guard.ctrltime = 20
air.type = Low
air.velocity = -4,-6.921875;-5.77,-8.125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1

[State 3000, 4]
type = HitDef
triggerall = !FVar(18) ;&& (FVar(19) = 0 || Var(30))
trigger1 = AnimElem = 12, = 7
attr = S, HA
damage = ceil(ifElse((56*FVar(10))<7,7,(56*FVar(10)))),ceil(ifElse((56/8*FVar(10))<7,7,(56/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 6,5
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-70)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8.125
guard.velocity = -8.125
guard.ctrltime = 20
air.type = Low
air.velocity = -4,-6.921875;-5.77,-8.125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1

[State 3000, 5]
type = HitDef
triggerall = !FVar(18) ;&& (FVar(19) = 0 || Var(30))
trigger1 = AnimElem = 12, = 9
attr = S, HA
damage = ceil(ifElse((49*FVar(10))<7,7,(49*FVar(10)))),ceil(ifElse((49/8*FVar(10))<7,7,(49/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 6,5
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-70)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8.125
guard.velocity = -8.125
guard.ctrltime = 20
air.type = Low
air.velocity = -4,-6.59375;-4,-6.921875;-5.77,-8.125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1

[State 3000, 6]
type = HitDef
triggerall = !FVar(18) ;&& (FVar(19) = 0 || Var(30))
trigger1 = AnimElem = 12, = 11 || AnimElem = 12, = 13 || AnimElem = 12, = 15
attr = S, HA
damage = ceil(ifElse((49*FVar(10))<7,7,(49*FVar(10)))),ceil(ifElse((49/8*FVar(10))<7,7,(49/8*FVar(10))))
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 6,5
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-70)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -2,-8.046875;-5.77,-8.125
guard.velocity = -8.125
guard.ctrltime = 20
air.type = Low
air.velocity = -2,-8.046875;-4,-6.921875;-5.77,-8.125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
envshake.time = 12
envshake.ampl = 3
yaccel = .5
air.fall = 1
fall.recover = 0
forcestand = 1

[State 3000, 9]
type = HitDef
triggerall = !FVar(18) ;&& (FVar(19) = 0 || Var(30))
trigger1 = AnimElem = 12, = 17
attr = S, HA
damage = ceil(ifElse((112*FVar(10))<7,7,(112*FVar(10)))),ceil(ifElse((112/8*FVar(10))<7,7,(112/8*FVar(10))))
animtype = DiagUp
air.animtype = DiagUp
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 6,5
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-70)
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = .5
hitsound = S3,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8,-5.625
guard.velocity = -8.125
guard.ctrltime = 20
air.type = Low
air.velocity = -8,-5.625;-8,-6.65625;-5.77,-8.125
airguard.velocity = -6.67,-1
air.hittime = 20
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
fall = 1
air.fall = 1
fall.recover = 0
air.recover = 0
envshake.time = 12
envshake.ampl = 3
forcestand = 1

[State 3100, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===============================================================================
;                                    ABILITIES
;===============================================================================
;----------------------------------------------------------------------------------
; Roll
[Statedef 300]
type    = S
physics = N
movetype= I
anim = 300
ctrl = 0
velset = 0,0

[State 300, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S8+Var(24),ifElse(Random<500,1,ifElse(Var(24),3,15))
channel = 0

[State 300, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S40,2
channel = 13

[State 300, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 4.5

[State 300, VelSet]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 300, HitBy]
type = HitBy
trigger1 = Time <= 20
value = SCA,NT,ST,HT

[State 300, PlayerPush]
type = PlayerPush
trigger1 = AnimElemTime(2) > 0
value = 0

[State 300, AfterImage]
type = AfterImage
triggerall = !Var(30)
trigger1 = AnimElem = 2
time = 15
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 300, StateChange]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Dodge
[Statedef 310]
type = S
physics = S
movetype =  I
anim = 310
ctrl = 0
velset = 0,0

[State 310, SprPriority]
type = SprPriority
trigger1 = 1
value = -1

[State 310, PosSet]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 310, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,0
channel = 1

[State 310, PlaySnd2]
type = PlaySnd
trigger1 = AnimElem = 1
value = S8+Var(24),ifElse(Var(24),3,15)
channel = 0

[State 310, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 310, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NT,ST,HT

[State 310, AfterImage]
type = AfterImage
triggerall = !Var(30)
trigger1 = AnimElem = 1
time = 26
length = 10
FrameGap = 6
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 310, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Counter Movement (forward)
[Statedef 320]
type = S
physics = N
movetype =  I
ctrl = 0
velset = 0,0

[State 320, 1]
type = VarAdd
trigger1 = time = 0
var(47)=500
ignorehitpause = 1

[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 0 || Var(10) = 1 || Var(10) = 5
trigger1 = Time = 0
value = -1000
[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 2
trigger1 = Time = 0
value = -1500
[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 3 || Var(10) = 4 || Var(10) = 6
trigger1 = Time = 0
value = -3000

[State 2800, VarSet]
type = VarSet
trigger1 = !Time
fvar(14) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(19) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(17) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(30) = 0

[State 320, PalFX]
type = PalFX
trigger1 = Time = 0
time = 2
invertall = 1
mul = 0,0,0

[State 320, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S4000,1
channel = 7

[State 320, Helper]
type = Helper
trigger1 = Time = 0
id = 8070
name = "GUARD CANCEL"
pos = 10,-ifElse(PrevStateNo = 152,40,80)
postype = P1
stateno = 8070
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
persistent = 0

[State 320, Pause]
type = Pause
trigger1 = Time = 1
time = 6
movetime = 6

[State 320, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 320, 4]
type = ChangeAnim
trigger1 = Time <= 12
value = Anim

[State 320, 4]
type = ChangeAnim
trigger1 = Time = 13
value = 300

[State 320, PlaySnd]
type = Playsnd
triggerall = Anim = 300
trigger1 = AnimElem = 1
value = S8+Var(24),ifElse(Random<500,1,ifElse(Var(24),3,15))
channel = 0

[State 300, PlaySnd]
type = PlaySnd
trigger1 = Anim = 300 && AnimElemTime(1) = 1
value = S40,2
channel = 13

[State 320, VelSet]
type = VelSet
triggerall = Anim = 300
trigger1 = AnimElem = 2
x = 4.5

[State 320, VelSet]
type = VelSet
triggerall = Anim = 300
trigger1 = AnimElem = 8
x = 0

[State 320, HitBy]
type = HitBy
trigger1 = Time <= 32
value = SCA, NT,ST,HT

[State 320, PlayerPush]
type = PlayerPush
triggerall = Anim = 300
trigger1 = AnimElemTime(2) > 0
value = 0

[State 320, AfterImage]
type = AfterImage
triggerall = Anim = 300
trigger1 = AnimElem = 3
time = 15
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 320, ChangeState]
type = ChangeState
triggerall = Anim = 300
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Counter Movement (back)
[Statedef 330]
type = A
physics = N
ctrl = 0
velset = 0,0

[State 330, 1]
type = VarAdd
trigger1 = Time = 0
var(47)=-1000
ignorehitpause = 1

[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 0 || Var(10) = 1 || Var(10) = 5
trigger1 = Time = 0
value = -1000
[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 2
trigger1 = Time = 0
value = -1500
[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 3 || Var(10) = 4 || Var(10) = 6
trigger1 = Time = 0
value = -3000

[State 2800, VarSet]
type = VarSet
trigger1 = !Time
fvar(14) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(19) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(17) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(30) = 0

[State 330, Shock]
type = PalFX
trigger1 = Time = 0
time = 2
invertall = 1
mul = 0,0,0

[State 330, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 22

[State 330, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S4000,1
channel = 7

[State 330, Helper]
type = Helper
trigger1 = Time = 0
ID = 8070
name = "GUARD CANCEL"
pos = 10,-ifElse(PrevStateNo = 152,40,80)
postype = P1
stateno = 8070
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
persistent = 0

[State 330, Pause]
type = Pause
trigger1 = Time = 1
time = 6
movetime = 6

[State 330, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 330, Width]
type = Width
trigger1 = 1
edge = 1,0

[State 330, 4]
type = ChangeAnim
trigger1 = Time <= 12
value = Anim

[State 330, 4]
type = ChangeAnim
trigger1 = Time = 13
value = 105

[State 330, AfterImage]
type = Afterimage
triggerall = Anim = 105
trigger1 = AnimElem = 2
time = 22
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 330, PlaySnd]
type = PlaySnd
triggerall = Anim = 105
trigger1 = AnimElem = 1
value = S40,0
channel = 13

[State 330, Explod]
type = Explod
triggerall = Anim = 105
trigger1 = AnimElem = 1
anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
;bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 3
scale = .5,.5

[State 330, 1]
type = VelSet
triggerall = Anim = 105
trigger1 = AnimElem = 2
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 330, 1]
type = VelMul
triggerall = Anim = 105
trigger1 = AnimElemTime(2) > 0
x = .98

[State 330, 1]
type = VelAdd
triggerall = Anim = 105
trigger1 = AnimElemTime(2) > 0
y = .65

[State 330, 3]
type = ChangeState
triggerall = Anim = 105
triggerall = AnimElemTime(2) > 1
trigger1 = Pos Y + Vel Y >= 0
value = 106

;----------------------------------------------------------------------------------
; Power Charge
[Statedef 900]
type = S
physics = S
movetype= I
anim = 900
ctrl = 0
velset = 0,0

[State 900, PlaySnd]
type = PlaySnd
triggerall = Anim = 900
trigger1 = Time = 1
value = S8+Var(24),ifElse(Var(24),7,20)
channel = 0

[State 900, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 5
value = S200,0
channel = 1

[State 900, PowerAdd]
type = PowerAdd
triggerall = Anim = 900
trigger1 = 1
value = 2*((Time+10)/10)

[State 900, ChangeAnim]
type = ChangeAnim
triggerall = Time > 4
trigger1 = (Command != "hold_c" || Command != "hold_z") || (power >= 1000 && Var(10) = 4) || (power >= 3000 && Var(10) = 0)
value = 901
persistent = 0

[State 900, StopSnd]
type = StopSnd
trigger1 = Anim = 901
channel = 0
persistent = 0

[State 900, Helper]
type = Helper
trigger1 = !NumHelper(8500)
trigger1 = Time = 1
id = 8500
name = "Charge"
pos =0,0
postype = P1
stateno = 8500
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 900, CtrlSet]
type = CtrlSet
triggerall = Ctrl = 0
trigger1 = Anim = 901
value = 1

[State 900, ChangeState]
type = ChangeState
trigger1 = Anim = 901 && AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; MAX Activation
[Statedef 960]
type = S
physics = S
movetype= I
anim = 950
ctrl = 0
velset = 0,0

[State 960, 1]
type = Explod
trigger1 = Time = 6
anim = 8415
pos = 0,-60
postype = p1
bindtime = -1
sprpriority = 4
ontop = 0
ownpal = 1
scale = .5,.5
pausemovetime = -1

[State 960, 2]
type = PlaySnd
trigger1 = Time = 6
value = S6000,2
channel = 7

[State 960, 2]
type = PlaySnd
trigger1 = Time = 6
value = S8+Var(24),5
channel = 0

[State 195, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S200,0
channel = 1

[State 960, 4]
type = PowerAdd
trigger1 = Time = 6
value = -1000

[State 960, 5]
type = VarSet
trigger1 = Time = 6
var(29) = 675

[State 960, 5]
type = VarSet
trigger1 = Time = 6
var(18) = 1

[State 960, Super]
type = Helper
trigger1 = Time = 6
ID = 6170
name = "Time"
pos =0,0
postype = P1
stateno = 6170
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
facing = facing*IfElse(teamside=1,1,-1)

[State 960, CtrlSet]
type = CtrlSet
trigger1 = Time = 16
value = 1

[State 960, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Standing Custom Combo
[Statedef 970]
type = S
physics = S
movetype = I
anim = 970
ctrl = 0
velset = 0,0

[State 970, SuperPause]
type = SuperPause
trigger1 = Time = 4
time = 37
movetime = 37
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 3000, Helper]
type = Helper
trigger1 = Time = 4
persistent = 0
ID = 8080
name = "custcom"
pos = 0,-60
postype = P1
stateno = 8080
helpertype = normal
supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 99999999
pausemovetime = 99999999

[State 970, 2]
type = PlaySnd
trigger1 = Time = 4
value = S8+Var(24),13
channel = 0

[State 970, AfterImage]
type = AfterImage
trigger1 = Time = 4
time = 9999
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast = 0, 100, 150
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 970, 5]
type = VarSet
trigger1 = Time >= 4
var(30) = 334

[State 970, 5]
type = VarSet
trigger1 = Time = 0
var(31) = 1

[State 970, 5]
type = VarSet
trigger1 = AnimTime = 0
var(43) = 3000

[State 970, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 50

[State 970, 1]
type = PowerAdd
trigger1 = AnimTime = 0
value = -3000
ignorehitpause = 1

[State 970, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Aerial Custom Combo
[Statedef 975]
type = A
movetype = I
physics = N
anim = 975
ctrl = 0

[State 975, PosFreeze]
type = PosFreeze
trigger1 = 1

[State 975, SuperPause]
type = SuperPause
trigger1 = Time = 4
time = 37
movetime = 37
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 975, Helper]
type = Helper
trigger1 = Time = 4
persistent = 0
ID = 8080
name = "custcom"
pos = 0,-60
postype = P1
stateno = 8080
helpertype = Normal
supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 99999999
pausemovetime = 99999999

[State 975, 2]
type = PlaySnd
trigger1 = Time = 4
value = S8+Var(24),13
channel = 0

[State 975, AfterImage]
type = AfterImage
trigger1 = Time = 4
time = 9999
TimeGap  = 3
FrameGap = 4
length = 10
PalBright = 1,1,1
PalContrast = 0, 100, 150
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 970, 5]
type = VarSet
trigger1 = Time >= 4
var(30) = 334

[State 970, 5]
type = VarSet
trigger1 = Time = 0
var(31) = 1

[State 970, 5]
type = VarSet
trigger1 = AnimTime = 0
var(43) = 3000

[State 975, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 50

[State 975, PowerAdd]
type = PowerAdd
trigger1 = AnimTime = 0
value = -3000
ignorehitpause = 1

[State 975, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;----------------------------------------------------------------------------------
; Counter Attack
[Statedef 2800]
type    = S
movetype = A
physics = N
juggle = 8
velset = 0,0
ctrl = 0

[State 180, 1]
type = VarAdd
trigger1 = Time = 0
var(47)=1000
ignorehitpause = 1

[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 0 || Var(10) = 1 || Var(10) = 5
trigger1 = Time = 0
value = -1000
[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 2
trigger1 = Time = 0
value = -1500
[State 860, 4]
type = PowerAdd
triggerall = Var(10) = 3 || Var(10) = 4 || Var(10) = 6
trigger1 = Time = 0
value = -3000

[State 2800, VarSet]
type = VarSet
trigger1 = !Time
fvar(14) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(19) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(17) = 0
[State 2800, VarSet]
type = VarSet
trigger1 = !Time
var(30) = 0

[State 902, Shock]
type = PalFX
trigger1 = Time = 0
time = 2
invertall = 1
mul = 0,0,0

[State 170, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 17

[State 1100, Effect]
type = PlaySnd
trigger1 = Time = 1
value = S4000,1
channel = 7

[State -3,Super]
type = Helper
trigger1 = Time = 0
ID = 8070
name = "GUARD CANCEL"
pos = 10,-ifElse(PrevStateNo = 152,40,80)
postype = P1
stateno = 8070
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
persistent = 0

[State 2800, Pause]
type = Pause
trigger1 = Time = 1
time = 6
movetime = 6

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 1,0
player = 5,5

[State 190, 4]
type = ChangeAnim
trigger1 = Time <= 12
value = anim

[State 190, 4]
type = ChangeAnim
trigger1 = Time = 13
value = 1400

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1400 && AnimElemTime(1) = 1
value = S40,4
channel = 13

[State 1000, PlaySnd]
type = PlaySnd
trigger1 = Anim = 1400 && AnimElemTime(1) = 0
value = S8+Var(24),7
channel = 0

[State 1000, StateTypeSet]
type = StateTypeSet
trigger1 = Anim = 1400 && AnimElemTime(3) = 0
statetype = A

[State 220, 1]
type = HitDef
triggerall = !FVar(18) && (FVar(19) = 0 || Var(30))
trigger1 = Anim = 1400 && AnimElem = 3
attr = A, SA
damage = ceil(ifElse((42*FVar(10))<7,7,(42*FVar(10)))),0
animtype = diagup
air.animtype = diagup
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = ceil(14*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8100
sparkxy = ceil(fvar(26):=-30),ceil(fvar(27):=-81)
hitsound = S3,2
guardsound = S5,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -3.5,-8.5
guard.velocity = -8.125
air.velocity = -3.5,-8.5
air.hittime = 20;12+(Var(21)*2)
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
envshake.time = 10
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .5;45
persistent = 0
getpower = 0
givepower = 35, 35
kill = 0

[State 1300, Helper]
type = Helper
triggerall = !NumHelper(8020)
trigger1 = Anim = 1400 && AnimElemTime(3) = 1
id = 8020
name = "jump Effect"
pos =0,0
postype = P1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1500, VelSet]
type = VelSet
trigger1 = Anim = 1400 && AnimElemTime(3) = 0
x = 6.5
y = -12

[State 1500, VelAdd]
type = VelAdd
trigger1 = Anim = 1400 && AnimElemTime(3) > 1
y = 1.125

[State 1500, VelSet]
type = VelSet
trigger1 = Anim = 1400 && AnimElem = 4
x = 0
y = 0

[State 1000, ChangeState]
type = ChangeState
triggerall = Anim = 1400 && AnimElemTime(3) > 2
trigger1 = Pos Y + Vel Y >= 0
value = 1405
ctrl = 1

[State 255, 1]
type = null;HitDef
trigger1 = AnimElem = 3
attr = S, SA
damage = ceil(ifElse((62*FVar(10))<7,7,(62*FVar(10)))),0			;Damage that move inflicts, guard damage
animtype = diagup
air.animtype = diagup
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = ceil(14*(2-(Var(30)>0))/2),ceil(13*(2-(Var(30)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = -10, -55
palfx.time = 12*Var(21)
palfx.add = 255,255,255
palfx.mul = 128,128,128
hitsound = S4,2
guardsound = S5,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
guard.ctrltime = 20
ground.velocity = -2,-7.5
guard.velocity = -9
air.velocity = -2,-7.5
air.hittime = 12+(Var(21)*2)
ground.cornerpush.veloff = -8.4*(2-(Var(30)>0))/2
guard.cornerpush.veloff = -12.6
envshake.time = 10
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
air.recover = 0
yaccel = .45
persistent = 0
getpower = 0
givepower = 35, 35
kill = 0

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
[Statedef 5201]
type    = S
movetype= I
physics = N
anim = 5200

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 5201, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, VelSet]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5201, 3]
type = VelSet
trigger1 = Time = 0
x = -6

[State 5201, 3]
type = VelMul
trigger1 = 1
x = .95

[State 5201, Explod]
type = Explod
trigger1 = Time = 1
anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
scale = .5,.5

[State 5201, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S40,2
channel = 13

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, 5] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5201, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; WE SUNK
[Statedef 247]
anim = 1

[State -2, VarSet]
type = VarSet
trigger1 = !Parent, Var(50)
trigger2 = !Parent, MoveContact
trigger3 = Enemy,MoveReversed = 1
var(1) = 0
[State -2, VarSet]
type = VarSet
trigger1 = Parent, Var(50) = [1,2]
trigger2 = Parent, MoveContact
var(1) = 1

[State -2, Combo]
type = VarSet
trigger1 = !parent, NumTarget
trigger2 = Var(0) && parent, HitPauseTime > 0
trigger3 = !root, Var(50)
trigger4 = Enemy,MoveReversed = 1
var(0) = 0
ignorehitpause = 1
[State -2, Combo]
type = VarAdd
trigger1 = Var(1)
var(0) = 1
ignorehitpause = 1

[State -2, VarSet]
type = VarSet
trigger1 = 1
var(22) = root, Var(22)

[State -2, Damage]
type = VarSet
trigger1 = root, StateNo = 1500
var(7) = 98+((Var(22) > 1)*14)+((Var(22) > 2)*21)+((Var(22) > 3)*21)+((Var(22) > 4)*28)+((Var(22) > 5)*21)+((Var(22) > 6)*42)+((Var(22) > 7)*35*(Var(22)-7))

[State -2, DTC]
type = DisplayToClipboard
trigger1 = NumHelper(247)
text = "MoveContact = %d, Damage = %d, Throw1 = %f, Throw2 = %f"
params = Var(0), Var(7), (parent, FVar(11)), (parent, FVar(25))


;---------------------------------------------------------------------------
; Statedef -3
;---------------------------------------------------------------------------
[Statedef -3]
;---------------------
; Sound
[State -3, Bounding Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = StateNo = 5100 || StateNo = 5110
value = S5100,0
freqmul = ifElse(StateNo = 5110,0.97,1)
channel = 13
persistent = 0

[State -3, Hurt Sound]
type = PlaySnd
triggerall = Random < 500
triggerall = Time = 1
triggerall = Alive
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080 || StateNo = 5100
value = S5000,ifElse(StateNo = 5100||GetHitVar(animtype) = 2,2,ifElse(GetHitVar(animtype) = 1,1,0))+Var(24)
channel = 4

[State 5201, PlaySnd]
type = PlaySnd
triggerall = Time = 1
trigger1 = StateNo = 5201 || StateNo = 5210 
value = S8+Var(24),ifElse(Var(24),3,15)
channel = 4

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------
[Statedef -2]
;---------------------------------------------------------------------------
; DTC
[State -2, Display to Clipboard]
type = DisplaytoClipboard
trigger1 = (GameTime%100) = 0
ignorehitpause = 1
text = "cvsbison by Jesuszilla"

[State -2, Display to Clipboard]
type = DisplaytoClipboard
trigger1 = (GameTime%200) = 0
ignorehitpause = 1
text = "Do ANYTHING to this, and you die."

[State -2, Display to Clipboard]
type = DisplaytoClipboard
trigger1 = (GameTime%300) = 0
ignorehitpause = 1
text = "Host this, and you die."

[State -2, Display to Clipboard]
type = DisplaytoClipboard
trigger1 = (GameTime%400) = 0
ignorehitpause = 1
text = "http://www.trinitymugen.net/"

[State -2, Display to Clipboard]
type = DisplaytoClipboard
trigger1 = (GameTime%500) = 0
text = "I stole this DisplayToClipboard from Neon and Vans >)"

[State -2, DisplaytoClipboard]
type = Null;DisplaytoClipboard
trigger1 = (GameTime%100) = 0
ignorehitpause = 1
text = "Var(20) = %d, Var(5) = %d, Var(6) = %d, Var(7) = %d, Var(8) = %d"
params = Var(20), Var(5), Var(6), Var(7), Var(8)

[State - 2, DTC]
type = Null;DisplaytoClipboard
trigger1 = (GameTime%200) = 0
ignorehitpause = 1
text = "Var(9) = %d, Var(10) = %d, Var(11) = %d, Var(12) = %d, Var(13) = %d"
params = Var(9), Var(10), Var(11), Var(12), Var(13)

[State -2, DTC]
type = Null;DisplaytoClipboard
trigger1 = (GameTime%300) = 0
ignorehitpause = 1
text = "Var(14) = %d, Var(15) = %d, Var(16) = %d, Var(30) = %d"
params = Var(14), Var(15), Var(16), Var(47)

[State -2, DTC]
type = Null;DisplayToClipboard
trigger1 = 1
text = "Combo = %d, Var(11) = %d, Cornerpush = %f, Var(56) = %d"
params = Var(50), Var(11), SysFVar(0), Var(56)

[State -2, DTC]
type = null;DisplayToClipboard
trigger1 = 1
text = "SC Juggle = %f Limit  = %f Juggle = %f, shit = %d"
params = FVar(16), FVar(18), FVar(19), Var(12)

[State -2, DTC]
type = null;DisplayToClipboard
trigger1 = 1
text = "Custom Combo = %d, Finest KO = %d, BodyDist X = %f, BodyDist Y = %f"
params = Var(31), Var(3), (P2BodyDist X), (P2BodyDist Y)

;----------------------------------------------------------------------------------
; Dizzy FX
[State -2]
type = null;Helper
trigger1 = !NumHelper(777)
trigger1 = RoundState = 2
helperType = normal
name = "dizzy"
ID = 777
pos = Const(size.head.pos.X)+10,Const(size.head.pos.Y)
postype = p1
facing = 1
StateNo = 777
keyctrl = 1
ownpal = 1
supermoveTime = 65535
pausemoveTime = 65535

;----------------------------------------------------------------------------------
; Command Buffering
[State -2]
Type = Helper
Trigger1 = !NumHelper(10380)
helperType = normal
name = "Turn Punch"
ID = 10380
pos = 0,0
posType = p1
facing = 1
StateNo = 10380
keyctrl = 1
ownpal = 1
supermoveTime = 65535
pausemoveTime = 65535

;----------------------------------------------------------------------------------
; Edge fix
[State 0, Width]
type = Width
trigger1 = StateType != A
edge = 24,0

;----------------------------------------------------------------------------------
; Var Helper
[State -2, 0]
type = Helper
triggerall = !NumHelper(247)
trigger1 = !Time
helpertype = normal
name = "Var"
ID = 247
pos = 0,0
postype = p1
stateno = 247
keyctrl = 0

; Reset Small Jump
[State 52, VarSet]
type = VarSet
triggerall = Var(6) = 2
trigger1 = StateType != A
trigger2 = MoveType = H
var(6) = 1

;===============================================================================
; ------- CvS2 Cornerpush System by Vans & Jesuszilla --------
;===============================================================================
[State -2, Reset Time counter]
type = VarSet
triggerall = NumHelper(247)
trigger1 = Helper(247), Var(0) = 1
var(56) = 0

[State -2, Accel]
type = VarSet
triggerall = roundstate = 2
triggerall = numtarget ;>= 1
triggerall = target, HitShakeOver
trigger1 = StateNo != 970 && StateNo != 975 && StateNo != 3000 && StateNo != 3100
trigger2 = (StateNo = [3000,3200]) && !Var(48)
fvar(39) = (target,GetHitVar(Xvel)*exp((-0.1886)*((Var(56)))))

[State -2, Push]
type = PosAdd
triggerall = roundstate = 2
triggerall = numtarget >= 1
triggerall = (target, BackEdgeBodyDist <= 0) || (target, FrontEdgeBodyDist <= 0)
triggerall = Var(50) < 3;ProjContact = 0, < 50
triggerall = P2StateType != A
triggerall = StateNo != [800,839]
triggerall = StateNo != [102,106]
triggerall = P2StateType != A
triggerall = StateType != A; OR IS IT
trigger1 = StateNo != 970 && StateNo != 975 && StateNo != 3000 && StateNo != 3100
trigger2 = (StateNo = [3000,3200]) && !Var(48)
x = ifelse(facing = -1,FVar(39),-FVar(39));SysFVar(0)

[State -2, Increase]
type = VarSet
triggerall = numtarget ;>= 1
triggerall = target, HitShakeOver
triggerall = Var(56)
trigger1 = !Var(48)
var(56) = Var(56)+1

[State -2, Time counter]
type = VarSet
trigger1 = !Var(56)
trigger1 = FVar(39)
var(56) = 1

[State -2, Freeze Pos During Superpause]
type = PosFreeze
trigger1 = Var(48)
value = 1

[State -2, Drop]
type = VarSet
triggerall = FVar(39)
trigger1 = !NumTarget
trigger2 = Var(50) = [3,4]
fvar(39) = 0

;----------------------------------------------------------------------------------
; Config
[State -2, Helper]
type = Helper
triggerall = !NumHelper(10001)
trigger1 = Time = 0
trigger1 = roundsexisted <= 0
trigger1 = roundstate = 0
ID = 10001
name = "config"
pos = -300,0
postype = Left
stateno = 10001
helpertype = normal
keyctrl = 0
pausemovetime = 65535
supermovetime = 65535

;----------------------------------------------------------------------------------
; Message Icon
[State -2, Message Icon Y-Axis]
type = VarSet
trigger1 = Var(20) > 9000
fvar(24) = 9001

;----------------------------------------------------------------------------------
; Mode Switch
[State -2, Normal]
type = VarSet
trigger1 = PalNo = [1,6]
var(24) = 0

[State -2, EX]
type = VarSet
trigger1 = PalNo = [7,12]
var(24) = 10

;----------------------------------------------------------------------------------
; Groove Select
[State -2, Groove]
type = Helper
;triggerall = MatchNo = 1; Select only once and be stuck with it for rest of Arcade
triggerall = NumEnemy
triggerall = Time = 1
triggerall = roundstate = 0
triggerall = roundsexisted <= 0
triggerall = Var(20) > -1
trigger1 = numpartner
trigger1 = ID>partner,ID
trigger1 = !partner,authorname="warusaki3"
trigger1 = !(partner,authorname = "mouser" && partner,name = "Hibiki Takane")
trigger1 = !partner,authorname = "Hh"
trigger1 = !partner,authorname="Jesuszilla"
trigger1 = !partner,authorname=".\/."
trigger1 = !(partner,authorname="N64Mario" && partner,name = "Zero")
trigger2 = numpartner
trigger2 = ID<partner,ID
trigger3 = !numpartner
ID = 6000
stateno = 6000
postype = p1
size.xscale = .5
size.yscale = .5
pos = 0,-15
name = "groove"
ontop = 1
bindtime = -1

[State -2, Arrow]
type = Helper
triggerall = NumEnemy
triggerall = Time = 1
triggerall = roundstate = 0
triggerall = roundsexisted <= 0
triggerall = Var(20) > -1
trigger1 = numpartner
trigger1 = ID>partner,ID
trigger1 = !partner,authorname="warusaki3"
trigger1 = !(partner,authorname = "mouser" && partner,name = "Hibiki Takane")
trigger1 = !partner,authorname = "Hh"
trigger1 = !partner,authorname="Jesuszilla"
trigger1 = !partner,authorname=".\/."
trigger1 = !(partner,authorname="N64Mario" && partner,name = "Zero")
trigger2 = numpartner
trigger2 = ID<partner,ID
trigger3 = !numpartner
ID = 6050
stateno = 6050
postype = p1
size.xscale = .5
size.yscale = .5
pos = 0,0
name = "Up-Arrow"
ontop = 1
bindtime = -1
keyctrl = 1
ownpal = 1

[State -2, Arrow]
type = Helper
triggerall = NumEnemy
triggerall = Time = 1
triggerall = roundstate = 0
triggerall = roundsexisted <= 0
triggerall = Var(20) > -1
trigger1 = numpartner
trigger1 = ID>partner,ID
trigger1 = !partner,authorname="warusaki3"
trigger1 = !(partner,authorname = "mouser" && partner,name = "Hibiki Takane")
trigger1 = !partner,authorname = "Hh"
trigger1 = !partner,authorname="Jesuszilla"
trigger1 = !partner,authorname=".\/."
trigger1 = !(partner,authorname="N64Mario" && partner,name = "Zero")
trigger2 = numpartner
trigger2 = ID<partner,ID
trigger3 = !numpartner
ID = 6050
stateno = 6055
postype = p1
size.xscale = .5
size.yscale = .5
pos = 0,0
name = "Down-Arrow"
ontop = 1
bindtime = -1
keyctrl = 1
ownpal = 1

;----------------------------------------------------------------------------------
; Groove Point
[State -2, Helper]
type = Helper
triggerall = NumEnemy
triggerall = Var(20) > -1
triggerall = FVar(20)
triggerall = !NumHelper(6500) && !NumHelper(6000)
trigger1 = numpartner
trigger1 = ID>partner,ID
trigger1 = !partner,authorname="warusaki3"
trigger1 = !(partner,authorname = "mouser" && partner,name = "Hibiki Takane")
trigger1 = !partner,authorname = "Hh"
trigger1 = !partner,authorname="Jesuszilla"
trigger1 = !partner,authorname=".\/."
trigger1 = !(partner,authorname="N64Mario" && partner,name = "Zero")
trigger2 = numpartner
trigger2 = ID<partner,ID
trigger3 = !numpartner
ID = 6500
name = "groove point"
pos = 0,300
postype = Left
stateno = 6500
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999
supermovetime = 99999999999999
size.xscale = 1
size.yscale = 1

;----------------------------------------------------------------------------------
; No Music
[State -2, AssertSpecial]
type = AssertSpecial
triggerall = roundno = 1
trigger1 = roundstate < 2
flag = NoMusic

; PERFECT
[State -2, Combo]
type = VarSet
triggerall = roundstate = 2
trigger1 = FVar(8) - Life > 0
fvar(15) = 1
ignorehitpause = 1

;----------------------------------------------------------------------------------
; Vars set upon victory/loss.
[State -2, 1]
type = VarSet
trigger1 = Win
var(27) = 1

[State -2, 1]
type = VarSet
trigger1 = Lose
var(27) = 2

[State -2, 1]
type = VarSet
trigger1 = Lose || DrawGame
var(36) = 1

[State -2,KO]
type = VarAdd
trigger1 = MatchOver
ignorehitpause = 1
var(39) = 1

[State -2,KO]
type = VarSet
trigger1 = !MatchOver
ignorehitpause = 1
var(39) = 0

[State 180, 1]
type = VarAdd
triggerall = Var(39) = 1
trigger1 = !Var(36)
var(38)= 1
ignorehitpause = 1
persistent = 0

[State 180, 1]
type = VarSet
trigger1 = roundstate = 0 && roundno = 1
var(38)= 0
ignorehitpause = 1

;----------------------------------------------------------------------------------
; STATE DECISION
[State -2, 1]
type = VarSet
triggerall = movetype != H && roundstate = 2
trigger1 = (StateNo = [0,199]) && !Var(31)
var(28) = 0

[State -2, 1]
type = VarSet
triggerall = movetype != H && roundstate = 2
trigger1 = (StateNo = [200,999]) && !Var(31)
var(28) = 1

[State -2, 1]
type = VarSet
triggerall = movetype != H && roundstate = 2
trigger1 = (StateNo = [1000,2999]) && !Var(31)
var(28) = 2

[State -2, 1]
type = VarSet
triggerall = movetype != H && roundstate = 2
trigger1 = ((StateNo = [3000,3999]) && Var(22)!=2) || Var(31)
var(28) = 3

[State -2, 1]
type = VarSet
triggerall = movetype != H && roundstate = 2
trigger1 = (StateNo = [3000,3999]) && Var(22) = 2
var(28) = 4

[State -2, 1]
type = VarSet
triggerall = P2movetype != H && roundstate = 2
trigger1 = P2StateNo = [0,199]
var(59) = 0

[State -2, 1]
type = VarSet
triggerall = P2movetype != H && roundstate = 2
trigger1 = StateNo = [200,999]
var(59) = 1

[State -2, 1]
type = VarSet
triggerall = P2movetype != H && roundstate = 2
trigger1 = P2StateNo = [1000,2999]
var(59) = 2

[State -2, 1]
type = VarSet
triggerall = P2movetype != H && roundstate = 2
trigger1 = P2StateNo = [3000,3999]
var(59) = 3

;----------------------------------------------------------------------------------
; Turns Mode Intro
[State -3, Turns Mode Intro]
type = ChangeState
triggerall = NumEnemy
trigger1 = roundsexisted <= 0
trigger1 = roundstate = 0
trigger1 = Time = 0
value = 190

;---------------------
; Gauge
[State -2, Helper]
type = Helper
triggerall = Var(10)
triggerall = !NumHelper(6100) && !NumHelper(6000)
triggerall = numenemy
triggerall = Var(20) < 9001
trigger1 = numpartner
trigger1 = ID>partner,ID
trigger1 = !partner,authorname="warusaki3"
trigger1 = !(partner,authorname = "mouser" && partner,name = "Hibiki Takane")
trigger1 = !partner,authorname = "Hh"
trigger1 = !partner,authorname="Jesuszilla"
trigger1 = !partner,authorname=".\/."
trigger1 = !partner,authorname="N64Mario"
trigger2 = numpartner
trigger2 = ID<partner,ID
trigger3 = !numpartner
ID = 6100
name = "gauge"
pos = 0,300
postype = P1
stateno = 6090+(Var(10)*10)
helpertype = normal
keyctrl = 0
ownpal = 1
;ignorehitpause = 1
persistent = 0
supermovetime = 99999999999999
pausemovetime = 99999999999999
facing = facing*ifelse(teamside=1,1,-1)

;---------------------
; S-Gauge MAX
[State -2, 1]
type = VarSet
triggerall = Var(10) = 4
trigger1 = !Var(17)
trigger1 = roundstate >= 2
trigger1 = Power >= 1000
var(17) = 750

[State -2, 1]
type = PowerSet
trigger1 = Var(17) = 750
value = 0
ignorehitpause = 1

[State -2, 1]
type = PowerSet
trigger1 = Var(17) = 1
value = 0
ignorehitpause = 1

[State 200, 3]
type = PlaySnd
trigger1 = Var(17) = 750
value = S6000,2

[State -2, 1]
type = VarAdd
trigger1 = Var(17)
var(17) = -1
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = Var(17)
var(44) = 1

[State -2, 1]
type = VarSet
trigger1 = !Var(17) && ctrl
var(44) = 0

;---------------------
; N-Gauge MAX
[State -2, 1]
type = VarAdd
trigger1 = Var(29)
var(29) = -1
ignorehitpause = 1

[State -2, 1]
type = PalFX
triggerall = Var(10) = 5
trigger1 = (GameTime%2)=0
trigger1 = Var(29)
time = 1
add = 128,128,0
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = !Var(29) && ctrl
var(18) = 0

;---------------------
; K-Gauge RAGE
[State -2, Combo]
type = VarAdd
triggerall = Var(10) = 6
triggerall = !Var(19)
triggerall = roundstate = 2
triggerall = FVar(14) < 7200
trigger1 = FVar(8) - Life > 0
fvar(14) = ceil((FVar(8)-Life)*14*(10+Var(41))/10)
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = FVar(14) > 7200
fvar(14) = 7200

[State -2, 1]
type = VarSet
trigger1 = FVar(14) = 7200
var(19) = 1

[State -2, 1]
type = VarSet
trigger1 = FVar(14) <= 1 && ((StateNo != [3000,3999]) || roundstate != 2)
var(19) = 0

[State 860, 1]
type = Explod
trigger1 = FVar(14) = 7200 && !NumExplod(8420)
anim = 8420
pos = 0,-70
postype = p1
ontop = 0
ownpal = 1
ID = 8420
persistent = 0
pausemovetime = -1
scale = .5,.5

[State 200, 3]
type = PlaySnd
trigger1 = FVar(14) = 7200
value = S6000,5

[State -2, 1]
type = PowerAdd
trigger1 = FVar(14) = 7200
value = -3000
ignorehitpause = 1

[State -2, 1]
type = VarAdd
triggerall = Var(10) = 6
triggerall = Var(19)
trigger1 = FVar(14) > 0
fvar(14) = -7.2
ignorehitpause = 1

[State -2, 1]
type = PalFX
triggerall = Var(10) = 6
trigger1 = FVar(14) && Var(19)
time = 1
mul = 230,ceil(152-abs(76*sin(gametime*.05))),ceil(128-abs(64*sin(gametime*.05)))
ignorehitpause = 1
persistent = 0

[State -2, 1]
type = LifeAdd
triggerall = Alive && MoveType = H
triggerall = Var(10) = 6
triggerall = FVar(14) && Var(19)
trigger1 = (FVar(8)-life)>0
value = ifElse((FVar(8)-life)<life,floor((FVar(8)-life)*0.125),0)

;----------------------------------------------------------------------------------
; Power Up! Sound
[State -2, PlaySnd]
type = PlaySnd
triggerall = roundstate = 2
trigger1 = (floor(power*.001) - floor(FVar(37)*.001) > 0) && (Var(10) = 1 || Var(10) = 5)
trigger2 = (floor(power/1500) - floor(FVar(37)/1500) > 0) && Var(10) = 2
trigger3 = (floor(power/3000) - floor(FVar(37)/3000) > 0) && (Var(10) = 3 || Var(10) = 4)
value = 6000,IfElse(Var(10)=5,3,4)
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = 1
fvar(37) = power
ignorehitpause = 1

;----------------------------------------------------------------------------------
; Power Reset
[State -2, 1]
type = VarAdd
triggerall = roundstate = 2
trigger1 = Var(30)
var(30) = -1
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = MoveType = H
var(30) = 0

[State -2, 1]
type = VarSet
trigger1 = !Var(30) && ctrl
trigger2 = LoseKO
var(31) = 0

[State -2, 1]
type = VarAdd
trigger1 = Var(30)
var(43) = -9
ignorehitpause = 1

[State -2, 1]
type = PowerSet
triggerall = Var(31)
trigger1 = MoveType = H
value = Var(43)/2

[State -3, Kill Juggle Checking]; I GOTTA BELIEVE!
type = AssertSpecial
trigger1 = 1;Var(31)
;trigger1 = P2MoveType = H && P2stateType = A
flag = NoJuggleCheck

[State -3, No Blocking]
type = AssertSpecial
trigger1 = Var(30)
flag = NoStandGuard
flag2 = NoCrouchGuard
flag3 = NoAirGuard

;---------------------
; NoAirGuard
[State -2, AssertSpecial]
type = AssertSpecial
trigger1 = !(var(5)&256)
flag = NoAirGuard

;---------------------
; Combo Damage
[State -2, PowerReset]
type = VarSet
trigger1 = P2movetype != H
var(45) = P2life

[State 3001, Super]
type = Helper
triggerall = FVar(7)
triggerall = numenemy
triggerall = roundstate = 2
triggerall = (Var(45)-P2life)>250
trigger1 = !NumHelper(6800)&&!Var(35)
trigger2 = !NumHelper(6800)&&Var(35)=1&&!enemynear,NumHelper(6800)
ID = 6800
name = "narration_1"
pos = 0,300
postype = Left
stateno = 6803
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999

; No guard during superpause
[State -2, Unguardable]
type = VarAdd
trigger1 = Var(48) > 0
var(48) = -1
[State -2, Unguardable]
type = AssertSpecial
trigger1 = Var(48) > 0
flag = unguardable

;Starting Groove Points & Decrease Groove Points by Time
[State -2, PowerReset]
type = VarSet
triggerall = MatchNo = 1
triggerall = RoundNo = 1
trigger1 = roundstate = 0
var(47) = 100000

[State -2, PowerReset]
type = VarSet
trigger1 = Var(47) > 9999999
var(47) = 9999999
persistent = 1

[State -2, PowerReset]
type = VarSet
trigger1 = Var(47) < -9999999
var(47) = -9999999
persistent = 1

[State -2, PowerReset]
type = VarAdd
trigger1 = roundstate = 2
var(34) = 1
persistent = 1

[State -2, PowerReset]
type = VarAdd
triggerall = roundstate = 2
triggerall = Var(47) = [-9999999,9999999]
trigger1 = Var(34) >= 600
trigger1 = gametime%60 = 0
var(47) = -500
persistent = 1

[State 3001, Super]
type = Helper
triggerall = FVar(7)
triggerall = !Var(37)
triggerall = numenemy
triggerall = roundstate = 2
triggerall = Var(34) = 400
trigger1 = !NumHelper(6800)&&!Var(35)
trigger2 = !NumHelper(6800)&&Var(35)=1&&!enemynear,NumHelper(6800)
ID = 6800
name = "narration_1"
pos = 0,300
postype = Left
stateno = 6800
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999

;-------------------------------------
; Super Combo Juggling
;-------------------------------------
; Super States that should juggle
; after canceling from a special
; should go here.

[State -2, Super Combo Juggling]
type = null;VarSet    ; Keep null if you have none, otherwise go nuts.
triggerall = P2MoveType = H && P2stateType = A
triggerall = ((PrevStateNo=[1000,2999]) && !FVar(16)) || ((PrevStateNo=[1000,2999]) && FVar(16) = -1 && Time = 1)
trigger1 = StateNo=3000
fvar(16) = 1
ignorehitpause = 1

[State -2, PowerReset]
type = VarAdd
trigger1 = FVar(16) > 0
fvar(16) = 1

[State -2, PowerReset]
type = VarSet
triggerall = FVar(16) > 1
trigger1 = MoveHit = 1
trigger2 = ProjHit = 1
fvar(16) = -1
ignorehitpause = 1

[State -2, PowerReset]
type = VarSet
trigger1 = FVar(16) > 120
trigger2 = NumEnemy
trigger2 = Enemy,MoveType != H
fvar(16) = 0
ignorehitpause = 1

;-------------------------------------
; Basic, Command, and Special Juggling
;-------------------------------------
; This is the limiter for juggling.
; When set to 1, it disallows juggling
; for all situations.
[State -2, Limiter]
type = VarSet
trigger1 = FVar(13) && FVar(18)
trigger2 = P2MoveType != H && P2StateType != A && P2StateNo != 5040
fvar(18) = 0
ignorehitpause = 1

[State -2, Limiter]
type = VarSet
triggerall = !FVar(13) && !FVar(18)
trigger1 = P2StateNo = 5040
fvar(18) = 1
ignorehitpause = 1

[State -2, JuggleCount]
type = VarAdd
;triggerall = !FVar(13)
;triggerall = P2MoveType = H && P2StateType = A
trigger1 = MoveHit = 1;Var(50)=[1,2]
;trigger2 = ProjHit = 1
fvar(19) = 1
ignorehitpause = 1

[State -2, JuggleCount]
type = VarSet
triggerall = FVar(19)
trigger1 = P2MoveType != H || (P2StateType != A && (P2StateNo != [5100,5109]) && (enemy,time>=1)) || P2StateNo = [120,155]
fvar(19) = 0
ignorehitpause = 1

;-------------------------------------
; Free Juggling After a Lv. 2 Cancel
;-------------------------------------
; Anything that should juggle after a
; Level 2 cancel is performed should
; go here.
[State -2, Cancel]
type = VarAdd
trigger1 = FVar(13)
fvar(13) = 1

[State -2, Lvl2 Cancel Juggling]
type = VarSet
triggerall = PrevStateNo=[3000,3999]
triggerall = Time = 1
triggerall = P2MoveType = H && P2StateType = A
trigger1 = StateNo=1000
trigger2 = StateNo=1100
trigger3 = StateNo=1200
trigger4 = StateNo=1300
trigger5 = StateNo=1400
trigger6 = StateNo=1500
trigger7 = StateNo=3000
fvar(13) = 1
ignorehitpause = 1

[State -2, Cancel]
type = VarSet
triggerall = FVar(13) > 1
trigger1 = MoveHit = 1
trigger2 = ProjHit = 1
trigger3 = FVar(13) > 120
trigger3 = numenemy
trigger3 = enemy, MoveType != H
fvar(13) = 0
ignorehitpause = 1

;----------------------------------------------------------------------------------
;Groove points increase/decrease when damage is taken
[State -2, 1]
type = VarAdd
triggerall = roundstate = 2
triggerall = StateNo = 5000 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080
trigger1 = Time = 1
var(47)=ifElse((enemynear,hitdefattr=SCA,NA,NP,NT),-500,ifElse((enemynear,hitdefattr=SCA,SA,SP,ST),-300,-200))
ignorehitpause = 1

[State -2, 1]
type = VarAdd
triggerall = roundstate = 2
triggerall = movetype = H
triggerall = (StateNo != 5000 && StateNo != 5020 && StateNo != 5070 && StateNo != 5080)
trigger1 = FVar(8) - Life > 0
var(47)=ifElse((enemynear,StateNo=[195,999]),-500,ifElse((enemynear,StateNo=[1000,2999]),-300,-200))
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = 1
fvar(8) = life
ignorehitpause = 1

;----------------------------------------------------------------------------------
; Messages
;Reversal Condition 1
[State 180, 1]
type = VarSet
trigger1 = movetype = H
fvar(30) = 2
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = ctrl
trigger1 = FVar(30) = 2
fvar(30) = 1
ignorehitpause = 1

[State 180, 1]
type = VarAdd
trigger1 = FVar(30) = 1
fvar(31) = 1
ignorehitpause = 1

;Bonus Message
[State 180, 1]
type = VarSet
trigger1 = 1
fvar(32) = -1
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
triggerall = MoveType != H
trigger1 = stateno = 700
trigger2 = stateno = 710
trigger3 = stateno = 720
fvar(32) = 0
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Var(21)
triggerall = p2movetype = H
trigger1 = (stateno != [800,899])
trigger1 = movehit
trigger2 = projhit = 1
fvar(32) = 1
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = !Var(37)
triggerall = p2movetype = H
trigger1 = (stateno != [800,899])
trigger1 = movehit
trigger2 = projhit = 1
trigger3 = (stateno = 810 || stateno = 815) && animelem = 4 && movetype != H
trigger4 = (stateno = 831 || stateno = 832) && animelem = 6 && movetype != H
trigger5 = (stateno = 870 || stateno = 875) && animelem = 3 && movetype != H
fvar(32) = ifElse(Var(21),-2,2)
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
triggerall = MoveType != H
trigger1 = stateno = 320
fvar(32) = 3
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
triggerall = MoveType != H
trigger1 = stateno = 2800
fvar(32) = 4
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
triggerall = MoveType != H
trigger1 = stateno = 330
fvar(32) = 5
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
triggerall = MoveType != H
trigger1 = Var(14) = 1
fvar(32) = 6
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
trigger1 = stateno = 5201
trigger2 = stateno = 5210
trigger3 = stateno = 955 && movetype != H
fvar(32) = 9
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
triggerall = FVar(31)
triggerall = movetype != H
triggerall = stateno != [2800,2999]
trigger1 = stateno = [1000,3999]
fvar(32) = 10
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6600)
trigger1 = !FVar(32)
trigger2 = FVar(32) = [3,6]
id = 6600
name = "Guard"
pos =0,0
postype = P1
stateno = 6630
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6600)
trigger1 = !FVar(32)
trigger2 = FVar(32) = [3,6]
id = 6600
name = "Guard"
pos =0,0
postype = P1
stateno = 6620
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = !FVar(5)
triggerall = FVar(20)
triggerall = !NumHelper(6600)
trigger1 = !FVar(32)
trigger2 = FVar(32) = [3,6]
id = 6600
name = "Guard"
pos =0,0
postype = P1
stateno = 6610
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !FVar(4)
triggerall = FVar(20)
triggerall = !NumHelper(6600)
trigger1 = !FVar(32)
trigger2 = FVar(32) = [3,6]
id = 6600
name = "Guard"
pos =0,0
postype = P1
stateno = 6600
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6601)
trigger1 = FVar(32) = 1 || FVar(32) = -2
trigger2 = NumHelper(77)
id = 6601
name = "Counter Hit"
pos =0,0
postype = P1
stateno = 6631
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = !FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6601)
trigger1 = FVar(32) = 1 || FVar(32) = -2
trigger2 = NumHelper(77)
id = 6601
name = "Counter Hit"
pos =0,0
postype = P1
stateno = ifelse(Var(37)=0,6631,6621)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = !FVar(5)
triggerall = FVar(20)
triggerall = !NumHelper(6601)
trigger1 = FVar(32) = 1 || FVar(32) = -2
trigger2 = NumHelper(77)
id = 6601
name = "Counter Hit"
pos =0,0
postype = P1
stateno = ifelse(Var(37)=0,6621,6611)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !FVar(4)
triggerall = FVar(20)
triggerall = !NumHelper(6601)
trigger1 = FVar(32) = 1 || FVar(32) = -2
trigger2 = NumHelper(77)
id = 6601
name = "Counter Hit"
pos =0,0
postype = P1
stateno = ifelse(Var(37)=0,6611,6601)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6602)
triggerall = roundstate = 2
trigger1 = FVar(32) = 2 || FVar(32) = -2
trigger2 = NumHelper(78)
id = 6602
name = "First Attack"
pos =0,0
postype = P1
stateno = 6632
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = !FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6602)
triggerall = roundstate = 2
trigger1 = FVar(32) = 2 || FVar(32) = -2
trigger2 = NumHelper(78)
id = 6602
name = "First Attack"
pos =0,0
postype = P1
stateno = 6622
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = !FVar(5)
triggerall = FVar(20)
triggerall = !NumHelper(6602)
triggerall = roundstate = 2
trigger1 = FVar(32) = 2 || FVar(32) = -2
trigger2 = NumHelper(78)
id = 6602
name = "First Attack"
pos =0,0
postype = P1
stateno = 6612
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !FVar(4)
triggerall = FVar(20)
triggerall = !NumHelper(6602)
triggerall = roundstate = 2
trigger1 = FVar(32) = 2 || FVar(32) = -2
trigger2 = NumHelper(78)
id = 6602
name = "First Attack"
pos =0,0
postype = P1
stateno = 6602
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6603)
trigger1 = FVar(32) = [7,9]
id = 6603
name = "Tech Hit"
pos =0,0
postype = P1
stateno = 6633
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = !FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6603)
trigger1 = FVar(32) = [7,9]
id = 6603
name = "Tech Hit"
pos =0,0
postype = P1
stateno = 6623
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = !FVar(5)
triggerall = FVar(20)
triggerall = !NumHelper(6603)
trigger1 = FVar(32) = [7,9]
id = 6603
name = "Tech Hit"
pos =0,0
postype = P1
stateno = 6613
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !FVar(4)
triggerall = FVar(20)
triggerall = !NumHelper(6603)
trigger1 = FVar(32) = [7,9]
id = 6603
name = "Tech Hit"
pos =0,0
postype = P1
stateno = 6603
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6604)
trigger1 = FVar(32) = 10
id = 6604
name = "Reversal"
pos =0,0
postype = P1
stateno = 6634
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = !FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6604)
trigger1 = FVar(32) = 10
id = 6604
name = "Reversal"
pos =0,0
postype = P1
stateno = 6624
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = !FVar(5)
triggerall = FVar(20)
triggerall = !NumHelper(6604)
trigger1 = FVar(32) = 10
id = 6604
name = "Reversal"
pos =0,0
postype = P1
stateno = 6614
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !FVar(4)
triggerall = FVar(20)
triggerall = !NumHelper(6604)
trigger1 = FVar(32) = 10
id = 6604
name = "Reversal"
pos =0,0
postype = P1
stateno = 6604
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

;Tech Hit Points
[State 180, 1]
type = VarAdd
trigger1 = FVar(32) = 9
var(47)=500
ignorehitpause = 1

;Reversal Points
[State 180, 1]
type = VarAdd
trigger1 = FVar(32) = 10
var(47) = 2000
ignorehitpause = 1

[State 180, 1]
type = VarSet
trigger1 = FVar(31) = 3
trigger2 = (stateno = [1000,3999]) && time = 1
fvar(30) = 0
ignorehitpause = 1

[State 180, 1]
type = VarSet
trigger1 = FVar(31) = 3
trigger2 = (stateno = [1000,3999]) && time = 1
fvar(31) = 0
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = Var(28) = [0,1]
fvar(33) = 1
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = Var(28) = 2
fvar(33) = 5
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = Var(28) = 3 || Var(28) = 4
fvar(33) = 6+((Var(10)=[4,6])*5)
ignorehitpause = 1

[State 180, 1]
type = VarSet
trigger1 = !numtarget
var(3) = 0
ignorehitpause = 1

[State 180, 1]
type = VarSet
trigger1 = Var(28) = 2 && Var(59) = 3 && (FVar(32) = 1 || FVar(32) = -2)
trigger2 = Var(28) = 3 && Var(59) = 3
trigger3 = Var(28) = 4 && Var(59) = [2,3]
trigger4 = Var(31) && Var(59) = 3
var(3) = 1
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = Var(31) ;&& !Var(3)
fvar(33) = 3
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = Var(3) = 1
fvar(33) = 12
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6700)
triggerall = winKO
triggerall = alive
trigger1 = !FVar(21)
id = 6700
name = "Finish Hit"
pos =0,0
postype = P1
stateno = 6730
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = !FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6700)
triggerall = winKO
triggerall = alive
trigger1 = !FVar(21)
id = 6700
name = "Finish Hit"
pos =0,0
postype = P1
stateno = 6720
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = !FVar(5)
triggerall = FVar(20)
triggerall = !NumHelper(6700)
triggerall = winKO
triggerall = alive
trigger1 = !FVar(21)
id = 6700
name = "Finish Hit"
pos =0,0
postype = P1
stateno = 6710
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !FVar(4)
triggerall = FVar(20)
triggerall = !NumHelper(6700)
triggerall = winKO
triggerall = alive
trigger1 = !FVar(21)
id = 6700
name = "Finish Hit"
pos =0,0
postype = P1
stateno = 6700
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = Var(39) = 5
trigger1 = FVar(15) = 1
trigger1 = !Var(36)
id = 6704
name = "Complete"
pos =0,0
postype = P1
stateno = 6734
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = FVar(5)
triggerall = !FVar(6)
triggerall = FVar(20)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = Var(39) = 5
trigger1 = FVar(15) = 1
trigger1 = !Var(36)
id = 6704
name = "Complete"
pos =0,0
postype = P1
stateno = 6724
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = FVar(4)
triggerall = !FVar(5)
triggerall = FVar(20)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = Var(39) = 5
trigger1 = FVar(15) = 1
trigger1 = !Var(36)
id = 6704
name = "Complete"
pos =0,0
postype = P1
stateno = 6714
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !FVar(4)
triggerall = FVar(20)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = Var(39) = 5
trigger1 = FVar(15) = 1
trigger1 = !Var(36)
id = 6704
name = "Complete"
pos =0,0
postype = P1
stateno = 6704
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !FVar(4)
triggerall = FVar(20)
triggerall = win
triggerall = alive
trigger1 = FVar(22) = 1
id = 6701
name = "Vital"
pos =0,0
postype = P1
stateno = 6701
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !FVar(5)
triggerall = FVar(20)
triggerall = win
triggerall = alive
trigger1 = FVar(22) = 1
trigger1 = !FVar(15)
id = 6702
name = "Perfect"
pos =0,0
postype = P1
stateno = 6712
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !FVar(5)
triggerall = FVar(20)
triggerall = win
triggerall = alive
trigger1 = FVar(22) = 1
trigger1 = FVar(15) = 1
id = 6703
name = "Max Combo"
pos =0,0
postype = P1
stateno = 6713
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !FVar(6)
triggerall = FVar(20)
triggerall = win
triggerall = alive
trigger1 = FVar(22) = 1
trigger1 = !FVar(15)
id = 6703
name = "Max Combo"
pos =0,0
postype = P1
stateno = 6723
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

;----------------------------------------------------------------------------------
; Burn/Shock Sparks
[State -2, Combo]
type = VarSet
trigger1 = FVar(3)
fvar(3) = 0
ignorehitpause = 1

[State -2, Combo]
type = Null;VarSet
triggerall = p2movetype = H
trigger1 = projhittime(80085) = 1
fvar(3) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = p2movetype = H
trigger1 = StateNo = 3215 && NumTarget(3215);projhittime(3200) = 1;StateNo = 3215 && Anim = 3240 && AnimElem = 8
fvar(3) = 2
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = !NumHelper(8300)
trigger1 = FVar(3) = 1
id = 8300
name = "FireEffect_Down"
pos = 0,0
postype = P2
stateno = 8300
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = !NumHelper(8300)
trigger1 = FVar(3) = 2
id = 8300
name = "FireEffect_KnockBack"
pos =0,0
postype = P2
stateno = 8301
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

;----------------------------------------------------------------------------------
; Counter Hit Effect
[State -3, Blocking5]
type = Helper
trigger1 = FVar(32) = 1 || FVar(32) = -2
trigger1 = ProjHit = 0
ID = 8130
name = "COUNTER HIT EFFECT"
pos = Ceil(enemy,Const(size.ground.front)+FVar(26)),Ceil(Pos Y-enemy,Pos Y+FVar(27))
postype = P2
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
size.xscale = 1
size.yscale = 1

;----------------------------------------------------------------------------------
; Announcer Voice
[State -2, Combo]
type = VarSet
trigger1 = NumEnemy
trigger1 = Enemy,MoveType != H
var(51) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarAdd
trigger1 = (StateNo != [800,899])
trigger1 = MoveHit
trigger2 = ProjHit = 1
var(51) = 1
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = FVar(7)
triggerall = NumEnemy
triggerall = roundstate = 2
triggerall = (Var(51) = 5 && !Var(31)) || (Var(51) = 10 && Var(31))
triggerall = StateNo != 810
triggerall = StateNo != 3100
trigger1 = !NumHelper(6800)&&!Var(35)
trigger2 = !NumHelper(6800)&&Var(35)=1&&!enemynear,NumHelper(6800)
ID = 6800
name = "narration_3"
pos =0,0
postype = P1
stateno = 6802
helpertype = Normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999

[State 180, 1];First Attack
type = VarAdd
trigger1 = FVar(32) = 2 || FVar(32) = -2
var(47) = 5000
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = FVar(7)
triggerall = Var(34) < 400
triggerall = NumEnemy
triggerall = (!NumHelper(6800)&&!Var(35)) || (!NumHelper(6800)&&Var(35)=1&&!enemynear,NumHelper(6800)) || (NumHelper(78))
trigger1 = FVar(32) = 2 || FVar(32) = -2
ID = 6800
name = "narration_2"
pos = 0,300
postype = Left
stateno = 6801
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999

[State -2, Combo]
type = VarSet
trigger1 = FVar(32) = 2 || FVar(32) = -2
trigger2 = MoveType = H && (StateNo != [150,159]) && (StateNo != [500,599])
var(37) = 1
ignorehitpause = 1
persistent = 0

[State 180, 1];Hit bonus
type = VarAdd
triggerall = roundstate = 2
trigger1 = moveguarded
trigger2 = projGuarded = 1
var(47)=IfElse((hitdefattr=SCA,NA,NP,NT),-50,IfElse((hitdefattr=SCA,SA,SP,ST),-30,-20))
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = VarAdd
triggerall = roundstate = 2
triggerall = !Var(21)
triggerall = p2movetype = H
trigger1 = (stateno != [800,899])
trigger1 = movehit
trigger2 = projhit = 1
var(47)=500
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = VarAdd
triggerall = roundstate = 2
triggerall = Var(21)
triggerall = p2movetype = H
trigger1 = (stateno != [800,899])
trigger1 = movehit
trigger2 = projhit = 1
var(47)=IfElse((hitdefattr=SCA,NA,NP,NT),1001,IfElse((hitdefattr=SCA,SA,SP,ST),3001,5001))
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = VarAdd
triggerall = roundstate = 2
triggerall = Var(21)
triggerall = p2movetype = H
trigger1 = movehit
trigger2 = projhit = 1
var(47)=1000
ignorehitpause = 1
persistent = 1

[State -2, Combo];MAX Power Combo Bonus
type = VarSet
trigger1 = P2MoveType = H
trigger1 = Var(33) < Var(51)
var(33) = Var(51)
ignorehitpause = 1
persistent = 1

[State 180, 1];Combo bonus
type = VarAdd
triggerall = roundstate = 2
triggerall = Var(51) >= 2
trigger1 = (stateno != [800,899])
trigger1 = movehit
trigger2 = projhit = 1
var(47) = IfElse(Var(51)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State -2, Combo]
type = VarSet
trigger1 = movehit
trigger2 = projHit = 1
var(50) = ifElse(MoveHit,1,3)
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = MoveGuarded
trigger2 = ProjGuarded = 1
trigger3 = MoveReversed
var(50) = ifElse((MoveGuarded||MoveReversed),2,4)
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = Time = 1
trigger1 = StateNo != 1205
trigger1 = StateNo != 1405
trigger1 = StateNo != 1505
trigger1 = StateNo != 3050
var(50) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = 1
fvar(12) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = movehit
trigger2 = projHit = 1
fvar(12) = ifElse(MoveHit,1,3)
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = moveguarded
trigger2 = projGuarded = 1
trigger3 = MoveReversed
fvar(12) = ifElse((MoveGuarded||MoveReversed),2,4)
ignorehitpause = 1

[State -2, MoveHitReset]
type = MoveHitReset
trigger1 = MoveContact
ignorehitpause = 1

;----------------------------------------------------------------------------------
; Power Increase
[State -2, Power]
type = VarSet
trigger1 = Var(10) = 1
var(40) = 0

[State -2, Power]
type = VarSet
trigger1 = Var(10) = 2
var(40) = 167

[State -2, Power]
type = VarSet
trigger1 = Var(10) = 3
var(40) = -125

[State -2, Power]
type = VarSet
trigger1 = Var(10) = 5
var(40) = -222

[State -2, Power]
type = VarSet
trigger1 = Var(10) = 4 || Var(10) = 6
var(40) = -1000

[State -2, Power2]
type = VarSet
triggerall = RoundState = 2
trigger1 = (100*life/const(data.life))<=100
trigger1 = (100*life/const(data.life))>30
var(41) = 0

[State -2, Power3]
type = VarSet
triggerall = RoundState = 2
trigger1 = (100*life/const(data.life))<=30
trigger1 = (100*life/const(data.life))>15
var(41) = 2

[State -2, Power4]
type = VarSet
triggerall = RoundState = 2
trigger1 = (100*life/const(data.life))<=15
trigger1 = (100*life/const(data.life))>0
var(41) = 4

[State -2, Power]
type = VarSet
triggerall = RoundState = 2
trigger1 = 1
var(42) = GetHitVar(damage)

;----------------------------------------------------------------------------------
; Combo Dampener
[State -2, PowerReset]
type = VarSet
triggerall = Var(10) = 1 || !Var(10)
triggerall = !Var(31)
triggerall = roundstate = 2
trigger1 = power = [0,999]
var(52) = 0

[State -2, PowerReset]
type = VarSet
triggerall = Var(10) != 1 && Var(10) != 0
trigger1 = roundstate = 2
var(52) = 0

[State -2, PowerReset]
type = VarSet
triggerall = Var(10) = 1 || !Var(10)
triggerall = !Var(31)
triggerall = roundstate = 2
trigger1 = power = [1000,1999]
var(52) = 1

[State -2, PowerReset]
type = VarSet
triggerall = Var(10) = 1 || !Var(10)
triggerall = !Var(31)
triggerall = roundstate = 2
trigger1 = power = [2000,2999]
var(52) = 2

[State -2, PowerReset]
type = VarSet
triggerall = Var(10) = 1 || !Var(10)
triggerall = !Var(31)
triggerall = roundstate = 2
trigger1 = power >= 3000
var(52) = 5

[State -2, PowerReset]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*life/const(data.life))<=100
trigger1 = (100*life/const(data.life))>30
var(53) = 0

[State -2, PowerReset2]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*life/const(data.life))<=30
trigger1 = (100*life/const(data.life))>15
var(53) = 5

[State -2, PowerReset3]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*life/const(data.life))<=15
trigger1 = (100*life/const(data.life))>0
var(53) = 10

[State -2, PowerReset4]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*enemy,life/enemy,const(data.life))<=100
trigger1 = (100*enemy,life/enemy,const(data.life))>30
var(54) = 0

[State -2, PowerReset5]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*enemy,life/enemy,const(data.life))<=30
trigger1 = (100*enemy,life/enemy,const(data.life))>15
var(54) = -10

[State -2, PowerReset6]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*enemy,life/enemy,const(data.life))<=15
trigger1 = (100*enemy,life/enemy,const(data.life))>0
var(54) = -25

[State -2, PowerReset]
type = VarSet
triggerall = Var(10) = 6
triggerall = roundstate = 2
trigger1 = Var(19)
var(58) = ifElse((Stateno = [195,999]),35,ifElse((Stateno = [1000,2999]),30,10))

[State -2, PowerReset]
type = VarSet
triggerall = Var(10) = 6
triggerall = roundstate = 2
trigger1 = !Var(19)
var(58) = 0

[State -2, PowerReset]
type = VarSet
triggerall = Var(10) != 6
triggerall = roundstate = 2
trigger1 = 1
var(58) = 0

[State -2, 1]
type = VarSet
trigger1 = P2movetype != H
var(51) = 0

[State -2]
type = VarSet
trigger1 = Var(51) < 10
trigger1 = Var(31)
trigger1 = StateNo = [0, 2999]
fvar(9) = (10-Var(51))*.1*.72
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = Var(51) >= 10
trigger1 = Var(31)
trigger1 = StateNo = [0, 2999]
fvar(9) = .072
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = Var(31)
trigger1 = StateNo = [3000, 3999]
fvar(9) = .8
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = !Var(31)
trigger1 = Var(51) = [6,29]
trigger1 = StateNo = [0, 2999]
fvar(9) = (24-(Var(51)-5))*.0375;.0417
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = !Var(31)
trigger1 = Var(51) > 30
trigger1 = StateNo = [0, 2999]
fvar(9) = .0375;.0417
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = !Var(31)
trigger1 = Var(51) <= 5
trigger2 = StateNo = [3000, 3999]
fvar(9) = 1
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = 1
fvar(10) = (100+Var(52))*.01*(100+Var(53))*.01*(100+Var(54))*.01*(100+Var(58))*.01*(100+((Var(17)>0)*15))*.01*(100+((Var(29)>0)*20))*.01*(10+(Var(21)*2))*.1*FVar(9)
ignorehitpause = 1

;---------------------
; Counter Hit
[State -2, VarSet]
type = VarSet
trigger1 = P2MoveType = A
var(21) = 1

[State -2, VarSet]
type = VarSet
trigger1 = P2MoveType != A
var(21) = 0

;---------------------
; Safe Fall
[State -2, VarSet]
type = VarSet
trigger1 = StateNo = 5000 || StateNo = 5020 || StateNo= 5070 || StateNo= 5080
trigger1 = Time = 1
trigger1 = P2StateNo = [3000,3999]
var(15) = 1

[State -2, VarSet]
type = VarSet
trigger1 = StateNo = 5000 || StateNo = 5020 || StateNo= 5070 || StateNo= 5080
trigger1 = Time = 1
trigger1 = P2StateNo != [3000,3999]
trigger2 = MoveType != H
var(15) = 0

;---------------------
; Cheap KO Anim
[State -2, 3]
type = ChangeState
trigger1 = !Alive
trigger1 = PrevStateNo = 130 || PrevStateNo = 131 || PrevStateNo = [150,153]
trigger1 = Stateno = [5000,5050]
value = 5950

[State -2,KO]
type = Varset
triggerall = StateNo = [120,159]
trigger1 = StateType = S
ignorehitpause = 1
fvar(1) = 0

[State -2,KO]
type = Varset
triggerall = StateNo = [120,159]
trigger1 = StateType = C
ignorehitpause = 1
fvar(1) = 1

[State -2,KO]
type = Varset
triggerall = StateNo = [120,159]
trigger1 = StateType = A
ignorehitpause = 1
fvar(1) = 2

;---------------------
; Sound
[State -3, Bounding Sound]
type = PlaySnd
triggerall = Anim = 5950 && roundstate = 2
triggerall = random%2 = 0
trigger1 = AnimElemTime(1) = 2
value = S5000,2+Var(24)
channel = 0

[State -3, Bounding Sound]; Ground Hit
type = PlaySnd
triggerall = Anim = 5950
trigger1 = AnimElem = 6
value = S5100,0

[State 3010,PlaySnd]
type = PlaySnd
triggerall = AnimElem = 1,=3
trigger1 = stateno = 950 && movetype != H
trigger2 = stateno = 955 && movetype != H
value = S8+Var(24),4
channel = 0

;----------------Parry-------------------------------------------------------
; Thanks, Phantom.of.the.Server!
[State -2, Parry]
type = Helper
triggerall = (var(5)&8)>0
triggerall = RoundState = 2 && !NumHelper(725) && !Var(31)
triggerall = (MoveType=I && Ctrl) || (StateNo=[700,720]) || StateNo=5120
triggerall = (command != "release_up" && command != "release_down" && command != "release_back" && command != "release_fwd")
trigger1 = (StateType = S || StateType = C || StateNo=5120) && (command="parry" || command="parry2")
trigger2 = StateType = A && command="parry" && Var(6) < 2
helpertype = Normal
stateno = 725
ID = 725
name = "Parry Detection"
postype = p1
pausemovetime = 65535
supermovetime = 65535

[State -2, Attack]
type = ChangeState
trigger1 = (StateNo != [700,720]) && NumHelper(725)
trigger1 = Helper(725), StateNo = 726
value = ifElse((Helper(725), Anim=727), 720, ifElse((Helper(725), Anim=726), 710, 700))
ignorehitpause = 1

[State -2, Proj-S]
type = HitOverRide
trigger1 = (StateNo!=[700,720]) && NumHelper(725)
trigger1 = !(Helper(725),Var(0)) && (Helper(725),Anim=725)
attr = SA,AP
stateno = 700
slot=0
time=1
ignorehitpause = 1
[State -2, Proj-C]
type = HitOverRide
trigger1 = (StateNo!=[700,721]) && NumHelper(725)
trigger1 = !(Helper(725),Var(0)) && (Helper(725),Anim=726)
attr = C,AP
stateno = 710
slot=0
time=1
ignorehitpause = 1
[State -2, Proj-A]
type = HitOverRide
trigger1 = (StateNo!=[700,721]) && NumHelper(725)
trigger1 = !(Helper(725),Var(0)) && (Helper(725),Anim=727)
attr = SCA,AP
stateno = 720
slot=0
time=1
ignorehitpause = 1

[State -2, AssertSpecial]
type = AssertSpecial
trigger1 = Var(1) > 0
trigger1 = Var(1) := (Var(1)-1)
flag=NoWalk

;------------Just Defense----------------------------------------------------
;----------------------------------------------------------------------------
; Again, thank you Warusaki.

;Just Defense Input
[State -2, VarSet]
type = VarSet
trigger1 = RoundState = 0
var(0) = -1

[State -2, VarAdd]
type = VarAdd
trigger1 = Var(0) >= 0
var(0) = 1
ignorehitpause = 1

[State -2, 46]
type = VarSet
triggerall = Var(0) > 12
trigger1 = Command != "holdback"
var(0) = -1

[State -2, 46]
type = VarSet
triggerall = Var(0) = -1
triggerall = StateNo != [140,149]
trigger1 = Command = "back"
trigger2 = Command = "downback"
var(0) = 0

[State -2, 46]
type = VarSet
triggerall = Var(0) = [0,6]
trigger1 = Command != "holdback"
var(0) = 7

[State -2, 46]
type = VarSet
trigger1 = StateNo != [120,155]
var(14) = 0
ignorehitpause = 1

;----------------------------------------------------------------------------------
; Decrease shakeTime and hitTime for Just Defense
[State -2, WTF]
type = VarAdd
trigger1 = Var(2) > 0
var(2) = -1
ignorehitpause = 1

[State -2, WTF]
type = VarAdd
trigger1 = !Var(2)
trigger1 = Var(13) > 0
var(13) = -1
ignorehitpause = 1

;Standing Just Defense
[State -2, 3]
type = VarSet
triggerall = (var(5)&4)>0
triggerall = Var(14) != -1
triggerall = StateNo = 150 && !Time
trigger1 = Var(0) = [0,6]
var(14) = 1

;Crouching Just Defense
[State -2, 3]
type = VarSet
triggerall = (var(5)&4)>0
triggerall = Var(14) != -1
triggerall = StateNo = 152 && !Time
trigger1 = Var(0) = [0,6]
var(14) = 1

;Aerial Just Defense
[State -2, new]
type = HitOverride
triggerall = (var(5)&4)>0
triggerall = Var(14) != -1
triggerall = StateType = A && Ctrl && (-Pos Y >= Vel Y)
triggerall = Var(6) != 2
trigger1 = Var(0) = [0,6]
slot = 0
stateno = 154
attr = SCA, AA, AP
time = 1

[State -2, 46]
type = VarSet
triggerall = StateNo = 154
triggerall = Time = 0
trigger1 = PrevStateNo = 5020
var(14) = 1
ignorehitpause = 1

;----------------------------------------------------------------------------------
; KO Voice
[State -2,AI]
type = VarSet
trigger1 = 1
ignorehitpause = 1
fvar(2) = 0

[State -2,AI]
type = VarSet
trigger1 = Anim = 5950 || StateNo = 5950
ignorehitpause = 1
fvar(2) = 1

[State -2,AI]
type = VarSet
trigger1 = movetype != H
trigger1 = roundstate = 2
ignorehitpause = 1
fvar(35) = 0

[State -2,AI]
type = VarSet
trigger1 = StateNo = 5000 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080
trigger1 = roundstate = 2
trigger1 = Time = 0
ignorehitpause = 1
fvar(35) = GetHitVar(hitshaketime)

[State -2, KO]
type = PlaySnd
triggerall = roundstate = 3
trigger1 = !FVar(2) && !FVar(0)
trigger1 = FVar(36) = ifElse(!FVar(35),1,ifelse(FVar(35)>20,20,FVar(35)))
trigger2 = !FVar(19) && FVar(0)
trigger2 = FVar(36) = 12
ignorehitpause = 1
value = S111, Var(24)

[State -2, KO]
type = PlaySnd
triggerall = roundstate = 3
triggerall = FVar(2)
trigger1 = Anim = 5950 && AnimElemTime(2) = 1
ignorehitpause = 1
value = S5950, Var(24)

[State -2, KO]
type = PlaySnd
triggerall = NumEnemy
trigger1 = (Enemy, Name = "cvsgouki_ex" || Enemy, Name = "cvsgouki" && Enemy, Var(12))
trigger1 = StateNo = 3305 && MoveType = H
trigger1 = Time = 35
ignorehitpause = 1
value = S5950, Var(24)

[State -2,KO]
type = Varadd
trigger1 = !Alive
ignorehitpause = 1
fvar(36) = 1

[State -2,KO]
type = Varset
trigger1 = Alive
ignorehitpause = 1
fvar(36) = 0

;----------------------------------------------------------------------------------
; Do this crap when KO'd
[State -2, HyperComboFinish]
type = Helper
triggerall = WinKo && !FVar(21)
trigger1 = StateNo = [3000, 3999]
trigger2 = Var(31)
trigger3 = FVar(33) = 12
;trigger4 = projhittime(3005) = 1 || projhittime(3405) = 1
ID = 9000
stateno = ifElse(FVar(33) = 12,9002,ifElse((Var(10)=[4,6]),9010,9000))
postype = left
pos = -50,0
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
persistent = 0

[State -2, HyperComboFinish]
type = Pause
trigger1 = WinKo && !FVar(21)
time = 10
ignorehitpause = 1

[State -2, HyperComboFinish]
type = PlaySnd
trigger1 = WinKo && !FVar(21)
value = S9000,0
ignorehitpause = 1

[State -2,KO]
type = VarAdd
trigger1 = roundstate = 3
ignorehitpause = 1
fvar(21) = 1

[State -2,KO]
type = VarSet
trigger1 = roundstate = 0
ignorehitpause = 1
fvar(21) = 0

[State -2,KO]
type = VarAdd
trigger1 = roundstate = 4
ignorehitpause = 1
fvar(22) = 1

[State -2,KO]
type = VarSet
trigger1 = roundstate = 0
ignorehitpause = 1
fvar(22) = 0

;-------
; AfterImage Remover
[State -2, AfterImageTime]
type = AfterImageTime
triggerall = !Var(31)
trigger1 = MoveType = H
trigger2 = StateNo = [0,49]
trigger3 = StateNo = [52,199]
trigger4 = StateNo = [200,299]
trigger5 = StateNo = [400,499]
trigger6 = StateNo = [600,699]
trigger7 = StateNo = [800,1599]
time = 0

[State -2, VarSet]
type = VarSet
triggerall = !Var(30)
trigger1 = MoveType = H
trigger2 = StateNo != [40,50]
var(4) = 0

;===============================================================================
; ------- NotHitBy fix by Caddie --------
;===============================================================================
[State -2, hitby]
type = hitby
trigger1 = life > 0
trigger1 = stateno = 5100 || stateno = 5110 || stateno = 5120
trigger1 = anim != 5120
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
time = 1

;----------------------------------------------------------------------------------
; Reset Power & MAX
[State -2, 1]
type = PowerSet
triggerall = roundstate = 0
trigger1 = FVar(14)
trigger2 = Var(10) = 4
value = 0

[State -2, 1]
type = PowerSet
triggerall = RoundState = 0
triggerall = Var(10) = 6
trigger1 = Var(27) = 2
value = 0

[State -2, 1]
type = VarSet
trigger1 = Roundstate = 0 && (Var(19) || Var(27) = 2) && RoundNo != 1
trigger2 = Roundstate = 0 && roundno = 1
fvar(14) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0 || (stateNo = [180,189])
var(17) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0 || (stateNo = [180,189])
var(29) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0 || (stateNo = [180,189])
var(30) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0 || (stateNo = [180,189])
var(31) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0 && roundno = 1
var(19) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
var(33) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
var(34) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
var(35) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0 && roundno = 1
var(36) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
var(37) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
fvar(4) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
fvar(5) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
fvar(6) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0 && roundno = 1
fvar(14) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
fvar(15) = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0
fvar(16) = 0

[State -2, 1]
type = PalFX
trigger1 = roundstate = 0
Time = 1
add   = 0,0,0
ignorehitpause = 1

;CvS2 Character
[State -2, 1]
type = VarSet
trigger1 = 1
fvar(17) = 1;CAPCOM VS SNK 2

;----------------------------------------------------------------------------------
; Descale Groove Bar
[State -2, 1]
type = VarSet
triggerall = numenemy
triggerall = roundstate = 2
trigger1 = enemy,authorname = "warusaki3" && enemy,fvar(39) = 1
trigger2 = enemy,authorname = "mouser" && (P2Name = "Hibiki Takane" || P4Name = "Hibiki Takane")
trigger3 = enemy,authorname = "Jesuszilla" && enemy,fvar(17) = 1
trigger4 = enemy,authorname = "N64Mario" && enemy, Name = "Zero" && enemy,fvar(17) = 1
trigger5 = enemy,authorname = ".\/." && enemy,fvar(17) = 1
trigger6 = enemy,authorname = "Hh" && enemy,fvar(39) = 1
var(35) = 1

[State -2, 1]
type = VarSet
trigger1 = 1
fvar(0) = 0

[State -2, 1]
type = VarSet
triggerall = numenemy
trigger1 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsgouki"&&enemynear,var(13))
trigger2 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsgouki_normal"&&enemynear,var(13))
trigger3 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsgouki_ex"&&enemynear,var(13))
trigger4 = (enemynear,authorname="SUMI"&&enemynear,name="Destrudo Ryu"&&enemynear,var(16)=1)
trigger5 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsrugal"&&enemynear,var(13))
trigger6 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsrugal_ex"&&enemynear,var(13))
trigger7 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsryu"&&enemynear,var(13))
trigger8 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsryu_ex"&&enemynear,var(13))
trigger9 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsg_rugal"&&enemynear,var(13))
trigger10 = (enemynear,authorname="warusaki3"&&enemynear,name="cvssakura"&&enemynear,var(13))
fvar(0) = 1

[Statedef 69]
[State -2, 69]
type = ChangeState
trigger1 = 1
value = 69;@#

[State -2, OH SHI-]
type = ChangeState
triggerall = numenemy
trigger1 = enemy, AuthorName = "RyouWin"
trigger2 = enemy, AuthorName = "Ex-Inferis"
trigger3 = enemy, AuthorName = "Tetchi"
trigger4 = enemy, AuthorName = "bomb"
trigger5 = enemy, AuthorName = "beppu"
trigger6 = enemy, AuthorName = "Overmind"
trigger7 = enemy, AuthorName = "@ndroide"
trigger8 = enemy, AuthorName = "Moldredd"
trigger9 = enemy, AuthorName = "Smoke"
trigger10 = enemy, Name = "Lord Roger"

value = 69;@#

[State -2, OH SHI-]
type = ChangeState
triggerall = numpartner
trigger1 = Partner, AuthorName = "RyouWin"
trigger2 = Partner, AuthorName = "Ex-Inferis"
trigger3 = Partner, AuthorName = "Tetchi"
trigger4 = Partner, AuthorName = "bomb"
trigger5 = Partner, AuthorName = "beppu"
trigger6 = Partner, AuthorName = "Overmind"
trigger7 = Partner, AuthorName = "@ndroide"
trigger8 = Partner, AuthorName = "Moldredd"
trigger9 = Partner, AuthorName = "Smoke"
trigger10 = Partner, Name = "Lord Roger"

value = 69;@#


;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
