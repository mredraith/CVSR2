;; Homer's Basic Moves
; ______________________________________________


;---------------------------------------------------------------------

;---------------------------------------------------------------------
; Dｴoh !
[Data]
life = 1000          ; 体力ゲージ、上限値（デフォルト：1000）
attack = 100        ; 攻撃力（％）
defence = 100
power = 3000        ; 防御力（％）
fall.defence_up = 50 ; 空中コンボ修正率（％）
liedown.time = 15   ; ダウン時間
airjuggle = 30        ; 空中コンボ
sparkno = 2        ; 初期ヒットスパーク番号
guard.sparkno = 40 ; 初期ガードスパーク番号
KO.echo = 0          ; ＫＯボイスエコー（0:OFF、1:ON）
;volume = 128          ; キャラボイスボリューム値

[Size]
xscale = 0.8		
yscale = 0.8	
ground.back = 20
ground.front = 14
air.back = 20
air.front = 14
;z.width = 10
height = 58
;attack.width = 4,4
attack.dist = 160
proj.attack.dist = 90
proj.doscale = 0
head.pos = 0,-95
mid.pos = 0,-65
shadowoffset = 2

[Velocity]
walk.fwd  = 2.6
walk.back = -2.2
run.fwd  = 5.4, 0
run.back = -7,-3
jump.neu = 0,-9
jump.back = -2.8
jump.fwd = 	2.8
runjump.back = -4.3,-10
runjump.fwd = 4.3,-10
airjump.neu = 0,-8.1 ;0
airjump.back = -2.55 ;0,0
airjump.fwd = 2.5 ;0,0

[Movement]
airjump.num = 1
airjump.height = 35
yaccel = .45
stand.friction = .85
crouch.friction = .82

[Quotes]
; Up to 100 victory quotes can be specified per language (victory0 - victory99)
victory0 = "D'oh"
victory1 = "To Alcohol..."
victory2 = "Why you little!"
victory3 = "Woohoo!"
victory4 = "I am the champion!"

;===============================================================================
; Definition of the Basic Action
;===============================================================================

;===============================================================================
; Definition of the Win/Lose/Intro Pause
;===============================================================================

;-------------------------------------------------------------------------------
; Lose Animation
[Statedef 170]
type = S
ctrl = 0
anim = 175 + Var(39)*10000
velset = 0,0

[State 192,1]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

;Beer Riot Mode: Create Bart Devil
[State 193, 1]
type = Explod
trigger1 = Var(39)
trigger1 = AnimElem = 1,=0
anim = 10176
pos = 0,0
bindtime = -1
sprpriority = 5
ownpal = 1
persistent = 0

;Beer Riot Mode: Bart Evil Laugh
[State 100,1]
type = PlaySnd
trigger1 = Var(39)
trigger1 = AnimElem = 1,=0
value = 10170,0

[State 100,1]
type = PlaySnd
trigger1 = Var(39) = 0
trigger1 = AnimElem = 1
value = 191,2

[State 100,1]
type = PlaySnd
trigger1 = Var(39) = 0
trigger1 = AnimElem = 2
value = 175,0

[State 100,1]
type = PlaySnd
trigger1 = Var(39) = 0
trigger1 = AnimElem = 3
value = 13500,1

[State 100,1]
type = PlaySnd
trigger1 = Var(39) = 0
trigger1 = AnimElem = 2,=1
value = 5000,10

[State 0, EnvShake]
type = EnvShake
trigger1 = Var(39) = 0
trigger1 = AnimElem = 2,=1
time = 35
freq = 100
ampl = -25
phase = 154

[State 0, Explod]
type = Explod
triggerall = Var(39) = 0
trigger1 = time = 1
anim = 6170
ID = 6170
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 1,1
removetime = -2
scale = .5,.5
sprpriority = 8


[State 0, Helper]
type = Explod
trigger1 = time = 2
trigger1 = Var(39) = 0
anim =  179
pos = 0,0
bindtime = -1
sprpriority =2
ownpal = 1
persistent = 0
postype = p1
facing = 1
ownpal = 1


[State 170,3]
type = AssertSpecial
trigger1 = Time = [0,360]
flag = RoundNotOver

;-------------------------------------------------------------------------------
; Survival Mode: Lose
[Statedef 175]
type = S
ctrl = 0
anim = 175
velset = 0,0

[State 192,1]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 100,1]
type = PlaySnd
trigger1 = AnimElem = 1,=1
value = 191,2

[State 100,1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 175,0

[State 100,1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 5000,10

[State 0, EnvShake]
type = EnvShake
trigger1 = AnimElem = 3
time = 35
freq = 60
ampl = -8
phase = 90
;ignorehitpause =
;persistent =

[State 175,2]
type = ChangeState
trigger1 = Time = 0
value = 170
;-------------------------------------------------------------------------------
; Victory Animation
;-------------------------------------------------------------------------------
[Statedef 180]
type = S

[State 192,1]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

;Victory Animation - Random Selector
[State 180, VarRandom]
type = VarRandom
trigger1 = Time = 1
trigger1 = Var(39) = 0
trigger1 = NumHelper (3500) = 0 && var(9) = 0
range = 300
v = 5

;Victory Animation - Random Selector
[State 180, VarRandom]
type = VarRandom
trigger1 = Time = 1
trigger1 = Var(39) = 1
trigger1 = NumHelper (3500) = 0 && var(9) = 0
range = 300
v = 5

;Victory Animation - Choose Victory 1
[State 180, 9]
type = VarSet
trigger1 = NumHelper (3500) = 0 && var(9) = 0
trigger1 = command = "hold_a"
v = 5
value = 25

;Victory Animation - Choose Victory 2
[State 180, 9]
type = VarSet
trigger1 = NumHelper (3500) = 0 && var(9) = 0
trigger1 = command = "hold_b"
v = 5
value = 75

;Victory Animation - Choose Victory 3
[State 180, 9]
type = VarSet
trigger1 = NumHelper (3500) = 0 && var(9) = 0
trigger1 = command = "hold_c"
v = 5
value = 125

;Victory Animation - Choose Victory 4
[State 180, 9]
type = VarSet
trigger1 = NumHelper (3500) = 0 && var(9) = 0
trigger1 = command = "hold_x"
v = 5
value = 175

;Victory Animation - Choose Victory 5
[State 180, 9]
type = VarSet
trigger1 = NumHelper (3500) = 0 && var(9) = 0
trigger1 = command = "hold_y"
v = 5
value = 225

;Victory Animation - Choose Victory 6
[State 180, 9]
type = VarSet
trigger1 = NumHelper (3500) = 0 && var(9) = 0
trigger1 = command = "hold_z"
v = 5
value = 275

;Normal Victory 1 - Evil Homer
[State 180,ChangeState]
type = ChangeState
trigger1 = Time = 1
trigger1 = Var(39) = 0 && NumHelper (3500) = 0 && var(9) = 0
trigger1 = Var(5) = [0,50]
value = 181

;Normal Victory 2 - S-M-R-T
[State 180,ChangeState]
type = ChangeState
trigger1 = Time = 1
trigger1 = Var(39) = 0 && NumHelper (3500) = 0 && var(9) = 0
trigger1 = Var(5) = [51,100]
value = 182

;Normal Victory 3 - Iori Invincible
[State 180,ChangeState]
type = ChangeState
trigger1 = Time = 1
trigger1 = Var(39) = 0 && NumHelper (3500) = 0 && var(9) = 0
trigger1 = Var(5) = [101,150]
value = 183

;Normal Victory 4 - Bart Taunt
[State 180,ChangeState]
type = ChangeState
trigger1 = Time = 1
trigger1 = Var(39) = 0 && NumHelper (3500) = 0 && var(9) = 0
trigger1 = Var(5) = [151,200]
value = 184

;Normal Victory 5 - Homer Spin
[State 180,ChangeState]
type = ChangeState
trigger1 = Time = 1
trigger1 = Var(39) = 0 && NumHelper (3500) = 0 && var(9) = 0
trigger1 = Var(5) = [201,250]
value = 185

;Normal Victory 6 - Strong Man Homer
[State 180,ChangeState]
type = ChangeState
trigger1 = Time = 1
trigger1 = Var(39) = 0 && NumHelper (3500) = 0 && var(9) = 0
trigger1 = Var(5) = [251,300]
value = 189

;Road Roller D'oh! KO Victory - WRYYYYYYYY!!!
[State 180,ChangeState]
type = ChangeState
trigger1 = Time = 1
trigger1 = Var(39) = 1 && NumHelper (3500) !=0 && var(9) = 0
value = 186

;Shun Homer Satsu KO Victory
[State 180,ChangeState]
type = ChangeState
trigger1 = Time = 1
trigger1 = Var(39) = 1 && NumHelper (3500) !=0 && var(9) = 1
value = 1

;Victory Animation 1 - Beer Riot Homer - "To Alcohol..."
[State 180,ChangeState]
type = ChangeState
trigger1 = Time = 1
trigger1 = Var(39) = 1 && var(9) = 0
trigger1 = Var(5) = [0,82]
value = 10181

;Victory Animation 2 - Beer Riot Homer - "Free Duff!"
[State 180,ChangeState]
type = ChangeState
trigger1 = Time = 1
trigger1 = Var(39) = 1 && var(9) = 0
trigger1 = Var(5) = [83,166]
value = 10182

;Victory Animation 3 - Beer Riot Homer - Flander-ality
[State 180,ChangeState]
type = ChangeState
trigger1 = Time = 1
trigger1 = Var(39) = 1 && NumHelper (3500) = 0 && var(9) = 0
trigger1 = Var(5) = [167,249]
value = 187

;Victory Animation 3 - Homer Goku
[State 180,ChangeState]
type = ChangeState
trigger1 = Time = 1
trigger1 = Var(39) = 1 && var(9) = 0
trigger1 = Var(5) = [250,333]
value = 10183
;-------------------------------------------------------------------------------
; Victory 1 - Evil Homer
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 100,1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0,9

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [0,450]
flag = RoundNotOver
;-------------------------------------------------------------------------------
; Victory 2 - I am so S-M-R-T
[Statedef 182]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 100,1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0,10

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [0,400]
flag = RoundNotOver

;-------------------------------------------------------------------------------
; Victory 3 - Iori Invincible
[Statedef 183]
type = S
ctrl = 0
anim = 183
;velset = 0,0,0

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 100,1, Woohoo]
type = PlaySnd
trigger1 = AnimElem = 2,=1
value = 0,14

[State 100,1]
type = PlaySnd
trigger1 = AnimElem = 5,=1
value = 183,0

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [0,390]
flag = RoundNotOver

;-------------------------------------------------------------------------------
; Victory 4 - Bart Taunt
[Statedef 184]
type = S
ctrl = 0
anim = 184
velset = 0,0

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 100,1]
type = PlaySnd
trigger1 = AnimElem = 7,=1
value = 184,0

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [0,360]
flag = RoundNotOver


;-------------------------------------------------------------------------------
; Victory 5 - Homer Spin
[Statedef 185]
type = S
ctrl = 0
anim = 185
velset = 0,0

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 100,1, Woohoo]
type = PlaySnd
trigger1 = AnimElem = 2,=1
value = 0,14

[State 100,1, Homer Spin Whooping]
type = PlaySnd
trigger1 = AnimElem = 5,=1
value = 185,0
loop = 1

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [0,390]
flag = RoundNotOver

;------------------------------------------------------------------------------------------------------------------
;Victory 6 - Strong Man Homer
[Statedef 189]
type = S
ctrl = 0
anim = 189
velset = 0,0
sprpriority = -1

[State 189, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 189,1]
type = PlaySnd
trigger1 = AnimElem = 1;,=1
value = 0,14

[State 189,2]
type = PlaySnd
trigger1 = AnimElem = 7
value = 12,5

[State 189,3]
type = PlaySnd
trigger1 = AnimElem = 2
value = 189,0

[State 189, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 7100
id = 7100
pos = 0,0
postype = P1
bindtime = -1
sprpriority = 5
ownpal = 0
persistent = 1

[State 189, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [0,270]
flag = RoundNotOver
;-------------------------------------------------------------------------------
;Road roller D'oh victory
[Statedef 186]
type = S
ctrl = 0
anim = 13515
velset = 0,0

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 100,1, WRYYYYYYY]
type = PlaySnd
trigger1 = Time = 0
value = 13515,0

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [0,200]
flag = RoundNotOver
;-------------------------------------------------------------------------------
; Flander-ality Victory!
[Statedef 187]
type = S
ctrl = 0
anim = 10183
velset = 0,0

[State 183, 1]
type = Explod
trigger1 = time = 0
anim = 7040
id = 7040
pos = 156,90
postype = left
bindtime = -1
facing = 1
sprpriority = 2
ontop = 1
ownpal = 0

[State 183,3]
type = PlaySnd
trigger1 = AnimElem = 1
value = 5,5

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = Time > 105
flag = nomusic

[State 100,1, Fatality Start]
type = PlaySnd
trigger1 = AnimElem = 4
value = 10183,1


[State 0, BGPalFX]
type = BGPalFX
trigger1 = AnimElem = 1
time = -1
add = 0,0,0
mul = 112,112,112
sinadd = 0,0,0,10
invertall = 0
color = 256

[State 100,1, Fatality Hit]
type = PlaySnd
trigger1 = AnimElem = 7
value = 10183,5

[State 0, EnvShake]
type = EnvShake
trigger1 = AnimElem = 7
time = 30
freq = 60
ampl = -9
phase = 90
;ignorehitpause =
;persistent =

[State 100,1, Death Scream]
type = PlaySnd
trigger1 = AnimElem = 8
value = 10183,3

[State 100,1, Homer Laugh]
type = PlaySnd
trigger1 = AnimElem = 13
value = 10183,4

[State 100,1, MK Fatality Theme]
type = PlaySnd
trigger1 = Time = 530
value = 10183,0

[State 100,1, Fatality]
type = PlaySnd
trigger1 = Time = 740
value = 10183,2



[State 0, Helper]
type = Helper
trigger1 = Time = 740
trigger1 = Facing = 1
helpertype = normal ;player
name =  "Fatality"
ID =  10184
stateno = 10184
pos = 160,-136
postype = back
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = Time = 740
trigger1 = Facing = -1
helpertype = normal ;player
name =  "Fatality"
ID =  10184
stateno = 10184
pos = 160,-136
postype = back
facing = -1
keyctrl = 0
ownpal = 1

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [0,1000]
flag = RoundNotOver
;-------------------------------------
;Fatality Helper
[Statedef 10184]
type = S
physics = N
ctrl = 0
anim = 10184
velset = 0,0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time > 2000
;-------------------------------------------------------------------------------
; Shun Homer Satsu Victory
[Statedef 188]
type = S
ctrl = 0
anim = 13604
velset = 0,0

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [0,120]
flag = RoundNotOver
;-------------------------------------------------------------------------------
; Victory - Beer Riot Homer - "To alcohol..."
[Statedef 10181]
type = S
ctrl = 0
anim = 10181
velset = 0,0

[State 100,1]
type = PlaySnd
trigger1 = AnimElem = 1,=1
value = 0,117

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [0,410]
flag = RoundNotOver
;-------------------------------------------------------------------------------
; Victory - Beer Riot Homer - "Free Duff!"
[Statedef 10182]
type = S
ctrl = 0
anim = 10181
velset = 0,0

[State 100,1]
type = PlaySnd
trigger1 = AnimElem = 1,=1
value = 0,115

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 181, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [0,360]
flag = RoundNotOver
;---------------------------------------------------------------------------
; Victory - Homer Goku
[Statedef 10183]
type = S
ctrl = 0
anim = 10185
velset = 0,0

[State 10183,1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 666,1
loop = 1

[State 10183,1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 10192,2

[State 10183, EnvShake]
type = EnvShake
trigger1 = AnimElem = 4
time = 360
ampl = -2
freq = 60
phase = 60

[State 10183, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 2150
id = 2150
pos = -40,5
postype = P1
bindtime = -1
sprpriority = -1
ownpal = 0
persistent = 1

[State 10183, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 2151
id = 2151
pos = 40,5
postype = P1
bindtime = -1
sprpriority = -1
ownpal = 0
persistent = 1

[State 10183, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 10183, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [0,280]
flag = RoundNotOver
;---------------------------------------------------------------------------
;Intros
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

;Intro Animation Random Selector
[State 180, VarRandom]
type = VarRandom
trigger1 = Time = 0
range = 0,349
v = 1

[State 190,4] ;Intro versus CHOUJIN DBZ characters (GigaBowserX)
type = ChangeState
triggerall = Time = 0
trigger1 = Enemy, AuthorName = "CHOUJIN" || Enemy, AuthorName = "CHOUJIN"
trigger2 = Enemy, AuthorName = "stig87" || Enemy, AuthorName = "stig87"
trigger3 = Enemy, AuthorName = "miaoyu" || Enemy, AuthorName = "miaoyu"
trigger4 = Enemy, AuthorName = "Tomo" || Enemy, AuthorName = "Tomo"
trigger5 = Enemy, AuthorName = "Gladiacloud" || Enemy, AuthorName = "Gladiacloud"
value = 194

;MH128's custom intros
;-----------------------------------------------------------------------------------------------------
[State 191,4]
type = ChangeState
trigger1 = enemy,Name = "Iori Yagami" && enemy,authorname = "[Yagami+ihoo1836]"
trigger1 = RoundNo = 1
value = 10901

[State 191,4]
type = ChangeState
triggerall = NumPartner
trigger1 = partner,Name = "Peter Griffin" && partner, authorname = "The 14th Doctor";(Only for making sure if The 14th Doctor's edit exists)
trigger1 = RoundNo = 1
value = 11190
;-----------------------------------------------------------------------------------------------------

[State 191,4]
type = ChangeState
trigger1 = P2Name = "Peter Griffin" || P4Name = "Peter Griffin"
trigger1 = RoundNo = 1
value = 191

[State 190,giantchickenwarner]
type = ChangeState
trigger1 = p2name = "big chicken"|| p4name = "big chicken"
trigger1 = RoundNo = 1
value = 119

[State 190,giantchickensmrt]
type = ChangeState
trigger1 = p2name = "Giant Chicken"|| p4name = "Giant Chicken"
trigger1 = RoundNo = 1
value = 10197

[State 190,Iroi]
type = ChangeState
trigger1 = p2name = "Iori Yagami"|| p4name = "Iori Yagami"
;trigger2 = p2name = "The Man Who Troubled The World" || p4name = "The Man Who Troubled The World"
trigger1 = RoundNo = 1
value = 10900

;Intro 1: Super Homer
[State 190,ChangeState]
type = ChangeState
trigger1 = Time = 1
trigger1 = Var(39) = 0
trigger1 = Var(1) = [0,49]
value = 10190

;Intro 2: "Strong Man" Homer
[State 190,ChangeState]
type = ChangeState
trigger1 = Time = 1
trigger1 = Var(39) = 0
trigger1 = Var(1) = [50,99]
value = 10191

;Intro 3: 1987 Homer
[State 190,ChangeState]
type = ChangeState
trigger1 = Time = 1
trigger1 = Var(39) = 0
trigger1 = Var(1) = [100,149]
value = 10194

[State 190, ChangeState]
type = ChangeState
trigger1 = Time = 1
trigger1 = Var(39) = 0
trigger1 = Var(1) = [120,199]
value = 196

[State 190, ChangeState]
type = ChangeState
trigger1 = Time = 1
trigger1 = Var(39) = 0
trigger1 = Var(1) = [140,249]
value = 197

[State 190, ChangeState]
type = ChangeState
trigger1 = Time = 1
trigger1 = Var(39) = 0
trigger1 = Var(1) = [160,299]
value = 198

[State 190, ChangeState]
type = ChangeState
trigger1 = Time = 1
trigger1 = Var(39) = 0
trigger1 = Var(1) = [180,349]
value = 1901

; =========================================================
; Intro 1 - Super Homer
; =========================================================
[Statedef 10190]
type = A
ctrl = 0
physics = N
anim =  10190
velset = 0,0

[State 10190,1]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = nobardisplay

[State 191, 3]
type = Screenbound
trigger1 = 1
value = 0
movecamera = 0,0

[State 10190,2]
Type = PosAdd
trigger1 = Time = 0
x = -214
y = -104

[State 10190,3]
Type = PlaySnd
trigger1 = Time = 30
value = 10190,0

[State 10190,4]
type = posadd
trigger1 = Time > 30
trigger1 = Time < 120
x = 3

[State 10190,5]
type = ChangeAnim
trigger1 = Time = 120
value = 10191


[State 10191, Gravity]
type = PosAdd
trigger1 = Time > 120
trigger1 = Pos Y <= 0
y = 2
x = -1

[State 10191, 2]
type = ChangeAnim
trigger1 = Pos Y > 0
trigger1 = Anim != 10192
value = 10192

[State 10190,3]
Type = PlaySnd
trigger1 = Anim = 10192
trigger1 = AnimElem = 2
value = 1,4

[State 10190,3]
Type = PlaySnd
trigger1 = Anim = 10192
trigger1 = AnimElem = 13
value = 0,14

[State 10190,4]
Type = ChangeState
trigger1 = Anim = 10192
trigger1 = Animtime = 0
value = 0
; =========================================================
; Intro 2 - "Strong Man" Homer
; =========================================================
[Statedef 10191]
type = A
ctrl = 0
physics = N
anim =  10193
velset = 0,0

[State 10190,1]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = nobardisplay

;"Heh heh heh heh! Suckers!"
[State 10190,3]
Type = PlaySnd
trigger1 = AnimElem = 3
value = 10191, 0

;Wood Creak
[State 10190,3]
Type = PlaySnd
trigger1 = AnimElem = 10
value = 10191, 1

;Kathud!
[State 10190,3]
Type = PlaySnd
trigger1 = AnimElem = 15
value = 10191, 2

[State 0, EnvShake]
type = EnvShake
trigger1 = AnimElem = 15
time = 90
freq = 40
ampl = -4
phase = 90

;"D'oh!"
[State 10190,3]
Type = PlaySnd
trigger1 = AnimElem = 20
value = 10191, 3

[State 10190,4]
Type = ChangeState
trigger1 = Animtime = 0
value = 0
; =========================================================
; Intro 3 - 1987 Homer
; =========================================================
[Statedef 10194]
type = S
ctrl = 0
anim = 10194
velset = 0,0

[State 10190,1]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = nobardisplay

[State 194,1] ;"Let's all go out for frosty chocolate milkshakes!"
type = PlaySnd
trigger1 = AnimElem = 1
value = 10194, 0

[State 194,2]; POOF!
type = PlaySnd
trigger1 = AnimElem = 26
value = 1, 5

[State 194,2]; "OH MY GOD!"
type = PlaySnd
trigger1 = AnimElem = 30
value = 10194, 1

[State 106, 3]
type = Explod
trigger1 = AnimElem = 26
anim = 3006
pos = 0,0
bindtime = -1
sprpriority = 5
ownpal = 1

[State 194, 4]
type = EnvShake
trigger1 = AnimElem = 26
time = 15
ampl = -2
freq = 60
phase = 60

[State 194,5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;-------------------------------------------------------------------------------

;===============================================================================
;Vs. Peter Griffin
[Statedef 191]
type = S
ctrl = 0
anim = 191
velset = 0,0

[State 100,1]
type = PlaySnd
trigger1 = AnimElem = 2,=10
value = 0, 0

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5,=1
value = 3, 0

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 18,=18
value = 191,3

[State 100,1]
type = PlaySnd
trigger1 = AnimElem = 28
value = 12,5


[State 191,1]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = nobardisplay

[State 191,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;===============================================================================
;Homer and Peter special intro made by Masterhand128, based from Terrotim's intro(Part 1)
[Statedef 11190]
type = S
ctrl = 0
anim = 11190
velset = 0,0

[State 100,1]
type = PlaySnd
trigger1 = AnimElem = 2,=10
value = 0, 0

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5,=1
value = 3, 0

[State 194,2]
type = PlaySnd
trigger1 = AnimElem = 21, =1
value = 11190, 0

[State 194,2]; "OH MY GOD!"
type = PlaySnd
trigger1 = AnimElem = 21
value = 10194, 1

[State 191,1]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = nobardisplay

[State 191,4]
type = ChangeState
trigger1 = Animtime = 0
value = 11191
;===============================================================================
;Homer and Peter special intro(Part 2)
[Statedef 11191]
type = S
ctrl = 0
;anim = 11191
velset = 0,0

[State 0, ChangeAnim]
type = ChangeAnim
Triggerall = Teamside = 1
Triggerall = Time = 0
trigger1 = partner, name = "Peter Griffin"
trigger1 = partner, Pos X >= Pos X
value = 11192

[State 0, ChangeAnim]
type = ChangeAnim
Triggerall = Teamside = 1
Triggerall = Time = 0
trigger1 = partner, name = "Peter Griffin"
trigger1 = partner, Pos X < Pos X
value = 11191

[State 0, ChangeAnim]
type = ChangeAnim
Triggerall = Teamside = 2
Triggerall = Time = 0
trigger1 = partner, name = "Peter Griffin"
trigger1 = partner, Pos X <= Pos X
value = 11192

[State 0, ChangeAnim]
type = ChangeAnim
Triggerall = Teamside = 2
Triggerall = Time = 0
trigger1 = partner, name = "Peter Griffin"
trigger1 = partner, Pos X > Pos X
value = 11191

[State 100,1]
type = PlaySnd
trigger1 = Time = 0
value = 13500, 1

[State 100,1]
type = PlaySnd
trigger1 = Time = 1
value = 5000, 10

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=1
value = 5000, 100

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6,=1
value = 5000, 110

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 11,=1
value = 5000, 100

[State 194,2]; "I am ok!"
type = PlaySnd
trigger1 = AnimElem = 14
value = 191, 6

[State 0, EnvShake]
type = EnvShake
trigger1 = Time = 0
time = 35
freq = 100
ampl = -25
phase = 154

[State 191,1]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = nobardisplay

[State 191,4]
type = ChangeState
trigger1 = Animtime = 0
value = 0
;-------------------------------------------------------------------------------
; Intro against CHOUJIN DBZ characters
; by: GigaBowserX
;-------------------------------------------------------------------------------
[Statedef 194]
type = S
ctrl = 0
anim = 193
;velset = 0,0,0

[State 4400,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = nobardisplay
flag3 = nomusic

[State 100, Kakkarotto]
type = PlaySnd
trigger1 = AnimElem = 2
value = 10192, 0

[State 100,1, Charge Growl]
type = PlaySnd
trigger1 = AnimElem = 16
value = 10192, 1

[State 100,1, CHARGE SCREAAAAMMMM]
type = PlaySnd
trigger1 = AnimElem = 24
value = 10192, 2

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 24
helpertype = normal ;player
name = "BLAST"
ID = 666
stateno = 666
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0

[State 100,1, DBZ Aura Start Sound]
type = PlaySnd
trigger1 = AnimElem = 24
value = 666, 0

[State 192, DBZ Aura Loop Sound]
type = PlaySnd
trigger1 = AnimElem = 24
value = 666,1
freqmul = 1.0
loop = 1
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 100,1, Dramatic Music]
type = PlaySnd
trigger1 = AnimElem = 24
value = 10192, 1337

[State 0, EnvShake]
type = EnvShake
trigger1 = AnimElem = 24
time = 330

[State 0, Darken BKG]
type = BGPalFX
trigger1 = AnimElem = 24
time = 330
add = -100,-100,-100
mul = 250,224,120
sinadd = -10,-10,-10,10

[State 0, StopSnd]
type = StopSnd
trigger1 = AnimElem = 89
channel = -1

[State 100,1, Sudden Stop]
type = PlaySnd
trigger1 = AnimElem = 89
value = 666, 2

; "Aww, crap!"
[State 100,1]
type = PlaySnd
trigger1 = AnimElem = 91
value = 191, 2

;[State 100,1]
;type = PlaySnd
;trigger1 = AnimElem = 18
;value = 0, 113

[State 191,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;-------------------------------------------------------------------------------
;Couch fall
[Statedef 1901]
type = S
ctrl = 0
anim = 1901
velset = 0,0

[State 1901,1]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = nobardisplay

[State 194,sound1]
type = PlaySnd
trigger1 = Time = 2
value = 5000, 130

[State 194,sound2]
type = PlaySnd
trigger1 = AnimElem = 6
value = 5000, 40

[State 194,sound3]
type = PlaySnd
trigger1 = AnimElem = 6
value = 5, 0

[State 196, shake]
type = EnvShake
trigger1 = AnimElem = 6
time = 15
ampl = -2
freq = 60
phase = 60



[State 192,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;------------------------------------------------------
;Monkey
[Statedef 196]
type = S
ctrl = 0
anim = 197
velset = 0,0

[State 192,1]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = nobardisplay

[State 192, 2]
type = Explod
trigger1 = AnimElem = 9
anim = 3006
postype = P1
pos = 0,-40
sprpriority = 6
persistent = 0

[State 194,sound2]
type = PlaySnd
trigger1 = AnimElem = 9
value = 1, 5

[State 196, shake]
type = EnvShake
trigger1 = AnimElem = 9
time = 15
ampl = -2
freq = 60
phase = 60

[State 196, Explod]
type = Explod
trigger1 = Time = 67 && NumExplod(3006) = 0
anim = 3006
id = 3006
pos = 0,0
postype = P1
sprpriority = 5
bindtime = -1
ownpal = 0

[State 196, Explod2]
type = Explod
trigger1 = Time = 70 && NumExplod(3006) = 0
anim = 3006
id = 3006
pos = 0,0
postype = P1
sprpriority = 5
bindtime = -1
ownpal = 0

[State 192,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;------------------------------------------------------
; Giant Chicken (Warner)
[Statedef 119]
type = S
physics = N
ctrl = 0
anim = 19
velset = 0, 0
sprpriority = 1

[State 119,s0]
type = PlaySnd
trigger1 = AnimElem = 8
value = 6,1

[State 100,s1]
type = PlaySnd
trigger1 = AnimElem = 17
value = 2,0

[State 100,s2]
type = PlaySnd
trigger1 = AnimElem = 36
value = 5000,0

[State 191,1]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = nobardisplay

[State 119,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;------------------------------------------------------
;Duff Can Helper
[Statedef 10196]
type = S
physics = N
anim = 10196
sprpriority = 3
velset = -7.5, 9

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time = 85
;------------------------------------------------------
; Giant Chicken (Team SMRT)
[Statedef 10197]
type = S
physics = N
ctrl = 0
anim = 10197
velset = 0,0
sprpriority = 1

[State 10195, "Oh crap."]
type = PlaySnd
trigger1 = AnimElem = 2
value = 10195,0

[State 10195, Homer screams]
type = PlaySnd
trigger1 = Time = 300
value = 0, 109

[State 10195, "Outta my way, jerkass!"]
type = PlaySnd
trigger1 = AnimElem = 8
value = 0,0

[State 10195, Kick]
type = PlaySnd
trigger1 = AnimElem = 12
value = 3,0

;Create Peter
[State 3050, 8]
type = Helper
trigger1 = Animelem = 12
ID = 10198
name = "Peter"
StateNo = 10198
postype = P1
pos = 24, -55
ownpal = 1

[State 10195, Peter screams]
type = PlaySnd
trigger1 = AnimElem = 12
value = 10195,1

[State 10195, Crash!]
type = PlaySnd
trigger1 = Time = 600
value = 10191,2

[State 0, EnvShake]
type = EnvShake
trigger1 = Time = 600
time = 90
freq = 40
ampl = -4
phase = 90

[State 119,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 119
;------------------------------------------------------
;Peter Helper
[Statedef 10198]
type = A
physics = N
anim = 10198
sprpriority = 3

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = -12

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 3
y = -2.8

[State 0, VelSet]
type = VelSet
trigger1 = time = 35
x = 3

[State 0, VelSet]
type = VelSet
trigger1 = time = 50
x = 3
y = 2.8

;Remove Leg
[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time = 200
;------------------------------------------------------
;King Sized Homer
[Statedef 197]
type = S
ctrl = 0
anim = 199
velset = 0,0

[State 192,1]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = nobardisplay

[State 192, 2]
type = Explod
trigger1 = AnimElem = 10
anim = 3006
postype = P1
pos = 0,-40
sprpriority = 6
persistent = 0

[State 194,sound2]
type = PlaySnd
trigger1 = AnimElem = 10
value = 1, 5

[State 194,sound3]
type = PlaySnd
trigger1 = AnimElem = 13
value = 5, 11

[State 196, shake]
type = EnvShake
trigger1 = AnimElem = 10
time = 15
ampl = -2
freq = 60
phase = 60


[State 192,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
; Late for the match
[Statedef 198]
type = S
ctrl = 0
anim = 198
velset = 0,0

[State 198,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = nobardisplay

[State 194,1]
type = PlaySnd
trigger1 = AnimElem = 6;,=10
value = 0, 107

[State 194,2]
type = PlaySnd
trigger1 = AnimElem = 13;,=1
value = 0, 5

[State 106, 3]
type = MakeDust
trigger1 = AnimElem = 13
pos = 68,0
spacing = 1

[State 194, 4]
type = EnvShake
trigger1 = AnimElem = 13
time = 15
ampl = -2
freq = 60
phase = 60

[State 194,5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;-------------------------------------------------------------------------------
; Intro vs. Iori Yagami
[Statedef 10900]
type = S
anim = 192
velset = 0,0
ctrl = 0

[State 10900, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = nobardisplay

[State 10900, 5.5]
type = PlaySnd
trigger1 = time = 0
value = 0,20

[State 191, 3] ;Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 0

[State 10900, 12]
type= playsnd
trigger1 = animelem = 15 || animelem = 17
value = 2,0


[State 10900, 13]
type= playsnd
trigger1 = animelem = 19
value = 191,1

[State 10900, 14]
type=playsnd
trigger1 = AnimElem = 41
value = 191,4

;-------------------------------------------------------------------------------
; Intro vs. Iori Yagami(only for Ihoo's version) based from Judgespear's old video.
[Statedef 10901]
type = S
anim = 90192
velset = 0,0
ctrl = 0

[State 10900, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = nobardisplay
flag3 = nomusic

[State 10900, 13]
type= playsnd
trigger1 = animelem = 20
value = 191,1

[State 10900, 5.5]
type = PlaySnd
trigger1 = Time = 0
value = 0,14

[State 10900, 5.5]
type = PlaySnd
trigger1 = Animelem = 2
value = 0,20

[State 191, 3] ;Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 0

[State 10900, 12]
type= playsnd
trigger1 = animelem = 16 || animelem = 18
value = 2,0

[State 266, snd1]
type = PlaySnd
trigger1 = Animelem = 54
value = 12, 4

[State 266, snd1]
type = PlaySnd
trigger1 = Animelem = 54
value = 12, 4

[State 10900, 14]
type=playsnd
trigger1 = AnimElem = 55
value = 3600,3

[State 194,2]; POOF!
type = PlaySnd
trigger1 = AnimElem = 57
value = 1, 5

[State 106, 3]
type = Explod
trigger1 = AnimElem = 57
anim = 3006
pos = 0,0
bindtime = -1
sprpriority = 5
ownpal = 1
;-------------------------------------------------------------------------------
;Taunt
[Statedef 195]
type = S
movetype = I
physics = S
anim = 195 + Var(39)*10000
velset = 0, 0
ctrl = 0

[State 195, VarRandom]
type = VarRandom
trigger1 = AnimElem = 1
v = 1
range = 0,3

[State 100,1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0,ifelse(Var(39)=1,ifelse(Random <= 500,108,110),ifelse(Random <= 500,7,8))
channel = 0

[State 100,1]
type = PlaySnd
trigger1 = !Var(39)
trigger1 = AnimElem = 3 && Var(1) = 0
value = 0,7
channel = 0

[State 100,1]
type = PlaySnd
trigger1 = !Var(39)
trigger1 = AnimElem = 3 && Var(1) = 1
value = 0,23
channel = 0

[State 100,1]
type = PlaySnd
trigger1 = !Var(39)
trigger1 = AnimElem = 3 && Var(1) = 2
value = 12,5
channel = 0

[State 100,1]
type = PlaySnd
trigger1 = !Var(39)
trigger1 = AnimElem = 3 && Var(1) = 3
value = 5,10
channel = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Var(39)
trigger1 = AnimElem = 3 && Var(1) = 1
value = anim
elem = 22

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Var(39)
trigger1 = AnimElem = 3 && Var(1) = 2
value = anim
elem = 11

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Var(39)
trigger1 = AnimElem = 3 && Var(1) = 3
value = anim
elem = 34

[State 195,End]
type = ChangeState
triggerall = !Var(39)
trigger1 = AnimElem = 10
trigger2 = AnimElem = 21
trigger3 = AnimElem = 33
trigger4 = AnimElem = 40
value = 0
ctrl = 1

[State 195, Helper]
type = Helper
triggerall = Var(39) = 1
trigger1 = AnimElem = 25
persistent = 0
id = 10196
name = "Duff Can"
pos = 0,0
postype = p1
stateno = 10196
;helpertype = normal
;supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1


[State 195,End]
type = ChangeState
trigger1 = Var(39) && AnimTime = 0
value = 0
ctrl = 1
;===============================================================================
; Definition of the Basic Arts
;===============================================================================

;-------------------------------------------------------------------------------
;Standing Light Punch
[Statedef 200]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 200  
ctrl = 0
poweradd = 0
juggle = 15

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=1
value = 2, 0

[State 200,WOAH]
type = ChangeAnim
triggerall = Var(39) = 1
trigger1 = time = 0
value = 10200 + random%2 

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=1 && Random <= 300
value = 0,ifelse(Var(39)=1,ifelse(Random <= 500,102,103),ifelse(Random <= 500,4,5))
channel = 0

[State 200,HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype = Light
damage    = ifelse(Var(39)=1,21,14)
guardflag = M
hitflag = MAF
pausetime = 10,10
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = 0,-60
hitsound = S3, 0
guardsound = S4, 0
ground.type = Low
ground.slidetime = 8
ground.hittime  = 10
ground.velocity = -4
air.hittime = 13
air.velocity = -4,-5
yaccel = .4

[State 200,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6 ;3
movetype = I

[State 200,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; Standing Close Light Punch
[Statedef 205]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 205 + Var(39)*10000
ctrl = 0
poweradd = 0
juggle = 15

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=1
value = 2, 0

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=1 && Random <= 300
value = 0,ifelse(Var(39)=1,ifelse(Random <= 500,102,103),ifelse(Random <= 500,4,5))
channel = 0

[State 200,HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype = Light
damage    = ifelse(Var(39)=1,28,21)
guardflag = M
hitflag = MAF
pausetime = 10,10
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = 0,-60
hitsound = S3, 0
guardsound = S4, 0
ground.type = Low
ground.slidetime = 8
ground.hittime  = 10
ground.velocity = -12
air.hittime = 13
air.velocity = -4,-5
yaccel = .4

[State 200,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 200,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Standing Medium Punch
[Statedef 210]
type    = S
movetype= A
physics = S
poweradd= 0
anim = 210 + Var(39)*10000
ctrl = 0
velset = 0,0
juggle = 15

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=1
value = 2, 1

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=1 && Random <= 300
value = 0,ifelse(Var(39)=1,ifelse(Random <= 500,103,104),5)
channel = 0

[State 200,HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype = Hard
damage    = ifelse(Var(39)=1,91,84)
guardflag = M
hitflag = MAF
pausetime = 11,12
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = 0,-60
hitsound = S3, 1
guardsound = S4, 0
ground.type = Low
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -7
air.hittime = 13
air.velocity = -4,-5
yaccel = .4

[State 230, ChangeAnim]
type = ChangeAnim
trigger1 = HitPauseTime > 0 && HitPauseTime < 10
value = 210 + Var(39)*10000
elem = 4
ignorehitpause = 1

[State 250,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 210,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Standing Close Medium Punch
[Statedef 215]
type    = S
movetype= A
physics = S
anim = 215 + Var(39)*10000
poweradd= 0
ctrl = 0
velset = 0,0
juggle = 15

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=1
value = 2, 1

;Beer Riot Mode: Force distance cushion
[State 0, Width]
type = Width
trigger1 = var(39) = 1
trigger1 = Time < 26
value = 32,0

;Beer Riot Mode: Nudge forward for initial attack
[State 0, PosAdd]
type = PosAdd
trigger1 = var(39) = 1
trigger1 = Time < 26
x = 2
y = 0
;ignorehitpause =
;persistent =


[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=1 && Random <= 300
value = 0,ifelse(Var(39)=1,ifelse(Random <= 500,103,104),5)
channel = 0

[State 200,HitDef]
type = HitDef
trigger1 = Time = 0 
attr = S, NA
animtype = Hard
damage    = ifelse(Var(39)=1,ifelse((AnimElem = 2),77,63),70)
guardflag = M
hitflag = MAF
pausetime = 14,12
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = 0,-60
hitsound = S3, 1
guardsound = S4, 0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -7
air.hittime = 13
air.velocity = -4,-5
yaccel = .4

[State -2, VarSet]
type = VarSet
trigger1 = Time = 0
trigger2 = AnimElem = 3
var(13) = 0

[State -2, VarSet]
type = VarSet
trigger1 = AnimElem = 2
var(13) = 1
ignorehitpause = 1

[State 230, ChangeAnim]
type = ChangeAnim
trigger1 = HitPauseTime > 0 && HitPauseTime < 11
value = 215 + Var(39)*10000
elem = 3
ignorehitpause = 1

[State 220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 220,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
;Standing Heavy Punch
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
ctrl = 0
velset = 0,0
anim = 220
sprpriority = -1

[State 220, snd1]
type = PlaySnd
trigger1 = animelem = 1
value = 0, 28
channel = 2

[State 220, snd3]
type = StopSnd
trigger1 = animtime = 0
channel = 2

[State 220, snd2]
type = PlaySnd
trigger1 = animelem = 2
value = 12, 0

[State 220, effect]
type = Explod
trigger1 = animelem = 15
persistent = 0
anim = 222
postype = p1

[State 220, 1]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
animtype  = Hard
damage    = 40, 8
guardflag = MA
pausetime = 5,2
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = -10,-60
hitsound = S3, 0
guardsound = S4, 0
ground.type = Low
ground.slidetime = 5
ground.hittime  = 15
ground.velocity = -2
air.velocity = -1.4,-3
p2facing = 1

[State 220, 2]
type = HitDef
trigger1 = AnimElem = 9
attr = S, NA
animtype  = Hard
damage    = 50, 10
guardflag = MAF
pausetime = 5,2
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = -10,-90
hitsound = S3, 1
guardsound = S4, 0
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -6.5
air.velocity = -3.8,-4
p2facing = 1

[State 220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
;Standing Light Kick
[Statedef 230]
type    = S
movetype= A
physics = S
poweradd= 0
anim = 230 
ctrl = 0
velset = 0,0
juggle = 15

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=1
value = 2, 0

[State 200,WOAH]
type = ChangeAnim
triggerall = Var(39) = 1
trigger1 = time = 0
value = 10230 + random%2

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=1 && Random <= 300
value = 0,ifelse(Var(39)=1,ifelse(Random <= 500,102,103),ifelse(Random <= 500,4,5))
channel = 0

[State 200,HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype = Light
damage    = ifelse(Var(39)=1,35,28)
guardflag = M
hitflag = MAF
pausetime = 8,8
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = 0,-30
hitsound = S3, 2
guardsound = S4, 0
ground.type = Low
ground.slidetime = 8
ground.hittime  = 10
ground.velocity = -5
air.hittime = 13
air.velocity = -4,-5
yaccel = .4

[State 230, ChangeAnim]
type = ChangeAnim
trigger1 = HitPauseTime > 0 && HitPauseTime < 7
value = 230 + Var(39)*10000
elem = 4
ignorehitpause = 1

[State 230,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 230,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Standing Close Light Kick
[Statedef 235]
type    = S
movetype= A
physics = S
anim = 235 + Var(39)*10000
poweradd= 0
ctrl = 0
velset = 0,0
juggle = 15

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=1
value = 2, 0

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=1 && Random <= 300
value = 0,ifelse(Var(39)=1,ifelse(Random <= 500,102,103),ifelse(Random <= 500,4,5))
channel = 0

[State 235,HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype = Light
damage    = ifelse(Var(39)=1,28,21)
guardflag = M
hitflag = MAF
pausetime = 10,10
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = 0,-15
hitsound = S3, 2
guardsound = S4, 0
ground.type = Low
ground.slidetime = 8
ground.hittime  = 10
ground.velocity = -5
air.hittime = 13
air.velocity = -4,-5
yaccel = .4

[State 235,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 235,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
;  Standing Medium Kick
[Statedef 240]
type    = S
movetype= A
physics = S
poweradd= 0
anim = 240 + Var(39)*10000
ctrl = 0
velset = 0,0
juggle = 15

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=1
value = 2, 1

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=1 && Random <= 300
value = 0,ifelse(Var(39)=1,ifelse(Random <= 500,103,104),5)
channel = 0

[State 240,HitDef]
type = HitDef
triggerall = Anim != 10240
trigger1 = AnimElem = 4
attr = S, NA
animtype = Hard
damage    = ifelse(Var(39)=1,91,84)
guardflag = M
hitflag = MAF
pausetime = 12,12
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = 0,-85
hitsound = S3, 4
guardsound = S4, 0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -7,-5
air.hittime = 13
air.velocity = -7,-5
fall = 1
yaccel = .4

[State 240,HitDef]
type = HitDef
triggerall = Anim = 10240
trigger1 = AnimElem = 5
attr = S, NA
animtype = Hard
damage    = ifelse(Var(39)=1,91,84)
guardflag = M
hitflag = MAF
pausetime = 12,12
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = 0,-85
hitsound = S3, 4
guardsound = S4, 0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -7,-5
air.hittime = 13
air.velocity = -7,-5
fall = 1
yaccel = .4

[State 240,StateTypeSet]
type = StateTypeSet
triggerall = Anim != 10240
trigger1 = AnimElem = 5; && movehit
movetype = I

[State 240,StateTypeSet]
type = StateTypeSet
triggerall = Anim = 10240
trigger1 = AnimElem = 6; && movehit
movetype = I

[State 240,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Standing Close Medium Kick
[Statedef 245]
type    = S
movetype= A
physics = S
poweradd= 0
anim = 245 + Var(39)*10000
ctrl = 0
velset = 0,0
juggle = 15

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=1
value = 2, 1

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=1 && Random <= 300
value = 0,ifelse(Var(39)=1,ifelse(Random <= 500,103,104),5)
channel = 0

[State 240,HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype = Hard
damage    = ifelse(Var(39)=1,98,91)
guardflag = M
hitflag = MAF
pausetime = 12,12
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = 0,-85
hitsound = S3, 3
guardsound = S4, 0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -7
air.hittime = 13
air.velocity = -4,-5
yaccel = .4

;[State 230, ChangeAnim]
;type = ChangeAnim
;trigger1 = HitPauseTime > 0 && HitPauseTime < 10
;value = 240 + Var(39)*10000
;elem = 5
;ignorehitpause = 1

;[State 240,StateTypeSet]
;type = StateTypeSet
;trigger1 = AnimElem = 5
;movetype = I

[State 240,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
;Standing Strong Kick
[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
ctrl = 0
velset = 0,0
anim = 250
sprpriority = 2

[State 266, snd1]
type = PlaySnd
trigger1 = Time = 4
value = 12, 4

[State 266, snd2]
type = PlaySnd
trigger1 = Time = 2
value = 6, 0

[State 266, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Hard
damage    = 70, 20
guardflag = MA
pausetime = 12,12
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = -10,-55
hitsound = S3, 3
guardsound = S4, 0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 11
ground.velocity = -5
air.velocity = -2.5,-3.5

[State 266, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
;Crouching Light Punch
[Statedef 400]
type    = C
movetype= A
physics = C
poweradd= 0
anim = 400 
ctrl = 0
velset = 0,0
juggle = 15

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=1
value = 2, 0

[State 200,WOAH]
type = ChangeAnim
triggerall = Var(39) = 1
trigger1 = time = 0
value = 10400 + random%2


[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=1 && Random <= 100
value = 0,ifelse(Var(39)=1,ifelse(Random <= 500,102,103),ifelse(Random <= 500,4,5))
channel = 0

[State 400,HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
animtype = Light
damage    = ifelse(Var(39)=1,21,14)
guardflag = M
hitflag = MAF
pausetime = 9,9
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = 0,-45 
hitsound = S3, 0
guardsound = S4, 0
ground.type = Low
ground.slidetime = 8
ground.hittime  = 10
ground.velocity = -5
air.hittime = 13
air.velocity = -4,-5
yaccel = .4


[State 400,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-------------------------------------------------------------------------------
; Crouching Medium Punch
[Statedef 410]
type    = C
movetype= A
physics = C
poweradd= 0
anim = 410 + Var(39)*10000
ctrl = 0
velset = 0,0
juggle = 15

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=1
value = 2, 1

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=1 && Random <= 300
value = 0,ifelse(Var(39)=1,ifelse(Random <= 500,103,104),5)
channel = 0

[State 410,HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = C, NA
animtype = Hard
damage    = ifelse(Var(39)=1,84,77)
guardflag = M
hitflag = MAF
pausetime = 12,12
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = 0,-90
hitsound = S3, 1
guardsound = S4, 0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -7
air.hittime = 13
air.velocity = -4,-5
yaccel = .4

[State 410,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 410,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;-------------------------------------------------------------------------------
;Crouching Strong Punch
[Statedef 420]
type    = C
movetype= A
physics = C
juggle  = 4
ctrl = 0
anim = 420 + Var(39)*10000
poweradd = 0
sprpriority = 2

[State 420,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=2 && Random <= 245
value = 0,ifelse(Var(39)=1,ifelse(Random <= 500,102,103),ifelse(Random <= 500,4,5))
channel = 0

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=1
value = 2, 1


[State 420, VelMul]
type = VelMul
trigger1 = Time = 0
trigger1 = PrevStateNo = 100
x = .8

[State 420, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = C,NA
damage = 65,3
animtype = Hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 14,12
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = -10, -58
hitsound = S3, 1
guardsound = S4, 0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -9
air.hittime = 13
air.velocity = -4,-5


[State 420, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


;-------------------------------------------------------------------------------
;Crouching Light Kick
[Statedef 430]
type    = C
movetype= A
physics = C
poweradd= 0
anim = 430 + Var(39)*10000
ctrl = 0
velset = 0, 0
juggle = 15

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=1
value = 2, 0

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=1 && Random <= 300
value = 0,ifelse(Var(39)=1,ifelse(Random <= 500,102,103),ifelse(Random <= 500,4,5))
channel = 0

[State 430,HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
animtype = Light
damage    = ifelse(Var(39)=1,21,14)
guardflag = L
hitflag = MAF
pausetime = 10,10
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = 0,-15
hitsound = S3, 2
guardsound = S4, 0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -4
air.hittime = 13
air.velocity = -4,-5
yaccel = .4

[State 430,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 430,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


;-------------------------------------------------------------------------------
;Crouching Medium Kick
[Statedef 440]
type    = C
movetype= A
physics = C
anim = 440 + Var(39)*10000
poweradd= 0
ctrl = 0
juggle = 15

[State 1110, posadd]
type = posadd
trigger1 = AnimElem = 2,=3 || AnimElem = 3,= 0
x = 13

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=1
value = 2, 1

[State 200,PlaySnd]
type = PlaySnd
triggerall = Anim != 10440
trigger1 = AnimElem = 6
value = 5, 1

[State 200,PlaySnd]
type = PlaySnd
triggerall = Anim = 10440
trigger1 = AnimElem = 4
value = 5, 1

[State 1005, Explod]
type = Explod
trigger1 = AnimElem = 6,=4
anim = 2050
id = 2050
pos =0,0
postype = P1
sprpriority = 5
facing = -1
bindtime = 1
ownpal = 1

[State 440, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
damage    = ifelse(Var(39)=1,77,70)
animtype = Hard
hitflag = MAF
guardflag = L
pausetime = 12,12
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = 0,-50
hitsound = S3, 3
guardsound = S4, 0
ground.type = Trip
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -1.5,-6
air.hittime = 13
air.velocity = -1.5,-6
guard.velocity = -7
fall = 1
fall.recovertime = 20
yaccel = .55

[State 440,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;-------------------------------------------------------------------------------
;Crouching Heavy Kick
 [Statedef 450]
type    = C
movetype= A
physics = C
juggle  = 4
ctrl = 0
anim = 450
poweradd = 0
sprpriority = 2

[State 450,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=2 && Random <= 250
value = 0,ifelse(Var(39)=1,ifelse(Random <= 500,102,103),ifelse(Random <= 500,4,5))
channel = 0

[State 450, PlaySnd2]
type = PlaySnd
trigger1 =  AnimElem = 7
value = 2,1

[State 450, HitDef]
type = HitDef
trigger1 = time = 0
attr = C,NA
damage = 45,1
animtype = Med
hitflag = MA
guardflag = L
priority = 4, Hit
pausetime = 13,14
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = -10, -40
hitsound = S3, 3
guardsound = S4, 0
ground.type = trip
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -5,-2
air.type = Low
air.hittime = 5
air.velocity = -7,3


[State 450, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;-------------------------------------------------------------------------------
; Aerial Light Punch
[Statedef 600]
type    = A
movetype= A
physics = N
poweradd= 0
anim = 600 + Var(39)*10000
ctrl = 0
juggle = 15

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=1
value = 2, 0

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=1 && Random <= 300
value = 0,ifelse(Var(39)=1,ifelse(Random <= 500,102,103),ifelse(Random <= 500,4,5))
channel = 0

[State 600,HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
animtype = Light
damage    = ifelse(Var(39)=1,42,28)
guardflag = HA
hitflag = MAF
pausetime = 8,8
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = 0,-30
hitsound = S3, 0
guardsound = S4, 0
ground.type = High
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -4
air.hittime = 13
air.velocity = -4,-5
yaccel = .4

[State 600,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 105,VelAdd]
type = VelAdd
trigger1 = 1
y = const(Movement.yaccel)+Var(39)*.25

[State 105,End]
type = ChangeState
trigger1 = Time > 0
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 52

;-------------------------------------------------------------------------------
;Aerial Medium Punch
[Statedef 610]
type    = A
movetype= A
physics = A
poweradd= 0
anim = 610 + Var(39)*10000
ctrl = 0
juggle = 15

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=1
value = 2, 1

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=1 && Random <= 300
value = 0,ifelse(Var(39)=1,ifelse(Random <= 500,103,104),5)
channel = 0

[State 610,HitDef]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 5
attr = A, NA
animtype = Hard
damage    = ifelse(Var(39)=1,47,57)
getpower = 144,36
givepower = 36
guardflag = HA
hitflag = MAF
pausetime = 12,12
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = 0,-20
hitsound = S3, 1
guardsound = S4, 0
ground.type = Low
ground.slidetime = 8
ground.hittime  = 10
guard.slidetime = 16
guard.hittime = 16
ground.velocity = -4
air.hittime = 13
air.velocity = -4,-5
yaccel = .4

[State 610, VelAdd]
type = VelAdd
trigger1 = 1
y = Var(39)*.25

[State 105,End]
type = ChangeState
trigger1 = Time > 0
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 52
;-------------------------------------------------------------------------------
;Aerial Strong Punch
[Statedef 620]
type    = A
movetype= A
physics = A
poweradd= 0
anim = 620
ctrl = 0
juggle = 15
sprpriority = 2

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=1
value = 2, 1

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=1 && Random <= 300
value = 0,ifelse(Var(39)=1,ifelse(Random <= 500,103,104),5)
channel = 0

[State 620,HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = A, NA
animtype = Hard
damage   = 87,10
getpower = 134,36
givepower = 36
guardflag = HA
hitflag = MAF
pausetime = 12,12
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = 0,-20
hitsound = S3, 1
guardsound = S4, 0
ground.type = High
ground.slidetime = 8
ground.hittime  = 10
guard.slidetime = 16
guard.hittime = 16
ground.velocity = -4
air.hittime = 13
air.velocity = -4,-5
;-------------------------------------------------------------------------------
;Aerial Light Kick
[Statedef 630]
type    = A
movetype= A
physics = N
poweradd= 0
anim = 630 
ctrl = 0
juggle = 15

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=1
value = 2, 0

[State 200,WOAH]
type = ChangeAnim
triggerall = Var(39) = 1
trigger1 = time = 0
value = 10630 + random%2 

[State 200,WOAH]
type = ChangeAnim
triggerall = Var(39) = 0
trigger1 = time = 0
value = 630 + random%2 


[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=1 && Random <= 300
value = 0,ifelse(Var(39)=1,ifelse(Random <= 500,102,103),ifelse(Random <= 500,4,5))
channel = 0

[State 630,HitDef]
type = HitDef
triggerall = Anim != 10630
trigger1 = AnimElem = 2
attr = A, NA
animtype = Light
damage    = ifelse(Var(39)=1,49,35)
guardflag = HA
hitflag = MAF
pausetime = 10,10
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = 0,-30
hitsound = S3, 2
guardsound = S4, 0
ground.type = High
ground.slidetime = 8
ground.hittime  = 8
guard.slidetime = 16
ground.velocity = -4
air.hittime = 13
air.velocity = -4,-5
yaccel = .4

[State 630,HitDef]
type = HitDef
trigger1 = Anim = 10630
trigger1 = AnimElem = 3
attr = A, NA
animtype = Light
damage    = ifelse(Var(39)=1,49,35)
getpower = 72,36
givepower = 36
guardflag = HA
hitflag = MAF
pausetime = 10,10
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = 0,-30
hitsound = S3, 2
guardsound = S4, 0
ground.type = High
ground.slidetime = 8
ground.hittime  = 8
guard.slidetime = 16
ground.velocity = -4
air.hittime = 13
air.velocity = -4,-5
yaccel = .4

[State 105,VelAdd]
type = VelAdd
trigger1 = 1
y = const(Movement.yaccel)+Var(39)*.25

[State 105,End]
type = ChangeState
trigger1 = Time > 0
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 52


;-------------------------------------------------------------------------------
;Aerial Medium Kick
[Statedef 640]
type    = A
movetype= A
physics = A;N
poweradd= 0
anim = 640 + Var(39)*10000
ctrl = 0
juggle = 15

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=1
value = 2, 1

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=1 && Random <= 300
value = 0,ifelse(Var(39)=1,ifelse(Random <= 500,103,104),5)
channel = 0

[State 640,HitDef]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 7
trigger4 = AnimElem = 8
attr = A, NA
animtype = Hard
damage    = ifelse(Var(39)=1,17,40)
guardflag = HA
hitflag = MAF
pausetime = 6,6
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = 0,-35
hitsound = S3, 3
guardsound = S4, 0
ground.type = High
ground.slidetime = 8
ground.hittime  = 10
guard.slidetime = 16
guard.hittime = 16
ground.velocity = -5
air.hittime = 13
air.velocity = -4,-5
yaccel = .4

[State 640,VelAdd]
type = VelAdd
trigger1 = 1
y = Var(39)*.25

[State 105,End]
type = ChangeState
trigger1 = Time > 0
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 52


;-------------------------------------------------------------------------------
;Aerial Hard Kick
[Statedef 650]
type = A
movetype = A
physics = A
juggle = 8
poweradd = 0
ctrl = 0
anim = 650
sprpriority = 2

[State 650, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=0
value = 1,7

[State 650, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=0 && Random <= 300
value = 0,ifelse(Var(39)=1,ifelse(Random <= 500,103,104),5)
channel = 0

[State 650, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = abs(Vel X*0.5) + 7.5
y = 3;0.75

[State 650, AfterImage]
type = AfterImage
trigger1 = AnimElem = 2
time = 11
length = 10
framegap = 4
trans = add1
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1

[State 650, HitDef]
type = HitDef
trigger1 = AnimElem = 2
animtype = Heavy
attr = A, NA
damage = 80,14
guardflag = HA
hitflag = MAF
priority = 4,Hit
pausetime = 9,9;9,9
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = -10,-30
hitsound = S3,4
guardsound = S4,0
ground.type = High
ground.slidetime = 20;15
ground.hittime = 20;15
ground.velocity = -5
air.velocity = -3,-4
fall.recovertime = 20
guard.velocity = -8.3
yaccel = .6
ground.cornerpush.veloff = -5

[State 650,VelAdd]
type = VelAdd
trigger1 = 1
y = Var(39)*.25
;===============================================================================
; Definition of the (Dir + Button) attack
;===============================================================================

;-------------------------------------------------------------------------------
; 外式・轟斧　陰　"死神"（→＋A）
[Statedef 700]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 700 + Var(39)*10000
poweradd = 0
juggle = 15

[State 1110, posadd]
type = posadd
trigger1 = AnimElem = 2,=0 || AnimElem = 2,=3 || AnimElem = 3,=0
trigger2 = AnimElem = 3,=3 || AnimElem = 4,=0 || AnimElem = 9,=0
x = 6

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5,=1
value = 2, 1

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5,=1
value = 0,ifelse(Var(39)=1,110,5)
channel = 0

[State 700,HitDef]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
animtype = Hard
damage    = ifelse(Var(39)=1,70,63)
getpower = 144,36
givepower = 36
guardflag = H
hitflag = MAF
pausetime = 10,10
sparkno = S2000+(random%3)
guard.sparkno = S2010
sparkxy = 0,-80
hitsound = S3, 3
guardsound = S4, 0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 16
ground.velocity = -6
air.hittime = 13
air.velocity = -4,-5
yaccel = .4

[State 710,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 7
movetype = I

[State 700,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
[Statedef 666]
type = S
ctrl = 0
anim = 194
velset = 0,0

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 196
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 323
supermove = 1
supermovetime = 9999
pausemovetime = 9999
scale = 1,1

[State 0, ChangeState]
type = ChangeState
trigger1 = Time = 323
value = 667
ctrl = 0
;-------------------------------------------------------------------------------
[Statedef 667]
type = S
ctrl = 0
anim = 667
velset = 0,0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
;-------------------------------------------------------------------------------
; Body Slam
[Statedef 710]
type = A
movetype= A
physics = A
ctrl = 0
anim = 710 + Var(39)*10000
poweradd = 0
juggle = 15

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=1
value = 2, 1

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=1 && Random <= 300
value = 0,ifelse(Var(39)=1,ifelse(Random <= 500,102,103),5)
channel = 0

[State 700,HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
animtype = Light
damage    = ifelse(Var(39)=1,35,28)
guardflag = H
hitflag = MAF
pausetime = 9,9
sparkno = S2001
guard.sparkno = S2010
sparkxy = 0,-20
hitsound = S3, 3
guardsound = S4, 0
ground.type = Low
ground.slidetime = 8
ground.hittime  = 10
ground.velocity = -4
guard.velocity = -7
air.hittime = 13
air.velocity = -2,-5
yaccel = .4
fall = 1

[State 105,VelAdd]
type = VelAdd
trigger1 = 1
y = Var(39)*.25

[State 105,End]
type = ChangeState
trigger1 = Time > 0
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 52


;==============================================================================
; Definition of the Basic Throws
;===============================================================================

;-------------------------------------------------------------------------------
; 逆剥ぎ（Ｐ通常投げ）
[Statedef 800]
type = S
movetype = A
physics = S
ctrl = 0
anim = 800 + Var(39)*10000
velset = 0, 0

[State 800,HitDef]
type = Hitdef
trigger1 = AnimElem = 2
trigger1 = P2MoveType != H
trigger1 = P2StateNo != [150,155]
attr = S, NT
priority = 3,Miss
getpower = 0
hitflag = M-
numhits = 1
sparkno = -1
p1facing = ifelse (command = "holdfwd", 1,-1)
p2facing = 1
p1stateno = 810
p2stateno = 820
p2getp1state = 1
hitsound = -1
fall = 1
fall.recover = 0

[State 710,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = ifelse(Var(39)=1,0,5000),ifelse(Var(39)=1,118,10) ;0,ifelse(Var(39)=1,106,12)
channel = 0


[State 800,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; 逆剥ぎ（Ｋ通常投げ）
[Statedef 850]
type = S
movetype = A
physics = S
ctrl = 0
anim = 800 + Var(39)*10000
velset = 0, 0

[State 800,HitDef]
type = Hitdef
trigger1 = AnimElem = 2
trigger1 = P2MoveType != H
trigger1 = P2StateNo != [150,155]
attr = S, NT
priority = 3,Miss
getpower = 0
hitflag = M-
numhits = 1
sparkno = -1
p1facing = ifelse (command = "holdfwd", 1,-1)
p2facing = 1
p1stateno = 810
p2stateno = 820
p2getp1state = 1
hitsound = -1
fall = 1
fall.recover = 0

[State 710,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = ifelse(Var(39)=1,0,5000),ifelse(Var(39)=1,118,10)
channel = 0

[State 800,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 逆剥ぎ（成功）
[Statedef 810]
type = S
movetype = A
physics = N
anim = 810 + Var(39)*10000
velset = 0, 0
poweradd = 0
sprpriority = 3

[State 200,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 5,0

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,ifelse(Var(39)=1,106,6)
channel = 0

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 5,2

[State 810,TargetBind]
type = TargetState
trigger1 = AnimElem = 1,< 6 && PrevStateNo = 800
trigger2 = AnimElem = 1,< 2 && PrevStateNo = 850
triggerall = Target,Command = "fwd_b" || Target,Command = "fwd_y" || Target,Command = "back_b" || Target,Command = "back_y"
value = 1755

[State 810,TargetBind]
type = ChangeState
trigger1 = AnimElem = 1,< 6 && PrevStateNo = 800
trigger2 = AnimElem = 1,< 2 && PrevStateNo = 850
triggerall = Target,Command = "fwd_b" || Target,Command = "fwd_y" || Target,Command = "back_b" || Target,Command = "back_y"
value = 1750

[State 4150,0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810,Width]
type = Width
triggerall = AnimElem = 1
trigger1 = FrontEdgeDist < 40
trigger2 = BackEdgeDist < 40
edge = 40,40

[State 810,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

;[State 193, 1]
;type = Explod
;trigger1 = AnimElem = 16,=0
;anim = 2000
;pos = 20,-65
;bindtime = -1
;sprpriority = 5
;ownpal = 1

[State 810,TargetBind]
type = TargetBind
trigger1 = AnimElem = 16,<0
pos = 35,0

[State 810,TargetBind]
type = TargetState
trigger1 = AnimElem = 16,=1
value = 821

[State 810,TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 16,=1
value = -IfElse(PrevStateNo = 800,119,133)

[State 810,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 逆剥ぎ（投げられ側）
;------------------------ 1
[Statedef 820]
type = A
movetype = H
physics = N
ctrl = 0

[State 52, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 820, screenbound]
type = screenbound
Trigger1 = 1
value = 1
movecamera = 0,0

[State 820,ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 820

;------------------------ 2
[Statedef 821]
type = A
movetype = H
physics = N
velset = -4.5,-6
ctrl = 0

[State 820,ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 5050

[State 1509, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1509, veladd]
type = veladd
trigger1 = 1
y = .45

[State 1509, SelfState]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

;=====================================================================
; Beer Riot Mode
;=====================================================================
;
;-------------------------------------------------------------------------------
; 暴走
[Statedef 9999]
type = S
movetype = I
physics = S
anim = 9999
velset = 0, 0
ctrl = 0

[State 200,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 0,100
channel = 0
persistent = 0

[State 3000, Pause]
type = Pause
trigger1 = AnimElem = 3,=1
time = 39
movetime = 39

[State -2, 1]
type = VarSet
trigger1 = AnimElem = 3,=1
var(39) = 1

[State 1000, 3]
type = LifeSet
trigger1 = AnimElem = 3,=1        
value = ceil(var(29)/2)

[State 3000, Super]
type = Helper
trigger1 = AnimElem = 3,=1
persistent = 0
id = 2320
name = "Super Spark Helper"
pos = -26,-74
postype = P1
stateno = 2300
;helpertype = normal
;supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 9999, Helper]
type = Helper
trigger1 = AnimElem = 24
id = 10196
name = "Duff Can"
pos = 0,0
postype = p1
stateno = 10196
;helpertype = normal
;supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 195,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------
;Dodge
[Statedef 4000]
type = S
movetype = I
physics = N
ctrl = 0
anim = 4000 + Var(39)*10000
velset = 4.53, 0


[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=1
value = 5000, 25 ;0,ifelse(Var(39)=1,103,5)-------de lado a lado
channel = 0

[State 4050,0]
type = NotHitBy
trigger1 = AnimElem = 13,< 0
value = SCA

[State 4050,1]
type = HitBy
trigger1 = 1
value = SC, NT, ST, HT

[State 4050,2]
type = PlayerPush
trigger1 = AnimElem = 10,< 0
value = 0

[State 4050,4]
type = VelSet
trigger1 = AnimElem = 13,=0
x = 0

[State 4050, 6]
type = AfterImage
trigger1 = AnimElem = 2
time = 18
length = 10
framegap = 6 ;3
trans = add1
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1

[State 4050,8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------
; ゲージ溜め動作
[Statedef 4100]
type = S
movetype = I
physics = N
ctrl = 0
anim = 4101
velset = 0, 0

[State 200,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 0,ifelse(Var(39)=1,105,3)
channel = 0

[State 200,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
triggerall = anim = 4102
value = 0,30
channel = 0

[State 200,WOAH]
type = ChangeAnim
triggerall = Var(39) = 1
trigger1 = time = 0
value = 14100

[State 200,WOAH]
type = ChangeAnim
triggerall = Var(39) = 0
trigger1 = time = 0
value = 4101 + random%2

[State 820,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 1, 3
channel = 1
persistent = 0
;------------------------------------------------------
[State 4100,Poweradd]
type = Poweradd
trigger1 = Time < 11
value = 2

[State 4100,Poweradd]
type = Poweradd
trigger1 = Time < 21
value = 4

[State 4100,Poweradd]
type = Poweradd
trigger1 = Time >= 21
value = 8

[State 4050,8]
type = ChangeState
trigger1 = Command != "charge" && (Command != "charge1" || Command != "charge2")
trigger2 = Power >= 4000
triggerall = Anim = 4101 || Anim = 14100
value = 4101
ctrl = 0

[State 4050,8]
type = ChangeState
trigger1 = Command != "charge" && (Command != "charge1" || Command != "charge2")
trigger2 = Power >= 4000
triggerall = Anim = 4102
value = 4101
ctrl = 0
[State 4050,8]
type = ChangeState
trigger1 = Command != "charge" && (Command != "charge1" || Command != "charge2")
trigger2 = Power >= 4000
triggerall = Anim = 4103
value = 4104
ctrl = 0

;------------------- 終了
[Statedef 4101]
type = S
movetype = I
physics = N
ctrl = 0
anim = 4105 + Var(39)*10000
velset = 0, 0

[State 820,PlaySnd]
type = Stopsnd
trigger1 = Time = 0
channel = 1
persistent = 0

[State 820,PlaySnd]
type = Stopsnd
trigger1 = Time = 0
channel = 0
persistent = 0

[State 4050,8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 4104]
type = S
movetype = I
physics = N
ctrl = 0
anim = 4104 
velset = 0, 0

[State 820,PlaySnd]
type = Stopsnd
trigger1 = Time = 0
channel = 1
persistent = 0

[State 820,PlaySnd]
type = Stopsnd
trigger1 = Time = 0
channel = 0
persistent = 0

[State 4050,8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Standing Guard Broke
[Statedef 5910]
type    = S
movetype= H
physics = N
anim = 5910 + Var(39)*10000
velset = 0,0

[State 5000, 4]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State -2, 1]
type = VarSet
trigger1 = Time = 0
var(18) = 0

[State 820,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 5000,ifelse(Var(39)=1,110,10)
channel = 0
persistent = 0

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5911
;-------------------
[Statedef 5911]
type    = S
movetype= H
physics = S

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 18
value = 2400
ignorehitpause = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = (Anim = 5910 || Anim = 15910) && Time > 34
value = 5911 + Var(39)*10000
persistent = 0

[State 1005, Explod]
type = Explod
trigger1 = Time = 0
anim = 5950
id = 5950
pos =0,-75
postype = P1
sprpriority = 3
facing = 1
bindtime = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 3]
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = (Anim = 5911 || Anim = 15911) && AnimTime = 0
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = (Anim = 5911 || Anim = 15911) && AnimTime = 0
value = 1

[State 5001, 6]
type = ChangeState
trigger1 = (Anim = 5911 || Anim = 15911) && AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Crouching Guard Broke
[Statedef 5920]
type    = C
movetype= H
physics = N
anim = 5920 + Var(39)*10000
velset = 0,0

[State P1 Guard Breaked]
type = Explod
triggerall = numexplod(8506) = 0
trigger1 = Teamside = 1
anim = 8506
pos = 20,0+(ifelse(fvar(21),55,40))
scale = 0.5,0.5
postype = Left
BindTime = -1
id = 8506
Ownpal = 1
ontop = 1
SprPriority = 30
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 999999
PauseMoveTime = 999999

[State P2 Guard Breaked]
type = Explod
triggerall = numexplod(8506) = 0
trigger1 = Teamside = 2
anim = 8507
pos = -20,0+(ifelse(fvar(21),55,40))
scale = 0.5,0.5
postype = Right
BindTime = -1
id = 8506
Ownpal = 1
ontop = 1
SprPriority = 30
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 999999
PauseMoveTime = 999999
[State P1 Guard Break End]
type = Explod
triggerall = numexplod(8508) = 0
trigger1 = Teamside = 1
anim = 8508
pos = 20,0+(ifelse(fvar(21),55,40))
scale = 0.5,0.5
postype = Left
BindTime = -1
id = 8508
Ownpal = 1
ontop = 1
SprPriority = 30
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 999999
PauseMoveTime = 999999
[State P2 Guard Break End]
type = Explod
triggerall = numexplod(8508) = 0
trigger1 = Teamside = 2
anim = 8509
pos = -20,0+(ifelse(fvar(21),55,40))
scale = 0.5,0.5
postype = Right
BindTime = -1
id = 8508
Ownpal = 1
ontop = 1
SprPriority = 30
IgnoreHitPause = 1
Persistent = 1
SuperMoveTime = 999999
PauseMoveTime = 999999

[State 10000,Break]
type = PlaySnd
trigger1 = time = 0
value = S14001,7

[State 5000, 4]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State -2, 1]
type = VarSet
trigger1 = Time = 0
var(18) = 0

[State 820,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 5000,ifelse(Var(39)=1,110,10)
channel = 0
persistent = 0

[State 820,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 1, 6
persistent = 0

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5921

;------------------- 2
[Statedef 5921]
type    = C
movetype= H
physics = C

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 18
value = 2400
ignorehitpause = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = (Anim = 5920 || Anim = 15920) && Time > 34
value = 5921 + Var(39)*10000
persistent = 0

[State 1005, Explod]
type = Explod
trigger1 = Time = 0
anim = 5950
id = 5950
pos =0,-45
postype = P1
sprpriority = 3
facing = 1
bindtime = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 3]
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = (Anim = 5921 || Anim = 15921) && AnimTime = 0
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = (Anim = 5921 || Anim = 15921) && AnimTime = 0
value = 1

[State 5001, 6]
type = ChangeState
trigger1 = (Anim = 5921 || Anim = 15921) && AnimTime = 0
value = 0
ctrl = 1



;---------------------------------------------------------------------------
; 気絶
;------------------- 1
[Statedef 5300]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5000, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 5310

[State 5000, 4]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5310

[State 5300, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030 
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;------------------- 2
[Statedef 5310]
type    = A
movetype= H
physics = N
velset = -6,-4.5

[State 5050, 3]
type = VelAdd
trigger1 = 1
y = .45

[State 5300, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 3001, Super]
type = Helper
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
persistent = 0
id = 5305
name = "Chicken"
pos = 0,0
postype = P1
stateno = 5305
helpertype = normal
keyctrl = 0
ownpal = 1

[State 5050, 6]
type = ChangeState
trigger1 = Time > 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;HIT_BOUNCE

;------------------- 3
[Statedef 5320]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 5300 
velset = 0,0

[State 5300, VarSet]
type = VarSet
trigger1 = Time = 0
var(21) = 0

[State 5300, Varadd]
type = Varadd
trigger1 = Time = 0
var(24) = 5

[State 180,VarSet]
type = VarSet
trigger1 = Time = 0
v = 10
value = Random

[State 5300, VarSet]
type = VarSet
trigger1 = Time = 0
var(23) = ifelse((Var(10) = [0,49]),70,ifelse((Var(10) = [50,199]),84,ifelse((Var(10) = [200,599]),126,ifelse((Var(10) = [600,899]),168,210))))

[State 5300, Varadd]
type = Varadd
trigger1 = Time > 0 && command = "random"
var(23) = -1

[State 5300, Varadd]
type = Varadd
trigger1 = Time > 0
var(23) = -1

[State 5300, End]
type = ChangeState
trigger1 = Time > 0 && Var(23) <= 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; 投げ抜け
;------------------------ 自分側
[Statedef 1750]
type = S
movetype = I
physics = N
anim = 5910 + Var(39)*10000
ctrl = 0
velset = -3, 0

[State 820,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 1, 7
persistent = 0

[State 820,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 5000,ifelse(Var(39)=1,110,10)
channel = 0
persistent = 0

[State 194, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 105, VelMul]
type = VelMul
trigger1 = 1
x = .96

[State 4100,4]
type = PlayerPush
trigger1 = P2BodyDist X < 0
value = 0

[State 1005, Explod]
type = Explod
trigger1 = Time = 0
anim = 2200
id = 2200
pos =0,0
postype = P1
sprpriority = 5
facing = 1
bindtime = 1
ownpal = 1
persistent = 0
ignorehitpause = 1

[State 3001, Super]
type = Null;Helper
trigger1 = Time = 0
name = "Super Spark Helper"
pos = 0,0
postype = P1
stateno = 2550
helpertype = normal
keyctrl = 0
ownpal = 1

[State 105,End]
type = ChangeState
trigger1 = Time >= 30
value = 0
ctrl = 1

;------------------------ 相手側
[Statedef 1755]
type = S
movetype = I
physics = N
ctrl = 0
velset = -3, 0

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = Time = 0 && SelfAnimExist(5910)
;triggerall = anim != 5910 && SelfAnimExist(5910)
trigger1 = authorname = "H”" || authorname = "M.M.R." || authorname = "CAMRAT Type KOF"
trigger2 = authorname = "Tin" || authorname = "Nyankoro" || authorname = "ryokucha"
trigger3 = authorname = "Third" || authorname = "adamskie" || authorname = "Bad Darkness"
value = 5910

[State 820,ChangeAnim2]
type = ChangeAnim
trigger1 = Time = 0 && !SelfAnimExist(5910)
;trigger1 = anim != 5007 && !SelfAnimExist(5910)
value = 5007

[State 194, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 105, VelMul]
type = VelMul
trigger1 = 1
x = .96

[State 4100,4]
type = PlayerPush
trigger1 = P2BodyDist X < 0
value = 0

[State 105,End]
type = SelfState
trigger1 = Time >= 29
value = 0
ctrl = 1

;=====================================================================
; 特殊エフェクト関連
;=====================================================================

;---------------------------------------------------------------------------
; パワー溜めエフェクト
;------------------------ 
[Statedef 4110]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0,0

[State 4110, BindToParent]
type = BindToParent
trigger1 = 1
pos = 20,0

[State 4110, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger2 = Parent,StateNo = 4100
value = 4116

[State 4110, Varset]
type = Varset
trigger1= AnimElem = 1,=0
ignorehitpause = 1
Fv = 1
value = (power * 0.00033)

[State 4110, Explod]
type = Explod
trigger1 = Time = 0 && NumExplod(4110) = 0
anim = 4110
id = 4110
pos = 0,0
postype = P1
scale  = 1,Fvar(1)
sprpriority = 3
bindtime = -1
ownpal = 0
removetime = 999999
facing = 1
persistent = 0

[State 4110, Explod]
type = Explod
trigger1 = Time = 0 && NumExplod(4115) = 0
anim = 4115
id = 4115
pos = 0,0
postype = P1
sprpriority = -1
bindtime = -1
ownpal = 0
removetime = 999999
facing = 1
persistent = 0

[State 4110, ModifyExplod]
type = ModifyExplod
trigger1 = AnimElem = 1,=0
ID = 4110
scale  = 1,Fvar(1)

[State 4110, ModifyExplod]
type = ModifyExplod
trigger1 = AnimElem = 1,=1
ID = 4110
scale  = .8,Fvar(1)

[State 4110, ModifyExplod]
type = ModifyExplod
trigger1 = AnimElem = 1,=2
ID = 4110
scale  = .65,Fvar(1)

[State 4110, ModifyExplod]
type = ModifyExplod
trigger1 = AnimElem = 1,=3
ID = 4110
scale  = .4,Fvar(1)

[State 4110, ModifyExplod]
type = ModifyExplod
trigger1 = AnimElem = 1,=4
ID = 4110
scale  = .3,Fvar(1)

[State 4110, ModifyExplod]
type = ModifyExplod
trigger1 = AnimElem = 1,=5
ID = 4110
scale  = .2,Fvar(1)

[State 4110, ModifyExplod]
type = ModifyExplod
trigger1 = AnimElem = 1,=6
ID = 4110
scale  = .15,Fvar(1)

[State 4110, Varset]
type = Varset
trigger1= AnimElem = 1,=0
ignorehitpause = 1
var(1) = 0
persistent = 0

[State 4110, Varadd]
type = Varadd
trigger1= AnimElem = 1,>0
ignorehitpause = 1
var(1) = -32

[State 4110, PalFX]
type = PalFX
trigger1= AnimElem = 1,>0
add = Var(1)-1,Var(1)-1,Var(1)-1
time = 1

[State 4110, RemoveExplod]
type = RemoveExplod
trigger1 = Parent,StateNo != [4100,4101]
trigger2 = AnimTime = 0
id = 4110

[State 4110, RemoveExplod]
type = RemoveExplod
trigger1 = Parent,StateNo != [4100,4101]
trigger2 = AnimTime = 0
id = 4115

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Parent,StateNo != [4100,4101]
trigger2 = AnimTime = 0

;---------------------------------------------------------------------------
; ダッシュエフェクト
;------------------------ 1
[Statedef 2155]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0

[State 4110, Explod]
type = Explod
trigger1 = Time = 0 && NumExplod(2155) = 0
anim = 2155
id = 2155
pos = 0,0
postype = P1
sprpriority = 5
bindtime = 1
ownpal = 0
removetime = 11
persistent = 0

[State 4110, Varset]
type = Varset
trigger1= Time = 0
ignorehitpause = 1
var(1) = 0
persistent = 0

[State 4110, Varadd]
type = Varadd
trigger1= Time > 0
ignorehitpause = 1
var(1) = -16

[State 4110, PalFX]
type = PalFX
trigger1= Time > 0
add = Var(1)-1,Var(1)-1,Var(1)-1
time = 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Time > 0 && NumExplod(2155) = 0

;------------------------ 2
[Statedef 2150]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0

[State 4110, BindToParent]
type = BindToParent
trigger1 = Time < 13
pos = 0,0

[State 4110, Explod]
type = Explod
trigger1 = Time = 0 && NumExplod(2150) = 0
anim = 2150
id = 2150
pos = 0,0
postype = P1
sprpriority = 5
bindtime = -1
ownpal = 0
removetime = 20
facing = 1
persistent = 0

[State 4110, Varset]
type = Varset
trigger1= Time = 0
ignorehitpause = 1
var(1) = 0
persistent = 0

[State 4110, Varadd]
type = Varadd
trigger1= Time = 13
ignorehitpause = 1
var(1) = 32
persistent = 0

[State 4110, Varadd]
type = Varadd
trigger1= Time > 13
ignorehitpause = 1
var(1) = -32

[State 4110, PalFX]
type = PalFX
trigger1= Time > 0
add = Var(1),Var(1)-1,Var(1)-1
time = 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Time > 0 && NumExplod(2150) = 0

;---------------------------------------------------------------------------
; ジャンプエフェクト
;------------------------ 1
[Statedef 2100]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0

[State 4110, Explod]
type = Explod
trigger1 = Time = 0
anim = 2100
id = 2100
pos = 0,0
postype = P1
vel = 2.4,-2.5
sprpriority = 5
bindtime = 1
ownpal = 0
removetime = 10
facing = 1
persistent = 0

[State 4110, Explod]
type = Explod
trigger1 = Time = 0
anim = 2100
id = 2100
pos = 0,0
postype = P1
vel = 1.4,-1.5
sprpriority = 5
bindtime = 1
ownpal = 0
removetime = 10
facing = 1
persistent = 0

[State 4110, Explod]
type = Explod
trigger1 = Time = 0
anim = 2100
id = 2100
pos = 0,0
postype = P1
vel = -1.1,-1.8
sprpriority = 5
bindtime = 1
ownpal = 0
removetime = 10
facing = 1
persistent = 0

[State 4110, Explod]
type = Explod
trigger1 = Time = 0
anim = 2100
id = 2100
pos = 0,0
postype = P1
vel = -1.8,-0.7
sprpriority = 5
bindtime = 1
ownpal = 0
removetime = 10
facing = 1
persistent = 0

[State 4110, Explod]
type = Explod
trigger1 = Time = 0
anim = 2100
id = 2100
pos = 0,0
postype = P1
vel = -3.2,-4.0
sprpriority = 5
bindtime = 1
ownpal = 0
removetime = 10
facing = 1
persistent = 0

[State 4110, Explod]
type = Explod
trigger1 = Time = 0
anim = 2100
id = 2100
pos = 0,0
postype = P1
vel = -3.2,-4.0
sprpriority = 5
bindtime = 1
ownpal = 0
removetime = 10
facing = 1
persistent = 0

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Time > 0 && NumExplod(2100) = 0

;---------------------------------------------------------------------------
; 炎エフェクト
;------------------------ 
[Statedef 2020]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0

[State 4110, Varset]
type = ParentVarset
trigger1= Time = 0
ignorehitpause = 1
var(14) = 1
persistent = 0

[State 18600, PosSet]
type = PosSet
trigger1 = 1
x = enemynear,pos x
y = enemynear,pos y
ignorehitpause = 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Time > 0 && Parent,var(14) = 0

;---------------------------------------------------------------------------
; Bash Dash Masher Hyper Spark Helper
;------------------------ 1
[Statedef 2005]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0

[State 4110, Explod]
type = Explod
trigger1 = Time = 0 && NumExplod(2005) = 0
anim = 2310
id = 2005
pos = 0,ifelse(IsHelper(2005)=1,(Parent,Var(20)),0)
postype = P1
sprpriority = 8
bindtime = -1
ownpal = 0
removetime = 18
facing = ifelse((Random=[0,499]),-1,1)
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

[State 4110, Varset]
type = Varset
trigger1= Time = 0
ignorehitpause = 1
var(1) = 0
persistent = 0

[State 4110, Varadd]
type = Varadd
trigger1= Time >= 8
ignorehitpause = 1
var(1) = -24

[State 4110, PalFX]
type = PalFX
trigger1= Time > 0
add = Var(1)-1,Var(1)-1,Var(1)-1
time = 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Time > 0 && NumExplod(2005) = 0

;---------------------------------------------------------------------------
; Super Start Spark Helper
;------------------------ 1
[Statedef 2300]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0

[State 820,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 1, 9
persistent = 0

[State 2300,PlaySnd: Hyper Sound]
type = PlaySnd
trigger1 = Time = 1
value = S1,22

[State 3000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 1
add = 0,0,0
mul = 32,32,32
sinadd = 0,0,0,1
invertall = 0
color = 256

;Super Spark left half, facing right
[State 3000, 1]
type = Explod
trigger1 = Time = 3
trigger1 = Pos X <= 0
trigger1 = Facing = 1
anim = 2305
postype = P1
pos = 0,0
facing = -1
sprpriority = 6
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Time > 39

;Super Spark right half, facing right
[State 3000, 1]
type = Explod
trigger1 = Time = 3
trigger1 = Pos X > 0
trigger1 = Facing = 1
anim = 2305
postype = P1
pos = 0,0
facing = 1
sprpriority = 6
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

;Super Spark left half, facing left
[State 3000, 1]
type = Explod
trigger1 = Time = 3
trigger1 = Pos X < 0
trigger1 = Facing = -1
anim = 2305
postype = P1
pos = 0,0
facing = 1
sprpriority = 6
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Time > 39

;Super Spark right half, facing left
[State 3000, 1]
type = Explod
trigger1 = Time = 3
trigger1 = Pos X > 0
trigger1 = Facing = -1
anim = 2305
postype = P1
pos = 0,0
facing = -1
sprpriority = 6
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

[State 2300, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoBG
flag2 = NoFG
flag3 = NoBarDisplay


[State 2300, Explod: Hyper BG]
type = Explod
trigger1 = Time = 0
anim = 2508
ID = 2508
pos = 0,-2
postype = back  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = ifelse(IsHelper(2303) || IsHelper(2304),83,48)
supermovetime = 9999999
pausemovetime = 9999999
scale = 1,1.09
sprpriority = -5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause = 1

;Fade out
[State 4001, Fade Out]
type=palfx
trigger1= Time = 30
time=12
sinadd=-255,-255,-255,60

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Time > 39

;---------------------------------------------------------------------------
; Super Cancel Display Helper
;------------------------ 1
[Statedef 2310]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0

[State 3000, 1] ;Super Cancel Enter
type = Explod
trigger1 = Time = 0
anim = 30005
id = 30005
postype = left
pos = 320,-48
vel = -40,0
facing = 1

sprpriority = 7
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

[State 2310, Kill Super Cancel Entry]
type = RemoveExplod
trigger1 =  time > 5
id =  30005
;ignorehitpause =
;persistent =

[State 3000, 1] ;Super Cancel Freeze
type = Explod
trigger1 = Time = 5
anim = 30005
id = 30015
postype = left
pos = 0,-48
vel = 0,0
facing = 1
bindtime = -1
sprpriority = 7
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

[State 2310, Kill Super Cancel Freeze]
type = RemoveExplod
trigger1 =  time > 35
id =  30015
;ignorehitpause =
;persistent =

[State 3000, 1] ;Super Cancel Exit
type = Explod
trigger1 = Time = 35
anim = 30005
id = 30025
postype = left
pos = 0,-48
vel = -40,0
facing = 1

sprpriority = 7
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

[State 2310, Kill Super Cancel Exit]
type = RemoveExplod
trigger1 =  time > 40
id =  30025
;ignorehitpause =
;persistent =

[State 2310, DestroySelf]
type = DestroySelf
trigger1 = time > 40
;ignorehitpause =
;persistent =

;---------------------------------------------------------------------------
; Dream Cancel Display Helper
;------------------------ 1
[Statedef 2320]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0

[State 3000, 1] ;Dream Cancel Enter
type = Explod
trigger1 = Time = 0
anim = 30006
id = 30006
postype = left
pos = 320,0
vel = -40,0
facing = 1

sprpriority = 7
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

[State 2310, Kill Dream Cancel Entry]
type = RemoveExplod
trigger1 =  time > 5
id =  30006
;ignorehitpause =
;persistent =

[State 3000, 1] ;Dream Cancel Freeze
type = Explod
trigger1 = Time = 5
anim = 30006
id = 30016
postype = left
pos = 0,0
vel = 0,0
facing = 1
bindtime = -1
sprpriority = 7
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

[State 2310, Kill Dream Cancel Freeze]
type = RemoveExplod
trigger1 =  time > 35
id =  30016
;ignorehitpause =
;persistent =

[State 3000, 1] ;Dream Cancel Exit
type = Explod
trigger1 = Time = 35
anim = 30006
id = 30026
postype = left
pos = 0,0
vel = -40,0
facing = 1

sprpriority = 7
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

[State 2310, Kill Dream Cancel Exit]
type = RemoveExplod
trigger1 =  time > 40
id =  30026
;ignorehitpause =
;persistent =

[State 2310, DestroySelf]
type = DestroySelf
trigger1 = time > 40
;ignorehitpause =
;persistent =

;============================================================================
; Homer Level 3 Hyper Portrait Helper
;============================================================================

[Statedef 2350]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0

[State 3000, 1]
type = Explod
trigger1 = Time = 0
anim = 33600
id = 33600
postype = left
pos = 160,120
vel = 0,0
facing = 1
removetime = 20
bindtime = -1
sprpriority = -3
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0


[State 3101, Homerote]
type = explod
trigger1 = time = 20
anim = 33600
ID = 33600
postype = left
sprpriority = -3
supermovetime = -1
removetime = 3
facing = 1
pos = 160,120
bindtime = -1
pausemovetime = 99999999999999
supermovetime = 99999999999999
scale = 1.2, 1.2
removeongethit = 1

[State 3101, Homerote]
type = explod
trigger1 = time = 23
anim = 33600
ID = 33600
postype = left
sprpriority = -3
supermovetime = -1
removetime = 3
facing = 1
pos = 160,120
bindtime = -1
scale = 1.2, 1.2
removeongethit = 1

[State 3101, Homerote]
type = explod
trigger1 = time = 26
anim = 33600
ID = 33600
postype = left
sprpriority = -3
supermovetime = -1
removetime = 3
facing = 1
pos = 160,120
bindtime = -1
scale = 1.4, 1.4
removeongethit = 1

[State 3101, Homerote]
type = explod
trigger1 = time = 29
anim = 33600
ID = 33600
postype = left
sprpriority = -3
supermovetime = -1
removetime = 3
facing = 1
pos = 160,120
bindtime = -1
scale = 1.6, 1.6
removeongethit = 1

[State 3101, Homerote]
type = explod
trigger1 = time = 32
anim = 33600
ID = 33600
postype = left
sprpriority = -3
supermovetime = -1
removetime = 3
pos = 160,120
facing = 1
bindtime = -1
scale = 1.8, 1.8
removeongethit = 1

[State 3101, Homerote]
type = explod
trigger1 = time = 35
anim = 33600
ID = 33600
postype = left
sprpriority = -3
supermovetime = -1
removetime = 5
pos = 160,120
facing = 1
bindtime = -1
scale = 2.0, 2.0
removeongethit = 1

;Fade out
[State 4001, Fade Out]
type=palfx
trigger1= Time = 20
time=20
sinadd=-255,-255,-255,80

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 39

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 40

;---------------------------------------------------------------------------
; 気絶エフェクト
;------------------------ 1
[Statedef 5305]
type = A
movetype = I
physics = N
ctrl = 0
anim = 5305
velset = 0,0
sprpriority = 5
[State 4110, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 820,PlaySnd]
type = PlaySnd
trigger1 = Root,StateNo = 5320
value = 1, 23 +random%3
channel = 2
loop = 1
persistent = 0

[State 820,PlaySnd]
type = Stopsnd
trigger1 = Time > 0
trigger1 = Root,StateNo != [5310,5320]
trigger1 = Root,StateNo != [5100,5120]
channel = 2
persistent = 0

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Time > 0
trigger1 = Root,StateNo != [5310,5320]
trigger1 = Root,StateNo != [5100,5120]

;---------------------------------------------------------------------------
; 鬼焼きエフェクト
;------------------------ 1
[Statedef 1105]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0

[State 1110, posadd]
type = posset
trigger1 = 1
x = (Parent,Pos X)
y = 0

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = Time > 36
trigger2 = Time < 20
trigger2 = Parent,MoveType = H
id = 1105

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Time > 36
trigger2 = Time < 20
trigger2 = Parent,MoveType = H

[State -2, Shocked]
type = PlaySnd
trigger1 = Time = 0
trigger1 = anim = 7696
value = S7697,0

[State -2, Burned]
type = PlaySnd
trigger1 = Time = 0
trigger1 = anim = 7697
value = S5000,10

[State -2, Frozen]
type = PlaySnd
trigger1 = Time = 0
trigger1 = anim = 7990
value = S7900,2

[State -2, Frozen in Air]
type = PlaySnd
trigger1 = Time = 0
trigger1 = anim = 7991
value = S7900,2
;=====================================================================
;FATAL MOVE PEKETO - DECAPITACION
;================================
;---------------------------------------------------------
;decapitacion - fatal move P2 - 1
[Statedef 91230]
type = S
movetype = H
ctrl = 0
;physics = A
velset = 0, 0
anim = 91230
[State 182, 1]
type = screenbound
trigger1 = 1 
movecamera = 1,0
value = 1
[State 210, Width]
type = Width
trigger1 = alive = 1
value = 50,50
;cabeza rebanada
[State 1201, helper]
type = Helper
trigger1 = AnimElem = 2
name = "cabeza"
ID = 4011
stateno = 912320
postype = p1
pos = -5,-34
sprpriority = 7
[State 220, 3]
type = changestate
trigger1 = time = 140
value = 91231
ctrl = 0
;---------------------------------------------------------
;decapitacion - fatal move P2 - 2
[Statedef 91231]
type = S
movetype = H
ctrl = 0
physics = N
velset = 0, 0
[State 700, 10]
type = Changeanim
trigger1 = Time = 0
value = 91231
[State 182, 1]
type = screenbound
trigger1 = 1 
movecamera = 1,0
value = 1
[State 1050, 1]
type = veladd
trigger1 = 1
y = .3
[State 3050, 5]
type = sprpriority
trigger1 = 1
value = 1
[State 210, Width]
type = Width
trigger1 = alive = 1
value = 50,50
[State 700, 10]
type = selfstate
trigger1 = pos Y >= -20 && vel y > 0
value = 5150
ctrl = 0
;----------------------------
;cabeza rebanada 1 - vuela (helper)
[Statedef 912320]
type = A
movetype= I
physics = N
poweradd= 0
ctrl = 0
velset = -1,-4
sprpriority = 7
anim = 912320
[State 210, Width]
type = veladd
trigger1 = 1
y = .3
[State 220, 3]
type = velset
trigger1 = pos Y >= -0 && vel y > 0
y = -4.8
[State 191, Snd 2]
type = PlaySnd
trigger1 = pos Y >= -6 && vel y > 0
value = F7,0
freqmul = 1.3
volume = 100
[State 220, 3]
type = changestate
trigger1 = time = 73
value = 912321
;----------------------------
;cabeza rebanada 2 queda ahi (helper)
[Statedef 912321]
type = A
movetype= I
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 7
anim = -1
[State 220, 3]
type = destroyself
trigger1 = time = 2
;cabeza queda ahi
[State 1010, 9] 
type = explod
trigger1 = time = 1
anim = 912321
persistent = 0
pos = 0,0
postype = p1
sprpriority = 3
shadow = -1

;Dash Forward
[Statedef 110]
type    = A
physics = N
anim = 110 + Var(39)*10000
ctrl = 0
VelSet = 6.0,0
sprpriority = 1

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=1
value = 0,ifelse(Var(39)=1,108,14)
channel = 0

[State Type Set]
Type = StateTypeSet
Trigger1 = AnimElem>= 3
Physics = A

[State Ctrl]
Type = CtrlSet
Trigger1 = AnimElem>= 3
Value = 1

;Dash back
[Statedef 115]
type    = A
physics = N
anim = 115 + Var(39)*10000
ctrl = 0
VelSet = -6.0,0
sprpriority = 1

[State 200,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0,ifelse(Var(39)=1,108,14)
channel = 0

[State Type Set]
Type = StateTypeSet
Trigger1 = AnimElem>= 1
Physics = A

[State Ctrl]
Type = CtrlSet
Trigger1 = AnimElem>= 1
Value = 1
;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S
ctrl = 0

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundsexisted = 0
value = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundsexisted = 0
fvalue = 0

[State 5900, 3] ;Change palette
type = RemapPal
trigger1 = 1
source = 1,1
dest = 1,palno

[State 5900, 4] ;Intro for round 1
type = ChangeState
trigger1 = roundno = 1
value = 190

[State 5900, 5] ;All other rounds
type = ChangeState
trigger1 = 1
value = 0

;マリオKO対応ステート（ヘルパー）
[Statedef 19311]
type=A
movetype=H
physics=N
ctrl=0
anim=19311
sprpriority=3

[State ]
type=PlaySnd
trigger1=time=0
value=s19311,0
abspan=0

[State ]
type=angledraw
trigger1=1
scale=4,4

[State ]
type=AssertSpecial
trigger1=time<=163
flag=noshadow
flag2=nomusic
flag3=roundnotover

[State ]
type=AssertSpecial
trigger1=time>=164
flag=noshadow

[State ]
type=VelSet
trigger1=time=17
y=-7

[State ]
type=VelAdd
trigger1=time>=17
y=.34

;------------------------------------------------------------------------------------------
;things
[Statedef -2]
;デバッグ用
[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
;type = DisplayToClipboard
text="var(27) = %d  Defense = %d Range = %d"
params = var(27) ,var(18) ,var(21)
ignorehitpause = 1



; Do not make Homer turn towards his enemy when he KO's an opponent
; with Road Roller D'oh special. Fixes the turn glitch when Homer
; does this when facing left.
[State 0, AssertSpecial]
type = AssertSpecial
triggerall = roundstate > 2
trigger1 = NumHelper (3500) > 0
flag = noautoturn

;マリオキャラ「マリオKO」対応ステート
[State ]
type=Helper
triggerall=!alive&&stateno!=5150&&time=1&&!numhelper(19311)
trigger1=P2name="Super Mario"||P2name="SuperMario"||P2name="Super Mario 64"||P2name="Fighting Mario"||P2name="mario"||P2name="Old School Mario"||P2name="NGPC Mario"||P2name="DKmario"||P2name="Rario"||P2name="NES Super Mario"||P2name="KoopaClownCar_IWBTG"
trigger2=P2name="nesmario"||P2name="Super Paper Mario"||P2name="NGPC Metal Mario"||P2name="Super_Mario"||P2name="MarioBros"||P2name="Strong SuperMario"||P2name="satuzinki nesmario"||P2name="seitei nesmario"||P2name="SMB1 Mario"||P2name="bowser-spaceship"
trigger3=P2name="[Txpot's] Mario Combat Deluxe Mario"||P2name="Dr Mario"||P2name="Super.mario"||P2name="Kart Fighter Mario"||P2name="CDIMario"||P2name="Pesky Plumer Mario (Mario EMW v1)"||P2name="Paper Mario"||P2name="SSBM Mario"||P2name="Princess Daisy"
trigger4=P2name="SSBB Mario"||P2name="[Txpot's] SSB-MetalMario"||P2name="NGPC Luigi"||P2name="Luigi"||P2name="Luigi_ver2"||P2name="Fighting Luigi"||P2name="Super Luigi"||P2name="Super_Luigi"||P2name="SuperLuigi"||P2name="MetalYoshi3"||P2name="MLSS Luigi"
trigger5=P2name="Smb3 waluigi"||P2name="KUPPA GUNDAN"||P2name="Kart Fighter Luigi"||P2name="LuigiSMB"||P2name="Mama Luigi"||P2name="SMB2 Waluigi/NESwaluigi"||P2name="Waluigi"||P2name="Wario V3"||P2name="Wario"||P2name="Princess Daisy "||P2name="ピーチ姫"
trigger6=P2name="Princess Peach Toadstool"||P2name="Kart-Fighter-Yoshi"||P2name="yoshi"||P2name="yoshiteam"||P2name="Yoshi3"||P2name="EvilPeach"||P2name="Peach"||P2name="Kinopio"||P2name="King Koopa"||P2name="Koopa"||P2name="Giga Bowser"||P2name="Bowser"
trigger7=P2name="Baby Bowser"||P2name="Kamek the Magikoopa"||P2name="マリオ"||P2name="ハナちゃん WIGGLER"||P2name="Sexy Turtle"||P2name="Koopa Troopa"||P2name="Chomper"||P2name="DonkeyKong"||P2name="Donkey Kong"||P2name="Diddy Kong"||P2name="Mallow"
trigger8=P2name="dk"||P2name="Geno"||P2name="Jinx"||P2name="Yaridovich"||P2name="Kyasarin"||P2name="Princess Shroob"||P2name="Big Teresa"||P2name="Baby E.Gadd"||P2name="Yossy Kart Fighter"||P2name="Bowser Kart Fighter"||P2name="Koopa Troopa Kart Fighter"
trigger9=P2name="Luigi Kart Fighter"||P2name="Donkey Kong Jr. Kart Fighter"||P2name="Yossy"||P2name="Mario Kart Fighter"||P2name="Peach Kart Fighter"||P2name="Donkey Kong Kart Fighter"||P2name="Goomba"||P2name="toad"||P2name="Bowser-KF"||P2name="bob-omb"
trigger10=P2name="DonkeyKongJr"||P2name="CChuck"||P2name="Toad Kart Fighter"||(P2name="bow"&&enemynear,authorname="tuki")
name="mario KO"
ID=19311
postype=p1
stateno=19311
helpertype=normal

[State ]
type=Helper
triggerall=!alive&&stateno!=5150&&time=1&&!numhelper(19311)&&numenemy>=2
trigger1=P4name="Super Mario"||P4name="SuperMario"||P4name="Super Mario 64"||P4name="Fighting Mario"||P4name="mario"||P4name="Old School Mario"||P4name="NGPC Mario"||P4name="DKmario"||P4name="Rario"||P4name="NES Super Mario"||P4name="KoopaClownCar_IWBTG"
trigger2=P4name="nesmario"||P4name="Super Paper Mario"||P4name="NGPC Metal Mario"||P4name="Super_Mario"||P4name="MarioBros"||P4name="Strong SuperMario"||P4name="satuzinki nesmario"||P4name="seitei nesmario"||P4name="SMB1 Mario"||P4name="bowser-spaceship"
trigger3=P4name="[Txpot's] Mario Combat Deluxe Mario"||P4name="Dr Mario"||P4name="Super.mario"||P4name="Kart Fighter Mario"||P4name="CDIMario"||P4name="Pesky Plumer Mario (Mario EMW v1)"||P4name="Paper Mario"||P4name="SSBM Mario"||P4name="Princess Daisy"
trigger4=P4name="SSBB Mario"||P4name="[Txpot's] SSB-MetalMario"||P4name="NGPC Luigi"||P4name="Luigi"||P4name="Luigi_ver2"||P4name="Fighting Luigi"||P4name="Super Luigi"||P4name="Super_Luigi"||P4name="SuperLuigi"||P4name="MetalYoshi3"||P4name="MLSS Luigi"
trigger5=P4name="Smb3 waluigi"||P4name="KUPPA GUNDAN"||P4name="Kart Fighter Luigi"||P4name="LuigiSMB"||P4name="Mama Luigi"||P4name="SMB2 Waluigi/NESwaluigi"||P4name="Waluigi"||P4name="Wario V3"||P4name="Wario"||P4name="Princess Daisy "||P4name="ピーチ姫"
trigger6=P4name="Princess Peach Toadstool"||P4name="Kart-Fighter-Yoshi"||P4name="yoshi"||P4name="yoshiteam"||P4name="Yoshi3"||P4name="EvilPeach"||P4name="Peach"||P4name="Kinopio"||P4name="King Koopa"||P4name="Koopa"||P4name="Giga Bowser"||P4name="Bowser"
trigger7=P4name="Baby Bowser"||P4name="Kamek the Magikoopa"||P4name="マリオ"||P4name="ハナちゃん WIGGLER"||P4name="Sexy Turtle"||P4name="Koopa Troopa"||P4name="Chomper"||P4name="DonkeyKong"||P4name="Donkey Kong"||P4name="Diddy Kong"||P4name="Mallow"
trigger8=P4name="dk"||P4name="Geno"||P4name="Jinx"||P4name="Yaridovich"||P4name="Kyasarin"||P4name="Princess Shroob"||P4name="Big Teresa"||P4name="Baby E.Gadd"||P4name="Yossy Kart Fighter"||P4name="Bowser Kart Fighter"||P4name="Koopa Troopa Kart Fighter"
trigger9=P4name="Luigi Kart Fighter"||P4name="Donkey Kong Jr. Kart Fighter"||P4name="Yossy"||P4name="Mario Kart Fighter"||P4name="Peach Kart Fighter"||P4name="Donkey Kong Kart Fighter"||P4name="Goomba"||P4name="toad"||P4name="Bowser-KF"||P4name="bob-omb"
trigger10=P4name="DonkeyKongJr"||P4name="CChuck"||P4name="Toad Kart Fighter"||(P4name="bow"&&enemynear(1),authorname="tuki")
name="mario KO"
ID=19311
postype=p1
stateno=19311
helpertype=normal
;-------------------------------------------------------------------------------

;---------------------------------------------------------------------------



;---------------------------------------------------------------------------
[State -2, StopSnd - WooHoo]
type = StopSnd
triggerall = !IsHelper
trigger1 = MoveType = H || GetHitVar(IsBound)
trigger1 = Anim != 1100 + Var(39)*10000
trigger1 = Anim != 1110 + Var(39)*10000
channel = 2
ignorehitpause = 1
;---------------------------------------------------------------------------
; 特殊エフェクト消去
[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = StateNo != 0
id = 12000

[State -2, RemoveExplod]
type = RemoveExplod
trigger1 = StateNo != 11
id = 12002
;---------------------------------------------------------------------
; Remove Explod If not dead
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = NumExplod(28) > 0
trigger1 = Alive || Stateno != 5150
id = 28

;---------------------------------------------------------------------
;Stop AfterImage if lying down
[State -2,AfterImageTime]
type = AfterImageTime
trigger1 = MoveType = H && StateNo !=5110 && StateNo !=5120 
time = 0

;---------------------------------------------------------------------
; 特殊ジャンプフラグ
[State -2,VarSet]
type = VarSet
trigger1 = Command = "holddown"
var(11) = 5

[State -2,VarSet]
type = Varadd
trigger1 = Var(11) > 0 && StateNo != 40 && Command != "holddown"
var(11) = -1

[State 50, 1]
type = VarSet
trigger1 = MoveType = H
var(11) = 0

;---------------------------------------------------------------------
; 時間差起き上がりフラグ
[State -2,VarSet]
type = VarSet
trigger1 = Ctrl = 1
var(25) = 0

;---------------------------------------------------------------------------
;ガードクラッシュ
;------------------------ 
[State -2, Varadd]
type = Varadd
trigger1 = var(19) < 120 && movetype != H
persistent = 0
ignorehitpause = 1
var(19) = 1

[State -2, VarSet]
type = VarSet
trigger1 = stateno = [150,155)
trigger2 = stateno = [5000,5999)
persistent = 0
ignorehitpause = 1
var(19) = 0

[State -2, VarSet]
type = VarSet
trigger1 = movetype = H
trigger1 = stateno != [5000,5999)
trigger1 = stateno != [150,155)
persistent = 0
ignorehitpause = 1
var(19) = 120

[State -2, VarSet]
type = VarSet
trigger1 = movetype = H
trigger1 = stateno != [5000,5999)
trigger1 = stateno != [150,155)
persistent = 0
ignorehitpause = 1
var(18) = 2400

[State -2, 1]
type = Varadd
trigger1 = var(19) = 120 && var(18) > 1200 && var(18) < -1
persistent = 0
ignorehitpause = 1
var(18) = 2;-2

[State -2, 1]
type = Varadd
trigger1 = var(19) = 120 && var(18) < 2400
persistent = 0
ignorehitpause = 1
var(18) = 1;-1

[State -2, 5]
type = Varadd
triggerall = GetHitVar(hitshaketime) = 15
trigger1 = stateno = 150 || stateno = 152 || stateno = 154
ignorehitpause = 1
var(18) = Floor(-35 * Ifelse(statetype = S,1,Ifelse(statetype = C,1.25,1.5)))

[State -2, 6]
type = Varadd
triggerall = GetHitVar(hitshaketime) = 12
trigger1 = stateno = 150 || stateno = 152 || stateno = 154
ignorehitpause = 1
var(18) = Floor(-75 * Ifelse(statetype = S,1,Ifelse(statetype = C,1.25,1.5)))

[State -2, 7]
type = Varadd
triggerall = GetHitVar(hitshaketime) = 8
trigger1 = stateno = 150 || stateno = 152 || stateno = 154
ignorehitpause = 1
var(18) = Floor(-110 * Ifelse(statetype = S,1,Ifelse(statetype = C,1.25,1.5)))

[State 9010,PalFx]
type = PalFx
trigger1 = var(18) <= 600 && TimeMod = 2,0 && (stateno = 150 || stateno = 152)
time = 1
add = 152,24,16
mul = 300,180,120
color = 10

[State -2, 8]
type = ChangeState
trigger1 = alive
trigger1 = var(18) <= 0 &&  (stateno = 150 || stateno = 152)
trigger1 = stateno != 5910 && stateno != 5920
value = Ifelse(stateno = 150,5910,5920)
ignorehitpause = 1
ctrl = 0
;---------------------------------------------------------------------
; 気絶処理
[State -2, Varadd]
type = Varadd
triggerall = var(22) > 0
trigger1 = stateno != [150,155)
trigger1 = stateno != [5000,5900)
ignorehitpause = 1
var(22) = -1

[State -2,varset]
type = varset
trigger1 = stateno = [150,155)
trigger2 = stateno = [5000,5900)
var(22) = 126
ignorehitpause = 1

[State -2, 6]
type = Varadd
triggerall = stateno = 5000 || stateno = 5010 || stateno = 5020
trigger1 = GetHitVar(hitshaketime) = 16
trigger2 = GetHitVar(hitshaketime) = 12
trigger3 = GetHitVar(hitshaketime) = 8
ignorehitpause = 1
var(21) = 1

[State -2,varset]
type = varset
trigger1 = var(22) = 0
var(21) = 0

[State -1, Stand_NotHitBy]
type = NotHitBy
trigger1 = alive
trigger1 = var(21) >= 20+Var(24)
trigger1 = stateno = [5000,5299]
value = SCA
time = 1

[State -2, 8]
type = ChangeState
trigger1 = alive
trigger1 = var(21) >= 20+Var(24) && (stateno = 5000 || stateno = 5010 || stateno = 5020)
value = 5300
ignorehitpause = 1
ctrl = 0

;---------------------------------------------------------------------------
; ダメージ補正
[State -2, Attack Fix]
type = VarSet
trigger1 = 1
fvar(3) = ifelse(power >= 3000,1.15,ifelse(power >= 2000,1.1,ifelse(power >= 1000,1.05,1.0)))

[State -2, Attack Fix]
type = VarAdd
trigger1 = 1
fvar(3) = ifelse(life < 150,.1,ifelse(life < 300,.05,0))

[State -2, Attack Fix]
type = VarAdd
trigger1 = Var(26) > 5
fvar(3) = -(4.125*var(26)-5)/100

[State -2, Attack Fix]
type = AttackMulSet
trigger1 = 1
value = ifelse(fvar(3),fvar(3),.1)

[State -2, Combo]
type = VarSet
trigger1 = numenemy
trigger1 = enemy,MoveType != H
var(26) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarAdd
trigger1 = MoveHit
var(26) = 1
ignorehitpause = 1

[State -2, Defence Fix]
type = VarSet
trigger1 = 1
fvar(2) = ifelse(life < 150,.9,ifelse(life < 300,.75,1.0)) * ifelse(var(39)=1,1.25,1)

[State -2, Defence Fix]
type = DefenceMulSet
trigger1 = 1
value = fvar(2)

;---------------------------------------------------------------------------
; 炎系ヒットエフェクト
[State 3001, Super]
type = Helper
trigger1 = MoveHit && (StateNo = 1100 || StateNo = 1110)
trigger2 = ProjHitTime(1005) = 1
id = 2020
name = "Fire"
pos = 0,0
postype = P2
stateno = 2020
helpertype = normal
keyctrl = 0
ownpal = 1
persistent = 0
ignorehitpause = 1

[State -2, MoveContact]
type = VarSet
trigger1 = NumTarget = 1
trigger1 = Target,stateno = 5100 || Target,MoveType != H
trigger2 = NumTarget = 0
var(14) = 0

;---------------------------------------------------------------------------
; MoveContact系管理
[State -2, MoveContact]
type = VarAdd
trigger1 = var(12)
var(12) = 1
ignorehitpause = 1

[State -2, MoveContact]
type = VarSet
trigger1 = MoveContact
var(12) = 1
ignorehitpause = 1

[State -2, MoveContact]
type = VarSet
trigger1 = ctrl || Time = 1 || stateno != [200,5000)
var(12) = 0

[State -2, MoveGuarded]
type = VarSet
trigger1 = Time = 1
var(30) = 0

[State -2, MoveGuarded]
type = VarAdd
trigger1 = var(30)
var(30) = 1
ignorehitpause = 1

[State -2, MoveGuarded]
type = VarSet
trigger1 = MoveGuarded
var(30) = 1
ignorehitpause = 1

[State -2, MoveContact]
type = VarSet
trigger1 = NumTarget=0
trigger2 = MoveContact
trigger2 = stateno != 1301
var(28) = 0

[State -2, MoveContact]
type = MoveHitReset
trigger1 = MoveContact
trigger1 = stateno != 1100 && stateno != 1110
trigger1 = stateno != 1402 && stateno != 1301
trigger1 = stateno != [3100,3199]
trigger1 = stateno != [3300,3399]
trigger1 = stateno != 3903
ignorehitpause = 1

;---------------------------------------------------------------------------
; 必殺技ガードエフェクト
[State -2, Special Guard Effect]
type = VarSet
trigger1 = Time = 1
var(32) = ifelse((stateno = [1000,2999)),1,0)

[State -2, Special Guard Effect]
type = Explod
trigger1 = Var(30) = 1 && Var(32)
trigger2 = MoveGuarded && stateno = [3300,3399]
trigger3 = ProjGuardedTime(1005) = 1
anim = 2010
id = 2015
sprpriority = 5
postype = p2
pos = 0,var(31)-floor(P2BodyDist Y)
ignorehitpause = 1
ownpal = 1

;---------------------------------------------------------------------------
; 百八式・八酒杯・管理用
[State -2, MoveContact]
type = VarSet
trigger1 = NumHelper != 0
trigger1 = Numenemy != 0
trigger1 = enemy,MoveType = H && enemy,stateno = [3050,3054] 
trigger1 = Helper,NumTarget != 0
var(17) = 1

[State -2, MoveContact]
type = VarSet
trigger1 = NumHelper = 0
trigger1 = Numenemy != 0
var(17) = 0

;---------------------------------------------------------------------------
; 空中コンボ関連
[State -2,Assertspecial]
type = Assertspecial
trigger1 = var(28) = 1
trigger1 = StateNo = [3300,3399]
flag = Nojugglecheck

;---------------------------------------------------------------------------
; ライフ管理
[State -2,Assertspecial]
type = VarSet
trigger1 = StateNo != 9999
var(29) = Life
ignorehitpause = 1

;---------------------------------------------------------------------------
; 死亡時声管理
[State -2,PlaySnd]
type = PlaySnd
triggerall = !Alive
triggerall = Time = 1
trigger1 = stateno = 5000 || stateno = 5010 || stateno = 5020 || stateno = 5070
value = IfElse(Var(39)=1,5000,5010),30
persistent = 0

[State -2, Special]
type = PlaySnd
trigger1 = Time = 1
trigger1 = anim = 7697
value = 5000,10
channel = 0

[State -2, Special]
type = PlaySnd
trigger1 = Time = 1
trigger1 = anim = 7696
value = 7997,0
channel = 0


;=========================================================
[State -3: Reset Stuff]
type = VarSet
trigger1 = enemyNear, MoveType != H
var(17) = (var(16) := (var(20) := (var(47) := 0)))

;---------
;V45 Reset
;---------
[State -2, Clear 45]
type = varset
triggerall = var(45) = 1
trigger1 = numhelper(3300) = 0
trigger1 = p2movetype != H
trigger1 = numhelper(3900) = 0
var(45) = 0

;------------------------------------------------------------------------------------------
[State -2]
Type = VarAdd
Trigger1 = FVar(18) > 0
FV = 18
Value = -16
IgnoreHitPause = 1

[State -2]
Type = VarSet
TriggerAll = Alive = 1
TriggerAll = RoundState = 2
trigger1 = ScreenPos Y <= 0
trigger2 = ScreenPos Y >= 240 - const(size.head.pos.y)
FV = 18
Value = 256
IgnoreHitPause = 1


[State -2]
Type = Explod
Trigger1 = FVar(18) > 0
Anim = 27000
PosType = back
Pos = floor(Pos X)*facing + 154,0 + (ScreenPos Y >= 231)*226
Scale = 0.5,0.5
Ownpal = 1
BindTime = -1
IgnoreHitPause = 1
SprPriority = 8
ID = 27000

[State -2]
Type = Explod
Trigger1 = FVar(18) > 0
Anim = 27010
PosType = back
Pos = floor(Pos X)*facing + 154,0 + (ScreenPos Y >= 231)*226
Scale = 0.5,0.5
Ownpal = 1
BindTime = -1
IgnoreHitPause = 1
facing = 2
SprPriority = 9
ID = 27010

[State -2]
Type = ModifyExplod
Trigger1 = NumExplod(27000) > 0
PosType = Back
Pos = floor(Pos X)*facing + 154,0 + (ScreenPos Y >= 231)*226
Trans = AddAlpha
Alpha = Ceil(FVar(18)),256-Ceil(FVar(18))
BindTime = -1
IgnoreHitPause = 1
ID = 27000

[State -2]
Type = ModifyExplod
Trigger1 = NumExplod(27010) > 0
PosType = Back
Pos = floor(Pos X)*facing + 154,0 + (ScreenPos Y >= 231)*226
Trans = AddAlpha
Alpha = Ceil(FVar(18)),256
BindTime = -1
IgnoreHitPause = 1
ID = 27010

;---------------------------------------------------------------------------
[Statedef -3]
;---------------------------------------------------------------------------
;---------------------------------------------------------------------
[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 5 && Var(39)
value = 10005

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 6 && Var(39)
value = 10006

; Sound Fix
[State -3,PlaySnd1]
type = PlaySnd
triggerall = Time = 1 && Alive && Random < 333
triggerall = StateNo = 5000 || StateNo = 5010
trigger1 = Anim = 5000 || Anim = 5010 || Anim = 5020
trigger2 = Anim = 15000 || Anim = 15010 || Anim = 15020
value = 5000,ifelse(Var(39)=1,ifelse(Random <= 500,100,110),ifelse(Random <= 500,0,10))

[State -3,PlaySnd2]
type = PlaySnd
triggerall = Time = 1 && Alive && Random < 333
triggerall = StateNo = 5000 || StateNo = 5010
trigger1 = Anim = 5001 || Anim = 5011 || Anim = 5021
trigger2 = Anim = 15001 || Anim = 15011 || Anim = 15021
value = 5000,ifelse(Var(39)=1,ifelse(Random <= 500,100,110),ifelse(Random <= 500,0,10))

[State -3,PlaySnd3]
type = PlaySnd
triggerall = GetHitVar(fall) = 0
triggerall = Time = 1 && Alive && Random < 333
triggerall = StateNo = 5000 || StateNo = 5010
trigger1 = Anim = 5002 || Anim = 5012 || Anim = 5022
trigger2 = Anim = 15002 || Anim = 15012 || Anim = 15022
value = 5000,ifelse(Var(39)=1,ifelse(Random <= 500,110,120),ifelse(Random <= 500,10,20))

[State -3,PlaySnd3]
type = PlaySnd
triggerall = GetHitVar(fall) = 1
triggerall = Time = 1 && Alive && Random < 333
triggerall = StateNo = 5000 || StateNo = 5010
trigger1 = Anim = 5002 || Anim = 5012 || Anim = 5022
trigger2 = Anim = 15002 || Anim = 15012 || Anim = 15022
value = 5000,ifelse(Var(39)=1,120,20)
;-------------- Generated by Fighter Factory -------------

;--------------------- Variable List ----------------------

; Var(1) - StateDef 1006, 3006, 3007, 4110, 2155, 2150, 2005
; Var(2) - StateDef 3006, 3007, 3008
; Var(3) - StateDef 3008, 3060
; Var(4) - StateDef 3060
; Var(5) - StateDef 180, 190
; Var(9) - StateDef 3500, 3502, 3503
; Var(10) - StateDef 190, 5320
; Var(11) - StateDef 50, -2
; Var(12) - StateDef 1100, 1110, 3300, 3310, 3320, -2
; Var(13) - StateDef 1100, 215
; Var(14) - StateDef 2020, -2
; Var(15) - StateDef 1301, 1302
; Var(16) - StateDef 3000, 3002, 3010, 3020
; Var(17) - StateDef 3002, 3010, -2
; Var(18) - StateDef 5910, 5920, -2
; Var(19) - StateDef -2
; Var(20) - StateDef 3300, 3310, 3320
; Var(21) - StateDef 5320, -2
; Var(22) - StateDef -2
; Var(23) - StateDef 5320
; Var(24) - StateDef 5320
; Var(25) - StateDef 40, 5110, -2
; Var(26) - StateDef 3101, 3105, 3115, 3125, -2
; Var(27) - StateDef 3000, 3002, 3010, 3020, 3008
; Var(28) - StateDef 1301, -2
; Var(29) - StateDef -2
; Var(30) - StateDef 1100, 1110, 3300, 3310, 3320, -2
; Var(31) - StateDef 1000, 1010, 1100, 1110, 1300, 1301, 1302, 1402, 1403, 3100, 3110, 3120, 3300, 3310, 3320
; Var(32) - StateDef -2
; Var(33) - StateDef 3300, 3320
; Var(39) - StateDef 40, 9999

;--------------------- Float Variable List ----------------------

; fVar(1) - StateDef 4110
; fVar(2) - StateDef -2
; fVar(3) - StateDef -2
